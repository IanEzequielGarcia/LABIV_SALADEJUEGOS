(self.webpackChunkTPSALAJUEGOS=self.webpackChunkTPSALAJUEGOS||[]).push([[179],{8939:(Nt,Ve,G)=>{"use strict";G.d(Ve,{hO:()=>at,xv:()=>Me,Dh:()=>Se,GT:()=>Te,cc:()=>Ae,on:()=>se,pX:()=>pe});var b=G(4537),h=G(7841),Y=G(6586);Nt=G.hmd(Nt);const ve=["ngOnDestroy"],pe=(Qe,It,wt,Je={})=>new Proxy(Qe,{get:(We,Xe)=>wt.runOutsideAngular(()=>{var pt;if(Qe[Xe])return(null===(pt=null==Je?void 0:Je.spy)||void 0===pt?void 0:pt.get)&&Je.spy.get(Xe,Qe[Xe]),Qe[Xe];if(ve.indexOf(Xe)>-1)return()=>{};const ue=It.toPromise().then(De=>{const ye=De&&De[Xe];return"function"==typeof ye?ye.bind(De):ye&&ye.then?ye.then(Le=>wt.run(()=>Le)):wt.run(()=>ye)});return new Proxy(()=>{},{get:(De,ye)=>ue[ye],apply:(De,ye,Le)=>ue.then(Ne=>{var Ee;const lt=Ne&&Ne(...Le);return(null===(Ee=null==Je?void 0:Je.spy)||void 0===Ee?void 0:Ee.apply)&&Je.spy.apply(Xe,Le,lt),lt})})})}),Te=(Qe,It)=>{It.forEach(wt=>{Object.getOwnPropertyNames(wt.prototype||wt).forEach(Je=>{Object.defineProperty(Qe.prototype,Je,Object.getOwnPropertyDescriptor(wt.prototype||wt,Je))})})};class ke{constructor(It){return It}}const Se=new b.OlP("angularfire2.app.options"),Me=new b.OlP("angularfire2.app.name");function se(Qe,It,wt){const We="object"==typeof wt&&wt||{};We.name=We.name||"string"==typeof wt&&wt||"[DEFAULT]";const pt=h.Z.apps.filter(ue=>ue&&ue.name===We.name)[0]||It.runOutsideAngular(()=>h.Z.initializeApp(Qe,We));try{JSON.stringify(Qe)!==JSON.stringify(pt.options)&&ae("error",`${pt.name} Firebase App already initialized with different options${Nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ke(pt)}const ae=(Qe,...It)=>{(0,b.X6Q)()&&typeof console<"u"&&console[Qe](...It)},we={provide:ke,useFactory:se,deps:[Se,b.R0b,[new b.FiY,Me]]};let at=(()=>{class Qe{constructor(wt){h.Z.registerVersion("angularfire",Y.q4.full,"core"),h.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),h.Z.registerVersion("angular",b.q4F.full,wt.toString())}static initializeApp(wt,Je){return{ngModule:Qe,providers:[{provide:Se,useValue:wt},{provide:Me,useValue:Je}]}}}return Qe.\u0275fac=function(wt){return new(wt||Qe)(b.LFG(b.Lbi))},Qe.\u0275mod=b.oAB({type:Qe}),Qe.\u0275inj=b.cJS({providers:[we]}),Qe})();function Ae(Qe,It,wt,Je,We){const[,Xe,pt]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===Qe)||[];if(Xe)return function Ze(Qe,It){try{return Qe.toString()===It.toString()}catch{return Qe===It}}(We,pt)||(Be("error",`${It} was already initialized on the ${wt} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:We,was:pt})),Xe;{const ue=Je();return globalThis.\u0275AngularfireInstanceCache.push([Qe,ue,We]),ue}}const ut=!!Nt.hot,Be=(Qe,...It)=>{(0,b.X6Q)()&&typeof console<"u"&&console[Qe](...It)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6586:(Nt,Ve,G)=>{"use strict";G.d(Ve,{q4:()=>tc,iC:()=>Hc,HU:()=>Mi,vb:()=>oh,JM:()=>cl});var b=G(4537),h=G(2329),Y=G(8239),ve=G(8026),pe=G(3854),Te=G(3910),ke=G(5422);const Se="@firebase/installations",ae="w:0.5.7",we="FIS_v2",Qe=new pe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function It(x){return x instanceof pe.ZR&&x.code.includes("request-failed")}function wt({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function Je(x){return{token:x.token,requestStatus:2,expiresIn:Le(x.expiresIn),creationTime:Date.now()}}function We(x,F){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,Y.Z)(function*(x,F){const ie=(yield F.json()).error;return Qe.create("request-failed",{requestName:x,serverCode:ie.code,serverMessage:ie.message,serverStatus:ie.status})})).apply(this,arguments)}function pt({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ue(x,{refreshToken:F}){const Z=pt(x);return Z.append("Authorization",function Ne(x){return`${we} ${x}`}(F)),Z}function De(x){return ye.apply(this,arguments)}function ye(){return(ye=(0,Y.Z)(function*(x){const F=yield x();return F.status>=500&&F.status<600?x():F})).apply(this,arguments)}function Le(x){return Number(x.replace("s","000"))}function Ee(x,F){return lt.apply(this,arguments)}function lt(){return(lt=(0,Y.Z)(function*({appConfig:x,heartbeatServiceProvider:F},{fid:Z}){const ie=wt(x),Oe=pt(x),je=F.getImmediate({optional:!0});if(je){const Nn=yield je.getHeartbeatsHeader();Nn&&Oe.append("x-firebase-client",Nn)}const Ut={method:"POST",headers:Oe,body:JSON.stringify({fid:Z,authVersion:we,appId:x.appId,sdkVersion:ae})},Yt=yield De(()=>fetch(ie,Ut));if(Yt.ok){const Nn=yield Yt.json();return{fid:Nn.fid||Z,registrationStatus:2,refreshToken:Nn.refreshToken,authToken:Je(Nn.authToken)}}throw yield We("Create Installation",Yt)})).apply(this,arguments)}function He(x){return new Promise(F=>{setTimeout(F,x)})}const In=/^[cdef][\w-]{21}$/;function Dt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const Z=function Tt(x){return function Jt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return In.test(Z)?Z:""}catch{return""}}function Tn(x){return`${x.appName}!${x.appId}`}const xn=new Map;function Ir(x,F){const Z=Tn(x);Fn(Z,F),function _n(x,F){const Z=function Fr(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=x=>{Fn(x.data.key,x.data.fid)}),vr}();Z&&Z.postMessage({key:x,fid:F}),function Xr(){0===xn.size&&vr&&(vr.close(),vr=null)}()}(Z,F)}function Fn(x,F){const Z=xn.get(x);if(Z)for(const ie of Z)ie(F)}let vr=null;const Mr="firebase-installations-store";let wr=null;function nr(){return wr||(wr=(0,pe.X3)("firebase-installations-database",1,(x,F)=>{0===F&&x.createObjectStore(Mr)})),wr}function Bt(x,F){return ci.apply(this,arguments)}function ci(){return(ci=(0,Y.Z)(function*(x,F){const Z=Tn(x),Oe=(yield nr()).transaction(Mr,"readwrite"),je=Oe.objectStore(Mr),mt=yield je.get(Z);return yield je.put(F,Z),yield Oe.complete,(!mt||mt.fid!==F.fid)&&Ir(x,F.fid),F})).apply(this,arguments)}function fn(x){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,Y.Z)(function*(x){const F=Tn(x),ie=(yield nr()).transaction(Mr,"readwrite");yield ie.objectStore(Mr).delete(F),yield ie.complete})).apply(this,arguments)}function ei(x,F){return yi.apply(this,arguments)}function yi(){return(yi=(0,Y.Z)(function*(x,F){const Z=Tn(x),Oe=(yield nr()).transaction(Mr,"readwrite"),je=Oe.objectStore(Mr),mt=yield je.get(Z),Ut=F(mt);return void 0===Ut?yield je.delete(Z):yield je.put(Ut,Z),yield Oe.complete,Ut&&(!mt||mt.fid!==Ut.fid)&&Ir(x,Ut.fid),Ut})).apply(this,arguments)}function Re(x){return ce.apply(this,arguments)}function ce(){return(ce=(0,Y.Z)(function*(x){let F;const Z=yield ei(x.appConfig,ie=>{const Oe=me(ie),je=ct(x,Oe);return F=je.registrationPromise,je.installationEntry});return""===Z.fid?{installationEntry:yield F}:{installationEntry:Z,registrationPromise:F}})).apply(this,arguments)}function me(x){return an(x||{fid:Dt(),registrationStatus:0})}function ct(x,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Qe.create("app-offline"))};const Z={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},ie=function Ue(x,F){return Ye.apply(this,arguments)}(x,Z);return{installationEntry:Z,registrationPromise:ie}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Ct(x)}:{installationEntry:F}}function Ye(){return(Ye=(0,Y.Z)(function*(x,F){try{const Z=yield Ee(x,F);return Bt(x.appConfig,Z)}catch(Z){throw It(Z)&&409===Z.customData.serverCode?yield fn(x.appConfig):yield Bt(x.appConfig,{fid:F.fid,registrationStatus:0}),Z}})).apply(this,arguments)}function Ct(x){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,Y.Z)(function*(x){let F=yield $t(x.appConfig);for(;1===F.registrationStatus;)yield He(100),F=yield $t(x.appConfig);if(0===F.registrationStatus){const{installationEntry:Z,registrationPromise:ie}=yield Re(x);return ie||Z}return F})).apply(this,arguments)}function $t(x){return ei(x,F=>{if(!F)throw Qe.create("installation-not-found");return an(F)})}function an(x){return function Yn(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Vn(x,F){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Y.Z)(function*({appConfig:x,heartbeatServiceProvider:F},Z){const ie=St(x,Z),Oe=ue(x,Z),je=F.getImmediate({optional:!0});if(je){const Nn=yield je.getHeartbeatsHeader();Nn&&Oe.append("x-firebase-client",Nn)}const Ut={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:ae,appId:x.appId}})},Yt=yield De(()=>fetch(ie,Ut));if(Yt.ok)return Je(yield Yt.json());throw yield We("Generate Auth Token",Yt)})).apply(this,arguments)}function St(x,{fid:F}){return`${wt(x)}/${F}/authTokens:generate`}function Mn(x){return un.apply(this,arguments)}function un(){return(un=(0,Y.Z)(function*(x,F=!1){let Z;const ie=yield ei(x.appConfig,je=>{if(!nn(je))throw Qe.create("not-registered");const mt=je.authToken;if(!F&&le(mt))return je;if(1===mt.requestStatus)return Z=ot(x,F),je;{if(!navigator.onLine)throw Qe.create("app-offline");const Ut=_e(je);return Z=Gt(x,Ut),Ut}});return Z?yield Z:ie.authToken})).apply(this,arguments)}function ot(x,F){return et.apply(this,arguments)}function et(){return(et=(0,Y.Z)(function*(x,F){let Z=yield kt(x.appConfig);for(;1===Z.authToken.requestStatus;)yield He(100),Z=yield kt(x.appConfig);const ie=Z.authToken;return 0===ie.requestStatus?Mn(x,F):ie})).apply(this,arguments)}function kt(x){return ei(x,F=>{if(!nn(F))throw Qe.create("not-registered");return function qe(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Gt(x,F){return yn.apply(this,arguments)}function yn(){return(yn=(0,Y.Z)(function*(x,F){try{const Z=yield Vn(x,F),ie=Object.assign(Object.assign({},F),{authToken:Z});return yield Bt(x.appConfig,ie),Z}catch(Z){if(!It(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const ie=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Bt(x.appConfig,ie)}else yield fn(x.appConfig);throw Z}})).apply(this,arguments)}function nn(x){return void 0!==x&&2===x.registrationStatus}function le(x){return 2===x.requestStatus&&!function te(x){const F=Date.now();return F<x.creationTime||x.creationTime+x.expiresIn<F+36e5}(x)}function _e(x){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:F})}function bt(){return(bt=(0,Y.Z)(function*(x){const F=x,{installationEntry:Z,registrationPromise:ie}=yield Re(F);return ie?ie.catch(console.error):Mn(F).catch(console.error),Z.fid})).apply(this,arguments)}function xe(){return(xe=(0,Y.Z)(function*(x,F=!1){const Z=x;return yield Tr(Z),(yield Mn(Z,F)).token})).apply(this,arguments)}function Tr(x){return en.apply(this,arguments)}function en(){return(en=(0,Y.Z)(function*(x){const{registrationPromise:F}=yield Re(x);F&&(yield F)})).apply(this,arguments)}function on(x){return Qe.create("missing-app-config-values",{valueName:x})}const Cr="installations",dn=x=>{const F=x.getProvider("app").getImmediate(),Z=function Br(x){if(!x||!x.options)throw on("App Configuration");if(!x.name)throw on("App Name");const F=["projectId","apiKey","appId"];for(const Z of F)if(!x.options[Z])throw on(Z);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(F);return{app:F,appConfig:Z,heartbeatServiceProvider:(0,ve._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},zr=x=>{const F=x.getProvider("app").getImmediate(),Z=(0,ve._getProvider)(F,Cr).getImmediate();return{getId:()=>function Ie(x){return bt.apply(this,arguments)}(Z),getToken:Oe=>function Wt(x){return xe.apply(this,arguments)}(Z,Oe)}};(function ui(){(0,ve._registerComponent)(new Te.wA(Cr,dn,"PUBLIC")),(0,ve._registerComponent)(new Te.wA("installations-internal",zr,"PRIVATE"))})(),(0,ve.registerVersion)(Se,"0.5.7"),(0,ve.registerVersion)(Se,"0.5.7","esm2017");const tn="@firebase/remote-config",Rn=new pe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vi{constructor(F,Z,ie,Oe){this.client=F,this.storage=Z,this.storageCache=ie,this.logger=Oe}isCachedDataFresh(F,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ie=Date.now()-Z,Oe=ie<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ie}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Oe}.`),Oe}fetch(F){var Z=this;return(0,Y.Z)(function*(){const[ie,Oe]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(Oe&&Z.isCachedDataFresh(F.cacheMaxAgeMillis,ie))return Oe;F.eTag=Oe&&Oe.eTag;const je=yield Z.client.fetch(F),mt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===je.status&&mt.push(Z.storage.setLastSuccessfulFetchResponse(je)),yield Promise.all(mt),je})()}}function Ki(x=navigator){return x.languages&&x.languages[0]||x.language}class Ns{constructor(F,Z,ie,Oe,je,mt){this.firebaseInstallations=F,this.sdkVersion=Z,this.namespace=ie,this.projectId=Oe,this.apiKey=je,this.appId=mt}fetch(F){var Z=this;return(0,Y.Z)(function*(){const[ie,Oe]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Yt={sdk_version:Z.sdkVersion,app_instance_id:ie,app_instance_id_token:Oe,app_id:Z.appId,language_code:Ki()},Nn={method:"POST",headers:Ut,body:JSON.stringify(Yt)},Wn=fetch(mt,Nn),On=new Promise((Ds,ja)=>{F.signal.addEventListener(()=>{const dl=new Error("The operation was aborted.");dl.name="AbortError",ja(dl)})});let Gi;try{yield Promise.race([Wn,On]),Gi=yield Wn}catch(Ds){let ja="fetch-client-network";throw"AbortError"===Ds.name&&(ja="fetch-timeout"),Rn.create(ja,{originalErrorMessage:Ds.message})}let Ci=Gi.status;const Ea=Gi.headers.get("ETag")||void 0;let Gc,ca;if(200===Gi.status){let Ds;try{Ds=yield Gi.json()}catch(ja){throw Rn.create("fetch-client-parse",{originalErrorMessage:ja.message})}Gc=Ds.entries,ca=Ds.state}if("INSTANCE_STATE_UNSPECIFIED"===ca?Ci=500:"NO_CHANGE"===ca?Ci=304:("NO_TEMPLATE"===ca||"EMPTY_CONFIG"===ca)&&(Gc={}),304!==Ci&&200!==Ci)throw Rn.create("fetch-status",{httpStatus:Ci});return{status:Ci,eTag:Ea,config:Gc}})()}}class Ui{constructor(F,Z){this.client=F,this.storage=Z}fetch(F){var Z=this;return(0,Y.Z)(function*(){const ie=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(F,ie)})()}attemptFetch(F,{throttleEndTimeMillis:Z,backoffCount:ie}){var Oe=this;return(0,Y.Z)(function*(){yield function Er(x,F){return new Promise((Z,ie)=>{const Oe=Math.max(F-Date.now(),0),je=setTimeout(Z,Oe);x.addEventListener(()=>{clearTimeout(je),ie(Rn.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,Z);try{const je=yield Oe.client.fetch(F);return yield Oe.storage.deleteThrottleMetadata(),je}catch(je){if(!function _r(x){if(!(x instanceof pe.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}(je))throw je;const mt={throttleEndTimeMillis:Date.now()+(0,pe.$s)(ie),backoffCount:ie+1};return yield Oe.storage.setThrottleMetadata(mt),Oe.attemptFetch(F,mt)}})()}}class Po{constructor(F,Z,ie,Oe,je){this.app=F,this._client=Z,this._storageCache=ie,this._storage=Oe,this._logger=je,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(x,F){const Z=x.target.error||void 0;return Rn.create(F,{originalErrorMessage:Z&&Z.message})}const Yi="app_namespace_store";class ga{constructor(F,Z,ie,Oe=function Xo(){return new Promise((x,F)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=ie=>{F(Qo(ie,"storage-open"))},Z.onsuccess=ie=>{x(ie.target.result)},Z.onupgradeneeded=ie=>{0===ie.oldVersion&&ie.target.result.createObjectStore(Yi,{keyPath:"compositeKey"})}}catch(Z){F(Rn.create("storage-open",{originalErrorMessage:Z}))}})}()){this.appId=F,this.appName=Z,this.namespace=ie,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var Z=this;return(0,Y.Z)(function*(){const ie=yield Z.openDbPromise;return new Promise((Oe,je)=>{const Ut=ie.transaction([Yi],"readonly").objectStore(Yi),Yt=Z.createCompositeKey(F);try{const Nn=Ut.get(Yt);Nn.onerror=Wn=>{je(Qo(Wn,"storage-get"))},Nn.onsuccess=Wn=>{const On=Wn.target.result;Oe(On?On.value:void 0)}}catch(Nn){je(Rn.create("storage-get",{originalErrorMessage:Nn&&Nn.message}))}})})()}set(F,Z){var ie=this;return(0,Y.Z)(function*(){const Oe=yield ie.openDbPromise;return new Promise((je,mt)=>{const Yt=Oe.transaction([Yi],"readwrite").objectStore(Yi),Nn=ie.createCompositeKey(F);try{const Wn=Yt.put({compositeKey:Nn,value:Z});Wn.onerror=On=>{mt(Qo(On,"storage-set"))},Wn.onsuccess=()=>{je()}}catch(Wn){mt(Rn.create("storage-set",{originalErrorMessage:Wn&&Wn.message}))}})})()}delete(F){var Z=this;return(0,Y.Z)(function*(){const ie=yield Z.openDbPromise;return new Promise((Oe,je)=>{const Ut=ie.transaction([Yi],"readwrite").objectStore(Yi),Yt=Z.createCompositeKey(F);try{const Nn=Ut.delete(Yt);Nn.onerror=Wn=>{je(Qo(Wn,"storage-delete"))},Nn.onsuccess=()=>{Oe()}}catch(Nn){je(Rn.create("storage-delete",{originalErrorMessage:Nn&&Nn.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class wo{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,Y.Z)(function*(){const Z=F.storage.getLastFetchStatus(),ie=F.storage.getLastSuccessfulFetchTimestampMillis(),Oe=F.storage.getActiveConfig(),je=yield Z;je&&(F.lastFetchStatus=je);const mt=yield ie;mt&&(F.lastSuccessfulFetchTimestampMillis=mt);const Ut=yield Oe;Ut&&(F.activeConfig=Ut)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function ls(){return ro.apply(this,arguments)}function ro(){return(ro=(0,Y.Z)(function*(){if(!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}!function Dr(){(0,ve._registerComponent)(new Te.wA("remote-config",function x(F,{instanceIdentifier:Z}){const ie=F.getProvider("app").getImmediate(),Oe=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!(0,pe.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:je,apiKey:mt,appId:Ut}=ie.options;if(!je)throw Rn.create("registration-project-id");if(!mt)throw Rn.create("registration-api-key");if(!Ut)throw Rn.create("registration-app-id");const Yt=new ga(Ut,ie.name,Z=Z||"firebase"),Nn=new wo(Yt),Wn=new ke.Yd(tn);Wn.logLevel=ke.in.ERROR;const On=new Ns(Oe,ve.SDK_VERSION,Z,je,mt,Ut),Gi=new Ui(On,Yt),Ci=new vi(Gi,Yt,Nn,Wn),Ea=new Po(ie,Ci,Nn,Yt,Wn);return function vs(x){const F=(0,pe.m9)(x);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Ea),Ea},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(tn,"0.3.6"),(0,ve.registerVersion)(tn,"0.3.6","esm2017")}();const ni="/firebase-messaging-sw.js",Qi="/firebase-cloud-messaging-push-scope",pr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ms="google.c.a.c_id",Os="google.c.a.c_l",ea="google.c.a.ts",Ws="google.c.a.e";var ji=(()=>{return(x=ji||(ji={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",ji;var x})();function Sr(x){const F=new Uint8Array(x);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Si(x){const Z=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ie=atob(Z),Oe=new Uint8Array(ie.length);for(let je=0;je<ie.length;++je)Oe[je]=ie.charCodeAt(je);return Oe}const io="fcm_token_details_db",ii="fcm_token_object_Store";function Lo(x){return zs.apply(this,arguments)}function zs(){return zs=(0,Y.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(je=>je.name).includes(io))return null;let F=null;return(yield(0,pe.X3)(io,5,function(){var ie=(0,Y.Z)(function*(Oe,je,mt,Ut){var Yt;if(je<2||!Oe.objectStoreNames.contains(ii))return;const Nn=Ut.objectStore(ii),Wn=yield Nn.index("fcmSenderId").get(x);if(yield Nn.clear(),Wn)if(2===je){const On=Wn;if(!On.auth||!On.p256dh||!On.endpoint)return;F={token:On.fcmToken,createTime:null!==(Yt=On.createTime)&&void 0!==Yt?Yt:Date.now(),subscriptionOptions:{auth:On.auth,p256dh:On.p256dh,endpoint:On.endpoint,swScope:On.swScope,vapidKey:"string"==typeof On.vapidKey?On.vapidKey:Sr(On.vapidKey)}}}else if(3===je){const On=Wn;F={token:On.fcmToken,createTime:On.createTime,subscriptionOptions:{auth:Sr(On.auth),p256dh:Sr(On.p256dh),endpoint:On.endpoint,swScope:On.swScope,vapidKey:Sr(On.vapidKey)}}}else if(4===je){const On=Wn;F={token:On.fcmToken,createTime:On.createTime,subscriptionOptions:{auth:Sr(On.auth),p256dh:Sr(On.p256dh),endpoint:On.endpoint,swScope:On.swScope,vapidKey:Sr(On.vapidKey)}}}});return function(Oe,je,mt,Ut){return ie.apply(this,arguments)}}())).close(),yield(0,pe.Lj)(io),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),ks(F)?F:null}),zs.apply(this,arguments)}function ks(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:F}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const Gr="firebase-messaging-store";let fi=null;function Cs(){return fi||(fi=(0,pe.X3)("firebase-messaging-database",1,(x,F)=>{0===F&&x.createObjectStore(Gr)})),fi}function Xn(x){return P.apply(this,arguments)}function P(){return(P=(0,Y.Z)(function*(x){const F=$e(x),ie=yield(yield Cs()).transaction(Gr).objectStore(Gr).get(F);if(ie)return ie;{const Oe=yield Lo(x.appConfig.senderId);if(Oe)return yield q(x,Oe),Oe}})).apply(this,arguments)}function q(x,F){return R.apply(this,arguments)}function R(){return(R=(0,Y.Z)(function*(x,F){const Z=$e(x),Oe=(yield Cs()).transaction(Gr,"readwrite");return yield Oe.objectStore(Gr).put(F,Z),yield Oe.complete,F})).apply(this,arguments)}function J(x){return ge.apply(this,arguments)}function ge(){return(ge=(0,Y.Z)(function*(x){const F=$e(x),ie=(yield Cs()).transaction(Gr,"readwrite");yield ie.objectStore(Gr).delete(F),yield ie.complete})).apply(this,arguments)}function $e({appConfig:x}){return x.appId}const Et=new pe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ln(x,F){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,Y.Z)(function*(x,F){const Z=yield Xi(x),ie=zt(F),Oe={method:"POST",headers:Z,body:JSON.stringify(ie)};let je;try{je=yield(yield fetch(ur(x.appConfig),Oe)).json()}catch(mt){throw Et.create("token-subscribe-failed",{errorInfo:mt})}if(je.error)throw Et.create("token-subscribe-failed",{errorInfo:je.error.message});if(!je.token)throw Et.create("token-subscribe-no-token");return je.token})).apply(this,arguments)}function vn(x,F){return An.apply(this,arguments)}function An(){return(An=(0,Y.Z)(function*(x,F){const Z=yield Xi(x),ie=zt(F.subscriptionOptions),Oe={method:"PATCH",headers:Z,body:JSON.stringify(ie)};let je;try{je=yield(yield fetch(`${ur(x.appConfig)}/${F.token}`,Oe)).json()}catch(mt){throw Et.create("token-update-failed",{errorInfo:mt})}if(je.error)throw Et.create("token-update-failed",{errorInfo:je.error.message});if(!je.token)throw Et.create("token-update-no-token");return je.token})).apply(this,arguments)}function dr(x,F){return cr.apply(this,arguments)}function cr(){return(cr=(0,Y.Z)(function*(x,F){const ie={method:"DELETE",headers:yield Xi(x)};try{const je=yield(yield fetch(`${ur(x.appConfig)}/${F}`,ie)).json();if(je.error)throw Et.create("token-unsubscribe-failed",{errorInfo:je.error.message})}catch(Oe){throw Et.create("token-unsubscribe-failed",{errorInfo:Oe})}})).apply(this,arguments)}function ur({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Xi(x){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,Y.Z)(function*({appConfig:x,installations:F}){const Z=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function zt({p256dh:x,auth:F,endpoint:Z,vapidKey:ie}){const Oe={web:{endpoint:Z,auth:F,p256dh:x}};return ie!==pr&&(Oe.web.applicationPubKey=ie),Oe}const cs=6048e5;function Rs(x){return Co.apply(this,arguments)}function Co(){return(Co=(0,Y.Z)(function*(x){const F=yield Vt(x.swRegistration,x.vapidKey),Z={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:F.endpoint,auth:Sr(F.getKey("auth")),p256dh:Sr(F.getKey("p256dh"))},ie=yield Xn(x.firebaseDependencies);if(ie){if(si(ie.subscriptionOptions,Z))return Date.now()>=ie.createTime+cs?O(x,{token:ie.token,createTime:Date.now(),subscriptionOptions:Z}):ie.token;try{yield dr(x.firebaseDependencies,ie.token)}catch(Oe){console.warn(Oe)}return H(x.firebaseDependencies,Z)}return H(x.firebaseDependencies,Z)})).apply(this,arguments)}function Ps(x){return B.apply(this,arguments)}function B(){return(B=(0,Y.Z)(function*(x){const F=yield Xn(x.firebaseDependencies);F&&(yield dr(x.firebaseDependencies,F.token),yield J(x.firebaseDependencies));const Z=yield x.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()})).apply(this,arguments)}function O(x,F){return M.apply(this,arguments)}function M(){return(M=(0,Y.Z)(function*(x,F){try{const Z=yield vn(x.firebaseDependencies,F),ie=Object.assign(Object.assign({},F),{token:Z,createTime:Date.now()});return yield q(x.firebaseDependencies,ie),Z}catch(Z){throw yield Ps(x),Z}})).apply(this,arguments)}function H(x,F){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,Y.Z)(function*(x,F){const ie={token:yield Ln(x,F),createTime:Date.now(),subscriptionOptions:F};return yield q(x,ie),ie.token})).apply(this,arguments)}function Vt(x,F){return pn.apply(this,arguments)}function pn(){return(pn=(0,Y.Z)(function*(x,F){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Si(F)})})).apply(this,arguments)}function si(x,F){return F.vapidKey===x.vapidKey&&F.endpoint===x.endpoint&&F.auth===x.auth&&F.p256dh===x.p256dh}function Ai(x){const F={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function oi(x,F){if(!F.notification)return;x.notification={};const Z=F.notification.title;Z&&(x.notification.title=Z);const ie=F.notification.body;ie&&(x.notification.body=ie);const Oe=F.notification.image;Oe&&(x.notification.image=Oe)}(F,x),function Eo(x,F){!F.data||(x.data=F.data)}(F,x),function Bo(x,F){if(!F.fcmOptions)return;x.fcmOptions={};const Z=F.fcmOptions.link;Z&&(x.fcmOptions.link=Z);const ie=F.fcmOptions.analytics_label;ie&&(x.fcmOptions.analyticsLabel=ie)}(F,x),F}function ma(x){return"object"==typeof x&&!!x&&Ms in x}function Xa(x,F){const Z=[];for(let ie=0;ie<x.length;ie++)Z.push(x.charAt(ie)),ie<F.length&&Z.push(F.charAt(ie));return Z.join("")}function so(x){return Et.create("missing-app-config-values",{valueName:x})}Xa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ni{constructor(F,Z,ie){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function ta(x){if(!x||!x.options)throw so("App Configuration Object");if(!x.name)throw so("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=x;for(const ie of F)if(!Z[ie])throw so(ie);return{appName:x.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Oe,installations:Z,analyticsProvider:ie}}_delete(){return Promise.resolve()}}function Fs(x){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,Y.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(ni,{scope:Qi}),x.swRegistration.update().catch(()=>{})}catch(F){throw Et.create("failed-service-worker-registration",{browserErrorMessage:F.message})}})).apply(this,arguments)}function Do(x,F){return us.apply(this,arguments)}function us(){return(us=(0,Y.Z)(function*(x,F){if(!F&&!x.swRegistration&&(yield Fs(x)),F||!x.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw Et.create("invalid-sw-registration");x.swRegistration=F}})).apply(this,arguments)}function _a(x,F){return La.apply(this,arguments)}function La(){return(La=(0,Y.Z)(function*(x,F){F?x.vapidKey=F:x.vapidKey||(x.vapidKey=pr)})).apply(this,arguments)}function va(){return(va=(0,Y.Z)(function*(x,F){if(!navigator)throw Et.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Et.create("permission-blocked");return yield _a(x,null==F?void 0:F.vapidKey),yield Do(x,null==F?void 0:F.serviceWorkerRegistration),Rs(x)})).apply(this,arguments)}function Vo(x,F,Z){return na.apply(this,arguments)}function na(){return(na=(0,Y.Z)(function*(x,F,Z){const ie=Io(F);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ie,{message_id:Z[Ms],message_name:Z[Os],message_time:Z[ea],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Io(x){switch(x){case ji.NOTIFICATION_CLICKED:return"notification_open";case ji.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function el(){return(el=(0,Y.Z)(function*(x,F){const Z=F.data;if(!Z.isFirebaseMessaging)return;x.onMessageHandler&&Z.messageType===ji.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Ai(Z)):x.onMessageHandler.next(Ai(Z)));const ie=Z.data;ma(ie)&&"1"===ie[Ws]&&(yield Vo(x,Z.messageType,ie))})).apply(this,arguments)}const oo="@firebase/messaging",Ba=x=>{const F=new Ni(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function ra(x,F){return el.apply(this,arguments)}(F,Z)),F},sa=x=>{const F=x.getProvider("messaging").getImmediate();return{getToken:ie=>function ya(x,F){return va.apply(this,arguments)}(F,ie)}};function tl(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,Y.Z)(function*(){try{yield(0,pe.eu)()}catch{return!1}return typeof window<"u"&&(0,pe.hl)()&&(0,pe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function oa(){(0,ve._registerComponent)(new Te.wA("messaging",Ba,"PUBLIC")),(0,ve._registerComponent)(new Te.wA("messaging-internal",sa,"PRIVATE")),(0,ve.registerVersion)(oo,"0.9.11"),(0,ve.registerVersion)(oo,"0.9.11","esm2017")}();const pi="analytics",Jl="firebase_id",qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hs="https://www.googletagmanager.com/gtag/js",Jr=new ke.Yd("@firebase/analytics");function aa(x){return Promise.all(x.map(F=>F.catch(Z=>Z)))}function Ql(x,F){const Z=document.createElement("script");Z.src=`${hs}?l=${x}&id=${F}`,Z.async=!0,document.head.appendChild(Z)}function gi(x,F,Z,ie,Oe,je){return To.apply(this,arguments)}function To(){return(To=(0,Y.Z)(function*(x,F,Z,ie,Oe,je){const mt=ie[Oe];try{if(mt)yield F[mt];else{const Yt=(yield aa(Z)).find(Nn=>Nn.measurementId===Oe);Yt&&(yield F[Yt.appId])}}catch(Ut){Jr.error(Ut)}x("config",Oe,je)})).apply(this,arguments)}function fs(x,F,Z,ie,Oe){return ao.apply(this,arguments)}function ao(){return(ao=(0,Y.Z)(function*(x,F,Z,ie,Oe){try{let je=[];if(Oe&&Oe.send_to){let mt=Oe.send_to;Array.isArray(mt)||(mt=[mt]);const Ut=yield aa(Z);for(const Yt of mt){const Nn=Ut.find(On=>On.measurementId===Yt),Wn=Nn&&F[Nn.appId];if(!Wn){je=[];break}je.push(Wn)}}0===je.length&&(je=Object.values(F)),yield Promise.all(je),x("event",ie,Oe||{})}catch(je){Jr.error(je)}})).apply(this,arguments)}function Va(){const x=window.document.getElementsByTagName("script");for(const F of Object.values(x))if(F.src&&F.src.includes(hs))return F;return null}const bi=new pe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ee=new class W{constructor(F={},Z=1e3){this.throttleMetadata=F,this.intervalMillis=Z}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,Z){this.throttleMetadata[F]=Z}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function st(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function ht(x){return hn.apply(this,arguments)}function hn(){return(hn=(0,Y.Z)(function*(x){var F;const{appId:Z,apiKey:ie}=x,Oe={method:"GET",headers:st(ie)},je=qs.replace("{app-id}",Z),mt=yield fetch(je,Oe);if(200!==mt.status&&304!==mt.status){let Ut="";try{const Yt=yield mt.json();(null===(F=Yt.error)||void 0===F?void 0:F.message)&&(Ut=Yt.error.message)}catch{}throw bi.create("config-fetch-failed",{httpStatus:mt.status,responseMessage:Ut})}return mt.json()})).apply(this,arguments)}function wi(x){return hr.apply(this,arguments)}function hr(){return(hr=(0,Y.Z)(function*(x,F=ee,Z){const{appId:ie,apiKey:Oe,measurementId:je}=x.options;if(!ie)throw bi.create("no-app-id");if(!Oe){if(je)return{measurementId:je,appId:ie};throw bi.create("no-api-key")}const mt=F.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ut=new A;return setTimeout((0,Y.Z)(function*(){Ut.abort()}),void 0!==Z?Z:6e4),lo({appId:ie,apiKey:Oe,measurementId:je},mt,Ut,F)})).apply(this,arguments)}function lo(x,F,Z){return ps.apply(this,arguments)}function ps(){return(ps=(0,Y.Z)(function*(x,{throttleEndTimeMillis:F,backoffCount:Z},ie,Oe=ee){const{appId:je,measurementId:mt}=x;try{yield Xd(ie,F)}catch(Ut){if(mt)return Jr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Ut.message}]`),{appId:je,measurementId:mt};throw Ut}try{const Ut=yield ht(x);return Oe.deleteThrottleMetadata(je),Ut}catch(Ut){if(!Mu(Ut)){if(Oe.deleteThrottleMetadata(je),mt)return Jr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Ut.message}]`),{appId:je,measurementId:mt};throw Ut}const Yt=503===Number(Ut.customData.httpStatus)?(0,pe.$s)(Z,Oe.intervalMillis,30):(0,pe.$s)(Z,Oe.intervalMillis),Nn={throttleEndTimeMillis:Date.now()+Yt,backoffCount:Z+1};return Oe.setThrottleMetadata(je,Nn),Jr.debug(`Calling attemptFetch again in ${Yt} millis`),lo(x,Nn,ie,Oe)}})).apply(this,arguments)}function Xd(x,F){return new Promise((Z,ie)=>{const Oe=Math.max(F-Date.now(),0),je=setTimeout(Z,Oe);x.addEventListener(()=>{clearTimeout(je),ie(bi.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Mu(x){if(!(x instanceof pe.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}class A{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function E(){return w.apply(this,arguments)}function w(){return(w=(0,Y.Z)(function*(){if(!(0,pe.hl)())return Jr.warn(bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,pe.eu)()}catch(x){return Jr.warn(bi.create("indexeddb-unavailable",{errorInfo:x}).message),!1}return!0})).apply(this,arguments)}function V(){return(V=(0,Y.Z)(function*(x,F,Z,ie,Oe,je,mt){var Ut;const Yt=wi(x);Yt.then(Ci=>{Z[Ci.measurementId]=Ci.appId,x.options.measurementId&&Ci.measurementId!==x.options.measurementId&&Jr.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${Ci.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ci=>Jr.error(Ci)),F.push(Yt);const Nn=E().then(Ci=>{if(Ci)return ie.getId()}),[Wn,On]=yield Promise.all([Yt,Nn]);Va()||Ql(je,Wn.measurementId),Oe("js",new Date);const Gi=null!==(Ut=null==mt?void 0:mt.config)&&void 0!==Ut?Ut:{};return Gi.origin="firebase",Gi.update=!0,null!=On&&(Gi[Jl]=On),Oe("config",Wn.measurementId,Gi),Wn.measurementId})).apply(this,arguments)}class K{constructor(F){this.app=F}_delete(){return delete re[this.app.options.appId],Promise.resolve()}}let re={},de=[];const nt={};let Kt,$n,Ft="dataLayer",gr=!1;function Ar(x,F,Z){!function jo(){const x=[];if((0,pe.ru)()&&x.push("This is a browser extension environment."),(0,pe.zI)()||x.push("Cookies are not available."),x.length>0){const F=x.map((ie,Oe)=>`(${Oe+1}) ${ie}`).join(" "),Z=bi.create("invalid-analytics-context",{errorInfo:F});Jr.warn(Z.message)}}();const ie=x.options.appId;if(!ie)throw bi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw bi.create("no-api-key");Jr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=re[ie])throw bi.create("already-exists",{id:ie});if(!gr){!function es(x){let F=[];Array.isArray(window[x])?F=window[x]:window[x]=F}(Ft);const{wrappedGtag:je,gtagCore:mt}=function rl(x,F,Z,ie,Oe){let je=function(...mt){window[ie].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(je=window[Oe]),window[Oe]=function Ls(x,F,Z,ie){function je(){return(je=(0,Y.Z)(function*(mt,Ut,Yt){try{"event"===mt?yield fs(x,F,Z,Ut,Yt):"config"===mt?yield gi(x,F,Z,ie,Ut,Yt):x("set",Ut)}catch(Nn){Jr.error(Nn)}})).apply(this,arguments)}return function Oe(mt,Ut,Yt){return je.apply(this,arguments)}}(je,x,F,Z),{gtagCore:je,wrappedGtag:window[Oe]}}(re,de,nt,Ft,"gtag");$n=je,Kt=mt,gr=!0}return re[ie]=function k(x,F,Z,ie,Oe,je,mt){return V.apply(this,arguments)}(x,de,nt,F,Kt,Ft,Z),new K(x)}function Ho(){return(Ho=(0,Y.Z)(function*(x,F,Z,ie,Oe){if(Oe&&Oe.global)x("event",Z,ie);else{const je=yield F;x("event",Z,Object.assign(Object.assign({},ie),{send_to:je}))}})).apply(this,arguments)}function sl(){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,Y.Z)(function*(){if((0,pe.ru)()||!(0,pe.zI)()||!(0,pe.hl)())return!1;try{return yield(0,pe.eu)()}catch{return!1}})).apply(this,arguments)}const rh="@firebase/analytics";!function ih(){(0,ve._registerComponent)(new Te.wA(pi,(F,{options:Z})=>Ar(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,ve._registerComponent)(new Te.wA("analytics-internal",function x(F){try{const Z=F.getProvider(pi).getImmediate();return{logEvent:(ie,Oe,je)=>function nh(x,F,Z,ie){x=(0,pe.m9)(x),function Xl(x,F,Z,ie,Oe){return Ho.apply(this,arguments)}($n,re[x.app.options.appId],F,Z,ie).catch(Oe=>Jr.error(Oe))}(Z,ie,Oe,je)}}catch(Z){throw bi.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,ve.registerVersion)(rh,"0.7.7"),(0,ve.registerVersion)(rh,"0.7.7","esm2017")}();var zf=G(3466),Ag=G(474);const al=new class er extends Ag.v{}(class ol extends zf.o{constructor(F,Z){super(F,Z),this.scheduler=F,this.work=Z}schedule(F,Z=0){return Z>0?super.schedule(F,Z):(this.delay=Z,this.state=F,this.scheduler.flush(this),this)}execute(F,Z){return Z>0||this.closed?super.execute(F,Z):this._execute(F,Z)}requestAsyncId(F,Z,ie=0){return null!=ie&&ie>0||null==ie&&this.delay>0?super.requestAsyncId(F,Z,ie):F.flush(this)}});var Lc=G(6523),ku=G(8168),Bs=G(4119),Vs=G(7513);const tc=new b.GfV("7.3.0"),la="__angularfire_symbol__analyticsIsSupportedValue",co="__angularfire_symbol__analyticsIsSupported",So="__angularfire_symbol__remoteConfigIsSupportedValue",ll="__angularfire_symbol__remoteConfigIsSupported",Bc="__angularfire_symbol__messagingIsSupportedValue",Ru="__angularfire_symbol__messagingIsSupported";function cl(x,F,Z){if(F){if(1===F.length)return F[0];const je=F.filter(mt=>mt.app===Z);if(1===je.length)return je[0]}return Z.container.getProvider(x).getImmediate({optional:!0})}globalThis[co]||(globalThis[co]=sl().then(x=>globalThis[la]=x).catch(()=>globalThis[la]=!1)),globalThis[Ru]||(globalThis[Ru]=tl().then(x=>globalThis[Bc]=x).catch(()=>globalThis[Bc]=!1)),globalThis[ll]||(globalThis[ll]=ls().then(x=>globalThis[So]=x).catch(()=>globalThis[So]=!1));const oh=(x,F)=>{const Z=F?[F]:(0,h.C6)(),ie=[];return Z.forEach(Oe=>{Oe.container.getProvider(x).instances.forEach(mt=>{ie.includes(mt)||ie.push(mt)})}),ie};function Ca(){}class Ol{constructor(F,Z=al){this.zone=F,this.delegate=Z}now(){return this.delegate.now()}schedule(F,Z,ie){const Oe=this.zone;return this.delegate.schedule(function(mt){Oe.runGuarded(()=>{F.apply(this,[mt])})},Z,ie)}}class Pu{constructor(F){this.zone=F,this.task=null}call(F,Z){const ie=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ca,{},Ca,Ca)),Z.pipe((0,ku.b)({next:ie,complete:ie,error:ie})).subscribe(F).add(ie)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mi=(()=>{class x{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new Ol(Zone.current)),this.insideAngular=Z.run(()=>new Ol(Zone.current,Lc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(Z){return new(Z||x)(b.LFG(b.R0b))},x.\u0275prov=b.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function $r(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Hc(x){return $r(),function ul(x){return function(Z){return(Z=Z.lift(new Pu(x.ngZone))).pipe((0,Bs.R)(x.outsideAngular),(0,Vs.Q)(x.insideAngular))}}($r())(x)}},3854:(Nt,Ve,G)=>{"use strict";G.d(Ve,{BH:()=>Ae,LL:()=>Jt,ZR:()=>He,gQ:()=>nr,zI:()=>Ne,hu:()=>Y,g5:()=>ve,US:()=>ke,tV:()=>se,h$:()=>Se,L:()=>Me,$s:()=>Yn,r3:()=>Fn,Sg:()=>Ze,ne:()=>Bt,p$:()=>ae,vZ:()=>Xr,ZB:()=>we,Lj:()=>yn,gK:()=>Re,pd:()=>wr,m9:()=>St,z$:()=>ut,GJ:()=>Hr,jU:()=>It,ru:()=>wt,d:()=>We,xb:()=>vr,w1:()=>Xe,hl:()=>ye,uI:()=>Be,UG:()=>Qe,Yr:()=>ue,b$:()=>Je,G6:()=>De,Mn:()=>pt,w9:()=>wn,cI:()=>Dt,UI:()=>Fr,X3:()=>Gt,xO:()=>Lr,zd:()=>Mr,DV:()=>_n,ug:()=>Ye,dS:()=>Ue,Pz:()=>Tt,eu:()=>Le});var b=G(8239);const Y=function(le,te){if(!le)throw ve(te)},ve=function(le){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+le)},pe=function(le){const te=[];let _e=0;for(let qe=0;qe<le.length;qe++){let Ie=le.charCodeAt(qe);Ie<128?te[_e++]=Ie:Ie<2048?(te[_e++]=Ie>>6|192,te[_e++]=63&Ie|128):55296==(64512&Ie)&&qe+1<le.length&&56320==(64512&le.charCodeAt(qe+1))?(Ie=65536+((1023&Ie)<<10)+(1023&le.charCodeAt(++qe)),te[_e++]=Ie>>18|240,te[_e++]=Ie>>12&63|128,te[_e++]=Ie>>6&63|128,te[_e++]=63&Ie|128):(te[_e++]=Ie>>12|224,te[_e++]=Ie>>6&63|128,te[_e++]=63&Ie|128)}return te},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(le,te){if(!Array.isArray(le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const _e=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[];for(let Ie=0;Ie<le.length;Ie+=3){const bt=le[Ie],Wt=Ie+1<le.length,xe=Wt?le[Ie+1]:0,Tr=Ie+2<le.length,en=Tr?le[Ie+2]:0;let kn=(15&xe)<<2|en>>6,ir=63&en;Tr||(ir=64,Wt||(kn=64)),qe.push(_e[bt>>2],_e[(3&bt)<<4|xe>>4],_e[kn],_e[ir])}return qe.join("")},encodeString(le,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(le):this.encodeByteArray(pe(le),te)},decodeString(le,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(le):function(le){const te=[];let _e=0,qe=0;for(;_e<le.length;){const Ie=le[_e++];if(Ie<128)te[qe++]=String.fromCharCode(Ie);else if(Ie>191&&Ie<224){const bt=le[_e++];te[qe++]=String.fromCharCode((31&Ie)<<6|63&bt)}else if(Ie>239&&Ie<365){const Tr=((7&Ie)<<18|(63&le[_e++])<<12|(63&le[_e++])<<6|63&le[_e++])-65536;te[qe++]=String.fromCharCode(55296+(Tr>>10)),te[qe++]=String.fromCharCode(56320+(1023&Tr))}else{const bt=le[_e++],Wt=le[_e++];te[qe++]=String.fromCharCode((15&Ie)<<12|(63&bt)<<6|63&Wt)}}return te.join("")}(this.decodeStringToByteArray(le,te))},decodeStringToByteArray(le,te){this.init_();const _e=te?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[];for(let Ie=0;Ie<le.length;){const bt=_e[le.charAt(Ie++)],xe=Ie<le.length?_e[le.charAt(Ie)]:0;++Ie;const en=Ie<le.length?_e[le.charAt(Ie)]:64;++Ie;const rn=Ie<le.length?_e[le.charAt(Ie)]:64;if(++Ie,null==bt||null==xe||null==en||null==rn)throw Error();qe.push(bt<<2|xe>>4),64!==en&&(qe.push(xe<<4&240|en>>2),64!==rn&&qe.push(en<<6&192|rn))}return qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let le=0;le<this.ENCODED_VALS.length;le++)this.byteToCharMap_[le]=this.ENCODED_VALS.charAt(le),this.charToByteMap_[this.byteToCharMap_[le]]=le,this.byteToCharMapWebSafe_[le]=this.ENCODED_VALS_WEBSAFE.charAt(le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[le]]=le,le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(le)]=le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(le)]=le)}}},Se=function(le){const te=pe(le);return ke.encodeByteArray(te,!0)},Me=function(le){return Se(le).replace(/\./g,"")},se=function(le){try{return ke.decodeString(le,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function ae(le){return we(void 0,le)}function we(le,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===le&&(le={});break;case Array:le=[];break;default:return te}for(const _e in te)!te.hasOwnProperty(_e)||!at(_e)||(le[_e]=we(le[_e],te[_e]));return le}function at(le){return"__proto__"!==le}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,_e)=>{this.resolve=te,this.reject=_e})}wrapCallback(te){return(_e,qe)=>{_e?this.reject(_e):this.resolve(qe),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(_e):te(_e,qe))}}}function Ze(le,te){if(le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qe=te||"demo-project",Ie=le.iat||0,bt=le.sub||le.user_id;if(!bt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Wt=Object.assign({iss:`https://securetoken.google.com/${qe}`,aud:qe,iat:Ie,exp:Ie+3600,auth_time:Ie,sub:bt,user_id:bt,firebase:{sign_in_provider:"custom",identities:{}}},le);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Wt)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function Qe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function It(){return"object"==typeof self&&self.self===self}function wt(){const le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof le&&void 0!==le.id}function Je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){return ut().indexOf("Electron/")>=0}function Xe(){const le=ut();return le.indexOf("MSIE ")>=0||le.indexOf("Trident/")>=0}function pt(){return ut().indexOf("MSAppHost/")>=0}function ue(){return!1}function De(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){return"object"==typeof indexedDB}function Le(){return new Promise((le,te)=>{try{let _e=!0;const qe="validate-browser-context-for-indexeddb-analytics-module",Ie=self.indexedDB.open(qe);Ie.onsuccess=()=>{Ie.result.close(),_e||self.indexedDB.deleteDatabase(qe),le(!0)},Ie.onupgradeneeded=()=>{_e=!1},Ie.onerror=()=>{var bt;te((null===(bt=Ie.error)||void 0===bt?void 0:bt.message)||"")}}catch(_e){te(_e)}})}function Ne(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class He extends Error{constructor(te,_e,qe){super(_e),this.code=te,this.customData=qe,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}}class Jt{constructor(te,_e,qe){this.service=te,this.serviceName=_e,this.errors=qe}create(te,..._e){const qe=_e[0]||{},Ie=`${this.service}/${te}`,bt=this.errors[te],Wt=bt?function In(le,te){return le.replace(qn,(_e,qe)=>{const Ie=te[qe];return null!=Ie?String(Ie):`<${qe}?>`})}(bt,qe):"Error";return new He(Ie,`${this.serviceName}: ${Wt} (${Ie}).`,qe)}}const qn=/\{\$([^}]+)}/g;function Dt(le){return JSON.parse(le)}function Tt(le){return JSON.stringify(le)}const Tn=function(le){let te={},_e={},qe={},Ie="";try{const bt=le.split(".");te=Dt(se(bt[0])||""),_e=Dt(se(bt[1])||""),Ie=bt[2],qe=_e.d||{},delete _e.d}catch{}return{header:te,claims:_e,data:qe,signature:Ie}},wn=function(le){const _e=Tn(le).claims;return!!_e&&"object"==typeof _e&&_e.hasOwnProperty("iat")},Hr=function(le){const te=Tn(le).claims;return"object"==typeof te&&!0===te.admin};function Fn(le,te){return Object.prototype.hasOwnProperty.call(le,te)}function _n(le,te){if(Object.prototype.hasOwnProperty.call(le,te))return le[te]}function vr(le){for(const te in le)if(Object.prototype.hasOwnProperty.call(le,te))return!1;return!0}function Fr(le,te,_e){const qe={};for(const Ie in le)Object.prototype.hasOwnProperty.call(le,Ie)&&(qe[Ie]=te.call(_e,le[Ie],Ie,le));return qe}function Xr(le,te){if(le===te)return!0;const _e=Object.keys(le),qe=Object.keys(te);for(const Ie of _e){if(!qe.includes(Ie))return!1;const bt=le[Ie],Wt=te[Ie];if(br(bt)&&br(Wt)){if(!Xr(bt,Wt))return!1}else if(bt!==Wt)return!1}for(const Ie of qe)if(!_e.includes(Ie))return!1;return!0}function br(le){return null!==le&&"object"==typeof le}function Lr(le){const te=[];for(const[_e,qe]of Object.entries(le))Array.isArray(qe)?qe.forEach(Ie=>{te.push(encodeURIComponent(_e)+"="+encodeURIComponent(Ie))}):te.push(encodeURIComponent(_e)+"="+encodeURIComponent(qe));return te.length?"&"+te.join("&"):""}function Mr(le){const te={};return le.replace(/^\?/,"").split("&").forEach(qe=>{if(qe){const[Ie,bt]=qe.split("=");te[decodeURIComponent(Ie)]=decodeURIComponent(bt)}}),te}function wr(le){const te=le.indexOf("?");if(!te)return"";const _e=le.indexOf("#",te);return le.substring(te,_e>0?_e:void 0)}class nr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let te=1;te<this.blockSize;++te)this.pad_[te]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(te,_e){_e||(_e=0);const qe=this.W_;if("string"==typeof te)for(let rn=0;rn<16;rn++)qe[rn]=te.charCodeAt(_e)<<24|te.charCodeAt(_e+1)<<16|te.charCodeAt(_e+2)<<8|te.charCodeAt(_e+3),_e+=4;else for(let rn=0;rn<16;rn++)qe[rn]=te[_e]<<24|te[_e+1]<<16|te[_e+2]<<8|te[_e+3],_e+=4;for(let rn=16;rn<80;rn++){const kn=qe[rn-3]^qe[rn-8]^qe[rn-14]^qe[rn-16];qe[rn]=4294967295&(kn<<1|kn>>>31)}let en,Un,Ie=this.chain_[0],bt=this.chain_[1],Wt=this.chain_[2],xe=this.chain_[3],Tr=this.chain_[4];for(let rn=0;rn<80;rn++){rn<40?rn<20?(en=xe^bt&(Wt^xe),Un=1518500249):(en=bt^Wt^xe,Un=1859775393):rn<60?(en=bt&Wt|xe&(bt|Wt),Un=2400959708):(en=bt^Wt^xe,Un=3395469782);const kn=(Ie<<5|Ie>>>27)+en+Tr+Un+qe[rn]&4294967295;Tr=xe,xe=Wt,Wt=4294967295&(bt<<30|bt>>>2),bt=Ie,Ie=kn}this.chain_[0]=this.chain_[0]+Ie&4294967295,this.chain_[1]=this.chain_[1]+bt&4294967295,this.chain_[2]=this.chain_[2]+Wt&4294967295,this.chain_[3]=this.chain_[3]+xe&4294967295,this.chain_[4]=this.chain_[4]+Tr&4294967295}update(te,_e){if(null==te)return;void 0===_e&&(_e=te.length);const qe=_e-this.blockSize;let Ie=0;const bt=this.buf_;let Wt=this.inbuf_;for(;Ie<_e;){if(0===Wt)for(;Ie<=qe;)this.compress_(te,Ie),Ie+=this.blockSize;if("string"==typeof te){for(;Ie<_e;)if(bt[Wt]=te.charCodeAt(Ie),++Wt,++Ie,Wt===this.blockSize){this.compress_(bt),Wt=0;break}}else for(;Ie<_e;)if(bt[Wt]=te[Ie],++Wt,++Ie,Wt===this.blockSize){this.compress_(bt),Wt=0;break}}this.inbuf_=Wt,this.total_+=_e}digest(){const te=[];let _e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ie=this.blockSize-1;Ie>=56;Ie--)this.buf_[Ie]=255&_e,_e/=256;this.compress_(this.buf_);let qe=0;for(let Ie=0;Ie<5;Ie++)for(let bt=24;bt>=0;bt-=8)te[qe]=this.chain_[Ie]>>bt&255,++qe;return te}}function Bt(le,te){const _e=new ci(le,te);return _e.subscribe.bind(_e)}class ci{constructor(te,_e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=_e,this.task.then(()=>{te(this)}).catch(qe=>{this.error(qe)})}next(te){this.forEachObserver(_e=>{_e.next(te)})}error(te){this.forEachObserver(_e=>{_e.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,_e,qe){let Ie;if(void 0===te&&void 0===_e&&void 0===qe)throw new Error("Missing Observer.");Ie=function Rt(le,te){if("object"!=typeof le||null===le)return!1;for(const _e of te)if(_e in le&&"function"==typeof le[_e])return!0;return!1}(te,["next","error","complete"])?te:{next:te,error:_e,complete:qe},void 0===Ie.next&&(Ie.next=ei),void 0===Ie.error&&(Ie.error=ei),void 0===Ie.complete&&(Ie.complete=ei);const bt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ie.error(this.finalError):Ie.complete()}catch{}}),this.observers.push(Ie),bt}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let _e=0;_e<this.observers.length;_e++)this.sendOne(_e,te)}sendOne(te,_e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{_e(this.observers[te])}catch(qe){typeof console<"u"&&console.error&&console.error(qe)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}function Re(le,te){return`${le} failed: ${te} argument `}const Ue=function(le){const te=[];let _e=0;for(let qe=0;qe<le.length;qe++){let Ie=le.charCodeAt(qe);if(Ie>=55296&&Ie<=56319){const bt=Ie-55296;qe++,Y(qe<le.length,"Surrogate pair missing trail surrogate."),Ie=65536+(bt<<10)+(le.charCodeAt(qe)-56320)}Ie<128?te[_e++]=Ie:Ie<2048?(te[_e++]=Ie>>6|192,te[_e++]=63&Ie|128):Ie<65536?(te[_e++]=Ie>>12|224,te[_e++]=Ie>>6&63|128,te[_e++]=63&Ie|128):(te[_e++]=Ie>>18|240,te[_e++]=Ie>>12&63|128,te[_e++]=Ie>>6&63|128,te[_e++]=63&Ie|128)}return te},Ye=function(le){let te=0;for(let _e=0;_e<le.length;_e++){const qe=le.charCodeAt(_e);qe<128?te++:qe<2048?te+=2:qe>=55296&&qe<=56319?(te+=4,_e++):te+=3}return te};function Yn(le,te=1e3,_e=2){const qe=te*Math.pow(_e,le),Ie=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+Ie)}function St(le){return le&&le._delegate?le._delegate:le}function Mn(le,te){return new Promise((_e,qe)=>{le.onsuccess=Ie=>{_e(Ie.target.result)},le.onerror=Ie=>{var bt;qe(`${te}: ${null===(bt=Ie.target.error)||void 0===bt?void 0:bt.message}`)}})}class un{constructor(te){this._db=te,this.objectStoreNames=this._db.objectStoreNames}transaction(te,_e){return new ot(this._db.transaction.call(this._db,te,_e))}createObjectStore(te,_e){return new et(this._db.createObjectStore(te,_e))}close(){this._db.close()}}class ot{constructor(te){this._transaction=te,this.complete=new Promise((_e,qe)=>{this._transaction.oncomplete=function(){_e()},this._transaction.onerror=()=>{qe(this._transaction.error)},this._transaction.onabort=()=>{qe(this._transaction.error)}})}objectStore(te){return new et(this._transaction.objectStore(te))}}class et{constructor(te){this._store=te}index(te){return new kt(this._store.index(te))}createIndex(te,_e,qe){return new kt(this._store.createIndex(te,_e,qe))}get(te){return Mn(this._store.get(te),"Error reading from IndexedDB")}put(te,_e){return Mn(this._store.put(te,_e),"Error writing to IndexedDB")}delete(te){return Mn(this._store.delete(te),"Error deleting from IndexedDB")}clear(){return Mn(this._store.clear(),"Error clearing IndexedDB object store")}}class kt{constructor(te){this._index=te}get(te){return Mn(this._index.get(te),"Error reading from IndexedDB")}}function Gt(le,te,_e){return new Promise((qe,Ie)=>{try{const bt=indexedDB.open(le,te);bt.onsuccess=Wt=>{qe(new un(Wt.target.result))},bt.onerror=Wt=>{var xe;Ie(`Error opening indexedDB: ${null===(xe=Wt.target.error)||void 0===xe?void 0:xe.message}`)},bt.onupgradeneeded=Wt=>{_e(new un(bt.result),Wt.oldVersion,Wt.newVersion,new ot(bt.transaction))}}catch(bt){Ie(`Error opening indexedDB: ${bt.message}`)}})}function yn(le){return nn.apply(this,arguments)}function nn(){return(nn=(0,b.Z)(function*(le){return new Promise((te,_e)=>{try{const qe=indexedDB.deleteDatabase(le);qe.onsuccess=()=>{te()},qe.onerror=Ie=>{var bt;_e(`Error deleting indexedDB database "${le}": ${null===(bt=Ie.target.error)||void 0===bt?void 0:bt.message}`)}}catch(qe){_e(`Error deleting indexedDB database "${le}": ${qe.message}`)}})})).apply(this,arguments)}},2329:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Mq:()=>b.getApp,C6:()=>b.getApps});var b=G(8026);(0,b.registerVersion)("firebase","9.6.10","app")},7841:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Z:()=>b.Z});var b=G(3394);b.Z.registerVersion("firebase","9.6.10","app-compat")},5850:(Nt,Ve,G)=>{"use strict";G.r(Ve);var b=G(8239),h=G(3394),Y=G(3854),ve=G(8026),pe=G(4762),Te=G(5422),ke=G(3910);const Ze=function at(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),It=new Te.Yd("@firebase/auth");function wt(v,...f){It.logLevel<=Te.in.ERROR&&It.error(`Auth (${ve.SDK_VERSION}): ${v}`,...f)}function Je(v,...f){throw ue(v,...f)}function We(v,...f){return ue(v,...f)}function Xe(v,f,g){const C=Object.assign(Object.assign({},ut()),{[f]:g});return new Y.LL("auth","Firebase",C).create(f,{appName:v.name})}function pt(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Je(v,"argument-error"),Xe(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ue(v,...f){if("string"!=typeof v){const g=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=v.name),v._errorFactory.create(g,...C)}return Be.create(v,...f)}function De(v,f,...g){if(!v)throw ue(f,...g)}function ye(v){const f="INTERNAL ASSERTION FAILED: "+v;throw wt(f),new Error(f)}function Le(v,f){v||ye(f)}const Ne=new Map;function Ee(v){Le(v instanceof Function,"Expected a class definition");let f=Ne.get(v);return f?(Le(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,Ne.set(v,f),f)}function Jt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function In(){return"http:"===qn()||"https:"===qn()}function qn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Tn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Le(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function Dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(In()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(v,f){Le(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ir{static initialize(f,g,C){this.fetchImpl=f,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hr=new Tn(3e4,6e4);function Fn(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function _n(v,f,g,C){return vr.apply(this,arguments)}function vr(){return(vr=(0,b.Z)(function*(v,f,g,C,U={}){return Fr(v,U,(0,b.Z)(function*(){let X={},Ce={};C&&("GET"===f?Ce=C:X={body:JSON.stringify(C)});const ze=(0,Y.xO)(Object.assign({key:v.config.apiKey},Ce)).slice(1),xt=yield v._getAdditionalHeaders();return xt["Content-Type"]="application/json",v.languageCode&&(xt["X-Firebase-Locale"]=v.languageCode),Ir.fetch()(Mr(v,v.config.apiHost,g,ze),Object.assign({method:f,headers:xt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function Fr(v,f,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,b.Z)(function*(v,f,g){v._canInitEmulator=!1;const C=Object.assign(Object.assign({},wn),f);try{const U=new wr(v),X=yield Promise.race([g(),U.promise]);U.clearNetworkTimeout();const Ce=yield X.json();if("needConfirmation"in Ce)throw nr(v,"account-exists-with-different-credential",Ce);if(X.ok&&!("errorMessage"in Ce))return Ce;{const ze=X.ok?Ce.errorMessage:Ce.error.message,[xt,qt]=ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===xt)throw nr(v,"credential-already-in-use",Ce);if("EMAIL_EXISTS"===xt)throw nr(v,"email-already-in-use",Ce);const gn=C[xt]||xt.toLowerCase().replace(/[_\s]+/g,"-");if(qt)throw Xe(v,gn,qt);Je(v,gn)}}catch(U){if(U instanceof Y.ZR)throw U;Je(v,"network-request-failed")}})).apply(this,arguments)}function br(v,f,g,C){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,b.Z)(function*(v,f,g,C,U={}){const X=yield _n(v,f,g,C,U);return"mfaPendingCredential"in X&&Je(v,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Mr(v,f,g,C){const U=`${f}${g}?${C}`;return v.config.emulator?xn(v.config,U):`${v.config.apiScheme}://${U}`}class wr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(We(this.auth,"network-request-failed")),Hr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nr(v,f,g){const C={appName:v.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const U=We(v,f,C);return U.customData._tokenResponse=g,U}function ci(){return(ci=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function fn(v,f){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ei(v,f){return yi.apply(this,arguments)}function yi(){return(yi=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Re(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function ct(){return(ct=(0,b.Z)(function*(v,f=!1){const g=(0,Y.m9)(v),C=yield g.getIdToken(f),U=Ye(C);De(U&&U.exp&&U.auth_time&&U.iat,g.auth,"internal-error");const X="object"==typeof U.firebase?U.firebase:void 0,Ce=null==X?void 0:X.sign_in_provider;return{claims:U,token:C,authTime:Re(Ue(U.auth_time)),issuedAtTime:Re(Ue(U.iat)),expirationTime:Re(Ue(U.exp)),signInProvider:Ce||null,signInSecondFactor:(null==X?void 0:X.sign_in_second_factor)||null}})).apply(this,arguments)}function Ue(v){return 1e3*Number(v)}function Ye(v){const[f,g,C]=v.split(".");if(void 0===f||void 0===g||void 0===C)return wt("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,Y.tV)(g);return U?JSON.parse(U):(wt("Failed to decode base64 JWT payload"),null)}catch(U){return wt("Caught error parsing JWT payload as JSON",U),null}}function Cn(v,f){return $t.apply(this,arguments)}function $t(){return($t=(0,b.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(C){throw C instanceof Y.ZR&&an(C)&&v.auth.currentUser===v&&(yield v.auth.signOut()),C}})).apply(this,arguments)}function an({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Yn{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const U=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(f);this.timerId=setTimeout((0,b.Z)(function*(){yield g.iteration()}),C)}iteration(){var f=this;return(0,b.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Vn{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Re(this.lastLoginAt),this.creationTime=Re(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(v){return St.apply(this,arguments)}function St(){return(St=(0,b.Z)(function*(v){var f;const g=v.auth,C=yield v.getIdToken(),U=yield Cn(v,ei(g,{idToken:C}));De(null==U?void 0:U.users.length,g,"internal-error");const X=U.users[0];v._notifyReloadListener(X);const Ce=(null===(f=X.providerUserInfo)||void 0===f?void 0:f.length)?et(X.providerUserInfo):[],ze=ot(v.providerData,Ce),gn=!!v.isAnonymous&&!(v.email&&X.passwordHash||(null==ze?void 0:ze.length)),cn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:ze,metadata:new Vn(X.createdAt,X.lastLoginAt),isAnonymous:gn};Object.assign(v,cn)})).apply(this,arguments)}function un(){return(un=(0,b.Z)(function*(v){const f=(0,Y.m9)(v);yield Jn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ot(v,f){return[...v.filter(C=>!f.some(U=>U.providerId===C.providerId)),...f]}function et(v){return v.map(f=>{var{providerId:g}=f,C=(0,pe._T)(f,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Gt(){return(Gt=(0,b.Z)(function*(v,f){const g=yield Fr(v,{},(0,b.Z)(function*(){const C=(0,Y.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:U,apiKey:X}=v.config,Ce=Mr(v,U,"/v1/token",`key=${X}`),ze=yield v._getAdditionalHeaders();return ze["Content-Type"]="application/x-www-form-urlencoded",Ir.fetch()(Ce,{method:"POST",headers:ze,body:C})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class yn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){De(f.idToken,"internal-error"),De(typeof f.idToken<"u","internal-error"),De(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Ct(v){const f=Ye(v);return De(f,"internal-error"),De(typeof f.exp<"u","internal-error"),De(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var C=this;return(0,b.Z)(function*(){return De(!C.accessToken||C.refreshToken,f,"user-token-expired"),g||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(f,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var C=this;return(0,b.Z)(function*(){const{accessToken:U,refreshToken:X,expiresIn:Ce}=yield function kt(v,f){return Gt.apply(this,arguments)}(f,g);C.updateTokensAndExpiration(U,X,Number(Ce))})()}updateTokensAndExpiration(f,g,C){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(f,g){const{refreshToken:C,accessToken:U,expirationTime:X}=g,Ce=new yn;return C&&(De("string"==typeof C,"internal-error",{appName:f}),Ce.refreshToken=C),U&&(De("string"==typeof U,"internal-error",{appName:f}),Ce.accessToken=U),X&&(De("number"==typeof X,"internal-error",{appName:f}),Ce.expirationTime=X),Ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new yn,this.toJSON())}_performRefresh(){return ye("not implemented")}}function nn(v,f){De("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class le{constructor(f){var{uid:g,auth:C,stsTokenManager:U}=f,X=(0,pe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new Vn(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,b.Z)(function*(){const C=yield Cn(g,g.stsTokenManager.getToken(g.auth,f));return De(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(f){return function me(v){return ct.apply(this,arguments)}(this,f)}reload(){return function Mn(v){return un.apply(this,arguments)}(this)}_assign(f){this!==f&&(De(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new le(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var C=this;return(0,b.Z)(function*(){let U=!1;f.idToken&&f.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(f),U=!0),g&&(yield Jn(C)),yield C.auth._persistUserIfCurrent(C),U&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var f=this;return(0,b.Z)(function*(){const g=yield f.getIdToken();return yield Cn(f,function Bt(v,f){return ci.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var C,U,X,Ce,ze,xt,qt,gn;const cn=null!==(C=g.displayName)&&void 0!==C?C:void 0,Ei=null!==(U=g.email)&&void 0!==U?U:void 0,$o=null!==(X=g.phoneNumber)&&void 0!==X?X:void 0,Xu=null!==(Ce=g.photoURL)&&void 0!==Ce?Ce:void 0,fc=null!==(ze=g.tenantId)&&void 0!==ze?ze:void 0,ed=null!==(xt=g._redirectEventId)&&void 0!==xt?xt:void 0,Eh=null!==(qt=g.createdAt)&&void 0!==qt?qt:void 0,Us=null!==(gn=g.lastLoginAt)&&void 0!==gn?gn:void 0,{uid:Wo,emailVerified:Ia,isAnonymous:td,providerData:gp,stsTokenManager:_t}=g;De(Wo&&_t,f,"internal-error");const ns=yn.fromJSON(this.name,_t);De("string"==typeof Wo,f,"internal-error"),nn(cn,f.name),nn(Ei,f.name),De("boolean"==typeof Ia,f,"internal-error"),De("boolean"==typeof td,f,"internal-error"),nn($o,f.name),nn(Xu,f.name),nn(fc,f.name),nn(ed,f.name),nn(Eh,f.name),nn(Us,f.name);const pc=new le({uid:Wo,auth:f,email:Ei,emailVerified:Ia,displayName:cn,isAnonymous:td,photoURL:Xu,phoneNumber:$o,tenantId:fc,stsTokenManager:ns,createdAt:Eh,lastLoginAt:Us});return gp&&Array.isArray(gp)&&(pc.providerData=gp.map(mp=>Object.assign({},mp))),ed&&(pc._redirectEventId=ed),pc}static _fromIdTokenResponse(f,g,C=!1){return(0,b.Z)(function*(){const U=new yn;U.updateFromServerResponse(g);const X=new le({uid:g.localId,auth:f,stsTokenManager:U,isAnonymous:C});return yield Jn(X),X})()}}const _e=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(g,C){var U=this;return(0,b.Z)(function*(){U.storage[g]=C})()}_get(g){var C=this;return(0,b.Z)(function*(){const U=C.storage[g];return void 0===U?null:U})()}_remove(g){var C=this;return(0,b.Z)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return v.type="NONE",v})();function qe(v,f,g){return`firebase:${v}:${f}:${g}`}class Ie{constructor(f,g,C){this.persistence=f,this.auth=g,this.userKey=C;const{config:U,name:X}=this.auth;this.fullUserKey=qe(this.userKey,U.apiKey,X),this.fullPersistenceKey=qe("persistence",U.apiKey,X),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,b.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?le._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,b.Z)(function*(){if(g.persistence===f)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,C="authUser"){return(0,b.Z)(function*(){if(!g.length)return new Ie(Ee(_e),f,C);const U=(yield Promise.all(g.map(function(){var qt=(0,b.Z)(function*(gn){if(yield gn._isAvailable())return gn});return function(gn){return qt.apply(this,arguments)}}()))).filter(qt=>qt);let X=U[0]||Ee(_e);const Ce=qe(C,f.config.apiKey,f.name);let ze=null;for(const qt of g)try{const gn=yield qt._get(Ce);if(gn){const cn=le._fromJSON(f,gn);qt!==X&&(ze=cn),X=qt;break}}catch{}const xt=U.filter(qt=>qt._shouldAllowMigration);return X._shouldAllowMigration&&xt.length?(X=xt[0],ze&&(yield X._set(Ce,ze.toJSON())),yield Promise.all(g.map(function(){var qt=(0,b.Z)(function*(gn){if(gn!==X)try{yield gn._remove(Ce)}catch{}});return function(gn){return qt.apply(this,arguments)}}())),new Ie(X,f,C)):new Ie(X,f,C)})()}}function bt(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(en(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Wt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(rn(f))return"Blackberry";if(kn(f))return"Webos";if(xe(f))return"Safari";if((f.includes("chrome/")||Tr(f))&&!f.includes("edge/"))return"Chrome";if(Un(f))return"Android";{const C=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function Wt(v=(0,Y.z$)()){return/firefox\//i.test(v)}function xe(v=(0,Y.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Tr(v=(0,Y.z$)()){return/crios\//i.test(v)}function en(v=(0,Y.z$)()){return/iemobile/i.test(v)}function Un(v=(0,Y.z$)()){return/android/i.test(v)}function rn(v=(0,Y.z$)()){return/blackberry/i.test(v)}function kn(v=(0,Y.z$)()){return/webos/i.test(v)}function ir(v=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(v)}function Br(v=(0,Y.z$)()){return ir(v)||Un(v)||kn(v)||rn(v)||/windows phone/i.test(v)||en(v)}function Cr(v,f=[]){let g;switch(v){case"Browser":g=bt((0,Y.z$)());break;case"Worker":g=`${bt((0,Y.z$)())}-${v}`;break;default:g=v}const C=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ve.SDK_VERSION}/${C}`}class zi{constructor(f,g,C){this.app=f,this.heartbeatServiceProvider=g,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zr(this),this.idTokenSubscription=new zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(f,g){var C=this;return g&&(this._popupRedirectResolver=Ee(g)),this._initializationPromise=this.queue((0,b.Z)(function*(){var U,X;if(!C._deleted&&(C.persistenceManager=yield Ie.create(C,f),!C._deleted)){if(null===(U=C._popupRedirectResolver)||void 0===U?void 0:U._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(g),C.lastNotifiedUid=(null===(X=C.currentUser)||void 0===X?void 0:X.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,b.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,b.Z)(function*(){var C;let U=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const X=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,Ce=null==U?void 0:U._redirectEventId,ze=yield g.tryRedirectSignIn(f);(!X||X===Ce)&&(null==ze?void 0:ze.user)&&(U=ze.user)}return U?U._redirectEventId?(De(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===U._redirectEventId?g.directlySetCurrentUser(U):g.reloadAndSetCurrentUserOrClear(U)):g.reloadAndSetCurrentUserOrClear(U):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,b.Z)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,b.Z)(function*(){try{yield Jn(f)}catch(C){if("auth/network-request-failed"!==C.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Tt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,b.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,b.Z)(function*(){const C=f?(0,Y.m9)(f):null;return C&&De(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,b.Z)(function*(){if(!g._deleted)return f&&De(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,b.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,b.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,b.Z)(function*(){yield g.assertedPersistence.setPersistence(Ee(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new Y.LL("auth","Firebase",f())}onAuthStateChanged(f,g,C){return this.registerStateListener(this.authStateSubscription,f,g,C)}onIdTokenChanged(f,g,C){return this.registerStateListener(this.idTokenSubscription,f,g,C)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var C=this;return(0,b.Z)(function*(){const U=yield C.getOrInitRedirectPersistenceManager(g);return null===f?U.removeCurrentUser():U.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,b.Z)(function*(){if(!g.redirectPersistenceManager){const C=f&&Ee(f)||g._popupRedirectResolver;De(C,g,"argument-error"),g.redirectPersistenceManager=yield Ie.create(g,[Ee(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,b.Z)(function*(){var C,U;return g._isInitialized&&(yield g.queue((0,b.Z)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===f?g._currentUser:(null===(U=g.redirectUser)||void 0===U?void 0:U._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,b.Z)(function*(){if(f===g.currentUser)return g.queue((0,b.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,C,U){if(this._deleted)return()=>{};const X="function"==typeof g?g:g.next.bind(g),Ce=this._isInitialized?Promise.resolve():this._initializationPromise;return De(Ce,this,"internal-error"),Ce.then(()=>X(this.currentUser)),"function"==typeof g?f.addObserver(g,C,U):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,b.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Cr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,b.Z)(function*(){var g;const C={"X-Client-Version":f.clientVersion};f.app.options.appId&&(C["X-Firebase-gmpid"]=f.app.options.appId);const U=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return U&&(C["X-Firebase-Client"]=U),C})()}}function dn(v){return(0,Y.m9)(v)}class zr{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,Y.ne)(g=>this.observer=g)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function tn(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Qn(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Gn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,g){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function Rn(v,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:resetPassword",Fn(v,f))})).apply(this,arguments)}function Bi(v,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function jn(v,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:update",Fn(v,f))})).apply(this,arguments)}function ys(){return(ys=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithPassword",Fn(v,f))})).apply(this,arguments)}function qi(v,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:sendOobCode",Fn(v,f))})).apply(this,arguments)}function vs(v,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,b.Z)(function*(v,f){return qi(v,f)})).apply(this,arguments)}function kr(v,f){return as.apply(this,arguments)}function as(){return(as=(0,b.Z)(function*(v,f){return qi(v,f)})).apply(this,arguments)}function ti(v,f){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,b.Z)(function*(v,f){return qi(v,f)})).apply(this,arguments)}function vo(v,f){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,b.Z)(function*(v,f){return qi(v,f)})).apply(this,arguments)}function he(){return(he=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithEmailLink",Fn(v,f))})).apply(this,arguments)}function Ki(){return(Ki=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithEmailLink",Fn(v,f))})).apply(this,arguments)}class Ns extends Gn{constructor(f,g,C,U=null){super("password",C),this._email=f,this._password=g,this._tenantId=U}static _fromEmailAndPassword(f,g){return new Ns(f,g,"password")}static _fromEmailAndCode(f,g,C=null){return new Ns(f,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,b.Z)(function*(){switch(g.signInMethod){case"password":return function _s(v,f){return ys.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function bs(v,f){return he.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Je(f,"internal-error")}})()}_linkToIdToken(f,g){var C=this;return(0,b.Z)(function*(){switch(C.signInMethod){case"password":return Bi(f,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function vi(v,f){return Ki.apply(this,arguments)}(f,{idToken:g,email:C._email,oobCode:C._password});default:Je(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Er(v,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithIdp",Fn(v,f))})).apply(this,arguments)}class di extends Gn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new di(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Je("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:U}=g,X=(0,pe._T)(g,["providerId","signInMethod"]);if(!C||!U)return null;const Ce=new di(C,U);return Ce.idToken=X.idToken||void 0,Ce.accessToken=X.accessToken||void 0,Ce.secret=X.secret,Ce.nonce=X.nonce,Ce.pendingToken=X.pendingToken||null,Ce}_getIdTokenResponse(f){return Er(f,this.buildRequest())}_linkToIdToken(f,g){const C=this.buildRequest();return C.idToken=g,Er(f,C)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Er(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,Y.xO)(g)}return f}}function Ro(v,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:sendVerificationCode",Fn(v,f))})).apply(this,arguments)}function Yi(){return(Yi=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithPhoneNumber",Fn(v,f))})).apply(this,arguments)}function bo(){return(bo=(0,b.Z)(function*(v,f){const g=yield br(v,"POST","/v1/accounts:signInWithPhoneNumber",Fn(v,f));if(g.temporaryProof)throw nr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Xo={USER_NOT_FOUND:"user-not-found"};function wo(){return(wo=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithPhoneNumber",Fn(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Xo)})).apply(this,arguments)}class Dr extends Gn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Dr({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Dr({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Qo(v,f){return Yi.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Ji(v,f){return bo.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ga(v,f){return wo.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:C,verificationCode:U}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:C,code:U}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:C,phoneNumber:U,temporaryProof:X}=f;return C||g||U||X?new Dr({verificationId:g,verificationCode:C,phoneNumber:U,temporaryProof:X}):null}}class ls{constructor(f){var g,C,U,X,Ce,ze;const xt=(0,Y.zd)((0,Y.pd)(f)),qt=null!==(g=xt.apiKey)&&void 0!==g?g:null,gn=null!==(C=xt.oobCode)&&void 0!==C?C:null,cn=function Fo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=xt.mode)&&void 0!==U?U:null);De(qt&&gn&&cn,"argument-error"),this.apiKey=qt,this.operation=cn,this.code=gn,this.continueUrl=null!==(X=xt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(Ce=xt.languageCode)&&void 0!==Ce?Ce:null,this.tenantId=null!==(ze=xt.tenantId)&&void 0!==ze?ze:null}static parseLink(f){const g=function no(v){const f=(0,Y.zd)((0,Y.pd)(v)).link,g=f?(0,Y.zd)((0,Y.pd)(f)).deep_link_id:null,C=(0,Y.zd)((0,Y.pd)(v)).deep_link_id;return(C?(0,Y.zd)((0,Y.pd)(C)).link:null)||C||g||f||v}(f);try{return new ls(g)}catch{return null}}}let ni=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,C){return Ns._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const U=ls.parseLink(C);return De(U,"argument-error"),Ns._fromEmailAndCode(g,U.code,U.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Qi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class pr extends Qi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xs extends pr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return De("providerId"in g&&"signInMethod"in g,"argument-error"),di._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return De(f.idToken||f.accessToken,"argument-error"),di._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:U,pendingToken:X,nonce:Ce,providerId:ze}=f;if(!C&&!U&&!g&&!X||!ze)return null;try{return new xs(ze)._credential({idToken:g,accessToken:C,nonce:Ce,pendingToken:X})}catch{return null}}}let Ms=(()=>{class v extends pr{constructor(){super("facebook.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Os=(()=>{class v extends pr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:U}=g;if(!C&&!U)return null;try{return v.credential(C,U)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ea=(()=>{class v extends pr{constructor(){super("github.com")}static credential(g){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class hi extends Gn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Er(f,this.buildRequest())}_linkToIdToken(f,g){const C=this.buildRequest();return C.idToken=g,Er(f,C)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Er(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:C,signInMethod:U,pendingToken:X}=g;return C&&U&&X&&C===U?new hi(C,X):null}static _create(f,g){return new hi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sr extends Qi{constructor(f){De(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Sr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Sr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=hi.fromJSON(f);return De(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:C}=f;if(!g||!C)return null;try{return hi._create(C,g)}catch{return null}}}let Si=(()=>{class v extends pr{constructor(){super("twitter.com")}static credential(g,C){return di._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:U}=g;if(!C||!U)return null;try{return v.credential(C,U)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function io(v,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signUp",Fn(v,f))})).apply(this,arguments)}class ii{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,C,U=!1){return(0,b.Z)(function*(){const X=yield le._fromIdTokenResponse(f,C,U),Ce=Lo(C);return new ii({user:X,providerId:Ce,_tokenResponse:C,operationType:g})})()}static _forOperation(f,g,C){return(0,b.Z)(function*(){yield f._updateTokensIfNecessary(C,!0);const U=Lo(C);return new ii({user:f,providerId:U,_tokenResponse:C,operationType:g})})()}}function Lo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ks(){return(ks=(0,b.Z)(function*(v){var f;const g=dn(v);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ii({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield io(g,{returnSecureToken:!0}),U=yield ii._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(U.user),U})).apply(this,arguments)}class Kr extends Y.ZR{constructor(f,g,C,U){var X;super(g.code,g.message),this.operationType=C,this.user=U,Object.setPrototypeOf(this,Kr.prototype),this.customData={appName:f.name,tenantId:null!==(X=f.tenantId)&&void 0!==X?X:void 0,_serverResponse:g.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(f,g,C,U){return new Kr(f,g,C,U)}}function ws(v,f,g,C){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?Kr._fromErrorAndOperation(v,X,f,C):X})}function Gr(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Cs(){return(Cs=(0,b.Z)(function*(v,f){const g=(0,Y.m9)(v);yield q(!0,g,f);const{providerUserInfo:C}=yield fn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),U=Gr(C||[]);return g.providerData=g.providerData.filter(X=>U.has(X.providerId)),U.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Xn(v,f){return P.apply(this,arguments)}function P(){return(P=(0,b.Z)(function*(v,f,g=!1){const C=yield Cn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return ii._forOperation(v,"link",C)})).apply(this,arguments)}function q(v,f,g){return R.apply(this,arguments)}function R(){return(R=(0,b.Z)(function*(v,f,g){yield Jn(f);const U=!1===v?"provider-already-linked":"no-such-provider";De(Gr(f.providerData).has(g)===v,f.auth,U)})).apply(this,arguments)}function J(v,f){return ge.apply(this,arguments)}function ge(){return(ge=(0,b.Z)(function*(v,f,g=!1){const{auth:C}=v,U="reauthenticate";try{const X=yield Cn(v,ws(C,U,f,v),g);De(X.idToken,C,"internal-error");const Ce=Ye(X.idToken);De(Ce,C,"internal-error");const{sub:ze}=Ce;return De(v.uid===ze,C,"user-mismatch"),ii._forOperation(v,U,X)}catch(X){throw"auth/user-not-found"===(null==X?void 0:X.code)&&Je(C,"user-mismatch"),X}})).apply(this,arguments)}function $e(v,f){return it.apply(this,arguments)}function it(){return(it=(0,b.Z)(function*(v,f,g=!1){const C="signIn",U=yield ws(v,C,f),X=yield ii._fromIdTokenResponse(v,C,U);return g||(yield v._updateCurrentUser(X.user)),X})).apply(this,arguments)}function Et(v,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,b.Z)(function*(v,f){return $e(dn(v),f)})).apply(this,arguments)}function Sn(v,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,b.Z)(function*(v,f){const g=(0,Y.m9)(v);return yield q(!1,g,f.providerId),Xn(g,f)})).apply(this,arguments)}function An(v,f){return dr.apply(this,arguments)}function dr(){return(dr=(0,b.Z)(function*(v,f){return J((0,Y.m9)(v),f)})).apply(this,arguments)}function cr(v,f){return ur.apply(this,arguments)}function ur(){return(ur=(0,b.Z)(function*(v,f){return br(v,"POST","/v1/accounts:signInWithCustomToken",Fn(v,f))})).apply(this,arguments)}function Yr(){return(Yr=(0,b.Z)(function*(v,f){const g=dn(v),C=yield cr(g,{token:f,returnSecureToken:!0}),U=yield ii._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(U.user),U})).apply(this,arguments)}class zt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?cs._fromServerResponse(f,g):Je(f,"internal-error")}}class cs extends zt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new cs(g)}}function Rs(v,f,g){var C;De((null===(C=g.url)||void 0===C?void 0:C.length)>0,v,"invalid-continue-uri"),De(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(De(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(De(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ps(){return(Ps=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v),U={requestType:"PASSWORD_RESET",email:f};g&&Rs(C,U,g),yield kr(C,U)})).apply(this,arguments)}function O(){return(O=(0,b.Z)(function*(v,f,g){yield Rn((0,Y.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function H(){return(H=(0,b.Z)(function*(v,f){yield jn((0,Y.m9)(v),{oobCode:f})})).apply(this,arguments)}function Fe(v,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,b.Z)(function*(v,f){const g=(0,Y.m9)(v),C=yield Rn(g,{oobCode:f}),U=C.requestType;switch(De(U,g,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(C.mfaInfo,g,"internal-error");default:De(C.email,g,"internal-error")}let X=null;return C.mfaInfo&&(X=zt._fromServerResponse(dn(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:X},operation:U}})).apply(this,arguments)}function si(){return(si=(0,b.Z)(function*(v,f){const{data:g}=yield Fe((0,Y.m9)(v),f);return g.email})).apply(this,arguments)}function oi(){return(oi=(0,b.Z)(function*(v,f,g){const C=dn(v),U=yield io(C,{returnSecureToken:!0,email:f,password:g}),X=yield ii._fromIdTokenResponse(C,"signIn",U);return yield C._updateCurrentUser(X.user),X})).apply(this,arguments)}function ma(){return(ma=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v),U={requestType:"EMAIL_SIGNIN",email:f};De(g.handleCodeInApp,C,"argument-error"),g&&Rs(C,U,g),yield ti(C,U)})).apply(this,arguments)}function so(){return(so=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v),U=ni.credentialWithLink(f,g||Jt());return De(U._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Et(C,U)})).apply(this,arguments)}function Ni(v,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:createAuthUri",Fn(v,f))})).apply(this,arguments)}function Do(){return(Do=(0,b.Z)(function*(v,f){const C={identifier:f,continueUri:In()?Jt():"http://localhost"},{signinMethods:U}=yield Ni((0,Y.m9)(v),C);return U||[]})).apply(this,arguments)}function _a(){return(_a=(0,b.Z)(function*(v,f){const g=(0,Y.m9)(v),U={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&Rs(g.auth,U,f);const{email:X}=yield vs(g.auth,U);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function ya(){return(ya=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&Rs(C.auth,X,g);const{email:Ce}=yield vo(C.auth,X);Ce!==v.email&&(yield v.reload())})).apply(this,arguments)}function va(v,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,b.Z)(function*(v,f){return _n(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Io(){return(Io=(0,b.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const C=(0,Y.m9)(v),X={idToken:yield C.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Ce=yield Cn(C,va(C.auth,X));C.displayName=Ce.displayName||null,C.photoURL=Ce.photoUrl||null;const ze=C.providerData.find(({providerId:xt})=>"password"===xt);ze&&(ze.displayName=C.displayName,ze.photoURL=C.photoURL),yield C._updateTokensIfNecessary(Ce)})).apply(this,arguments)}function oo(v,f,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,b.Z)(function*(v,f,g){const{auth:C}=v,X={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(X.email=f),g&&(X.password=g);const Ce=yield Cn(v,Bi(C,X));yield v._updateTokensIfNecessary(Ce,!0)})).apply(this,arguments)}class sa{constructor(f,g,C={}){this.isNewUser=f,this.providerId=g,this.profile=C}}class oa extends sa{constructor(f,g,C,U){super(f,g,C),this.username=U}}class tl extends sa{constructor(f,g){super(f,"facebook.com",g)}}class Uo extends oa{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Yl extends sa{constructor(f,g){super(f,"google.com",g)}}class nl extends oa{constructor(f,g,C){super(f,"twitter.com",g,C)}}function Hi(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ba(v){var f,g;if(!v)return null;const{providerId:C}=v,U=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},X=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!C&&(null==v?void 0:v.idToken)){const Ce=null===(g=null===(f=Ye(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Ce)return new sa(X,"anonymous"!==Ce&&"custom"!==Ce?Ce:null)}if(!C)return null;switch(C){case"facebook.com":return new tl(X,U);case"github.com":return new Uo(X,U);case"google.com":return new Yl(X,U);case"twitter.com":return new nl(X,U,v.screenName||null);case"custom":case"anonymous":return new sa(X,null);default:return new sa(X,C,U)}}(g)}class ds{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ds("enroll",f)}static _fromMfaPendingCredential(f){return new ds("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,C;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ds._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(C=f.multiFactorSession)||void 0===C?void 0:C.idToken)return ds._fromIdtoken(f.multiFactorSession.idToken)}return null}}class qs{constructor(f,g,C){this.session=f,this.hints=g,this.signInResolver=C}static _fromError(f,g){const C=dn(f),U=g.customData._serverResponse,X=(U.mfaInfo||[]).map(ze=>zt._fromServerResponse(C,ze));De(U.mfaPendingCredential,C,"internal-error");const Ce=ds._fromMfaPendingCredential(U.mfaPendingCredential);return new qs(Ce,X,function(){var ze=(0,b.Z)(function*(xt){const qt=yield xt._process(C,Ce);delete U.mfaInfo,delete U.mfaPendingCredential;const gn=Object.assign(Object.assign({},U),{idToken:qt.idToken,refreshToken:qt.refreshToken});switch(g.operationType){case"signIn":const cn=yield ii._fromIdTokenResponse(C,g.operationType,gn);return yield C._updateCurrentUser(cn.user),cn;case"reauthenticate":return De(g.user,C,"internal-error"),ii._forOperation(g.user,g.operationType,gn);default:Je(C,"internal-error")}});return function(xt){return ze.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,b.Z)(function*(){return g.signInResolver(f)})()}}function Jr(v,f){return _n(v,"POST","/v2/accounts/mfaEnrollment:start",Fn(v,f))}class es{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>zt._fromServerResponse(f.auth,C)))})}static _fromUser(f){return new es(f)}getSession(){var f=this;return(0,b.Z)(function*(){return ds._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var C=this;return(0,b.Z)(function*(){const U=f,X=yield C.getSession(),Ce=yield Cn(C.user,U._process(C.user.auth,X,g));return yield C.user._updateTokensIfNecessary(Ce),C.user.reload()})()}unenroll(f){var g=this;return(0,b.Z)(function*(){const C="string"==typeof f?f:f.uid,U=yield g.user.getIdToken(),X=yield Cn(g.user,function Ql(v,f){return _n(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Fn(v,f))}(g.user.auth,{idToken:U,mfaEnrollmentId:C}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Ce})=>Ce!==C),yield g.user._updateTokensIfNecessary(X);try{yield g.user.reload()}catch(Ce){if("auth/user-token-expired"!==Ce.code)throw Ce}})()}}const gi=new WeakMap,fs="__sak";class ao{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(fs,"1"),this.storage.removeItem(fs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const bi=(()=>{class v extends ao{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ls(){const v=(0,Y.z$)();return xe(v)||ir(v)}()&&function on(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Br(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const U=this.storage.getItem(C),X=this.localCache[C];U!==X&&g(C,X,U)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys((ze,xt,qt)=>{this.notifyListeners(ze,qt)});const U=g.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ze=this.storage.getItem(U);if(g.newValue!==ze)null!==g.newValue?this.storage.setItem(U,g.newValue):this.storage.removeItem(U);else if(this.localCache[U]===g.newValue&&!C)return}const X=()=>{const ze=this.storage.getItem(U);!C&&this.localCache[U]===ze||this.notifyListeners(U,ze)},Ce=this.storage.getItem(U);!function ln(){return(0,Y.w1)()&&10===document.documentMode}()||Ce===g.newValue||g.newValue===g.oldValue?X():setTimeout(X,10)}notifyListeners(g,C){this.localCache[g]=C;const U=this.listeners[g];if(U)for(const X of Array.from(U))X(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var U=()=>super._set,X=this;return(0,b.Z)(function*(){yield U().call(X,g,C),X.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,U=this;return(0,b.Z)(function*(){const X=yield C().call(U,g);return U.localCache[g]=JSON.stringify(X),X})()}_remove(g){var C=()=>super._remove,U=this;return(0,b.Z)(function*(){yield C().call(U,g),delete U.localCache[g]})()}}return v.type="LOCAL",v})(),S=(()=>{class v extends ao{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return v.type="SESSION",v})();let ee=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(X=>X.isListeningto(g));if(C)return C;const U=new v(g);return this.receivers.push(U),U}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,b.Z)(function*(){const U=g,{eventId:X,eventType:Ce,data:ze}=U.data,xt=C.handlersMap[Ce];if(!(null==xt?void 0:xt.size))return;U.ports[0].postMessage({status:"ack",eventId:X,eventType:Ce});const qt=Array.from(xt).map(function(){var cn=(0,b.Z)(function*(Ei){return Ei(U.origin,ze)});return function(Ei){return cn.apply(this,arguments)}}()),gn=yield function W(v){return Promise.all(v.map(function(){var f=(0,b.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return f.apply(this,arguments)}}()))}(qt);U.ports[0].postMessage({status:"done",eventId:X,eventType:Ce,response:gn})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function st(v="",f=10){let g="";for(let C=0;C<f;C++)g+=Math.floor(10*Math.random());return v+g}class ht{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,C=50){var U=this;return(0,b.Z)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let Ce,ze;return new Promise((xt,qt)=>{const gn=st("",20);X.port1.start();const cn=setTimeout(()=>{qt(new Error("unsupported_event"))},C);ze={messageChannel:X,onMessage(Ei){const $o=Ei;if($o.data.eventId===gn)switch($o.data.status){case"ack":clearTimeout(cn),Ce=setTimeout(()=>{qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ce),xt($o.data.response);break;default:clearTimeout(cn),clearTimeout(Ce),qt(new Error("invalid_response"))}}},U.handlers.add(ze),X.port1.addEventListener("message",ze.onMessage),U.target.postMessage({eventType:f,eventId:gn,data:g},[X.port2])}).finally(()=>{ze&&U.removeMessageHandler(ze)})})()}}function hn(){return window}function hr(){return typeof hn().WorkerGlobalScope<"u"&&"function"==typeof hn().importScripts}function ps(){return(ps=(0,b.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const A="firebaseLocalStorageDb",w="firebaseLocalStorage",k="fbase_key";class V{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function K(v,f){return v.transaction([w],f?"readwrite":"readonly").objectStore(w)}function de(){const v=indexedDB.open(A,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const C=v.result;try{C.createObjectStore(w,{keyPath:k})}catch(U){g(U)}}),v.addEventListener("success",(0,b.Z)(function*(){const C=v.result;C.objectStoreNames.contains(w)?f(C):(C.close(),yield function re(){const v=indexedDB.deleteDatabase(A);return new V(v).toPromise()}(),f(yield de()))}))})}function nt(v,f,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,b.Z)(function*(v,f,g){const C=K(v,!0).put({[k]:f,value:g});return new V(C).toPromise()})).apply(this,arguments)}function Kt(){return(Kt=(0,b.Z)(function*(v,f){const g=K(v,!1).get(f),C=yield new V(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function $n(v,f){const g=K(v,!0).delete(f);return new V(g).toPromise()}const Ar=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,b.Z)(function*(){return g.db||(g.db=yield de()),g.db})()}_withRetries(g){var C=this;return(0,b.Z)(function*(){let U=0;for(;;)try{const X=yield C._openDb();return yield g(X)}catch(X){if(U++>3)throw X;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,b.Z)(function*(){return hr()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,b.Z)(function*(){g.receiver=ee._getInstance(function Mu(){return hr()?self:null}()),g.receiver._subscribe("keyChanged",function(){var C=(0,b.Z)(function*(U,X){return{keyProcessed:(yield g._poll()).includes(X.key)}});return function(U,X){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,b.Z)(function*(U,X){return["keyChanged"]});return function(U,X){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,b.Z)(function*(){var C,U;if(g.activeServiceWorker=yield function lo(){return ps.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ht(g.activeServiceWorker);const X=yield g.sender._send("ping",{},800);!X||(null===(C=X[0])||void 0===C?void 0:C.fulfilled)&&(null===(U=X[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,b.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Xd(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const g=yield de();return yield nt(g,fs,"1"),yield $n(g,fs),!0}catch{}return!1})()}_withPendingWrite(g){var C=this;return(0,b.Z)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var U=this;return(0,b.Z)(function*(){return U._withPendingWrite((0,b.Z)(function*(){return yield U._withRetries(X=>nt(X,g,C)),U.localCache[g]=C,U.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,b.Z)(function*(){const U=yield C._withRetries(X=>function Zn(v,f){return Kt.apply(this,arguments)}(X,g));return C.localCache[g]=U,U})()}_remove(g){var C=this;return(0,b.Z)(function*(){return C._withPendingWrite((0,b.Z)(function*(){return yield C._withRetries(U=>$n(U,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,b.Z)(function*(){const C=yield g._withRetries(Ce=>{const ze=K(Ce,!1).getAll();return new V(ze).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const U=[],X=new Set;for(const{fbase_key:Ce,value:ze}of C)X.add(Ce),JSON.stringify(g.localCache[Ce])!==JSON.stringify(ze)&&(g.notifyListeners(Ce,ze),U.push(Ce));for(const Ce of Object.keys(g.localCache))g.localCache[Ce]&&!X.has(Ce)&&(g.notifyListeners(Ce,null),U.push(Ce));return U})()}notifyListeners(g,C){this.localCache[g]=C;const U=this.listeners[g];if(U)for(const X of Array.from(U))X(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Xl(v,f){return _n(v,"POST","/v2/accounts/mfaSignIn:start",Fn(v,f))}function Go(){return(Go=(0,b.Z)(function*(v){return(yield _n(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function il(v){return new Promise((f,g)=>{const C=document.createElement("script");C.setAttribute("src",v),C.onload=f,C.onerror=U=>{const X=We("internal-error");X.customData=U,g(X)},C.type="text/javascript",C.charset="UTF-8",function Ou(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(C)})}function Nl(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Es=1e12;class eh{constructor(f){this.auth=f,this.counter=Es,this._widgets=new Map}render(f,g){const C=this.counter;return this._widgets.set(C,new ec(f,this.auth.name,g||{})),this.counter++,C}reset(f){var g;const C=f||Es;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Es))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,b.Z)(function*(){var C;return null===(C=g._widgets.get(f||Es))||void 0===C||C.execute(),""})()}}class ec{constructor(f,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof f?document.getElementById(f):f;De(U,"argument-error",{appName:g}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sl(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<v;C++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fc=Nl("rcb"),Gf=new Tn(3e4,6e4);class th{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!hn().grecaptcha}load(f,g=""){return De(function $f(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(hn().grecaptcha):new Promise((C,U)=>{const X=hn().setTimeout(()=>{U(We(f,"network-request-failed"))},Gf.get());hn()[Fc]=()=>{hn().clearTimeout(X),delete hn()[Fc];const ze=hn().grecaptcha;if(!ze)return void U(We(f,"internal-error"));const xt=ze.render;ze.render=(qt,gn)=>{const cn=xt(qt,gn);return this.counter++,cn},this.hostLanguage=g,C(ze)},il(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Fc,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(X),U(We(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!hn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nh{load(f){return(0,b.Z)(function*(){return new eh(f)})()}clearedOneInstance(){}}const rh="recaptcha",Wf={theme:"light",type:"image"};class ih{constructor(f,g=Object.assign({},Wf),C){this.parameters=g,this.type=rh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(C),this.isInvisible="invisible"===this.parameters.size,De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof f?document.getElementById(f):f;De(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nh:new th,this.validateStartingState()}verify(){var f=this;return(0,b.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),C=f.getAssertedRecaptcha();return C.getResponse(g)||new Promise(X=>{const Ce=ze=>{!ze||(f.tokenChangeListeners.delete(Ce),X(ze))};f.tokenChangeListeners.add(Ce),f.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof f)f(g);else if("string"==typeof f){const C=hn()[f];"function"==typeof C&&C(g)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,b.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,b.Z)(function*(){De(In()&&!hr(),f.auth,"internal-error"),yield function zf(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Al(v){return Go.apply(this,arguments)}(f.auth);De(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ol{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Dr._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function er(){return(er=(0,b.Z)(function*(v,f,g){const C=dn(v),U=yield Bs(C,f,(0,Y.m9)(g));return new ol(U,X=>Et(C,X))})).apply(this,arguments)}function Ml(){return(Ml=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v);yield q(!1,C,"phone");const U=yield Bs(C.auth,f,(0,Y.m9)(g));return new ol(U,X=>Sn(C,X))})).apply(this,arguments)}function ku(){return(ku=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v),U=yield Bs(C.auth,f,(0,Y.m9)(g));return new ol(U,X=>An(C,X))})).apply(this,arguments)}function Bs(v,f,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,b.Z)(function*(v,f,g){var C;const U=yield g.verify();try{let X;if(De("string"==typeof U,v,"argument-error"),De(g.type===rh,v,"argument-error"),X="string"==typeof f?{phoneNumber:f}:f,"session"in X){const Ce=X.session;if("phoneNumber"in X)return De("enroll"===Ce.type,v,"internal-error"),(yield Jr(v,{idToken:Ce.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{De("signin"===Ce.type,v,"internal-error");const ze=(null===(C=X.multiFactorHint)||void 0===C?void 0:C.uid)||X.multiFactorUid;return De(ze,v,"missing-multi-factor-info"),(yield Xl(v,{mfaPendingCredential:Ce.credential,mfaEnrollmentId:ze,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ce}=yield Ro(v,{phoneNumber:X.phoneNumber,recaptchaToken:U});return Ce}}finally{g._reset()}})).apply(this,arguments)}function la(){return(la=(0,b.Z)(function*(v,f){yield Xn((0,Y.m9)(v),f)})).apply(this,arguments)}let co=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=dn(g)}verifyPhoneNumber(g,C){return Bs(this.auth,g,(0,Y.m9)(C))}static credential(g,C){return Dr._fromVerification(g,C)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:U}=g;return C&&U?Dr._fromTokenResponse(C,U):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function So(v,f){return f?Ee(f):(De(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ll extends Gn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Er(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Er(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Er(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Bc(v){return $e(v.auth,new ll(v),v.bypassAuthState)}function Ru(v){const{auth:f,user:g}=v;return De(g,f,"internal-error"),J(g,new ll(v),v.bypassAuthState)}function sh(v){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,b.Z)(function*(v){const{auth:f,user:g}=v;return De(g,f,"internal-error"),Xn(g,new ll(v),v.bypassAuthState)})).apply(this,arguments)}class Zs{constructor(f,g,C,U,X=!1){this.auth=f,this.resolver=C,this.user=U,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,b.Z)(function*(C,U){f.pendingPromise={resolve:C,reject:U};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(X){f.reject(X)}});return function(C,U){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,b.Z)(function*(){const{urlResponse:C,sessionId:U,postBody:X,tenantId:Ce,error:ze,type:xt}=f;if(ze)return void g.reject(ze);const qt={auth:g.auth,requestUri:C,sessionId:U,tenantId:Ce||void 0,postBody:X||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(xt)(qt))}catch(gn){g.reject(gn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Bc;case"linkViaPopup":case"linkViaRedirect":return sh;case"reauthViaPopup":case"reauthViaRedirect":return Ru;default:Je(this.auth,"internal-error")}}resolve(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Uc=new Tn(2e3,1e4);function oh(){return(oh=(0,b.Z)(function*(v,f,g){const C=dn(v);pt(v,f,Qi);const U=So(C,g);return new $r(C,"signInViaPopup",f,U).executeNotNull()})).apply(this,arguments)}function Ol(){return(Ol=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v);pt(C.auth,f,Qi);const U=So(C.auth,g);return new $r(C.auth,"reauthViaPopup",f,U,C).executeNotNull()})).apply(this,arguments)}function Mi(){return(Mi=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v);pt(C.auth,f,Qi);const U=So(C.auth,g);return new $r(C.auth,"linkViaPopup",f,U,C).executeNotNull()})).apply(this,arguments)}let $r=(()=>{class v extends Zs{constructor(g,C,U,X,Ce){super(g,C,X,Ce),this.provider=U,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,b.Z)(function*(){const C=yield g.execute();return De(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,b.Z)(function*(){Le(1===g.filter.length,"Popup operations only handle one event");const C=st();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(U=>{g.reject(U)}),g.resolver._isIframeWebStorageSupported(g.auth,U=>{U||g.reject(We(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(We(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,U;this.pollId=(null===(U=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===U?void 0:U.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(We(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Uc.get())};g()}}return v.currentPopupAction=null,v})();const uo=new Map;class ah extends Zs{constructor(f,g,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,b.Z)(function*(){let C=uo.get(g.auth._key());if(!C){try{const X=(yield function Fu(v,f){return Hc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;C=()=>Promise.resolve(X)}catch(U){C=()=>Promise.reject(U)}uo.set(g.auth._key(),C)}return g.bypassAuthState||uo.set(g.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,C=this;return(0,b.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(C,f);if("unknown"!==f.type){if(f.eventId){const U=yield C.auth._redirectUserForId(f.eventId);if(U)return C.user=U,g().call(C,f);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function Hc(){return(Hc=(0,b.Z)(function*(v,f){const g=F(f),C=x(v);if(!(yield C._isAvailable()))return!1;const U="true"===(yield C._get(g));return yield C._remove(g),U})).apply(this,arguments)}function ul(v,f){return nc.apply(this,arguments)}function nc(){return(nc=(0,b.Z)(function*(v,f){return x(v)._set(F(f),"true")})).apply(this,arguments)}function x(v){return Ee(v._redirectPersistence)}function F(v){return qe("pendingRedirect",v.config.apiKey,v.name)}function Oe(){return(Oe=(0,b.Z)(function*(v,f,g){const C=dn(v);pt(v,f,Qi);const U=So(C,g);return yield ul(U,C),U._openRedirect(C,f,"signInViaRedirect")})).apply(this,arguments)}function Ut(){return(Ut=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v);pt(C.auth,f,Qi);const U=So(C.auth,g);yield ul(U,C.auth);const X=yield Gc(C);return U._openRedirect(C.auth,f,"reauthViaRedirect",X)})).apply(this,arguments)}function Wn(){return(Wn=(0,b.Z)(function*(v,f,g){const C=(0,Y.m9)(v);pt(C.auth,f,Qi);const U=So(C.auth,g);yield q(!1,C,f.providerId),yield ul(U,C.auth);const X=yield Gc(C);return U._openRedirect(C.auth,f,"linkViaRedirect",X)})).apply(this,arguments)}function Gi(){return(Gi=(0,b.Z)(function*(v,f){return yield dn(v)._initializationPromise,Ci(v,f,!1)})).apply(this,arguments)}function Ci(v,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,b.Z)(function*(v,f,g=!1){const C=dn(v),U=So(C,f),Ce=yield new ah(C,U,g).execute();return Ce&&!g&&(delete Ce.user._redirectEventId,yield C._persistUserIfCurrent(Ce.user),yield C._setRedirectUser(null,f)),Ce})).apply(this,arguments)}function Gc(v){return ca.apply(this,arguments)}function ca(){return(ca=(0,b.Z)(function*(v){const f=st(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ja{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(g=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function qf(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kl(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var C;if(f.error&&!kl(f)){const U=(null===(C=f.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(We(this.auth,U))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const C=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dl(f))}saveEventToCache(f){this.cachedEventUids.add(dl(f)),this.lastProcessedEventTime=Date.now()}}function dl(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function kl({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function ic(v){return sc.apply(this,arguments)}function sc(){return(sc=(0,b.Z)(function*(v,f={}){return _n(v,"GET","/v1/projects",f)})).apply(this,arguments)}const $c=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ng=/^https?/;function hl(){return(hl=(0,b.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield ic(v);for(const g of f)try{if(fl(g))return}catch{}Je(v,"unauthorized-domain")})).apply(this,arguments)}function fl(v){const f=Jt(),{protocol:g,hostname:C}=new URL(f);if(v.startsWith("chrome-extension://")){const Ce=new URL(v);return""===Ce.hostname&&""===C?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Ce.hostname===C}if(!Ng.test(g))return!1;if($c.test(v))return C===v;const U=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(C)}const lh=new Tn(3e4,6e4);function xg(){const v=hn().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Lu=null;function J_(v){return Lu=Lu||function ch(v){return new Promise((f,g)=>{var C,U,X;function Ce(){xg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{xg(),g(We(v,"network-request-failed"))},timeout:lh.get()})}if(null===(U=null===(C=hn().gapi)||void 0===C?void 0:C.iframes)||void 0===U?void 0:U.Iframe)f(gapi.iframes.getContext());else{if(!(null===(X=hn().gapi)||void 0===X?void 0:X.load)){const ze=Nl("iframefcb");return hn()[ze]=()=>{gapi.load?Ce():g(We(v,"network-request-failed"))},il(`https://apis.google.com/js/api.js?onload=${ze}`).catch(xt=>g(xt))}Ce()}}).catch(f=>{throw Lu=null,f})}(v),Lu}const Bu=new Tn(5e3,15e3),Wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ha(v){const f=v.config;De(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?xn(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,C={apiKey:f.apiKey,appName:v.name,v:ve.SDK_VERSION},U=zc.get(v.config.apiHost);U&&(C.eid=U);const X=v._getFrameworks();return X.length&&(C.fw=X.join(",")),`${g}?${(0,Y.xO)(C).slice(1)}`}function Yf(){return Yf=(0,b.Z)(function*(v){const f=yield J_(v),g=hn().gapi;return De(g,v,"internal-error"),f.open({where:document.body,url:Ha(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wc,dontclear:!0},C=>new Promise(function(){var U=(0,b.Z)(function*(X,Ce){yield C.restyle({setHideOnLeave:!1});const ze=We(v,"network-request-failed"),xt=hn().setTimeout(()=>{Ce(ze)},Bu.get());function qt(){hn().clearTimeout(xt),X(C)}C.ping(qt).then(qt,()=>{Ce(ze)})});return function(X,Ce){return U.apply(this,arguments)}}()))}),Yf.apply(this,arguments)}const Og={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ac(v,f,g,C,U,X){De(v.config.authDomain,v,"auth-domain-config-required"),De(v.config.apiKey,v,"invalid-api-key");const Ce={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:C,v:ve.SDK_VERSION,eventId:U};if(f instanceof Qi){f.setDefaultLanguage(v.languageCode),Ce.providerId=f.providerId||"",(0,Y.xb)(f.getCustomParameters())||(Ce.customParameters=JSON.stringify(f.getCustomParameters()));for(const[xt,qt]of Object.entries(X||{}))Ce[xt]=qt}if(f instanceof pr){const xt=f.getScopes().filter(qt=>""!==qt);xt.length>0&&(Ce.scopes=xt.join(","))}v.tenantId&&(Ce.tid=v.tenantId);const ze=Ce;for(const xt of Object.keys(ze))void 0===ze[xt]&&delete ze[xt];return`${function lc({config:v}){return v.emulator?xn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,Y.xO)(ze).slice(1)}`}const ua="webStorageSupport";class fh extends class Hu{constructor(f){this.factorId=f}_process(f,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,C);case"signin":return this._finalizeSignIn(f,g.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fh(f)}_finalizeEnroll(f,g,C){return function aa(v,f){return _n(v,"POST","/v2/accounts/mfaEnrollment:finalize",Fn(v,f))}(f,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Ho(v,f){return _n(v,"POST","/v2/accounts/mfaSignIn:finalize",Fn(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let qc=(()=>{class v{constructor(){}static assertion(g){return fh._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Pg="@firebase/auth",Q_="0.19.11";class Rl{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,b.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(C=>{var U;f((null===(U=C)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ga(){return window}function gl(){return(gl=(0,b.Z)(function*(v,f,g){var C;const{BuildInfo:U}=Ga();Le(f.sessionId,"AuthEvent did not contain a session ID");const X=yield _b(f.sessionId),Ce={};return ir()?Ce.ibi=U.packageName:Un()?Ce.apn=U.packageName:Je(v,"operation-not-supported-in-this-environment"),U.displayName&&(Ce.appDisplayName=U.displayName),Ce.sessionId=X,ac(v,g,f.type,void 0,null!==(C=f.eventId)&&void 0!==C?C:void 0,Ce)})).apply(this,arguments)}function da(){return(da=(0,b.Z)(function*(v){const{BuildInfo:f}=Ga(),g={};ir()?g.iosBundleId=f.packageName:Un()?g.androidPackageName=f.packageName:Je(v,"operation-not-supported-in-this-environment"),yield ic(v,g)})).apply(this,arguments)}function gh(){return(gh=(0,b.Z)(function*(v,f,g){const{cordova:C}=Ga();let U=()=>{};try{yield new Promise((X,Ce)=>{let ze=null;function xt(){var cn;X();const Ei=null===(cn=C.plugins.browsertab)||void 0===cn?void 0:cn.close;"function"==typeof Ei&&Ei(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function qt(){ze||(ze=window.setTimeout(()=>{Ce(We(v,"redirect-cancelled-by-user"))},2e3))}function gn(){"visible"===(null==document?void 0:document.visibilityState)&&qt()}f.addPassiveListener(xt),document.addEventListener("resume",qt,!1),Un()&&document.addEventListener("visibilitychange",gn,!1),U=()=>{f.removePassiveListener(xt),document.removeEventListener("resume",qt,!1),document.removeEventListener("visibilitychange",gn,!1),ze&&window.clearTimeout(ze)}})}finally{U()}})).apply(this,arguments)}function _b(v){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,b.Z)(function*(v){const f=yb(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(U=>U.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function yb(v){if(Le(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let C=0;C<v.length;C++)g[C]=v.charCodeAt(C);return g}!function ph(v){(0,ve._registerComponent)(new ke.wA("auth",(f,{options:g})=>{const C=f.getProvider("app").getImmediate(),U=f.getProvider("heartbeat"),{apiKey:X,authDomain:Ce}=C.options;return((ze,xt)=>{De(X&&!X.includes(":"),"invalid-api-key",{appName:ze.name}),De(!(null==Ce?void 0:Ce.includes(":")),"argument-error",{appName:ze.name});const qt={apiKey:X,authDomain:Ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cr(v)},gn=new zi(ze,xt,qt);return function He(v,f){const g=(null==f?void 0:f.persistence)||[],C=(Array.isArray(g)?g:[g]).map(Ee);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(C,null==f?void 0:f.popupRedirectResolver)}(gn,g),gn})(C,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,C)=>{f.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new ke.wA("auth-internal",f=>{const g=dn(f.getProvider("auth").getImmediate());return new Rl(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(Pg,Q_,function pl(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,ve.registerVersion)(Pg,Q_,"esm2017")}("Browser");class cc extends ja{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,b.Z)(function*(){yield f.initPromise})()}}function Bg(v){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,b.Z)(function*(v){const f=yield np()._get(mh(v));return f&&(yield np()._remove(mh(v))),f})).apply(this,arguments)}function ty(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const C=Math.floor(Math.random()*f.length);v.push(f.charAt(C))}return v.join("")}function np(){return Ee(bi)}function mh(v){return qe("authEvent",v.config.apiKey,v.name)}function Wu(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...g]=v.split("?");return(0,Y.zd)(g.join("?"))}function ip(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:We("no-auth-event")}}function uc(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Zu(v=(0,Y.z$)()){return!("file:"!==uc()&&"ionic:"!==uc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ks(){try{const v=self.localStorage,f=st();if(v)return v.setItem(f,"1"),v.removeItem(f),!function _l(v=(0,Y.z$)()){return function ry(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function _h(v=(0,Y.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,Y.hl)()}catch{return _i()&&(0,Y.hl)()}return!1}function _i(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ku(){return(function qu(){return"http:"===uc()||"https:"===uc()}()||(0,Y.ru)()||Zu())&&!function ap(){return(0,Y.b$)()||(0,Y.UG)()}()&&Ks()&&!_i()}function lp(){return Zu()&&typeof document<"u"}function dc(){return(dc=(0,b.Z)(function*(){return!!lp()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Ao={LOCAL:"local",NONE:"none",SESSION:"session"},Yc=De,yh="persistence";function Yu(v){return Da.apply(this,arguments)}function Da(){return(Da=(0,b.Z)(function*(v){yield v._initializationPromise;const f=jg(),g=qe(yh,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function jg(){var v;try{return(null===(v=function cp(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const dp=De;class No{constructor(){this.browserResolver=Ee(class ju{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S,this._completeRedirectFn=Ci}_openPopup(f,g,C,U){var X=this;return(0,b.Z)(function*(){var Ce;Le(null===(Ce=X.eventManagers[f._key()])||void 0===Ce?void 0:Ce.manager,"_initialize() not called before _openPopup()");const ze=ac(f,g,C,Jt(),U);return function kg(v,f,g,C=500,U=600){const X=Math.max((window.screen.availHeight-U)/2,0).toString(),Ce=Math.max((window.screen.availWidth-C)/2,0).toString();let ze="";const xt=Object.assign(Object.assign({},Og),{width:C.toString(),height:U.toString(),top:X,left:Ce}),qt=(0,Y.z$)().toLowerCase();g&&(ze=Tr(qt)?"_blank":g),Wt(qt)&&(f=f||"http://localhost",xt.scrollbars="yes");const gn=Object.entries(xt).reduce((Ei,[$o,Xu])=>`${Ei}${$o}=${Xu},`,"");if(function sn(v=(0,Y.z$)()){var f;return ir(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(qt)&&"_self"!==ze)return function Uu(v,f){const g=document.createElement("a");g.href=v,g.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(f||"",ze),new uh(null);const cn=window.open(f||"",ze,gn);De(cn,v,"popup-blocked");try{cn.focus()}catch{}return new uh(cn)}(f,ze,st())})()}_openRedirect(f,g,C,U){var X=this;return(0,b.Z)(function*(){return yield X._originValidation(f),function wi(v){hn().location.href=v}(ac(f,g,C,Jt(),U)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:U,promise:X}=this.eventManagers[g];return U?Promise.resolve(U):(Le(X,"If manager is not set, promise should be"),X)}const C=this.initAndGetManager(f);return this.eventManagers[g]={promise:C},C.catch(()=>{delete this.eventManagers[g]}),C}initAndGetManager(f){var g=this;return(0,b.Z)(function*(){const C=yield function Mg(v){return Yf.apply(this,arguments)}(f),U=new ja(f);return C.register("authEvent",X=>(De(null==X?void 0:X.authEvent,f,"invalid-auth-event"),{status:U.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:U},g.iframes[f._key()]=C,U})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(ua,{type:ua},U=>{var X;const Ce=null===(X=null==U?void 0:U[0])||void 0===X?void 0:X[ua];void 0!==Ce&&g(!!Ce),Je(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ho(v){return hl.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Br()||xe()||ir()}}),this.cordovaResolver=Ee(class rp{constructor(){this._redirectPersistence=S,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ci}_initialize(f){var g=this;return(0,b.Z)(function*(){const C=f._key();let U=g.eventManagers.get(C);return U||(U=new cc(f),g.eventManagers.set(C,U),g.attachCallbackListeners(f,U)),U})()}_openPopup(f){Je(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,C,U){var X=this;return(0,b.Z)(function*(){!function ep(v){var f,g,C,U,X,Ce,ze,xt,qt,gn;const cn=Ga();De("function"==typeof(null===(f=null==cn?void 0:cn.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(typeof(null===(g=null==cn?void 0:cn.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(X=null===(U=null===(C=null==cn?void 0:cn.cordova)||void 0===C?void 0:C.plugins)||void 0===U?void 0:U.browsertab)||void 0===X?void 0:X.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(xt=null===(ze=null===(Ce=null==cn?void 0:cn.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===xt?void 0:xt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(gn=null===(qt=null==cn?void 0:cn.cordova)||void 0===qt?void 0:qt.InAppBrowser)||void 0===gn?void 0:gn.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Ce=yield X._initialize(f);yield Ce.initialized(),Ce.resetRedirect(),function rc(){uo.clear()}(),yield X._originValidation(f);const ze=function $a(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:ty(),postBody:null,tenantId:v.tenantId,error:We(v,"no-auth-event")}}(f,C,U);yield function ey(v,f){return np()._set(mh(v),f)}(f,ze);const xt=yield function mi(v,f,g){return gl.apply(this,arguments)}(f,ze,g),qt=yield function ml(v){const{cordova:f}=Ga();return new Promise(g=>{f.plugins.browsertab.isAvailable(C=>{let U=null;C?f.plugins.browsertab.openUrl(v):U=f.InAppBrowser.open(v,function vt(v=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(U)})})}(xt);return function Zc(v,f,g){return gh.apply(this,arguments)}(f,Ce,qt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Fg(v){return da.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:C,handleOpenURL:U,BuildInfo:X}=Ga(),Ce=setTimeout((0,b.Z)(function*(){yield Bg(f),g.onEvent(ip())}),500),ze=function(){var gn=(0,b.Z)(function*(cn){clearTimeout(Ce);const Ei=yield Bg(f);let $o=null;Ei&&(null==cn?void 0:cn.url)&&($o=function Kc(v,f){var g,C;const U=function $u(v){const f=Wu(v),g=f.link?decodeURIComponent(f.link):void 0,C=Wu(g).link,U=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Wu(U).link||U||C||g||v}(f);if(U.includes("/__/auth/callback")){const X=Wu(U),Ce=X.firebaseError?function Vg(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,ze=null===(C=null===(g=null==Ce?void 0:Ce.code)||void 0===g?void 0:g.split("auth/"))||void 0===C?void 0:C[1],xt=ze?We(ze):null;return xt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:xt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:U,postBody:null}}return null}(Ei,cn.url)),g.onEvent($o||ip())});return function(Ei){return gn.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,ze);const xt=U,qt=`${X.packageName.toLowerCase()}://`;Ga().handleOpenURL=function(){var gn=(0,b.Z)(function*(cn){if(cn.toLowerCase().startsWith(qt)&&ze({url:cn}),"function"==typeof xt)try{xt(cn)}catch(Ei){console.error(Ei)}});return function(cn){return gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=S,this._completeRedirectFn=Ci}_initialize(f){var g=this;return(0,b.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,C,U){var X=this;return(0,b.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(f,g,C,U)})()}_openRedirect(f,g,C,U){var X=this;return(0,b.Z)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(f,g,C,U)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return lp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return dp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,b.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Ys(){return dc.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function hp(v){return v.unwrap()}function Jc(v){return bh(v)}function bh(v){const{_tokenResponse:f}=v instanceof Y.ZR?v.customData:v;if(!f)return null;if(!(v instanceof Y.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return co.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let C;switch(g){case"google.com":C=Os;break;case"facebook.com":C=Ms;break;case"github.com":C=ea;break;case"twitter.com":C=Si;break;default:const{oauthIdToken:U,oauthAccessToken:X,oauthTokenSecret:Ce,pendingToken:ze,nonce:xt}=f;return X||Ce||U||ze?ze?g.startsWith("saml.")?hi._create(g,ze):di._fromParams({providerId:g,signInMethod:g,pendingToken:ze,idToken:U,accessToken:X}):new xs(g).credential({idToken:U,accessToken:X,rawNonce:xt}):null}return v instanceof Y.ZR?C.credentialFromError(v):C.credentialFromResult(v)}function ts(v,f){return f.catch(g=>{throw g instanceof Y.ZR&&function Hg(v,f){var g;const C=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Ju(v,function hs(v,f){var g;const C=(0,Y.m9)(v),U=f;return De(f.customData.operationType,C,"argument-error"),De(null===(g=U.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),qs._fromError(C,U)}(v,f));else if(C){const U=bh(f),X=f;U&&(X.credential=U,X.tenantId=C.tenantId||void 0,X.email=C.email||void 0,X.phoneNumber=C.phoneNumber||void 0)}}(v,g),g}).then(g=>{const U=g.user;return{operationType:g.operationType,credential:Jc(g),additionalUserInfo:Hi(g),user:Wa.getOrCreate(U)}})}function pp(v,f){return wh.apply(this,arguments)}function wh(){return(wh=(0,b.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:C=>ts(v,g.confirm(C))}})).apply(this,arguments)}class Ju{constructor(f,g){this.resolver=g,this.auth=function fp(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ts(hp(this.auth),this.resolver.resolveSignIn(f))}}class Wa{constructor(f){this._delegate=f,this.multiFactor=function To(v){const f=(0,Y.m9)(v);return gi.has(f)||gi.set(f,es._fromUser(f)),gi.get(f)}(f)}static getOrCreate(f){return Wa.USER_MAP.has(f)||Wa.USER_MAP.set(f,new Wa(f)),Wa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,b.Z)(function*(){return ts(g.auth,Sn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var C=this;return(0,b.Z)(function*(){return pp(C.auth,function al(v,f,g){return Ml.apply(this,arguments)}(C._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,b.Z)(function*(){return ts(g.auth,function Pu(v,f,g){return Mi.apply(this,arguments)}(g._delegate,f,No))})()}linkWithRedirect(f){var g=this;return(0,b.Z)(function*(){return yield Yu(dn(g.auth)),function Yt(v,f,g){return function Nn(v,f,g){return Wn.apply(this,arguments)}(v,f,g)}(g._delegate,f,No)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,b.Z)(function*(){return ts(g.auth,An(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return pp(this.auth,function Lc(v,f,g){return ku.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ts(this.auth,function Ca(v,f,g){return Ol.apply(this,arguments)}(this._delegate,f,No))}reauthenticateWithRedirect(f){var g=this;return(0,b.Z)(function*(){return yield Yu(dn(g.auth)),function je(v,f,g){return function mt(v,f,g){return Ut.apply(this,arguments)}(v,f,g)}(g._delegate,f,No)})()}sendEmailVerification(f){return function us(v,f){return _a.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,b.Z)(function*(){return yield function fi(v,f){return Cs.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function ra(v,f){return oo((0,Y.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function el(v,f){return oo((0,Y.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tc(v,f){return la.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function na(v,f){return Io.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function La(v,f,g){return ya.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wa.USER_MAP=new WeakMap;const Qc=De;let Qu=(()=>{class v{constructor(g,C){if(this.app=g,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:U}=g.options;Qc(U,"invalid-api-key",{appName:g.name}),Qc(U,"invalid-api-key",{appName:g.name});const X=typeof window<"u"?No:void 0;this._delegate=C.initialize({options:{persistence:Gg(U,g.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,C){!function ui(v,f,g){const C=dn(v);De(C._canInitEmulator,C,"emulator-config-failed"),De(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const U=!!(null==g?void 0:g.disableWarnings),X=tn(f),{host:Ce,port:ze}=function qr(v){const f=tn(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(C);if(U){const X=U[1];return{host:X,port:Qn(C.substr(X.length+1))}}{const[X,Ce]=C.split(":");return{host:X,port:Qn(Ce)}}}(f);C.config.emulator={url:`${X}//${Ce}${null===ze?"":`:${ze}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:Ce,port:ze,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function Or(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,C)}applyActionCode(g){return function M(v,f){return H.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Fe(this._delegate,g)}confirmPasswordReset(g,C){return function B(v,f,g){return O.apply(this,arguments)}(this._delegate,g,C)}createUserWithEmailAndPassword(g,C){var U=this;return(0,b.Z)(function*(){return ts(U._delegate,function Ai(v,f,g){return oi.apply(this,arguments)}(U._delegate,g,C))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Fa(v,f){return Do.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Xa(v,f){const g=ls.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,b.Z)(function*(){Qc(Ku(),g._delegate,"operation-not-supported-in-this-environment");const C=yield function On(v,f){return Gi.apply(this,arguments)}(g._delegate,No);return C?ts(g._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function sp(v,f){dn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,C,U){const{next:X,error:Ce,complete:ze}=Ch(g,C,U);return this._delegate.onAuthStateChanged(X,Ce,ze)}onIdTokenChanged(g,C,U){const{next:X,error:Ce,complete:ze}=Ch(g,C,U);return this._delegate.onIdTokenChanged(X,Ce,ze)}sendSignInLinkToEmail(g,C){return function Bo(v,f,g){return ma.apply(this,arguments)}(this._delegate,g,C)}sendPasswordResetEmail(g,C){return function Co(v,f,g){return Ps.apply(this,arguments)}(this._delegate,g,C||void 0)}setPersistence(g){var C=this;return(0,b.Z)(function*(){let U;switch(function vh(v,f){Yc(Object.values(Ao).includes(f),v,"invalid-persistence-type"),(0,Y.b$)()?Yc(f!==Ao.SESSION,v,"unsupported-persistence-type"):(0,Y.UG)()?Yc(f===Ao.NONE,v,"unsupported-persistence-type"):_i()?Yc(f===Ao.NONE||f===Ao.LOCAL&&(0,Y.hl)(),v,"unsupported-persistence-type"):Yc(f===Ao.NONE||Ks(),v,"unsupported-persistence-type")}(C._delegate,g),g){case Ao.SESSION:U=S;break;case Ao.LOCAL:U=(yield Ee(Ar)._isAvailable())?Ar:bi;break;case Ao.NONE:U=_e;break;default:return Je("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(U)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ts(this._delegate,function zs(v){return ks.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ts(this._delegate,Et(this._delegate,g))}signInWithCustomToken(g){return ts(this._delegate,function Xi(v,f){return Yr.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,C){return ts(this._delegate,function Eo(v,f,g){return Et((0,Y.m9)(v),ni.credential(f,g))}(this._delegate,g,C))}signInWithEmailLink(g,C){return ts(this._delegate,function ta(v,f,g){return so.apply(this,arguments)}(this._delegate,g,C))}signInWithPhoneNumber(g,C){return pp(this._delegate,function Ag(v,f,g){return er.apply(this,arguments)}(this._delegate,g,C))}signInWithPopup(g){var C=this;return(0,b.Z)(function*(){return Qc(Ku(),C._delegate,"operation-not-supported-in-this-environment"),ts(C._delegate,function cl(v,f,g){return oh.apply(this,arguments)}(C._delegate,g,No))})()}signInWithRedirect(g){var C=this;return(0,b.Z)(function*(){return Qc(Ku(),C._delegate,"operation-not-supported-in-this-environment"),yield Yu(C._delegate),function Z(v,f,g){return function ie(v,f,g){return Oe.apply(this,arguments)}(v,f,g)}(C._delegate,g,No)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function pn(v,f){return si.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Ao,v})();function Ch(v,f,g){let C=v;"function"!=typeof v&&({next:C,error:f,complete:g}=v);const U=C;return{next:Ce=>U(Ce&&Wa.getOrCreate(Ce)),error:f,complete:g}}function Gg(v,f){const g=function up(v,f){const g=jg();if(!g)return[];const C=qe(yh,v,f);switch(g.getItem(C)){case Ao.NONE:return[_e];case Ao.LOCAL:return[Ar,S];case Ao.SESSION:return[S];default:return[]}}(v,f);if(typeof self<"u"&&!g.includes(Ar)&&g.push(Ar),typeof window<"u")for(const C of[bi,S])g.includes(C)||g.push(C);return g.includes(_e)||g.push(_e),g}class Xc{constructor(){this.providerId="phone",this._delegate=new co(hp(h.Z.auth()))}static credential(f,g){return co.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Xc.PHONE_SIGN_IN_METHOD=co.PHONE_SIGN_IN_METHOD,Xc.PROVIDER_ID=co.PROVIDER_ID;const $g=De;class Wg{constructor(f,g,C=h.Z.app()){var U;$g(null===(U=C.options)||void 0===U?void 0:U.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new ih(f,g,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zg(v){v.INTERNAL.registerComponent(new ke.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),C=f.getProvider("auth");return new Qu(g,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ni,FacebookAuthProvider:Ms,GithubAuthProvider:ea,GoogleAuthProvider:Os,OAuthProvider:xs,SAMLAuthProvider:Sr,PhoneAuthProvider:Xc,PhoneMultiFactorGenerator:qc,RecaptchaVerifier:Wg,TwitterAuthProvider:Si,Auth:Qu,AuthCredential:Gn,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.11")}(h.Z)},4121:(Nt,Ve,G)=>{"use strict";G.d(Ve,{X:()=>h});var b=G(8023);class h extends b.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const pe=super._subscribe(ve);return!pe.closed&&ve.next(this._value),pe}getValue(){const{hasError:ve,thrownError:pe,_value:Te}=this;if(ve)throw pe;return this._throwIfClosed(),Te}next(ve){super.next(this._value=ve)}}},818:(Nt,Ve,G)=>{"use strict";G.d(Ve,{y:()=>se});var b=G(4021),h=G(4813),Y=G(3122),ve=G(8330);var ke=G(2046),Se=G(5975),Me=G(1519);let se=(()=>{class Ae{constructor(ut){ut&&(this._subscribe=ut)}lift(ut){const Be=new Ae;return Be.source=this,Be.operator=ut,Be}subscribe(ut,Be,Qe){const It=function at(Ae){return Ae&&Ae instanceof b.Lv||function we(Ae){return Ae&&(0,Se.m)(Ae.next)&&(0,Se.m)(Ae.error)&&(0,Se.m)(Ae.complete)}(Ae)&&(0,h.Nn)(Ae)}(ut)?ut:new b.Hp(ut,Be,Qe);return(0,Me.x)(()=>{const{operator:wt,source:Je}=this;It.add(wt?wt.call(It,Je):Je?this._subscribe(It):this._trySubscribe(It))}),It}_trySubscribe(ut){try{return this._subscribe(ut)}catch(Be){ut.error(Be)}}forEach(ut,Be){return new(Be=ae(Be))((Qe,It)=>{const wt=new b.Hp({next:Je=>{try{ut(Je)}catch(We){It(We),wt.unsubscribe()}},error:It,complete:Qe});this.subscribe(wt)})}_subscribe(ut){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(ut)}[Y.L](){return this}pipe(...ut){return function Te(Ae){return 0===Ae.length?ve.y:1===Ae.length?Ae[0]:function(ut){return Ae.reduce((Be,Qe)=>Qe(Be),ut)}}(ut)(this)}toPromise(ut){return new(ut=ae(ut))((Be,Qe)=>{let It;this.subscribe(wt=>It=wt,wt=>Qe(wt),()=>Be(It))})}}return Ae.create=Ze=>new Ae(Ze),Ae})();function ae(Ae){var Ze;return null!==(Ze=Ae??ke.v.Promise)&&void 0!==Ze?Ze:Promise}},8023:(Nt,Ve,G)=>{"use strict";G.d(Ve,{x:()=>ke});var b=G(818),h=G(4813);const ve=(0,G(5776).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pe=G(8308),Te=G(1519);let ke=(()=>{class Me extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const we=new Se(this,this);return we.operator=ae,we}_throwIfClosed(){if(this.closed)throw new ve}next(ae){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const we of this.currentObservers)we.next(ae)}})}error(ae){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:we}=this;for(;we.length;)we.shift().error(ae)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:we,isStopped:at,observers:Ae}=this;return we||at?h.Lc:(this.currentObservers=null,Ae.push(ae),new h.w0(()=>{this.currentObservers=null,(0,pe.P)(Ae,ae)}))}_checkFinalizedStatuses(ae){const{hasError:we,thrownError:at,isStopped:Ae}=this;we?ae.error(at):Ae&&ae.complete()}asObservable(){const ae=new b.y;return ae.source=this,ae}}return Me.create=(se,ae)=>new Se(se,ae),Me})();class Se extends ke{constructor(se,ae){super(),this.destination=se,this.source=ae}next(se){var ae,we;null===(we=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===we||we.call(ae,se)}error(se){var ae,we;null===(we=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===we||we.call(ae,se)}complete(){var se,ae;null===(ae=null===(se=this.destination)||void 0===se?void 0:se.complete)||void 0===ae||ae.call(se)}_subscribe(se){var ae,we;return null!==(we=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(se))&&void 0!==we?we:h.Lc}}},4021:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Hp:()=>ut,Lv:()=>we});var b=G(5975),h=G(4813),Y=G(2046),ve=G(4922),pe=G(408);const Te=Me("C",void 0,void 0);function Me(Je,We,Xe){return{kind:Je,value:We,error:Xe}}var se=G(4146),ae=G(1519);class we extends h.w0{constructor(We){super(),this.isStopped=!1,We?(this.destination=We,(0,h.Nn)(We)&&We.add(this)):this.destination=wt}static create(We,Xe,pt){return new ut(We,Xe,pt)}next(We){this.isStopped?It(function Se(Je){return Me("N",Je,void 0)}(We),this):this._next(We)}error(We){this.isStopped?It(function ke(Je){return Me("E",void 0,Je)}(We),this):(this.isStopped=!0,this._error(We))}complete(){this.isStopped?It(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(We){this.destination.next(We)}_error(We){try{this.destination.error(We)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const at=Function.prototype.bind;function Ae(Je,We){return at.call(Je,We)}class Ze{constructor(We){this.partialObserver=We}next(We){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(We)}catch(pt){Be(pt)}}error(We){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(We)}catch(pt){Be(pt)}else Be(We)}complete(){const{partialObserver:We}=this;if(We.complete)try{We.complete()}catch(Xe){Be(Xe)}}}class ut extends we{constructor(We,Xe,pt){let ue;if(super(),(0,b.m)(We)||!We)ue={next:We??void 0,error:Xe??void 0,complete:pt??void 0};else{let De;this&&Y.v.useDeprecatedNextContext?(De=Object.create(We),De.unsubscribe=()=>this.unsubscribe(),ue={next:We.next&&Ae(We.next,De),error:We.error&&Ae(We.error,De),complete:We.complete&&Ae(We.complete,De)}):ue=We}this.destination=new Ze(ue)}}function Be(Je){Y.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Je):(0,ve.h)(Je)}function It(Je,We){const{onStoppedNotification:Xe}=Y.v;Xe&&se.z.setTimeout(()=>Xe(Je,We))}const wt={closed:!0,next:pe.Z,error:function Qe(Je){throw Je},complete:pe.Z}},4813:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Lc:()=>Te,w0:()=>pe,Nn:()=>ke});var b=G(5975);const Y=(0,G(5776).d)(Me=>function(ae){Me(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((we,at)=>`${at+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var ve=G(8308);class pe{constructor(se){this.initialTeardown=se,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let se;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const Ae of ae)Ae.remove(this);else ae.remove(this);const{initialTeardown:we}=this;if((0,b.m)(we))try{we()}catch(Ae){se=Ae instanceof Y?Ae.errors:[Ae]}const{_finalizers:at}=this;if(at){this._finalizers=null;for(const Ae of at)try{Se(Ae)}catch(Ze){se=se??[],Ze instanceof Y?se=[...se,...Ze.errors]:se.push(Ze)}}if(se)throw new Y(se)}}add(se){var ae;if(se&&se!==this)if(this.closed)Se(se);else{if(se instanceof pe){if(se.closed||se._hasParent(this))return;se._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(se)}}_hasParent(se){const{_parentage:ae}=this;return ae===se||Array.isArray(ae)&&ae.includes(se)}_addParent(se){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(se),ae):ae?[ae,se]:se}_removeParent(se){const{_parentage:ae}=this;ae===se?this._parentage=null:Array.isArray(ae)&&(0,ve.P)(ae,se)}remove(se){const{_finalizers:ae}=this;ae&&(0,ve.P)(ae,se),se instanceof pe&&se._removeParent(this)}}pe.EMPTY=(()=>{const Me=new pe;return Me.closed=!0,Me})();const Te=pe.EMPTY;function ke(Me){return Me instanceof pe||Me&&"closed"in Me&&(0,b.m)(Me.remove)&&(0,b.m)(Me.add)&&(0,b.m)(Me.unsubscribe)}function Se(Me){(0,b.m)(Me)?Me():Me.unsubscribe()}},2046:(Nt,Ve,G)=>{"use strict";G.d(Ve,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5696:(Nt,Ve,G)=>{"use strict";G.d(Ve,{a:()=>se});var b=G(818),h=G(447),Y=G(237),ve=G(8330),pe=G(2692),Te=G(6651),ke=G(9299),Se=G(8499),Me=G(6903);function se(...at){const Ae=(0,Te.yG)(at),Ze=(0,Te.jO)(at),{args:ut,keys:Be}=(0,h.D)(at);if(0===ut.length)return(0,Y.D)([],Ae);const Qe=new b.y(function ae(at,Ae,Ze=ve.y){return ut=>{we(Ae,()=>{const{length:Be}=at,Qe=new Array(Be);let It=Be,wt=Be;for(let Je=0;Je<Be;Je++)we(Ae,()=>{const We=(0,Y.D)(at[Je],Ae);let Xe=!1;We.subscribe((0,Se.x)(ut,pt=>{Qe[Je]=pt,Xe||(Xe=!0,wt--),wt||ut.next(Ze(Qe.slice()))},()=>{--It||ut.complete()}))},ut)},ut)}}(ut,Ae,Be?It=>(0,ke.n)(Be,It):ve.y));return Ze?Qe.pipe((0,pe.Z)(Ze)):Qe}function we(at,Ae,Ze){at?(0,Me.f)(Ze,at,Ae):Ae()}},3729:(Nt,Ve,G)=>{"use strict";G.d(Ve,{z:()=>pe});var b=G(549),Y=G(6651),ve=G(237);function pe(...Te){return function h(){return(0,b.J)(1)}()((0,ve.D)(Te,(0,Y.yG)(Te)))}},9018:(Nt,Ve,G)=>{"use strict";G.d(Ve,{E:()=>h});const h=new(G(818).y)(pe=>pe.complete())},237:(Nt,Ve,G)=>{"use strict";G.d(Ve,{D:()=>We});var b=G(5955),h=G(7513),Y=G(4119),Te=G(818),Se=G(4565),Me=G(5975),se=G(6903);function we(Xe,pt){if(!Xe)throw new Error("Iterable cannot be null");return new Te.y(ue=>{(0,se.f)(ue,pt,()=>{const De=Xe[Symbol.asyncIterator]();(0,se.f)(ue,pt,()=>{De.next().then(ye=>{ye.done?ue.complete():ue.next(ye.value)})},0,!0)})})}var at=G(2021),Ae=G(9450),Ze=G(6602),ut=G(6920),Be=G(2604),Qe=G(5626),It=G(1559);function We(Xe,pt){return pt?function Je(Xe,pt){if(null!=Xe){if((0,at.c)(Xe))return function ve(Xe,pt){return(0,b.Xf)(Xe).pipe((0,Y.R)(pt),(0,h.Q)(pt))}(Xe,pt);if((0,Ze.z)(Xe))return function ke(Xe,pt){return new Te.y(ue=>{let De=0;return pt.schedule(function(){De===Xe.length?ue.complete():(ue.next(Xe[De++]),ue.closed||this.schedule())})})}(Xe,pt);if((0,Ae.t)(Xe))return function pe(Xe,pt){return(0,b.Xf)(Xe).pipe((0,Y.R)(pt),(0,h.Q)(pt))}(Xe,pt);if((0,Be.D)(Xe))return we(Xe,pt);if((0,ut.T)(Xe))return function ae(Xe,pt){return new Te.y(ue=>{let De;return(0,se.f)(ue,pt,()=>{De=Xe[Se.h](),(0,se.f)(ue,pt,()=>{let ye,Le;try{({value:ye,done:Le}=De.next())}catch(Ne){return void ue.error(Ne)}Le?ue.complete():ue.next(ye)},0,!0)}),()=>(0,Me.m)(null==De?void 0:De.return)&&De.return()})}(Xe,pt);if((0,It.L)(Xe))return function wt(Xe,pt){return we((0,It.Q)(Xe),pt)}(Xe,pt)}throw(0,Qe.z)(Xe)}(Xe,pt):(0,b.Xf)(Xe)}},5955:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Xf:()=>at});var b=G(4762),h=G(6602),Y=G(9450),ve=G(818),pe=G(2021),Te=G(2604),ke=G(5626),Se=G(6920),Me=G(1559),se=G(5975),ae=G(4922),we=G(3122);function at(Je){if(Je instanceof ve.y)return Je;if(null!=Je){if((0,pe.c)(Je))return function Ae(Je){return new ve.y(We=>{const Xe=Je[we.L]();if((0,se.m)(Xe.subscribe))return Xe.subscribe(We);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Je);if((0,h.z)(Je))return function Ze(Je){return new ve.y(We=>{for(let Xe=0;Xe<Je.length&&!We.closed;Xe++)We.next(Je[Xe]);We.complete()})}(Je);if((0,Y.t)(Je))return function ut(Je){return new ve.y(We=>{Je.then(Xe=>{We.closed||(We.next(Xe),We.complete())},Xe=>We.error(Xe)).then(null,ae.h)})}(Je);if((0,Te.D)(Je))return Qe(Je);if((0,Se.T)(Je))return function Be(Je){return new ve.y(We=>{for(const Xe of Je)if(We.next(Xe),We.closed)return;We.complete()})}(Je);if((0,Me.L)(Je))return function It(Je){return Qe((0,Me.Q)(Je))}(Je)}throw(0,ke.z)(Je)}function Qe(Je){return new ve.y(We=>{(function wt(Je,We){var Xe,pt,ue,De;return(0,b.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,b.KL)(Je);!(pt=yield Xe.next()).done;)if(We.next(pt.value),We.closed)return}catch(ye){ue={error:ye}}finally{try{pt&&!pt.done&&(De=Xe.return)&&(yield De.call(Xe))}finally{if(ue)throw ue.error}}We.complete()})})(Je,We).catch(Xe=>We.error(Xe))})}},1860:(Nt,Ve,G)=>{"use strict";G.d(Ve,{T:()=>Te});var b=G(549),h=G(5955),Y=G(9018),ve=G(6651),pe=G(237);function Te(...ke){const Se=(0,ve.yG)(ke),Me=(0,ve._6)(ke,1/0),se=ke;return se.length?1===se.length?(0,h.Xf)(se[0]):(0,b.J)(Me)((0,pe.D)(se,Se)):Y.E}},4945:(Nt,Ve,G)=>{"use strict";G.d(Ve,{of:()=>Y});var b=G(6651),h=G(237);function Y(...ve){const pe=(0,b.yG)(ve);return(0,h.D)(ve,pe)}},8499:(Nt,Ve,G)=>{"use strict";G.d(Ve,{x:()=>h});var b=G(4021);function h(ve,pe,Te,ke,Se){return new Y(ve,pe,Te,ke,Se)}class Y extends b.Lv{constructor(pe,Te,ke,Se,Me,se){super(pe),this.onFinalize=Me,this.shouldUnsubscribe=se,this._next=Te?function(ae){try{Te(ae)}catch(we){pe.error(we)}}:super._next,this._error=Se?function(ae){try{Se(ae)}catch(we){pe.error(we)}finally{this.unsubscribe()}}:super._error,this._complete=ke?function(){try{ke()}catch(ae){pe.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var pe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(pe=this.onFinalize)||void 0===pe||pe.call(this))}}}},4551:(Nt,Ve,G)=>{"use strict";G.d(Ve,{b:()=>Y});var b=G(4882),h=G(5975);function Y(ve,pe){return(0,h.m)(pe)?(0,b.z)(ve,pe,1):(0,b.z)(ve,1)}},2686:(Nt,Ve,G)=>{"use strict";G.d(Ve,{d:()=>Y});var b=G(2085),h=G(8499);function Y(ve){return(0,b.e)((pe,Te)=>{let ke=!1;pe.subscribe((0,h.x)(Te,Se=>{ke=!0,Te.next(Se)},()=>{ke||Te.next(ve),Te.complete()}))})}},4970:(Nt,Ve,G)=>{"use strict";G.d(Ve,{h:()=>Y});var b=G(2085),h=G(8499);function Y(ve,pe){return(0,b.e)((Te,ke)=>{let Se=0;Te.subscribe((0,h.x)(ke,Me=>ve.call(pe,Me,Se++)&&ke.next(Me)))})}},9676:(Nt,Ve,G)=>{"use strict";G.d(Ve,{P:()=>ke});var b=G(7472),h=G(4970),Y=G(5598),ve=G(2686),pe=G(8623),Te=G(8330);function ke(Se,Me){const se=arguments.length>=2;return ae=>ae.pipe(Se?(0,h.h)((we,at)=>Se(we,at,ae)):Te.y,(0,Y.q)(1),se?(0,ve.d)(Me):(0,pe.T)(()=>new b.K))}},7969:(Nt,Ve,G)=>{"use strict";G.d(Ve,{U:()=>Y});var b=G(2085),h=G(8499);function Y(ve,pe){return(0,b.e)((Te,ke)=>{let Se=0;Te.subscribe((0,h.x)(ke,Me=>{ke.next(ve.call(pe,Me,Se++))}))})}},549:(Nt,Ve,G)=>{"use strict";G.d(Ve,{J:()=>Y});var b=G(4882),h=G(8330);function Y(ve=1/0){return(0,b.z)(h.y,ve)}},4882:(Nt,Ve,G)=>{"use strict";G.d(Ve,{z:()=>Se});var b=G(7969),h=G(5955),Y=G(2085),ve=G(6903),pe=G(8499),ke=G(5975);function Se(Me,se,ae=1/0){return(0,ke.m)(se)?Se((we,at)=>(0,b.U)((Ae,Ze)=>se(we,Ae,at,Ze))((0,h.Xf)(Me(we,at))),ae):("number"==typeof se&&(ae=se),(0,Y.e)((we,at)=>function Te(Me,se,ae,we,at,Ae,Ze,ut){const Be=[];let Qe=0,It=0,wt=!1;const Je=()=>{wt&&!Be.length&&!Qe&&se.complete()},We=pt=>Qe<we?Xe(pt):Be.push(pt),Xe=pt=>{Ae&&se.next(pt),Qe++;let ue=!1;(0,h.Xf)(ae(pt,It++)).subscribe((0,pe.x)(se,De=>{null==at||at(De),Ae?We(De):se.next(De)},()=>{ue=!0},void 0,()=>{if(ue)try{for(Qe--;Be.length&&Qe<we;){const De=Be.shift();Ze?(0,ve.f)(se,Ze,()=>Xe(De)):Xe(De)}Je()}catch(De){se.error(De)}}))};return Me.subscribe((0,pe.x)(se,We,()=>{wt=!0,Je()})),()=>{null==ut||ut()}}(we,at,Me,ae)))}},7513:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Q:()=>ve});var b=G(6903),h=G(2085),Y=G(8499);function ve(pe,Te=0){return(0,h.e)((ke,Se)=>{ke.subscribe((0,Y.x)(Se,Me=>(0,b.f)(Se,pe,()=>Se.next(Me),Te),()=>(0,b.f)(Se,pe,()=>Se.complete(),Te),Me=>(0,b.f)(Se,pe,()=>Se.error(Me),Te)))})}},7479:(Nt,Ve,G)=>{"use strict";G.d(Ve,{R:()=>ve});var b=G(2085),h=G(8499);function Y(pe,Te,ke,Se,Me){return(se,ae)=>{let we=ke,at=Te,Ae=0;se.subscribe((0,h.x)(ae,Ze=>{const ut=Ae++;at=we?pe(at,Ze,ut):(we=!0,Ze),Se&&ae.next(at)},Me&&(()=>{we&&ae.next(at),ae.complete()})))}}function ve(pe,Te){return(0,b.e)(Y(pe,Te,arguments.length>=2,!0))}},815:(Nt,Ve,G)=>{"use strict";G.d(Ve,{B:()=>Te});var b=G(237),h=G(5598),Y=G(8023),ve=G(4021),pe=G(2085);function Te(Se={}){const{connector:Me=(()=>new Y.x),resetOnError:se=!0,resetOnComplete:ae=!0,resetOnRefCountZero:we=!0}=Se;return at=>{let Ae=null,Ze=null,ut=null,Be=0,Qe=!1,It=!1;const wt=()=>{null==Ze||Ze.unsubscribe(),Ze=null},Je=()=>{wt(),Ae=ut=null,Qe=It=!1},We=()=>{const Xe=Ae;Je(),null==Xe||Xe.unsubscribe()};return(0,pe.e)((Xe,pt)=>{Be++,!It&&!Qe&&wt();const ue=ut=ut??Me();pt.add(()=>{Be--,0===Be&&!It&&!Qe&&(Ze=ke(We,we))}),ue.subscribe(pt),Ae||(Ae=new ve.Hp({next:De=>ue.next(De),error:De=>{It=!0,wt(),Ze=ke(Je,se,De),ue.error(De)},complete:()=>{Qe=!0,wt(),Ze=ke(Je,ae),ue.complete()}}),(0,b.D)(Xe).subscribe(Ae))})(at)}}function ke(Se,Me,...se){return!0===Me?(Se(),null):!1===Me?null:Me(...se).pipe((0,h.q)(1)).subscribe(()=>Se())}},1927:(Nt,Ve,G)=>{"use strict";G.d(Ve,{O:()=>ve});var b=G(3729),h=G(6651),Y=G(2085);function ve(...pe){const Te=(0,h.yG)(pe);return(0,Y.e)((ke,Se)=>{(Te?(0,b.z)(pe,ke,Te):(0,b.z)(pe,ke)).subscribe(Se)})}},4119:(Nt,Ve,G)=>{"use strict";G.d(Ve,{R:()=>h});var b=G(2085);function h(Y,ve=0){return(0,b.e)((pe,Te)=>{Te.add(Y.schedule(()=>pe.subscribe(Te),ve))})}},1528:(Nt,Ve,G)=>{"use strict";G.d(Ve,{w:()=>ve});var b=G(5955),h=G(2085),Y=G(8499);function ve(pe,Te){return(0,h.e)((ke,Se)=>{let Me=null,se=0,ae=!1;const we=()=>ae&&!Me&&Se.complete();ke.subscribe((0,Y.x)(Se,at=>{null==Me||Me.unsubscribe();let Ae=0;const Ze=se++;(0,b.Xf)(pe(at,Ze)).subscribe(Me=(0,Y.x)(Se,ut=>Se.next(Te?Te(at,ut,Ze,Ae++):ut),()=>{Me=null,we()}))},()=>{ae=!0,we()}))})}},5598:(Nt,Ve,G)=>{"use strict";G.d(Ve,{q:()=>ve});var b=G(9018),h=G(2085),Y=G(8499);function ve(pe){return pe<=0?()=>b.E:(0,h.e)((Te,ke)=>{let Se=0;Te.subscribe((0,Y.x)(ke,Me=>{++Se<=pe&&(ke.next(Me),pe<=Se&&ke.complete())}))})}},8168:(Nt,Ve,G)=>{"use strict";G.d(Ve,{b:()=>pe});var b=G(5975),h=G(2085),Y=G(8499),ve=G(8330);function pe(Te,ke,Se){const Me=(0,b.m)(Te)||ke||Se?{next:Te,error:ke,complete:Se}:Te;return Me?(0,h.e)((se,ae)=>{var we;null===(we=Me.subscribe)||void 0===we||we.call(Me);let at=!0;se.subscribe((0,Y.x)(ae,Ae=>{var Ze;null===(Ze=Me.next)||void 0===Ze||Ze.call(Me,Ae),ae.next(Ae)},()=>{var Ae;at=!1,null===(Ae=Me.complete)||void 0===Ae||Ae.call(Me),ae.complete()},Ae=>{var Ze;at=!1,null===(Ze=Me.error)||void 0===Ze||Ze.call(Me,Ae),ae.error(Ae)},()=>{var Ae,Ze;at&&(null===(Ae=Me.unsubscribe)||void 0===Ae||Ae.call(Me)),null===(Ze=Me.finalize)||void 0===Ze||Ze.call(Me)}))}):ve.y}},8623:(Nt,Ve,G)=>{"use strict";G.d(Ve,{T:()=>ve});var b=G(7472),h=G(2085),Y=G(8499);function ve(Te=pe){return(0,h.e)((ke,Se)=>{let Me=!1;ke.subscribe((0,Y.x)(Se,se=>{Me=!0,Se.next(se)},()=>Me?Se.complete():Se.error(Te())))})}function pe(){return new b.K}},3466:(Nt,Ve,G)=>{"use strict";G.d(Ve,{o:()=>pe});var b=G(4813);class h extends b.w0{constructor(ke,Se){super()}schedule(ke,Se=0){return this}}const Y={setInterval(Te,ke,...Se){const{delegate:Me}=Y;return(null==Me?void 0:Me.setInterval)?Me.setInterval(Te,ke,...Se):setInterval(Te,ke,...Se)},clearInterval(Te){const{delegate:ke}=Y;return((null==ke?void 0:ke.clearInterval)||clearInterval)(Te)},delegate:void 0};var ve=G(8308);class pe extends h{constructor(ke,Se){super(ke,Se),this.scheduler=ke,this.work=Se,this.pending=!1}schedule(ke,Se=0){if(this.closed)return this;this.state=ke;const Me=this.id,se=this.scheduler;return null!=Me&&(this.id=this.recycleAsyncId(se,Me,Se)),this.pending=!0,this.delay=Se,this.id=this.id||this.requestAsyncId(se,this.id,Se),this}requestAsyncId(ke,Se,Me=0){return Y.setInterval(ke.flush.bind(ke,this),Me)}recycleAsyncId(ke,Se,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return Se;Y.clearInterval(Se)}execute(ke,Se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(ke,Se);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ke,Se){let se,Me=!1;try{this.work(ke)}catch(ae){Me=!0,se=ae||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),se}unsubscribe(){if(!this.closed){const{id:ke,scheduler:Se}=this,{actions:Me}=Se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Me,this),null!=ke&&(this.id=this.recycleAsyncId(Se,ke,null)),this.delay=null,super.unsubscribe()}}}},474:(Nt,Ve,G)=>{"use strict";G.d(Ve,{v:()=>Y});var b=G(2069);class h{constructor(pe,Te=h.now){this.schedulerActionCtor=pe,this.now=Te}schedule(pe,Te=0,ke){return new this.schedulerActionCtor(this,pe).schedule(ke,Te)}}h.now=b.l.now;class Y extends h{constructor(pe,Te=h.now){super(pe,Te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(pe){const{actions:Te}=this;if(this._active)return void Te.push(pe);let ke;this._active=!0;do{if(ke=pe.execute(pe.state,pe.delay))break}while(pe=Te.shift());if(this._active=!1,ke){for(;pe=Te.shift();)pe.unsubscribe();throw ke}}}},6523:(Nt,Ve,G)=>{"use strict";G.d(Ve,{z:()=>Y,P:()=>ve});var b=G(3466);const Y=new(G(474).v)(b.o),ve=Y},2069:(Nt,Ve,G)=>{"use strict";G.d(Ve,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},4146:(Nt,Ve,G)=>{"use strict";G.d(Ve,{z:()=>b});const b={setTimeout(h,Y,...ve){const{delegate:pe}=b;return(null==pe?void 0:pe.setTimeout)?pe.setTimeout(h,Y,...ve):setTimeout(h,Y,...ve)},clearTimeout(h){const{delegate:Y}=b;return((null==Y?void 0:Y.clearTimeout)||clearTimeout)(h)},delegate:void 0}},4565:(Nt,Ve,G)=>{"use strict";G.d(Ve,{h:()=>h});const h=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3122:(Nt,Ve,G)=>{"use strict";G.d(Ve,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},7472:(Nt,Ve,G)=>{"use strict";G.d(Ve,{K:()=>h});const h=(0,G(5776).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},6651:(Nt,Ve,G)=>{"use strict";G.d(Ve,{jO:()=>ve,yG:()=>pe,_6:()=>Te});var b=G(5975),h=G(1830);function Y(ke){return ke[ke.length-1]}function ve(ke){return(0,b.m)(Y(ke))?ke.pop():void 0}function pe(ke){return(0,h.K)(Y(ke))?ke.pop():void 0}function Te(ke,Se){return"number"==typeof Y(ke)?ke.pop():Se}},447:(Nt,Ve,G)=>{"use strict";G.d(Ve,{D:()=>pe});const{isArray:b}=Array,{getPrototypeOf:h,prototype:Y,keys:ve}=Object;function pe(ke){if(1===ke.length){const Se=ke[0];if(b(Se))return{args:Se,keys:null};if(function Te(ke){return ke&&"object"==typeof ke&&h(ke)===Y}(Se)){const Me=ve(Se);return{args:Me.map(se=>Se[se]),keys:Me}}}return{args:ke,keys:null}}},8308:(Nt,Ve,G)=>{"use strict";function b(h,Y){if(h){const ve=h.indexOf(Y);0<=ve&&h.splice(ve,1)}}G.d(Ve,{P:()=>b})},5776:(Nt,Ve,G)=>{"use strict";function b(h){const ve=h(pe=>{Error.call(pe),pe.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}G.d(Ve,{d:()=>b})},9299:(Nt,Ve,G)=>{"use strict";function b(h,Y){return h.reduce((ve,pe,Te)=>(ve[pe]=Y[Te],ve),{})}G.d(Ve,{n:()=>b})},1519:(Nt,Ve,G)=>{"use strict";G.d(Ve,{x:()=>Y,O:()=>ve});var b=G(2046);let h=null;function Y(pe){if(b.v.useDeprecatedSynchronousErrorHandling){const Te=!h;if(Te&&(h={errorThrown:!1,error:null}),pe(),Te){const{errorThrown:ke,error:Se}=h;if(h=null,ke)throw Se}}else pe()}function ve(pe){b.v.useDeprecatedSynchronousErrorHandling&&h&&(h.errorThrown=!0,h.error=pe)}},6903:(Nt,Ve,G)=>{"use strict";function b(h,Y,ve,pe=0,Te=!1){const ke=Y.schedule(function(){ve(),Te?h.add(this.schedule(null,pe)):this.unsubscribe()},pe);if(h.add(ke),!Te)return ke}G.d(Ve,{f:()=>b})},8330:(Nt,Ve,G)=>{"use strict";function b(h){return h}G.d(Ve,{y:()=>b})},6602:(Nt,Ve,G)=>{"use strict";G.d(Ve,{z:()=>b});const b=h=>h&&"number"==typeof h.length&&"function"!=typeof h},2604:(Nt,Ve,G)=>{"use strict";G.d(Ve,{D:()=>h});var b=G(5975);function h(Y){return Symbol.asyncIterator&&(0,b.m)(null==Y?void 0:Y[Symbol.asyncIterator])}},5975:(Nt,Ve,G)=>{"use strict";function b(h){return"function"==typeof h}G.d(Ve,{m:()=>b})},2021:(Nt,Ve,G)=>{"use strict";G.d(Ve,{c:()=>Y});var b=G(3122),h=G(5975);function Y(ve){return(0,h.m)(ve[b.L])}},6920:(Nt,Ve,G)=>{"use strict";G.d(Ve,{T:()=>Y});var b=G(4565),h=G(5975);function Y(ve){return(0,h.m)(null==ve?void 0:ve[b.h])}},9450:(Nt,Ve,G)=>{"use strict";G.d(Ve,{t:()=>h});var b=G(5975);function h(Y){return(0,b.m)(null==Y?void 0:Y.then)}},1559:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Q:()=>Y,L:()=>ve});var b=G(4762),h=G(5975);function Y(pe){return(0,b.FC)(this,arguments,function*(){const ke=pe.getReader();try{for(;;){const{value:Se,done:Me}=yield(0,b.qq)(ke.read());if(Me)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(Se)}}finally{ke.releaseLock()}})}function ve(pe){return(0,h.m)(null==pe?void 0:pe.getReader)}},1830:(Nt,Ve,G)=>{"use strict";G.d(Ve,{K:()=>h});var b=G(5975);function h(Y){return Y&&(0,b.m)(Y.schedule)}},2085:(Nt,Ve,G)=>{"use strict";G.d(Ve,{A:()=>h,e:()=>Y});var b=G(5975);function h(ve){return(0,b.m)(null==ve?void 0:ve.lift)}function Y(ve){return pe=>{if(h(pe))return pe.lift(function(Te){try{return ve(Te,this)}catch(ke){this.error(ke)}});throw new TypeError("Unable to lift unknown Observable type")}}},2692:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Z:()=>ve});var b=G(7969);const{isArray:h}=Array;function ve(pe){return(0,b.U)(Te=>function Y(pe,Te){return h(Te)?pe(...Te):pe(Te)}(pe,Te))}},408:(Nt,Ve,G)=>{"use strict";function b(){}G.d(Ve,{Z:()=>b})},4922:(Nt,Ve,G)=>{"use strict";G.d(Ve,{h:()=>Y});var b=G(2046),h=G(4146);function Y(ve){h.z.setTimeout(()=>{const{onUnhandledError:pe}=b.v;if(!pe)throw ve;pe(ve)})}},5626:(Nt,Ve,G)=>{"use strict";function b(h){return new TypeError(`You provided ${null!==h&&"object"==typeof h?"an invalid object":`'${h}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(Ve,{z:()=>b})},8259:function(Nt){Nt.exports=function(){"use strict";const Ve="SweetAlert2:",b=T=>T.charAt(0).toUpperCase()+T.slice(1),h=T=>Array.prototype.slice.call(T),Y=T=>{console.warn("".concat(Ve," ").concat("object"==typeof T?T.join(" "):T))},ve=T=>{console.error("".concat(Ve," ").concat(T))},pe=[],ke=(T,S)=>{(T=>{pe.includes(T)||(pe.push(T),Y(T))})('"'.concat(T,'" is deprecated and will be removed in the next major release. Please use "').concat(S,'" instead.'))},Se=T=>"function"==typeof T?T():T,Me=T=>T&&"function"==typeof T.toPromise,se=T=>Me(T)?T.toPromise():Promise.resolve(T),ae=T=>T&&Promise.resolve(T)===T,we={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},at=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ae={},Ze=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],ut=T=>Object.prototype.hasOwnProperty.call(we,T),Be=T=>-1!==at.indexOf(T),Qe=T=>Ae[T],It=T=>{ut(T)||Y('Unknown parameter "'.concat(T,'"'))},wt=T=>{Ze.includes(T)&&Y('The parameter "'.concat(T,'" is incompatible with toasts'))},Je=T=>{Qe(T)&&ke(T,Qe(T))},pt=T=>{const S={};for(const W in T)S[T[W]]="swal2-"+T[W];return S},ue=pt(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),De=pt(["success","warning","info","question","error"]),ye=()=>document.body.querySelector(".".concat(ue.container)),Le=T=>{const S=ye();return S?S.querySelector(T):null},Ne=T=>Le(".".concat(T)),Ee=()=>Ne(ue.popup),lt=()=>Ne(ue.icon),He=()=>Ne(ue.title),Jt=()=>Ne(ue["html-container"]),In=()=>Ne(ue.image),qn=()=>Ne(ue["progress-steps"]),Dt=()=>Ne(ue["validation-message"]),Tt=()=>Le(".".concat(ue.actions," .").concat(ue.confirm)),Tn=()=>Le(".".concat(ue.actions," .").concat(ue.deny)),Ir=()=>Le(".".concat(ue.loader)),wn=()=>Le(".".concat(ue.actions," .").concat(ue.cancel)),Hr=()=>Ne(ue.actions),Fn=()=>Ne(ue.footer),_n=()=>Ne(ue["timer-progress-bar"]),vr=()=>Ne(ue.close),Xr=()=>{const T=h(Ee().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((W,ee)=>{const st=parseInt(W.getAttribute("tabindex")),ht=parseInt(ee.getAttribute("tabindex"));return st>ht?1:st<ht?-1:0}),S=h(Ee().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(W=>"-1"!==W.getAttribute("tabindex"));return(T=>{const S=[];for(let W=0;W<T.length;W++)-1===S.indexOf(T[W])&&S.push(T[W]);return S})(T.concat(S)).filter(W=>$t(W))},br=()=>Bt(document.body,ue.shown)&&!Bt(document.body,ue["toast-shown"])&&!Bt(document.body,ue["no-backdrop"]),Lr=()=>Ee()&&Bt(Ee(),ue.toast),wr={previousBodyPadding:null},nr=(T,S)=>{if(T.textContent="",S){const ee=(new DOMParser).parseFromString(S,"text/html");h(ee.querySelector("head").childNodes).forEach(st=>{T.appendChild(st)}),h(ee.querySelector("body").childNodes).forEach(st=>{T.appendChild(st)})}},Bt=(T,S)=>{if(!S)return!1;const W=S.split(/\s+/);for(let ee=0;ee<W.length;ee++)if(!T.classList.contains(W[ee]))return!1;return!0},fn=(T,S,W)=>{if(((T,S)=>{h(T.classList).forEach(W=>{!Object.values(ue).includes(W)&&!Object.values(De).includes(W)&&!Object.values(S.showClass).includes(W)&&T.classList.remove(W)})})(T,S),S.customClass&&S.customClass[W]){if("string"!=typeof S.customClass[W]&&!S.customClass[W].forEach)return Y("Invalid type of customClass.".concat(W,'! Expected string or iterable object, got "').concat(typeof S.customClass[W],'"'));Re(T,S.customClass[W])}},Rt=(T,S)=>{if(!S)return null;switch(S){case"select":case"textarea":case"file":return T.querySelector(".".concat(ue.popup," > .").concat(ue[S]));case"checkbox":return T.querySelector(".".concat(ue.popup," > .").concat(ue.checkbox," input"));case"radio":return T.querySelector(".".concat(ue.popup," > .").concat(ue.radio," input:checked"))||T.querySelector(".".concat(ue.popup," > .").concat(ue.radio," input:first-child"));case"range":return T.querySelector(".".concat(ue.popup," > .").concat(ue.range," input"));default:return T.querySelector(".".concat(ue.popup," > .").concat(ue.input))}},ei=T=>{if(T.focus(),"file"!==T.type){const S=T.value;T.value="",T.value=S}},yi=(T,S,W)=>{!T||!S||("string"==typeof S&&(S=S.split(/\s+/).filter(Boolean)),S.forEach(ee=>{Array.isArray(T)?T.forEach(st=>{W?st.classList.add(ee):st.classList.remove(ee)}):W?T.classList.add(ee):T.classList.remove(ee)}))},Re=(T,S)=>{yi(T,S,!0)},ce=(T,S)=>{yi(T,S,!1)},me=(T,S)=>{const W=h(T.childNodes);for(let ee=0;ee<W.length;ee++)if(Bt(W[ee],S))return W[ee]},ct=(T,S,W)=>{W==="".concat(parseInt(W))&&(W=parseInt(W)),W||0===parseInt(W)?T.style[S]="number"==typeof W?"".concat(W,"px"):W:T.style.removeProperty(S)},Ue=function(T){T.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Ye=T=>{T.style.display="none"},Ct=(T,S,W,ee)=>{const st=T.querySelector(S);st&&(st.style[W]=ee)},Cn=(T,S,W)=>{S?Ue(T,W):Ye(T)},$t=T=>!(!T||!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)),Yn=T=>T.scrollHeight>T.clientHeight,Vn=T=>{const S=window.getComputedStyle(T),W=parseFloat(S.getPropertyValue("animation-duration")||"0"),ee=parseFloat(S.getPropertyValue("transition-duration")||"0");return W>0||ee>0},Jn=function(T){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const W=_n();$t(W)&&(S&&(W.style.transition="none",W.style.width="100%"),setTimeout(()=>{W.style.transition="width ".concat(T/1e3,"s linear"),W.style.width="0%"},10))},Mn=()=>typeof window>"u"||typeof document>"u",ot={},kt=T=>new Promise(S=>{if(!T)return S();const W=window.scrollX,ee=window.scrollY;ot.restoreFocusTimeout=setTimeout(()=>{ot.previousActiveElement&&ot.previousActiveElement.focus?(ot.previousActiveElement.focus(),ot.previousActiveElement=null):document.body&&document.body.focus(),S()},100),window.scrollTo(W,ee)}),Gt='\n <div aria-labelledby="'.concat(ue.title,'" aria-describedby="').concat(ue["html-container"],'" class="').concat(ue.popup,'" tabindex="-1">\n   <button type="button" class="').concat(ue.close,'"></button>\n   <ul class="').concat(ue["progress-steps"],'"></ul>\n   <div class="').concat(ue.icon,'"></div>\n   <img class="').concat(ue.image,'" />\n   <h2 class="').concat(ue.title,'" id="').concat(ue.title,'"></h2>\n   <div class="').concat(ue["html-container"],'" id="').concat(ue["html-container"],'"></div>\n   <input class="').concat(ue.input,'" />\n   <input type="file" class="').concat(ue.file,'" />\n   <div class="').concat(ue.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(ue.select,'"></select>\n   <div class="').concat(ue.radio,'"></div>\n   <label for="').concat(ue.checkbox,'" class="').concat(ue.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(ue.label,'"></span>\n   </label>\n   <textarea class="').concat(ue.textarea,'"></textarea>\n   <div class="').concat(ue["validation-message"],'" id="').concat(ue["validation-message"],'"></div>\n   <div class="').concat(ue.actions,'">\n     <div class="').concat(ue.loader,'"></div>\n     <button type="button" class="').concat(ue.confirm,'"></button>\n     <button type="button" class="').concat(ue.deny,'"></button>\n     <button type="button" class="').concat(ue.cancel,'"></button>\n   </div>\n   <div class="').concat(ue.footer,'"></div>\n   <div class="').concat(ue["timer-progress-bar-container"],'">\n     <div class="').concat(ue["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),nn=()=>{ot.currentInstance.resetValidationMessage()},Ie=T=>{const S=(()=>{const T=ye();return!!T&&(T.remove(),ce([document.documentElement,document.body],[ue["no-backdrop"],ue["toast-shown"],ue["has-column"]]),!0)})();if(Mn())return void ve("SweetAlert2 requires document to initialize");const W=document.createElement("div");W.className=ue.container,S&&Re(W,ue["no-transition"]),nr(W,Gt);const ee=(T=>"string"==typeof T?document.querySelector(T):T)(T.target);ee.appendChild(W),(T=>{const S=Ee();S.setAttribute("role",T.toast?"alert":"dialog"),S.setAttribute("aria-live",T.toast?"polite":"assertive"),T.toast||S.setAttribute("aria-modal","true")})(T),(T=>{"rtl"===window.getComputedStyle(T).direction&&Re(ye(),ue.rtl)})(ee),(()=>{const T=Ee(),S=me(T,ue.input),W=me(T,ue.file),ee=T.querySelector(".".concat(ue.range," input")),st=T.querySelector(".".concat(ue.range," output")),ht=me(T,ue.select),hn=T.querySelector(".".concat(ue.checkbox," input")),wi=me(T,ue.textarea);S.oninput=nn,W.onchange=nn,ht.onchange=nn,hn.onchange=nn,wi.oninput=nn,ee.oninput=()=>{nn(),st.value=ee.value},ee.onchange=()=>{nn(),ee.nextSibling.value=ee.value}})()},bt=(T,S)=>{T instanceof HTMLElement?S.appendChild(T):"object"==typeof T?Wt(T,S):T&&nr(S,T)},Wt=(T,S)=>{T.jquery?xe(S,T):nr(S,T.toString())},xe=(T,S)=>{if(T.textContent="",0 in S)for(let W=0;W in S;W++)T.appendChild(S[W].cloneNode(!0));else T.appendChild(S.cloneNode(!0))},Tr=(()=>{if(Mn())return!1;const T=document.createElement("div"),S={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const W in S)if(Object.prototype.hasOwnProperty.call(S,W)&&typeof T.style[W]<"u")return S[W];return!1})(),Un=(T,S)=>{const W=Hr(),ee=Ir();S.showConfirmButton||S.showDenyButton||S.showCancelButton?Ue(W):Ye(W),fn(W,S,"actions"),function rn(T,S,W){const ee=Tt(),st=Tn(),ht=wn();ir(ee,"confirm",W),ir(st,"deny",W),ir(ht,"cancel",W),function kn(T,S,W,ee){if(!ee.buttonsStyling)return ce([T,S,W],ue.styled);Re([T,S,W],ue.styled),ee.confirmButtonColor&&(T.style.backgroundColor=ee.confirmButtonColor,Re(T,ue["default-outline"])),ee.denyButtonColor&&(S.style.backgroundColor=ee.denyButtonColor,Re(S,ue["default-outline"])),ee.cancelButtonColor&&(W.style.backgroundColor=ee.cancelButtonColor,Re(W,ue["default-outline"]))}(ee,st,ht,W),W.reverseButtons&&(W.toast?(T.insertBefore(ht,ee),T.insertBefore(st,ee)):(T.insertBefore(ht,S),T.insertBefore(st,S),T.insertBefore(ee,S)))}(W,ee,S),nr(ee,S.loaderHtml),fn(ee,S,"loader")};function ir(T,S,W){Cn(T,W["show".concat(b(S),"Button")],"inline-block"),nr(T,W["".concat(S,"ButtonText")]),T.setAttribute("aria-label",W["".concat(S,"ButtonAriaLabel")]),T.className=ue[S],fn(T,W,"".concat(S,"Button")),Re(T,W["".concat(S,"ButtonClass")])}const Br=(T,S)=>{const W=ye();!W||(function vt(T,S){"string"==typeof S?T.style.background=S:S||Re([document.documentElement,document.body],ue["no-backdrop"])}(W,S.backdrop),function sn(T,S){S in ue?Re(T,ue[S]):(Y('The "position" parameter is not valid, defaulting to "center"'),Re(T,ue.center))}(W,S.position),function ln(T,S){if(S&&"string"==typeof S){const W="grow-".concat(S);W in ue&&Re(T,ue[W])}}(W,S.grow),fn(W,S,"container"))};var on={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Cr=["input","file","range","select","radio","checkbox","textarea"],dn=T=>{if(!Gn[T.input])return ve('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(T.input,'"'));const S=Or(T.input),W=Gn[T.input](S,T);Ue(W),setTimeout(()=>{ei(W)})},ui=(T,S)=>{const W=Rt(Ee(),T);if(W){(T=>{for(let S=0;S<T.attributes.length;S++){const W=T.attributes[S].name;["type","value","style"].includes(W)||T.removeAttribute(W)}})(W);for(const ee in S)W.setAttribute(ee,S[ee])}},tn=T=>{const S=Or(T.input);T.customClass&&Re(S,T.customClass.input)},qr=(T,S)=>{(!T.placeholder||S.inputPlaceholder)&&(T.placeholder=S.inputPlaceholder)},Qn=(T,S,W)=>{if(W.inputLabel){T.id=ue.input;const ee=document.createElement("label"),st=ue["input-label"];ee.setAttribute("for",T.id),ee.className=st,Re(ee,W.customClass.inputLabel),ee.innerText=W.inputLabel,S.insertAdjacentElement("beforebegin",ee)}},Or=T=>{const S=ue[T]?ue[T]:ue.input;return me(Ee(),S)},Gn={};Gn.text=Gn.email=Gn.password=Gn.number=Gn.tel=Gn.url=(T,S)=>("string"==typeof S.inputValue||"number"==typeof S.inputValue?T.value=S.inputValue:ae(S.inputValue)||Y('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof S.inputValue,'"')),Qn(T,T,S),qr(T,S),T.type=S.input,T),Gn.file=(T,S)=>(Qn(T,T,S),qr(T,S),T),Gn.range=(T,S)=>{const W=T.querySelector("input"),ee=T.querySelector("output");return W.value=S.inputValue,W.type=S.input,ee.value=S.inputValue,Qn(W,T,S),T},Gn.select=(T,S)=>{if(T.textContent="",S.inputPlaceholder){const W=document.createElement("option");nr(W,S.inputPlaceholder),W.value="",W.disabled=!0,W.selected=!0,T.appendChild(W)}return Qn(T,T,S),T},Gn.radio=T=>(T.textContent="",T),Gn.checkbox=(T,S)=>{const W=Rt(Ee(),"checkbox");W.value="1",W.id=ue.checkbox,W.checked=Boolean(S.inputValue);const ee=T.querySelector("span");return nr(ee,S.inputPlaceholder),T},Gn.textarea=(T,S)=>{T.value=S.inputValue,qr(T,S),Qn(T,T,S);return setTimeout(()=>{if("MutationObserver"in window){const ee=parseInt(window.getComputedStyle(Ee()).width);new MutationObserver(()=>{const ht=T.offsetWidth+(ee=>parseInt(window.getComputedStyle(ee).marginLeft)+parseInt(window.getComputedStyle(ee).marginRight))(T);Ee().style.width=ht>ee?"".concat(ht,"px"):null}).observe(T,{attributes:!0,attributeFilter:["style"]})}}),T};const Rn=(T,S)=>{const W=Jt();fn(W,S,"htmlContainer"),S.html?(bt(S.html,W),Ue(W,"block")):S.text?(W.textContent=S.text,Ue(W,"block")):Ye(W),((T,S)=>{const W=Ee(),ee=on.innerParams.get(T),st=!ee||S.input!==ee.input;Cr.forEach(ht=>{const hn=ue[ht],wi=me(W,hn);ui(ht,S.inputAttributes),wi.className=hn,st&&Ye(wi)}),S.input&&(st&&dn(S),tn(S))})(T,S)},jn=(T,S)=>{for(const W in De)S.icon!==W&&ce(T,De[W]);Re(T,De[S.icon]),Vi(T,S),ko(),fn(T,S,"icon")},ko=()=>{const T=Ee(),S=window.getComputedStyle(T).getPropertyValue("background-color"),W=T.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ee=0;ee<W.length;ee++)W[ee].style.backgroundColor=S},qi=(T,S)=>{T.textContent="",nr(T,S.iconHtml?vs(S.iconHtml):"success"===S.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===S.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':vs({question:"?",warning:"!",info:"i"}[S.icon]))},Vi=(T,S)=>{if(S.iconColor){T.style.color=S.iconColor,T.style.borderColor=S.iconColor;for(const W of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ct(T,W,"backgroundColor",S.iconColor);Ct(T,".swal2-success-ring","borderColor",S.iconColor)}},vs=T=>'<div class="'.concat(ue["icon-content"],'">').concat(T,"</div>"),ti=(T,S)=>{const W=qn();if(!S.progressSteps||0===S.progressSteps.length)return Ye(W);Ue(W),W.textContent="",S.currentProgressStep>=S.progressSteps.length&&Y("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),S.progressSteps.forEach((ee,st)=>{const ht=(T=>{const S=document.createElement("li");return Re(S,ue["progress-step"]),nr(S,T),S})(ee);if(W.appendChild(ht),st===S.currentProgressStep&&Re(ht,ue["active-progress-step"]),st!==S.progressSteps.length-1){const hn=(T=>{const S=document.createElement("li");return Re(S,ue["progress-step-line"]),T.progressStepsDistance&&(S.style.width=T.progressStepsDistance),S})(S);W.appendChild(hn)}})},Rr=(T,S)=>{T.className="".concat(ue.popup," ").concat($t(T)?S.showClass.popup:""),S.toast?(Re([document.documentElement,document.body],ue["toast-shown"]),Re(T,ue.toast)):Re(T,ue.modal),fn(T,S,"popup"),"string"==typeof S.customClass&&Re(T,S.customClass),S.icon&&Re(T,ue["icon-".concat(S.icon)])},bs=(T,S)=>{((T,S)=>{const W=ye(),ee=Ee();S.toast?(ct(W,"width",S.width),ee.style.width="100%",ee.insertBefore(Ir(),lt())):ct(ee,"width",S.width),ct(ee,"padding",S.padding),S.color&&(ee.style.color=S.color),S.background&&(ee.style.background=S.background),Ye(Dt()),Rr(ee,S)})(0,S),Br(0,S),ti(0,S),((T,S)=>{const W=on.innerParams.get(T),ee=lt();W&&S.icon===W.icon?(qi(ee,S),jn(ee,S)):S.icon||S.iconHtml?S.icon&&-1===Object.keys(De).indexOf(S.icon)?(ve('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(S.icon,'"')),Ye(ee)):(Ue(ee),qi(ee,S),jn(ee,S),Re(ee,S.showClass.icon)):Ye(ee)})(T,S),((T,S)=>{const W=In();if(!S.imageUrl)return Ye(W);Ue(W,""),W.setAttribute("src",S.imageUrl),W.setAttribute("alt",S.imageAlt),ct(W,"width",S.imageWidth),ct(W,"height",S.imageHeight),W.className=ue.image,fn(W,S,"image")})(0,S),((T,S)=>{const W=He();Cn(W,S.title||S.titleText,"block"),S.title&&bt(S.title,W),S.titleText&&(W.innerText=S.titleText),fn(W,S,"title")})(0,S),((T,S)=>{const W=vr();nr(W,S.closeButtonHtml),fn(W,S,"closeButton"),Cn(W,S.showCloseButton),W.setAttribute("aria-label",S.closeButtonAriaLabel)})(0,S),Rn(T,S),Un(0,S),((T,S)=>{const W=Fn();Cn(W,S.footer),S.footer&&bt(S.footer,W),fn(W,S,"footer")})(0,S),"function"==typeof S.didRender&&S.didRender(Ee())},he=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ki=()=>{h(document.body.children).forEach(S=>{S.hasAttribute("data-previous-aria-hidden")?(S.setAttribute("aria-hidden",S.getAttribute("data-previous-aria-hidden")),S.removeAttribute("data-previous-aria-hidden")):S.removeAttribute("aria-hidden")})},Ns=["swal-title","swal-html","swal-footer"],_r=T=>{const S={};return h(T.querySelectorAll("swal-param")).forEach(W=>{Ji(W,["name","value"]);const ee=W.getAttribute("name"),st=W.getAttribute("value");"boolean"==typeof we[ee]&&"false"===st&&(S[ee]=!1),"object"==typeof we[ee]&&(S[ee]=JSON.parse(st))}),S},Ui=T=>{const S={};return h(T.querySelectorAll("swal-button")).forEach(W=>{Ji(W,["type","color","aria-label"]);const ee=W.getAttribute("type");S["".concat(ee,"ButtonText")]=W.innerHTML,S["show".concat(b(ee),"Button")]=!0,W.hasAttribute("color")&&(S["".concat(ee,"ButtonColor")]=W.getAttribute("color")),W.hasAttribute("aria-label")&&(S["".concat(ee,"ButtonAriaLabel")]=W.getAttribute("aria-label"))}),S},di=T=>{const S={},W=T.querySelector("swal-image");return W&&(Ji(W,["src","width","height","alt"]),W.hasAttribute("src")&&(S.imageUrl=W.getAttribute("src")),W.hasAttribute("width")&&(S.imageWidth=W.getAttribute("width")),W.hasAttribute("height")&&(S.imageHeight=W.getAttribute("height")),W.hasAttribute("alt")&&(S.imageAlt=W.getAttribute("alt"))),S},Ro=T=>{const S={},W=T.querySelector("swal-icon");return W&&(Ji(W,["type","color"]),W.hasAttribute("type")&&(S.icon=W.getAttribute("type")),W.hasAttribute("color")&&(S.iconColor=W.getAttribute("color")),S.iconHtml=W.innerHTML),S},Po=T=>{const S={},W=T.querySelector("swal-input");W&&(Ji(W,["type","label","placeholder","value"]),S.input=W.getAttribute("type")||"text",W.hasAttribute("label")&&(S.inputLabel=W.getAttribute("label")),W.hasAttribute("placeholder")&&(S.inputPlaceholder=W.getAttribute("placeholder")),W.hasAttribute("value")&&(S.inputValue=W.getAttribute("value")));const ee=T.querySelectorAll("swal-input-option");return ee.length&&(S.inputOptions={},h(ee).forEach(st=>{Ji(st,["value"]);const ht=st.getAttribute("value");S.inputOptions[ht]=st.innerHTML})),S},Qo=(T,S)=>{const W={};for(const ee in S){const st=S[ee],ht=T.querySelector(st);ht&&(Ji(ht,[]),W[st.replace(/^swal-/,"")]=ht.innerHTML.trim())}return W},Yi=T=>{const S=Ns.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);h(T.children).forEach(W=>{const ee=W.tagName.toLowerCase();-1===S.indexOf(ee)&&Y("Unrecognized element <".concat(ee,">"))})},Ji=(T,S)=>{h(T.attributes).forEach(W=>{-1===S.indexOf(W.name)&&Y(['Unrecognized attribute "'.concat(W.name,'" on <').concat(T.tagName.toLowerCase(),">."),"".concat(S.length?"Allowed attributes are: ".concat(S.join(", ")):"To set the value, use HTML within the element.")])})};var bo={email:(T,S)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(T)?Promise.resolve():Promise.resolve(S||"Invalid email address"),url:(T,S)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(T)?Promise.resolve():Promise.resolve(S||"Invalid URL")};function wo(T){(function Xo(T){T.inputValidator||Object.keys(bo).forEach(S=>{T.input===S&&(T.inputValidator=bo[S])})})(T),T.showLoaderOnConfirm&&!T.preConfirm&&Y("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function ga(T){(!T.target||"string"==typeof T.target&&!document.querySelector(T.target)||"string"!=typeof T.target&&!T.target.appendChild)&&(Y('Target parameter is not valid, defaulting to "body"'),T.target="body")}(T),"string"==typeof T.title&&(T.title=T.title.split("\n").join("<br />")),Ie(T)}class Dr{constructor(S,W){this.callback=S,this.remaining=W,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(S){const W=this.running;return W&&this.stop(),this.remaining+=S,W&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Fo=()=>{null===wr.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(wr.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(wr.previousBodyPadding+(()=>{const T=document.createElement("div");T.className=ue["scrollbar-measure"],document.body.appendChild(T);const S=T.getBoundingClientRect().width-T.clientWidth;return document.body.removeChild(T),S})(),"px"))},ro=()=>{const T=navigator.userAgent,S=!!T.match(/iPad/i)||!!T.match(/iPhone/i),W=!!T.match(/WebKit/i);S&&W&&!T.match(/CriOS/i)&&Ee().scrollHeight>window.innerHeight-44&&(ye().style.paddingBottom="".concat(44,"px"))},ni=()=>{const T=ye();let S;T.ontouchstart=W=>{S=Qi(W)},T.ontouchmove=W=>{S&&(W.preventDefault(),W.stopPropagation())}},Qi=T=>{const S=T.target,W=ye();return!(pr(T)||xs(T)||S!==W&&(Yn(W)||"INPUT"===S.tagName||"TEXTAREA"===S.tagName||Yn(Jt())&&Jt().contains(S)))},pr=T=>T.touches&&T.touches.length&&"stylus"===T.touches[0].touchType,xs=T=>T.touches&&T.touches.length>1,ea=T=>{const S=ye(),W=Ee();"function"==typeof T.willOpen&&T.willOpen(W);const st=window.getComputedStyle(document.body).overflowY;Sr(S,W,T),setTimeout(()=>{hi(S,W)},10),br()&&(ji(S,T.scrollbarPadding,st),h(document.body.children).forEach(S=>{S===ye()||S.contains(ye())||(S.hasAttribute("aria-hidden")&&S.setAttribute("data-previous-aria-hidden",S.getAttribute("aria-hidden")),S.setAttribute("aria-hidden","true"))})),!Lr()&&!ot.previousActiveElement&&(ot.previousActiveElement=document.activeElement),"function"==typeof T.didOpen&&setTimeout(()=>T.didOpen(W)),ce(S,ue["no-transition"])},Ws=T=>{const S=Ee();if(T.target!==S)return;const W=ye();S.removeEventListener(Tr,Ws),W.style.overflowY="auto"},hi=(T,S)=>{Tr&&Vn(S)?(T.style.overflowY="hidden",S.addEventListener(Tr,Ws)):T.style.overflowY="auto"},ji=(T,S,W)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Bt(document.body,ue.iosfix)){const S=document.body.scrollTop;document.body.style.top="".concat(-1*S,"px"),Re(document.body,ue.iosfix),ni(),ro()}})(),S&&"hidden"!==W&&Fo(),setTimeout(()=>{T.scrollTop=0})},Sr=(T,S,W)=>{Re(T,W.showClass.backdrop),S.style.setProperty("opacity","0","important"),Ue(S,"grid"),setTimeout(()=>{Re(S,W.showClass.popup),S.style.removeProperty("opacity")},10),Re([document.documentElement,document.body],ue.shown),W.heightAuto&&W.backdrop&&!W.toast&&Re([document.documentElement,document.body],ue["height-auto"])},Si=T=>{let S=Ee();S||new bi,S=Ee();const W=Ir();Lr()?Ye(lt()):io(S,T),Ue(W),S.setAttribute("data-loading",!0),S.setAttribute("aria-busy",!0),S.focus()},io=(T,S)=>{const W=Hr(),ee=Ir();!S&&$t(Tt())&&(S=Tt()),Ue(W),S&&(Ye(S),ee.setAttribute("data-button-to-replace",S.className)),ee.parentNode.insertBefore(ee,S),Re([T,W],ue.loading)},Lo=T=>T.checked?1:0,zs=T=>T.checked?T.value:null,ks=T=>T.files.length?null!==T.getAttribute("multiple")?T.files:T.files[0]:null,Kr=(T,S)=>{const W=Ee(),ee=st=>Gr[S.input](W,fi(st),S);Me(S.inputOptions)||ae(S.inputOptions)?(Si(Tt()),se(S.inputOptions).then(st=>{T.hideLoading(),ee(st)})):"object"==typeof S.inputOptions?ee(S.inputOptions):ve("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof S.inputOptions))},ws=(T,S)=>{const W=T.getInput();Ye(W),se(S.inputValue).then(ee=>{W.value="number"===S.input?parseFloat(ee)||0:"".concat(ee),Ue(W),W.focus(),T.hideLoading()}).catch(ee=>{ve("Error in inputValue promise: ".concat(ee)),W.value="",Ue(W),W.focus(),T.hideLoading()})},Gr={select:(T,S,W)=>{const ee=me(T,ue.select),st=(ht,hn,wi)=>{const hr=document.createElement("option");hr.value=wi,nr(hr,hn),hr.selected=Cs(wi,W.inputValue),ht.appendChild(hr)};S.forEach(ht=>{const hn=ht[0],wi=ht[1];if(Array.isArray(wi)){const hr=document.createElement("optgroup");hr.label=hn,hr.disabled=!1,ee.appendChild(hr),wi.forEach(lo=>st(hr,lo[1],lo[0]))}else st(ee,wi,hn)}),ee.focus()},radio:(T,S,W)=>{const ee=me(T,ue.radio);S.forEach(ht=>{const hn=ht[0],wi=ht[1],hr=document.createElement("input"),lo=document.createElement("label");hr.type="radio",hr.name=ue.radio,hr.value=hn,Cs(hn,W.inputValue)&&(hr.checked=!0);const ps=document.createElement("span");nr(ps,wi),ps.className=ue.label,lo.appendChild(hr),lo.appendChild(ps),ee.appendChild(lo)});const st=ee.querySelectorAll("input");st.length&&st[0].focus()}},fi=T=>{const S=[];return typeof Map<"u"&&T instanceof Map?T.forEach((W,ee)=>{let st=W;"object"==typeof st&&(st=fi(st)),S.push([ee,st])}):Object.keys(T).forEach(W=>{let ee=T[W];"object"==typeof ee&&(ee=fi(ee)),S.push([W,ee])}),S},Cs=(T,S)=>S&&S.toString()===T.toString();function Xn(){const T=on.innerParams.get(this);if(!T)return;const S=on.domCache.get(this);Ye(S.loader),Lr()?T.icon&&Ue(lt()):P(S),ce([S.popup,S.actions],ue.loading),S.popup.removeAttribute("aria-busy"),S.popup.removeAttribute("data-loading"),S.confirmButton.disabled=!1,S.denyButton.disabled=!1,S.cancelButton.disabled=!1}const P=T=>{const S=T.popup.getElementsByClassName(T.loader.getAttribute("data-button-to-replace"));S.length?Ue(S[0],"inline-block"):!$t(Tt())&&!$t(Tn())&&!$t(wn())&&Ye(T.actions)};var R={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ge=()=>Tt()&&Tt().click(),Et=T=>{T.keydownTarget&&T.keydownHandlerAdded&&(T.keydownTarget.removeEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!1)},Sn=(T,S,W)=>{const ee=Xr();if(ee.length)return(S+=W)===ee.length?S=0:-1===S&&(S=ee.length-1),ee[S].focus();Ee().focus()},vn=["ArrowRight","ArrowDown"],An=["ArrowLeft","ArrowUp"],dr=(T,S,W)=>{const ee=on.innerParams.get(T);!ee||S.isComposing||229===S.keyCode||(ee.stopKeydownPropagation&&S.stopPropagation(),"Enter"===S.key?cr(T,S,ee):"Tab"===S.key?ur(S,ee):[...vn,...An].includes(S.key)?Xi(S.key):"Escape"===S.key&&Yr(S,ee,W))},cr=(T,S,W)=>{if(Se(W.allowEnterKey)&&S.target&&T.getInput()&&S.target.outerHTML===T.getInput().outerHTML){if(["textarea","file"].includes(W.input))return;ge(),S.preventDefault()}},ur=(T,S)=>{const W=T.target,ee=Xr();let st=-1;for(let ht=0;ht<ee.length;ht++)if(W===ee[ht]){st=ht;break}Sn(0,st,T.shiftKey?-1:1),T.stopPropagation(),T.preventDefault()},Xi=T=>{if(![Tt(),Tn(),wn()].includes(document.activeElement))return;const st=vn.includes(T)?"nextElementSibling":"previousElementSibling";let ht=document.activeElement;for(let hn=0;hn<Hr().children.length;hn++){if(ht=ht[st],!ht)return;if($t(ht)&&ht instanceof HTMLButtonElement)break}ht instanceof HTMLButtonElement&&ht.focus()},Yr=(T,S,W)=>{Se(S.allowEscapeKey)&&(T.preventDefault(),W(he.esc))};function zt(T,S,W,ee){Lr()?Vt(T,ee):(kt(W).then(()=>Vt(T,ee)),Et(ot)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(S.setAttribute("style","display:none !important"),S.removeAttribute("class"),S.innerHTML=""):S.remove(),br()&&(null!==wr.previousBodyPadding&&(document.body.style.paddingRight="".concat(wr.previousBodyPadding,"px"),wr.previousBodyPadding=null),(()=>{if(Bt(document.body,ue.iosfix)){const T=parseInt(document.body.style.top,10);ce(document.body,ue.iosfix),document.body.style.top="",document.body.scrollTop=-1*T}})(),Ki()),function cs(){ce([document.documentElement,document.body],[ue.shown,ue["height-auto"],ue["no-backdrop"],ue["toast-shown"]])}()}function Rs(T){T=M(T);const S=R.swalPromiseResolve.get(this),W=Ps(this);this.isAwaitingPromise()?T.isDismissed||(O(this),S(T)):W&&S(T)}const Ps=T=>{const S=Ee();if(!S)return!1;const W=on.innerParams.get(T);if(!W||Bt(S,W.hideClass.popup))return!1;ce(S,W.showClass.popup),Re(S,W.hideClass.popup);const ee=ye();return ce(ee,W.showClass.backdrop),Re(ee,W.hideClass.backdrop),H(T,S,W),!0};const O=T=>{T.isAwaitingPromise()&&(on.awaitingPromise.delete(T),on.innerParams.get(T)||T._destroy())},M=T=>typeof T>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},T),H=(T,S,W)=>{const ee=ye(),st=Tr&&Vn(S);"function"==typeof W.willClose&&W.willClose(S),st?Fe(T,S,ee,W.returnFocus,W.didClose):zt(T,ee,W.returnFocus,W.didClose)},Fe=(T,S,W,ee,st)=>{ot.swalCloseEventFinishedCallback=zt.bind(null,T,W,ee,st),S.addEventListener(Tr,function(ht){ht.target===S&&(ot.swalCloseEventFinishedCallback(),delete ot.swalCloseEventFinishedCallback)})},Vt=(T,S)=>{setTimeout(()=>{"function"==typeof S&&S.bind(T.params)(),T._destroy()})};function pn(T,S,W){const ee=on.domCache.get(T);S.forEach(st=>{ee[st].disabled=W})}function si(T,S){if(!T)return!1;if("radio"===T.type){const ee=T.parentNode.parentNode.querySelectorAll("input");for(let st=0;st<ee.length;st++)ee[st].disabled=S}else T.disabled=S}const Ni=T=>{const S={};return Object.keys(T).forEach(W=>{Be(W)?S[W]=T[W]:Y('Invalid parameter to update: "'.concat(W,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),S};const Fa=T=>{Do(T),delete T.params,delete ot.keydownHandler,delete ot.keydownTarget,delete ot.currentInstance},Do=T=>{T.isAwaitingPromise()?(us(on,T),on.awaitingPromise.set(T,!0)):(us(R,T),us(on,T))},us=(T,S)=>{for(const W in T)T[W].delete(S)};var _a=Object.freeze({hideLoading:Xn,disableLoading:Xn,getInput:function q(T){const S=on.innerParams.get(T||this),W=on.domCache.get(T||this);return W?Rt(W.popup,S.input):null},close:Rs,isAwaitingPromise:function Co(){return!!on.awaitingPromise.get(this)},rejectPromise:function B(T){const S=R.swalPromiseReject.get(this);O(this),S&&S(T)},handleAwaitingPromise:O,closePopup:Rs,closeModal:Rs,closeToast:Rs,enableButtons:function Ai(){pn(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function oi(){pn(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Eo(){return si(this.getInput(),!1)},disableInput:function Bo(){return si(this.getInput(),!0)},showValidationMessage:function ma(T){const S=on.domCache.get(this),W=on.innerParams.get(this);nr(S.validationMessage,T),S.validationMessage.className=ue["validation-message"],W.customClass&&W.customClass.validationMessage&&Re(S.validationMessage,W.customClass.validationMessage),Ue(S.validationMessage);const ee=this.getInput();ee&&(ee.setAttribute("aria-invalid",!0),ee.setAttribute("aria-describedby",ue["validation-message"]),ei(ee),Re(ee,ue.inputerror))},resetValidationMessage:function Xa(){const T=on.domCache.get(this);T.validationMessage&&Ye(T.validationMessage);const S=this.getInput();S&&(S.removeAttribute("aria-invalid"),S.removeAttribute("aria-describedby"),ce(S,ue.inputerror))},getProgressSteps:function ta(){return on.domCache.get(this).progressSteps},update:function so(T){const S=Ee(),W=on.innerParams.get(this);if(!S||Bt(S,W.hideClass.popup))return Y("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ee=Ni(T),st=Object.assign({},W,ee);bs(this,st),on.innerParams.set(this,st),Object.defineProperties(this,{params:{value:Object.assign({},this.params,T),writable:!1,enumerable:!0}})},_destroy:function Fs(){const T=on.domCache.get(this),S=on.innerParams.get(this);S?(T.popup&&ot.swalCloseEventFinishedCallback&&(ot.swalCloseEventFinishedCallback(),delete ot.swalCloseEventFinishedCallback),ot.deferDisposalTimer&&(clearTimeout(ot.deferDisposalTimer),delete ot.deferDisposalTimer),"function"==typeof S.didDestroy&&S.didDestroy(),Fa(this)):Do(this)}});const Vo=(T,S)=>{const W=on.innerParams.get(T);if(!W.input)return ve('The "input" parameter is needed to be set when using returnInputValueOn'.concat(b(S)));const ee=((T,S)=>{const W=T.getInput();if(!W)return null;switch(S.input){case"checkbox":return Lo(W);case"radio":return zs(W);case"file":return ks(W);default:return S.inputAutoTrim?W.value.trim():W.value}})(T,W);W.inputValidator?na(T,ee,S):T.getInput().checkValidity()?"deny"===S?Io(T,ee):oo(T,ee):(T.enableButtons(),T.showValidationMessage(W.validationMessage))},na=(T,S,W)=>{const ee=on.innerParams.get(T);T.disableInput(),Promise.resolve().then(()=>se(ee.inputValidator(S,ee.validationMessage))).then(ht=>{T.enableButtons(),T.enableInput(),ht?T.showValidationMessage(ht):"deny"===W?Io(T,S):oo(T,S)})},Io=(T,S)=>{const W=on.innerParams.get(T||void 0);W.showLoaderOnDeny&&Si(Tn()),W.preDeny?(on.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>se(W.preDeny(S,W.validationMessage))).then(st=>{!1===st?(T.hideLoading(),O(T)):T.closePopup({isDenied:!0,value:typeof st>"u"?S:st})}).catch(st=>el(T||void 0,st))):T.closePopup({isDenied:!0,value:S})},ra=(T,S)=>{T.closePopup({isConfirmed:!0,value:S})},el=(T,S)=>{T.rejectPromise(S)},oo=(T,S)=>{const W=on.innerParams.get(T||void 0);W.showLoaderOnConfirm&&Si(),W.preConfirm?(T.resetValidationMessage(),on.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>se(W.preConfirm(S,W.validationMessage))).then(st=>{$t(Dt())||!1===st?(T.hideLoading(),O(T)):ra(T,typeof st>"u"?S:st)}).catch(st=>el(T||void 0,st))):ra(T,S)},Ba=(T,S,W)=>{S.popup.onclick=()=>{const ee=on.innerParams.get(T);ee&&(sa(ee)||ee.timer||ee.input)||W(he.close)}},sa=T=>T.showConfirmButton||T.showDenyButton||T.showCancelButton||T.showCloseButton;let oa=!1;const tl=T=>{T.popup.onmousedown=()=>{T.container.onmouseup=function(S){T.container.onmouseup=void 0,S.target===T.container&&(oa=!0)}}},Uo=T=>{T.container.onmousedown=()=>{T.popup.onmouseup=function(S){T.popup.onmouseup=void 0,(S.target===T.popup||T.popup.contains(S.target))&&(oa=!0)}}},Yl=(T,S,W)=>{S.container.onclick=ee=>{const st=on.innerParams.get(T);oa?oa=!1:ee.target===S.container&&Se(st.allowOutsideClick)&&W(he.backdrop)}},Hi=T=>T instanceof Element||(T=>"object"==typeof T&&T.jquery)(T);const Pc=()=>{if(ot.timeout)return(()=>{const T=_n(),S=parseInt(window.getComputedStyle(T).width);T.style.removeProperty("transition"),T.style.width="100%";const ee=S/parseInt(window.getComputedStyle(T).width)*100;T.style.removeProperty("transition"),T.style.width="".concat(ee,"%")})(),ot.timeout.stop()},pi=()=>{if(ot.timeout){const T=ot.timeout.start();return Jn(T),T}};let qs=!1;const hs={};const aa=T=>{for(let S=T.target;S&&S!==document;S=S.parentNode)for(const W in hs){const ee=S.getAttribute(W);if(ee)return void hs[W].fire({template:ee})}};var Ql=Object.freeze({isValidParameter:ut,isUpdatableParameter:Be,isDeprecatedParameter:Qe,argsToParams:T=>{const S={};return"object"!=typeof T[0]||Hi(T[0])?["title","html","icon"].forEach((W,ee)=>{const st=T[ee];"string"==typeof st||Hi(st)?S[W]=st:void 0!==st&&ve("Unexpected type of ".concat(W,'! Expected "string" or "Element", got ').concat(typeof st))}):Object.assign(S,T[0]),S},isVisible:()=>$t(Ee()),clickConfirm:ge,clickDeny:()=>Tn()&&Tn().click(),clickCancel:()=>wn()&&wn().click(),getContainer:ye,getPopup:Ee,getTitle:He,getHtmlContainer:Jt,getImage:In,getIcon:lt,getInputLabel:()=>Ne(ue["input-label"]),getCloseButton:vr,getActions:Hr,getConfirmButton:Tt,getDenyButton:Tn,getCancelButton:wn,getLoader:Ir,getFooter:Fn,getTimerProgressBar:_n,getFocusableElements:Xr,getValidationMessage:Dt,isLoading:()=>Ee().hasAttribute("data-loading"),fire:function ai(){const T=this;for(var S=arguments.length,W=new Array(S),ee=0;ee<S;ee++)W[ee]=arguments[ee];return new T(...W)},mixin:function Sl(T){return class S extends(this){_main(ee,st){return super._main(ee,Object.assign({},T,st))}}},showLoading:Si,enableLoading:Si,getTimerLeft:()=>ot.timeout&&ot.timeout.getTimerLeft(),stopTimer:Pc,resumeTimer:pi,toggleTimer:()=>{const T=ot.timeout;return T&&(T.running?Pc():pi())},increaseTimer:T=>{if(ot.timeout){const S=ot.timeout.increase(T);return Jn(S,!0),S}},isTimerRunning:()=>ot.timeout&&ot.timeout.isRunning(),bindClickHandler:function Jr(){hs[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,qs||(document.body.addEventListener("click",aa),qs=!0)}});let es;class gi{constructor(){if(typeof window>"u")return;es=this;for(var S=arguments.length,W=new Array(S),ee=0;ee<S;ee++)W[ee]=arguments[ee];const st=Object.freeze(this.constructor.argsToParams(W));Object.defineProperties(this,{params:{value:st,writable:!1,enumerable:!0,configurable:!0}});const ht=this._main(this.params);on.promise.set(this,ht)}_main(S){let W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(T=>{!T.backdrop&&T.allowOutsideClick&&Y('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const S in T)It(S),T.toast&&wt(S),Je(S)})(Object.assign({},W,S)),ot.currentInstance&&(ot.currentInstance._destroy(),br()&&Ki()),ot.currentInstance=this;const ee=fs(S,W);wo(ee),Object.freeze(ee),ot.timeout&&(ot.timeout.stop(),delete ot.timeout),clearTimeout(ot.restoreFocusTimeout);const st=ao(this);return bs(this,ee),on.innerParams.set(this,ee),To(this,st,ee)}then(S){return on.promise.get(this).then(S)}finally(S){return on.promise.get(this).finally(S)}}const To=(T,S,W)=>new Promise((ee,st)=>{const ht=hn=>{T.closePopup({isDismissed:!0,dismiss:hn})};R.swalPromiseResolve.set(T,ee),R.swalPromiseReject.set(T,st),S.confirmButton.onclick=()=>(T=>{const S=on.innerParams.get(T);T.disableButtons(),S.input?Vo(T,"confirm"):oo(T,!0)})(T),S.denyButton.onclick=()=>(T=>{const S=on.innerParams.get(T);T.disableButtons(),S.returnInputValueOnDeny?Vo(T,"deny"):Io(T,!1)})(T),S.cancelButton.onclick=()=>((T,S)=>{T.disableButtons(),S(he.cancel)})(T,ht),S.closeButton.onclick=()=>ht(he.close),((T,S,W)=>{on.innerParams.get(T).toast?Ba(T,S,W):(tl(S),Uo(S),Yl(T,S,W))})(T,S,ht),((T,S,W,ee)=>{Et(S),W.toast||(S.keydownHandler=st=>dr(T,st,ee),S.keydownTarget=W.keydownListenerCapture?window:Ee(),S.keydownListenerCapture=W.keydownListenerCapture,S.keydownTarget.addEventListener("keydown",S.keydownHandler,{capture:S.keydownListenerCapture}),S.keydownHandlerAdded=!0)})(T,ot,W,ht),((T,S)=>{"select"===S.input||"radio"===S.input?Kr(T,S):["text","email","number","tel","textarea"].includes(S.input)&&(Me(S.inputValue)||ae(S.inputValue))&&(Si(Tt()),ws(T,S))})(T,W),ea(W),Ls(ot,W,ht),rl(S,W),setTimeout(()=>{S.container.scrollTop=0})}),fs=(T,S)=>{const W=(T=>{const S="string"==typeof T.template?document.querySelector(T.template):T.template;if(!S)return{};const W=S.content;return Yi(W),Object.assign(_r(W),Ui(W),di(W),Ro(W),Po(W),Qo(W,Ns))})(T),ee=Object.assign({},we,S,W,T);return ee.showClass=Object.assign({},we.showClass,ee.showClass),ee.hideClass=Object.assign({},we.hideClass,ee.hideClass),ee},ao=T=>{const S={popup:Ee(),container:ye(),actions:Hr(),confirmButton:Tt(),denyButton:Tn(),cancelButton:wn(),loader:Ir(),closeButton:vr(),validationMessage:Dt(),progressSteps:qn()};return on.domCache.set(T,S),S},Ls=(T,S,W)=>{const ee=_n();Ye(ee),S.timer&&(T.timeout=new Dr(()=>{W("timer"),delete T.timeout},S.timer),S.timerProgressBar&&(Ue(ee),fn(ee,S,"timerProgressBar"),setTimeout(()=>{T.timeout&&T.timeout.running&&Jn(S.timer)})))},rl=(T,S)=>{if(!S.toast){if(!Se(S.allowEnterKey))return xu();Va(T,S)||Sn(0,-1,1)}},Va=(T,S)=>S.focusDeny&&$t(T.denyButton)?(T.denyButton.focus(),!0):S.focusCancel&&$t(T.cancelButton)?(T.cancelButton.focus(),!0):!(!S.focusConfirm||!$t(T.confirmButton)||(T.confirmButton.focus(),0)),xu=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(gi.prototype,_a),Object.assign(gi,Ql),Object.keys(_a).forEach(T=>{gi[T]=function(){if(es)return es[T](...arguments)}}),gi.DismissReason=he,gi.version="11.4.8";const bi=gi;return bi.default=bi,bi}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Ve,G){var b=Ve.createElement("style");if(Ve.getElementsByTagName("head")[0].appendChild(b),b.styleSheet)b.styleSheet.disabled||(b.styleSheet.cssText=G);else try{b.innerHTML=G}catch{b.innerText=G}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},2401:(Nt,Ve,G)=>{"use strict";var b=G(8692),h=G(4537);class Y extends b.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends Y{static makeCurrent(){(0,b.HT)(new ve)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Te(){return pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null}();return null==t?null:function Se(n){ke=ke||document.createElement("a"),ke.setAttribute("href",n);const e=ke.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,b.Mx)(document.cookie,e)}}let ke,pe=null;const Me=new h.OlP("TRANSITION_ID"),ae=[{provide:h.ip1,useFactory:function se(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=(0,b.q)(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Me,b.K0,h.zs3],multi:!0}];class we{static init(){(0,h.VLi)(new we)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let l=i.length,u=!1;const m=function(_){u=u||_,l--,0==l&&r(u)};i.forEach(function(_){_.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?(0,b.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}}let at=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ae=new h.OlP("EventManagerPlugins");let Ze=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const u=i[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ae),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ut{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=(0,b.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Be=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n extends Be{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(It),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(It))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(b.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function It(n){(0,b.q)().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Je=/%COMP%/g;function Le(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Le(n,i,t):(i=i.replace(Je,n),t.push(i))}return t}function Ne(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let lt=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new He(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qn(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Le(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ze),h.LFG(Qe),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class He{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=wt[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=wt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ne(r)):this.eventManager.addEventListener(e,t,Ne(r))}}class qn extends He{constructor(e,t,r,i){super(e),this.component=r;const l=Le(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function De(n){return"_ngcontent-%COMP%".replace(Je,n)}(i+"-"+r.id),this.hostAttr=function ye(n){return"_nghost-%COMP%".replace(Je,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dt extends He{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Le(i.id,i.styles,[]);for(let u=0;u<l.length;u++){const m=document.createElement("style");m.textContent=l[u],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tt=(()=>{class n extends ut{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(b.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Tn=["alt","control","meta","shift"],Ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Fn=(()=>{class n extends ut{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),u=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,b.q)().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let u="";if(Tn.forEach(_=>{const D=r.indexOf(_);D>-1&&(r.splice(D,1),u+=_+".")}),u+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static getEventFullKey(t){let r="",i=function _n(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&wn.hasOwnProperty(e)&&(e=wn[e]))}return Ir[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Tn.forEach(l=>{l!=i&&Hr[l](t)&&(r+=l+".")}),r+=i,r}static eventCallback(t,r,i){return l=>{n.getEventFullKey(l)===t&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(b.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Lr=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:b.bD},{provide:h.g9A,useValue:function vr(){ve.makeCurrent(),we.init()},multi:!0},{provide:b.K0,useFactory:function Xr(){return(0,h.RDi)(document),document},deps:[]}]),Mr=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Fr(){return new h.qLn},deps:[]},{provide:Ae,useClass:Tt,multi:!0,deps:[b.K0,h.R0b,h.Lbi]},{provide:Ae,useClass:Fn,multi:!0,deps:[b.K0]},{provide:lt,useClass:lt,deps:[Ze,Qe,h.AFp]},{provide:h.FYo,useExisting:lt},{provide:Be,useExisting:Qe},{provide:Qe,useClass:Qe,deps:[b.K0]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Ze,useClass:Ze,deps:[Ae,h.R0b]},{provide:b.JF,useClass:at,deps:[]}];let wr=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Me,useExisting:h.AFp},ae]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Mr,imports:[b.ez,h.hGG]}),n})();typeof window<"u"&&window;var Wt=G(7261),xe=G(8239),Tr=G(7841),en=G(8023),Un=G(4945),rn=G(818),kn=G(237),ir=G(1860),vt=G(7513),sn=G(1528),ln=G(7969),Br=G(2069);class on extends en.x{constructor(e=1/0,t=1/0,r=Br.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:u}=this;t||(r.push(e),!i&&r.push(l.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let u=0;u<l.length&&!e.closed;u+=r?1:2)e.next(l[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const u=t.now();let m=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)m=_;m&&r.splice(0,m+1)}}}var Cr=G(815);function zi(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Cr.B)({connector:()=>new on(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var dn=G(9676),zr=G(5975);function ui(n,e){return(0,zr.m)(e)?(0,sn.w)(()=>n,e):(0,sn.w)(()=>n)}var tn=G(4119),qr=G(4970),Qn=G(6586),Or=G(8939);G(2329);var Rr=G(8026),bs=G(3910),he=G(3854),vi=G(5422);const Ki=new Map,Ns={activated:!1,tokenObservers:[]},Er={initialized:!1,enabled:!1};function _r(n){return Ki.get(n)||Ns}function Ui(n,e){Ki.set(n,e)}function di(){return Er}class Xo{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,xe.Z)(function*(){t.stop();try{t.pending=new he.BH,yield function ga(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new he.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Dr=new he.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function no(n){if(!_r(n).activated)throw Dr.create("use-before-activation",{appName:n.name})}function Qi(n,e){return pr.apply(this,arguments)}function pr(){return(pr=(0,xe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const $=yield i.getHeartbeatsHeader();$&&(r["X-Firebase-Client"]=$)}const l={method:"POST",body:JSON.stringify(e),headers:r};let u,m;try{u=yield fetch(n,l)}catch($){throw Dr.create("fetch-network-error",{originalErrorMessage:$.message})}if(200!==u.status)throw Dr.create("fetch-status-error",{httpStatus:u.status});try{m=yield u.json()}catch($){throw Dr.create("fetch-parse-error",{originalErrorMessage:$.message})}const _=m.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Dr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(_[1]),L=Date.now();return{token:m.attestationToken,expireTimeMillis:L+D,issuedAtTimeMillis:L}})).apply(this,arguments)}function Os(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const hi="firebase-app-check-store";let Sr=null;function Si(){return Sr||(Sr=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Dr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hi,{keyPath:"compositeKey"})}}catch(t){e(Dr.create("storage-open",{originalErrorMessage:t.message}))}}),Sr)}function ks(){return(ks=(0,xe.Z)(function*(n,e){const r=(yield Si()).transaction(hi,"readwrite"),l=r.objectStore(hi).put({compositeKey:n,value:e});return new Promise((u,m)=>{l.onsuccess=_=>{u()},r.onerror=_=>{var D;m(Dr.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const fi=new vi.Yd("@firebase/app-check");function P(n,e){return(0,he.hl)()?function ri(n,e){return function zs(n,e){return ks.apply(this,arguments)}(function Gr(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fi.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function J(){return di().enabled}function ge(){return $e.apply(this,arguments)}function $e(){return($e=(0,xe.Z)(function*(){const n=di();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Et={error:"UNKNOWN_ERROR"};function Ln(n){return he.US.encodeString(JSON.stringify(n),!1)}function Sn(n){return vn.apply(this,arguments)}function vn(){return(vn=(0,xe.Z)(function*(n,e=!1){const t=n.app;no(t);const r=_r(t);let l,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&Yr(_)&&(i=_)}if(!e&&i&&Yr(i))return{token:i.token};let m,u=!1;if(J()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Qi(Os(t,yield ge()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),u=!0);const _=yield r.exchangeTokenPromise;return yield P(t,_),Ui(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?fi.warn(_.message):fi.error(_),l=_}return i?(m={token:i.token},Ui(t,Object.assign(Object.assign({},r),{token:i})),yield P(t,i)):m=zt(l),u&&Xi(t,m),m})).apply(this,arguments)}function dr(n,e){const t=_r(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ui(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function cr(n){const{app:e}=n,t=_r(e);let r=t.tokenRefresher;r||(r=function ur(n){const{app:e}=n;return new Xo((0,xe.Z)(function*(){let r;if(r=_r(e).token?yield Sn(n,!0):yield Sn(n),r.error)throw r.error}),()=>!0,()=>{const t=_r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ui(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Xi(n,e){const t=_r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Yr(n){return n.expireTimeMillis-Date.now()>0}function zt(n){return{token:Ln(Et),error:n}}class cs{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_r(this.app);for(const t of e)dr(this.app,t.next);return Promise.resolve()}}const va="app-check-internal";!function Vo(){(0,Rr._registerComponent)(new bs.wA("app-check",n=>function Rs(n,e){return new cs(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(va).initialize()})),(0,Rr._registerComponent)(new bs.wA(va,n=>function Co(n){return{getToken:e=>Sn(n,e),addTokenListener:e=>function An(n,e,t,r){const{app:i}=n,l=_r(i),u={next:t,error:r,type:e};if(Ui(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&Yr(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),cr(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>cr(n))}(n,"INTERNAL",e),removeTokenListener:e=>dr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rr.registerVersion)("@firebase/app-check","0.5.5")}();class ra{constructor(){return(0,Qn.vb)("app-check")}}typeof window<"u"&&window;const pi=new h.OlP("angularfire2.auth.use-emulator"),Jl=new h.OlP("angularfire2.auth.settings"),wa=new h.OlP("angularfire2.auth.tenant-id"),ds=new h.OlP("angularfire2.auth.langugage-code"),qs=new h.OlP("angularfire2.auth.use-device-language"),hs=new h.OlP("angularfire.auth.persistence"),Jr=(n,e,t,r,i,l,u,m)=>(0,Or.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,l&&_.useDeviceLanguage(),u)for(const[D,L]of Object.entries(u))_.settings[D]=L;return m&&_.setPersistence(m),_},[t,r,i,l,u,m]);let aa=(()=>{class n{constructor(t,r,i,l,u,m,_,D,L,$,Q,oe){const be=new en.x,Ge=(0,Un.of)(void 0).pipe((0,vt.Q)(u.outsideAngular),(0,sn.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5850)))),(0,ln.U)(()=>(0,Or.on)(t,l,r)),(0,ln.U)(ft=>Jr(ft,l,m,D,L,$,_,Q)),zi({bufferSize:1,refCount:!1}));if((0,b.PM)(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Un.of)(null);else{Ge.pipe((0,dn.P)()).subscribe();const Qt=Ge.pipe((0,sn.w)(Pt=>Pt.getRedirectResult().then(Zt=>Zt,()=>null)),Qn.iC,zi({bufferSize:1,refCount:!1})),At=Ge.pipe((0,sn.w)(Pt=>new rn.y(Zt=>({unsubscribe:l.runOutsideAngular(()=>Pt.onAuthStateChanged(Ht=>Zt.next(Ht),Ht=>Zt.error(Ht),()=>Zt.complete()))})))),Dn=Ge.pipe((0,sn.w)(Pt=>new rn.y(Zt=>({unsubscribe:l.runOutsideAngular(()=>Pt.onIdTokenChanged(Ht=>Zt.next(Ht),Ht=>Zt.error(Ht),()=>Zt.complete()))}))));this.authState=Qt.pipe(ui(At),(0,tn.R)(u.outsideAngular),(0,vt.Q)(u.insideAngular)),this.user=Qt.pipe(ui(Dn),(0,tn.R)(u.outsideAngular),(0,vt.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,sn.w)(Pt=>Pt?(0,kn.D)(Pt.getIdToken()):(0,Un.of)(null))),this.idTokenResult=this.user.pipe((0,sn.w)(Pt=>Pt?(0,kn.D)(Pt.getIdTokenResult()):(0,Un.of)(null))),this.credential=(0,ir.T)(Qt,be,this.authState.pipe((0,qr.h)(Pt=>!Pt))).pipe((0,ln.U)(Pt=>(null==Pt?void 0:Pt.user)?Pt:null),(0,tn.R)(u.outsideAngular),(0,vt.Q)(u.insideAngular))}return(0,Or.pX)(this,Ge,l,{spy:{apply:(ft,Qt,At)=>{(ft.startsWith("signIn")||ft.startsWith("createUser"))&&At.then(Dn=>be.next(Dn))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Or.Dh),h.LFG(Or.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qn.HU),h.LFG(pi,8),h.LFG(Jl,8),h.LFG(wa,8),h.LFG(ds,8),h.LFG(qs,8),h.LFG(hs,8),h.LFG(ra,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var es=G(6523),gi=G(1927),To=G(2085),fs=G(8499);function ao(){return(0,To.e)((n,e)=>{let t,r=!1;n.subscribe((0,fs.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}var Ls=G(7479),rl=G(8330);function xu(n,e){return n===e}G(5850);var ee,T=G(3394),S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W={},st=st||{},ht=S||self;function hn(){}function wi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function hr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ps="closure_uid_"+(1e9*Math.random()>>>0),Xd=0;function Mu(n,e,t){return n.call.apply(n.bind,arguments)}function A(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function E(n,e,t){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Mu:A).apply(null,arguments)}function w(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function k(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var u=Array(arguments.length-2),m=2;m<arguments.length;m++)u[m-2]=arguments[m];return e.prototype[i].apply(r,u)}}function V(){this.s=this.s,this.o=this.o}var re={};V.prototype.s=!1,V.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function lo(n){return Object.prototype.hasOwnProperty.call(n,ps)&&n[ps]||(n[ps]=++Xd)}(this);delete re[n]}},V.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const de=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},nt=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&e.call(t,i[l],l,n)};function Zn(n){return Array.prototype.concat.apply([],arguments)}function Kt(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function $n(n){return/^[\s\xa0]*$/.test(n)}var Ar,gr=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xi(n,e){return-1!=n.indexOf(e)}function jo(n,e){return n<e?-1:n>e?1:0}e:{var Xl=ht.navigator;if(Xl){var Ho=Xl.userAgent;if(Ho){Ar=Ho;break e}}Ar=""}function Al(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Go(n){const e={};for(const t in n)e[t]=n[t];return e}var Ou="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function il(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<Ou.length;l++)t=Ou[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nl(n){return Nl[" "](n),n}Nl[" "]=hn;var li,n,xl=xi(Ar,"Opera"),Es=xi(Ar,"Trident")||xi(Ar,"MSIE"),eh=xi(Ar,"Edge"),ec=eh||Es,sl=xi(Ar,"Gecko")&&!(xi(Ar.toLowerCase(),"webkit")&&!xi(Ar,"Edge"))&&!(xi(Ar,"Trident")||xi(Ar,"MSIE"))&&!xi(Ar,"Edge"),Fc=xi(Ar.toLowerCase(),"webkit")&&!xi(Ar,"Edge");function Gf(){var n=ht.document;return n?n.documentMode:void 0}e:{var th="",$f=(n=Ar,sl?/rv:([^\);]+)(\)|;)/.exec(n):eh?/Edge\/([\d\.]+)/.exec(n):Es?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Fc?/WebKit\/(\S+)/.exec(n):xl?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($f&&(th=$f?$f[1]:""),Es){var nh=Gf();if(null!=nh&&nh>parseFloat(th)){li=String(nh);break e}}li=th}var rh={};var ol=ht.document&&Es&&(Gf()||parseInt(li,10))||void 0,Ag=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ht.addEventListener("test",hn,e),ht.removeEventListener("test",hn,e)}catch{}return n}();function er(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function al(n,e){if(er.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sl){e:{try{Nl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ml[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&al.Z.h.call(this)}}er.prototype.h=function(){this.defaultPrevented=!0},k(al,er);var Ml={2:"touch",3:"pen",4:"mouse"};al.prototype.h=function(){al.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lc="closure_listenable_"+(1e6*Math.random()|0),ku=0;function Bs(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++ku,this.ca=this.fa=!1}function Vs(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function tc(n){this.src=n,this.g={},this.h=0}function la(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=de(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(Vs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function co(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return i}return-1}tc.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=co(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new Bs(e,this.src,l,!!r,i)).fa=t,n.push(e)),e};var So="closure_lm_"+(1e6*Math.random()|0),ll={};function Bc(n,e,t,r,i){if(r&&r.once)return Vc(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Bc(n,e[l],t,r,i);return null}return t=Pu(t),n&&n[Lc]?n.N(e,t,hr(r)?!!r.capture:!!r,i):Ru(n,e,t,!1,r,i)}function Ru(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var u=hr(i)?!!i.capture:!!i,m=Ca(n);if(m||(n[So]=m=new tc(n)),(t=m.add(e,t,r,u,l)).proxy)return t;if(r=function sh(){var e=oh;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ag||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cl(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Vc(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Vc(n,e[l],t,r,i);return null}return t=Pu(t),n&&n[Lc]?n.O(e,t,hr(r)?!!r.capture:!!r,i):Ru(n,e,t,!0,r,i)}function Zs(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)Zs(n,e[l],t,r,i);else r=hr(r)?!!r.capture:!!r,t=Pu(t),n&&n[Lc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=co(l=n.g[e],t,r,i))&&(Vs(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Ca(n))&&(e=n.g[e.toString()],n=-1,e&&(n=co(e,t,r,i)),(t=-1<n?e[n]:null)&&Uc(t))}function Uc(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Lc])la(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cl(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ca(e))?(la(t,n),0==t.h&&(t.src=null,e[So]=null)):Vs(n)}}}function cl(n){return n in ll?ll[n]:ll[n]="on"+n}function oh(n,e){if(n.ca)n=!0;else{e=new al(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Uc(n),n=t.call(r,e)}return n}function Ca(n){return(n=n[So])instanceof tc?n:null}var Ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(n){return"function"==typeof n?n:(n[Ol]||(n[Ol]=function(e){return n.handleEvent(e)}),n[Ol])}function Mi(){V.call(this),this.i=new tc(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new er(e,n);else if(e instanceof er)e.target=e.target||n;else{var i=e;il(e=new er(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];i=jc(u,r,!0,e)&&i}if(i=jc(u=e.g=n,r,!0,e)&&i,i=jc(u,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=jc(u=e.g=t[l],r,!1,e)&&i}function jc(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ca&&u.capture==t){var m=u.listener,_=u.ia||u.src;u.fa&&la(n.i,u),i=!1!==m.call(_,r)&&i}}return i&&!r.defaultPrevented}k(Mi,V),Mi.prototype[Lc]=!0,Mi.prototype.removeEventListener=function(n,e,t,r){Zs(this,n,e,t,r)},Mi.prototype.M=function(){if(Mi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vs(t[r]);delete n.g[e],n.h--}}this.I=null},Mi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Mi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uo=ht.JSON.stringify;function ah(){var n=ie;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var x,Hc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ul,n=>n.reset());class ul{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nc(n){ht.setTimeout(()=>{throw n},0)}function rc(n,e){x||function F(){var n=ht.Promise.resolve(void 0);x=function(){n.then(Oe)}}(),Z||(x(),Z=!0),ie.add(n,e)}var Z=!1,ie=new class Fu{constructor(){this.h=this.g=null}add(e,t){const r=Hc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Oe(){for(var n;n=ah();){try{n.h.call(n.g)}catch(t){nc(t)}var e=Hc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Z=!1}function je(n,e){Mi.call(this),this.h=n||1,this.g=e||ht,this.j=E(this.kb,this),this.l=Date.now()}function mt(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ut(n,e,t){if("function"==typeof n)t&&(n=E(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=E(n.handleEvent,n)}return 2147483647<Number(e)?-1:ht.setTimeout(n,e||0)}function Yt(n){n.g=Ut(()=>{n.g=null,n.i&&(n.i=!1,Yt(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}k(je,Mi),(ee=je.prototype).da=!1,ee.S=null,ee.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(mt(this),this.start()))}},ee.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ee.M=function(){je.Z.M.call(this),mt(this),delete this.g};class Nn extends V{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yt(this)}M(){super.M(),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(n){V.call(this),this.h=n,this.g={}}k(Wn,V);var On=[];function Gi(n,e,t,r){Array.isArray(t)||(t&&(On[0]=t.toString()),t=On);for(var i=0;i<t.length;i++){var l=Bc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Ci(n){Al(n.g,function(e,t){this.g.hasOwnProperty(t)&&Uc(e)},n),n.g={}}function Ea(){this.g=!0}function Ds(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dl(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<i.length;u++)i[u]=""}}}return uo(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Wn.prototype.M=function(){Wn.Z.M.call(this),Ci(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ea.prototype.Aa=function(){this.g=!1},Ea.prototype.info=function(){};var kl={},qf=null;function ic(){return qf=qf||new Mi}function sc(n){er.call(this,kl.Ma,n)}function $c(n){const e=ic();$r(e,new sc(e,n))}function Ng(n,e){er.call(this,kl.STAT_EVENT,n),this.stat=e}function ho(n){const e=ic();$r(e,new Ng(e,n))}function hl(n,e){er.call(this,kl.Na,n),this.size=e}function fl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ht.setTimeout(function(){n()},e)}kl.Ma="serverreachability",k(sc,er),kl.STAT_EVENT="statevent",k(Ng,er),kl.Na="timingevent",k(hl,er);var lh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ch(){}function J_(){}ch.prototype.h=null;var Wc,Bu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zf(){er.call(this,"d")}function Kf(){er.call(this,"c")}function zc(){}function Ha(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Wn(this),this.P=Yf,this.W=new je(n=ec?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mg}function Mg(){this.i=null,this.g="",this.h=!1}k(Zf,er),k(Kf,er),k(zc,ch),zc.prototype.g=function(){return new XMLHttpRequest},zc.prototype.i=function(){return{}},Wc=new zc;var Yf=45e3,Og={},oc={};function Vu(n,e,t){n.K=1,n.v=gl(pl(e)),n.s=t,n.U=!0,Jf(n,null)}function Jf(n,e){n.F=Date.now(),Uu(n),n.A=pl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Gu(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Mg,n.g=f(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Nn(E(n.Ia,n,n.g),n.O)),Gi(n.V,n.g,"readystatechange",n.gb),e=n.H?Go(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),$c(1),function Gc(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var u="",m=l.split("&"),_=0;_<m.length;_++){var D=m[_].split("=");if(1<D.length){var L=D[0];D=D[1];var $=L.split("_");u=2<=$.length&&"type"==$[1]?u+(L+"=")+D+"&":u+(L+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Qf(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function uh(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=kg(n,t),i==oc){4==e&&(n.o=4,ho(14),r=!1),Ds(n.j,n.m,null,"[Incomplete Response]");break}if(i==Og){n.o=4,ho(15),Ds(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ds(n.j,n.m,i,null),ua(n,i)}Qf(n)&&i!=oc&&i!=Og&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ho(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ch(e),e.L=!0,ho(11))):(Ds(n.j,n.m,t,"[Invalid Chunked Response]"),lc(n),ac(n))}function kg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?oc:(t=Number(e.substring(t,r)),isNaN(t)?Og:(r+=1)+t>e.length?oc:(e=e.substr(r,t),n.C=r+t,e))}function Uu(n){n.Y=Date.now()+n.P,Rg(n,n.P)}function Rg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fl(E(n.eb,n),e)}function dh(n){n.B&&(ht.clearTimeout(n.B),n.B=null)}function ac(n){0==n.l.G||n.I||$g(n.l,n)}function lc(n){dh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,mt(n.W),Ci(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ua(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||zu(t.i,n)))if(t.I=n.N,!n.J&&zu(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=fl(E(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xc(t),Jc(t)}Qu(t),ho(18)}if(1>=Wu(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else hc(t,11)}else if((n.J||t.g==n)&&Xc(t),!$n(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let D=i[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const L=D[3];null!=L&&(t.ma=L,t.h.info("VER="+t.ma));const $=D[4];null!=$&&(t.za=$,t.h.info("SVER="+t.za));const Q=D[5];null!=Q&&"number"==typeof Q&&0<Q&&(t.K=r=1.5*Q,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const oe=n.g;if(oe){const be=oe.g?oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(be){var l=r.i;!l.g&&(xi(be,"spdy")||xi(be,"quic")||xi(be,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(rp(l,l.h),l.h=null))}if(r.D){const Ge=oe.g?oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ge&&(r.sa=Ge,mi(r.F,r.D,Ge))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=v(r,r.H?r.la:null,r.W),u.J){$i(r.i,u);var m=u,_=r.K;_&&m.setTimeout(_),m.B&&(dh(m),Uu(m)),r.g=u}else Qc(r);0<t.l.length&&ts(t)}else"stop"!=D[0]&&"close"!=D[0]||hc(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?hc(t,7):fp(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}$c(4)}catch{}}function hh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(wi(n)||"string"==typeof n)nt(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(wi(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function ju(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(wi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}}function Hu(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Hu)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function fh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];qc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)qc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function qc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ee=Ha.prototype).setTimeout=function(n){this.P=n},ee.gb=function(n){n=n.target;const e=this.L;e&&3==Da(n)?e.l():this.Ia(n)},ee.Ia=function(n){try{if(n==this.g)e:{const L=Da(this.g);var e=this.g.Da();const $=this.g.ba();if(!(3>L)&&(3!=L||ec||this.g&&(this.h.h||this.g.ga()||up(this.g)))){this.I||4!=L||7==e||$c(8==e||0>=$?3:2),dh(this);var t=this.g.ba();this.N=t;t:if(Qf(this)){var r=up(this.g);n="";var i=r.length,l=4==Da(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lc(this),ac(this);var u="";break t}this.h.i=new ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function ca(n,e,t,r,i,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,L,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,_=this.g;if((m=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$n(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,ho(12),lc(this),ac(this);break e}Ds(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ua(this,t)}this.U?(uh(this,L,u),ec&&this.i&&3==L&&(Gi(this.V,this.W,"tick",this.fb),this.W.start())):(Ds(this.j,this.m,u,null),ua(this,u)),4==L&&lc(this),this.i&&!this.I&&(4==L?$g(this.l,this):(this.i=!1,Uu(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,ho(12)):(this.o=0,ho(13)),lc(this),ac(this)}}}catch{}},ee.fb=function(){if(this.g){var n=Da(this.g),e=this.g.ga();this.C<e.length&&(dh(this),uh(this,n,e),this.i&&4!=n&&Uu(this))}},ee.cancel=function(){this.I=!0,lc(this)},ee.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ja(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($c(3),ho(17)),lc(this),this.o=2,ac(this)):Rg(this,this.Y-n)},(ee=Hu.prototype).R=function(){fh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ee.T=function(){return fh(this),this.g.concat()},ee.get=function(n,e){return qc(this.h,n)?this.h[n]:e},ee.set=function(n,e){qc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ee.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],l=this.get(i);n.call(e,l,i,this)}};var Pg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Rl){this.g=void 0!==e?e:n.g,ph(this,n.j),this.s=n.s,Xf(this,n.i),Ga(this,n.m),this.l=n.l,e=n.h;var t=new cc;t.i=e.i,e.g&&(t.g=new Hu(e.g),t.h=e.h),X_(this,t),this.o=n.o}else n&&(t=String(n).match(Pg))?(this.g=!!e,ph(this,t[1]||"",!0),this.s=ml(t[2]||""),Xf(this,t[3]||"",!0),Ga(this,t[4]),this.l=ml(t[5]||"",!0),X_(this,t[6]||"",!0),this.o=ml(t[7]||"")):(this.g=!!e,this.h=new cc(null,this.g))}function pl(n){return new Rl(n)}function ph(n,e,t){n.j=t?ml(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xf(n,e,t){n.i=t?ml(e,!0):e}function Ga(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function X_(n,e,t){e instanceof cc?(n.h=e,function ty(n,e){e&&!n.j&&($a(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ey(this,r),Gu(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zc(e,yb)),n.h=new cc(e,n.g))}function mi(n,e,t){n.h.set(e,t)}function gl(n){return mi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ml(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zc(e,ep,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zc(e,ep,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zc(t,"/"==t.charAt(0)?Lg:_b,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zc(t,tp)),n.join("")};var ep=/[#\/\?@]/g,_b=/[#\?:]/g,Lg=/[#\?]/g,yb=/[#\?@]/g,tp=/#/g;function cc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $a(n){n.g||(n.g=new Hu,n.h=0,n.i&&function Q_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ey(n,e){$a(n),e=Kc(n,e),qc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,qc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&fh(n)))}function Bg(n,e){return $a(n),e=Kc(n,e),qc(n.g.h,e)}function Gu(n,e,t){ey(n,e),0<t.length&&(n.i=null,n.g.set(Kc(n,e),Kt(t)),n.h+=t.length)}function Kc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mh(n){this.l=n||Vg,n=ht.PerformanceNavigationTiming?0<(n=ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ht.g&&ht.g.Ea&&ht.g.Ea()&&ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ee=cc.prototype).add=function(n,e){$a(this),this.i=null,n=Kc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ee.forEach=function(n,e){$a(this),this.g.forEach(function(t,r){nt(t,function(i){n.call(e,i,r,this)},this)},this)},ee.T=function(){$a(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],l=0;l<i.length;l++)t.push(e[r]);return t},ee.R=function(n){$a(this);var e=[];if("string"==typeof n)Bg(this,n)&&(e=Zn(e,this.g.get(Kc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Zn(e,n[t])}return e},ee.set=function(n,e){return $a(this),this.i=null,Bg(this,n=Kc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ee.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ee.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var u=i;""!==r[l]&&(u+="="+encodeURIComponent(String(r[l]))),n.push(u)}}return this.i=n.join("&")};var Vg=10;function $u(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Wu(n){return n.h?1:n.g?n.g.size:0}function zu(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function rp(n,e){n.g?n.g.add(e):n.h=e}function $i(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ip(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Kt(n.i)}function sp(){}function op(){this.g=new sp}function Ug(n,e,t){const r=t||"";try{hh(n,function(i,l){let u=i;hr(i)&&(u=uo(i)),e.push(r+l+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function uc(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qu(n){this.l=n.$b||null,this.j=n.ib||!1}function Zu(n,e){Mi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ap,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mh.prototype.cancel=function(){if(this.i=ip(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sp.prototype.stringify=function(n){return ht.JSON.stringify(n,void 0)},sp.prototype.parse=function(n){return ht.JSON.parse(n,void 0)},k(qu,ch),qu.prototype.g=function(){return new Zu(this.l,this.j)},qu.prototype.i=function(n){return function(){return n}}({}),k(Zu,Mi);var ap=0;function ry(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function _h(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_l(n)}function _l(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ee=Zu.prototype).open=function(n,e){if(this.readyState!=ap)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_l(this)},ee.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ht).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ee.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_h(this)),this.readyState=ap},ee.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ht.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ry(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ee.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_h(this):_l(this),3==this.readyState&&ry(this)}},ee.Ua=function(n){this.g&&(this.response=this.responseText=n,_h(this))},ee.Ta=function(n){this.g&&(this.response=n,_h(this))},ee.ha=function(){this.g&&_h(this)},ee.setRequestHeader=function(n,e){this.v.append(n,e)},ee.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ee.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ks=ht.JSON.parse;function _i(n){Mi.call(this),this.headers=new Hu,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ku,this.K=this.L=!1}k(_i,Mi);var Ku="",lp=/^https?$/i,Ys=["POST","PUT"];function cp(n){return"content-type"==n.toLowerCase()}function Ao(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Yc(n),vh(n)}function Yc(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function yh(n){if(n.h&&typeof st<"u"&&(!n.C[1]||4!=Da(n)||2!=n.ba()))if(n.v&&4==Da(n))Ut(n.Fa,0,n);else if($r(n,"readystatechange"),4==Da(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var i=String(n.H).match(Pg)[1]||null;if(!i&&ht.self&&ht.self.location){var l=ht.self.location.protocol;i=l.substr(0,l.length-1)}r=!lp.test(i?i.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var u=2<Da(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",Yc(n)}}finally{vh(n)}}}function vh(n,e){if(n.g){Yu(n);const t=n.g,r=n.C[0]?hn:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch{}}}function Yu(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ht.clearTimeout(n.A),n.A=null)}function Da(n){return n.g?n.g.readyState:0}function up(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ku:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function jg(n){let e="";return Al(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):mi(n,e,t))}function No(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hp(n){this.za=0,this.l=[],this.h=new Ea,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=No("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=No("baseRetryDelayMs",5e3,n),this.$a=No("retryDelaySeedMs",1e4,n),this.Ya=No("forwardChannelMaxRetries",2,n),this.ra=No("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new mh(n&&n.concurrentRequestLimit),this.Ca=new op,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function fp(n){if(Hg(n),3==n.G){var e=n.V++,t=pl(n.F);mi(t,"SID",n.J),mi(t,"RID",e),mi(t,"TYPE","terminate"),Ju(n,t),(e=new Ha(n,n.h,e,void 0)).K=2,e.v=gl(pl(t)),t=!1,ht.navigator&&ht.navigator.sendBeacon&&(t=ht.navigator.sendBeacon(e.v.toString(),"")),!t&&ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=f(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Uu(e)}zg(n)}function Jc(n){n.g&&(Ch(n),n.g.cancel(),n.g=null)}function Hg(n){Jc(n),n.u&&(ht.clearTimeout(n.u),n.u=null),Xc(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ht.clearTimeout(n.m),n.m=null)}function bh(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ts(n)}function ts(n){$u(n.i)||n.m||(n.m=!0,rc(n.Ha,n),n.C=0)}function wh(n,e){var t;t=e?e.m:n.V++;const r=pl(n.F);mi(r,"SID",n.J),mi(r,"RID",t),mi(r,"AID",n.U),Ju(n,r),n.o&&n.s&&dp(r,n.o,n.s),t=new Ha(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Wa(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),rp(n.i,t),Vu(t,r,e)}function Ju(n,e){n.j&&hh({},function(t,r){mi(e,r,t)})}function Wa(n,e,t){t=Math.min(n.l.length,t);var r=n.j?E(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=i[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let m=!0;for(let _=0;_<t;_++){let D=i[_].h;const L=i[_].g;if(D-=l,0>D)l=Math.max(0,i[_].h-100),m=!1;else try{Ug(L,u,"req"+D+"_")}catch{r&&r(L)}}if(m){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Qc(n){n.g||n.u||(n.Y=1,rc(n.Ga,n),n.A=0)}function Qu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=fl(E(n.Ga,n),Wg(n,n.A)),n.A++,0))}function Ch(n){null!=n.B&&(ht.clearTimeout(n.B),n.B=null)}function Gg(n){n.g=new Ha(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=pl(n.oa);mi(e,"RID","rpc"),mi(e,"SID",n.J),mi(e,"CI",n.N?"0":"1"),mi(e,"AID",n.U),Ju(n,e),mi(e,"TYPE","xmlhttp"),n.o&&n.s&&dp(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gl(pl(e)),t.s=null,t.U=!0,Jf(t,n)}function Xc(n){null!=n.v&&(ht.clearTimeout(n.v),n.v=null)}function $g(n,e){var t=null;if(n.g==e){Xc(n),Ch(n),n.g=null;var r=2}else{if(!zu(n.i,e))return;t=e.D,$i(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;$r(r=ic(),new hl(r,t,e,i)),ts(n)}else Qc(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function pp(n,e){return!(Wu(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=fl(E(n.Ha,n,e),Wg(n,n.C)),n.C++,0)))}(n,e)||2==r&&Qu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:hc(n,5);break;case 4:hc(n,10);break;case 3:hc(n,6);break;default:hc(n,2)}}function Wg(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=E(n.jb,n);t||(t=new Rl("//www.google.com/images/cleardot.gif"),ht.location&&"http"==ht.location.protocol||ph(t,"https"),gl(t)),function ny(n,e){const t=new Ea;if(ht.Image){const r=new Image;r.onload=w(uc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=w(uc,t,r,"TestLoadImage: error",!1,e),r.onabort=w(uc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(uc,t,r,"TestLoadImage: timeout",!1,e),ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ho(2);n.G=0,n.j&&n.j.va(e),zg(n),Hg(n)}function zg(n){n.G=0,n.I=-1,n.j&&((0!=ip(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Kt(n.l),n.l.length=0),n.j.ua())}function v(n,e,t){let r=function Fg(n){return n instanceof Rl?pl(n):new Rl(n,void 0)}(t);if(""!=r.i)e&&Xf(r,e+"."+r.i),Ga(r,r.m);else{const i=ht.location;r=function da(n,e,t,r){var i=new Rl(null,void 0);return n&&ph(i,n),e&&Xf(i,e),t&&Ga(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Al(n.aa,function(i,l){mi(r,l,i)}),t=n.sa,(e=n.D)&&t&&mi(r,e,t),mi(r,"VER",n.ma),Ju(n,r),r}function f(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _i(t&&n.Ba&&!n.qa?new qu({ib:!0}):n.qa)).L=n.H,e}function g(){}function C(){if(Es&&!(10<=Number(ol)))throw Error("Environmental error: no available transport.")}function U(n,e){Mi.call(this),this.g=new hp(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!$n(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$n(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ze(this)}function X(n){Zf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ce(){Kf.call(this),this.status=1}function ze(n){this.g=n}(ee=_i.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wc.g(),this.C=function Lu(n){return n.h||(n.h=n.i())}(this.u?this.u:Wc),this.g.onreadystatechange=E(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Ao(this,l)}n=t||"";const i=new Hu(this.headers);r&&hh(r,function(l,u){i.set(u,l)}),r=function Ft(n){e:{var e=cp;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=ht.FormData&&n instanceof ht.FormData,!(0<=de(Ys,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yu(this),0<this.B&&((this.K=function dc(n){return Es&&function Wf(){return function Ua(n){var e=rh;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=gr(String(li)).split("."),t=gr("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",l=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=jo(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||jo(0==i[2].length,0==l[2].length)||jo(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=E(this.pa,this)):this.A=Ut(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Ao(this,l)}},ee.pa=function(){typeof st<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},ee.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),vh(this))},ee.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vh(this,!0)),_i.Z.M.call(this)},ee.Fa=function(){this.s||(this.F||this.v||this.l?yh(this):this.cb())},ee.cb=function(){yh(this)},ee.ba=function(){try{return 2<Da(this)?this.g.status:-1}catch{return-1}},ee.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},ee.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ks(e)}},ee.Da=function(){return this.m},ee.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ee=hp.prototype).ma=8,ee.G=1,ee.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},ee.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ha(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Go(l),il(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Wa(this,i,e),mi(t=pl(this.F),"RID",n),mi(t,"CVER",22),this.D&&mi(t,"X-HTTP-Session-Id",this.D),Ju(this,t),this.o&&l&&dp(t,this.o,l),rp(this.i,i),this.Ra&&mi(t,"TYPE","init"),this.ja?(mi(t,"$req",e),mi(t,"SID","null"),i.$=!0,Vu(i,t,null)):Vu(i,t,e),this.G=2}}else 3==this.G&&(n?wh(this,n):0==this.l.length||$u(this.i)||wh(this))},ee.Ga=function(){if(this.u=null,Gg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=fl(E(this.bb,this),n)}},ee.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ho(10),Jc(this),Gg(this))},ee.ab=function(){null!=this.v&&(this.v=null,Jc(this),Qu(this),ho(19))},ee.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ho(2)):(this.h.info("Failed to ping google.com"),ho(1))},(ee=g.prototype).xa=function(){},ee.wa=function(){},ee.va=function(){},ee.ua=function(){},ee.Oa=function(){},C.prototype.g=function(n,e){return new U(n,e)},k(U,Mi),U.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),rc(E(n.hb,n,e))),ho(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=v(n,null,n.W),ts(n)},U.prototype.close=function(){fp(this.g)},U.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,bh(this.g,e)}else this.v?((e={}).__data__=uo(n),bh(this.g,e)):bh(this.g,n)},U.prototype.M=function(){this.g.j=null,delete this.j,fp(this.g),delete this.g,U.Z.M.call(this)},k(X,Zf),k(Ce,Kf),k(ze,g),ze.prototype.xa=function(){$r(this.g,"a")},ze.prototype.wa=function(n){$r(this.g,new X(n))},ze.prototype.va=function(n){$r(this.g,new Ce(n))},ze.prototype.ua=function(){$r(this.g,"b")},C.prototype.createWebChannel=C.prototype.g,U.prototype.send=U.prototype.u,U.prototype.open=U.prototype.m,U.prototype.close=U.prototype.close,lh.NO_ERROR=0,lh.TIMEOUT=8,lh.HTTP_ERROR=6,xg.COMPLETE="complete",J_.EventType=Bu,Bu.OPEN="a",Bu.CLOSE="b",Bu.ERROR="c",Bu.MESSAGE="d",Mi.prototype.listen=Mi.prototype.N,_i.prototype.listenOnce=_i.prototype.O,_i.prototype.getLastError=_i.prototype.La,_i.prototype.getLastErrorCode=_i.prototype.Da,_i.prototype.getStatus=_i.prototype.ba,_i.prototype.getResponseJson=_i.prototype.Qa,_i.prototype.getResponseText=_i.prototype.ga,_i.prototype.send=_i.prototype.ea;var xt=W.createWebChannelTransport=function(){return new C},qt=W.getStatEventTarget=function(){return ic()},gn=W.ErrorCode=lh,cn=W.EventType=xg,Ei=W.Event=kl,$o=W.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Xu=W.FetchXmlHttpFactory=qu,fc=W.WebChannel=J_,ed=W.XhrIo=_i;const Eh="@firebase/firestore";class Us{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Us.UNAUTHENTICATED=new Us(null),Us.GOOGLE_CREDENTIALS=new Us("google-credentials-uid"),Us.FIRST_PARTY=new Us("first-party-uid"),Us.MOCK_USER=new Us("mock-user");let Wo="9.6.10";const Ia=new vi.Yd("@firebase/firestore");function td(){return Ia.logLevel}function _t(n,...e){if(Ia.logLevel<=vi.in.DEBUG){const t=e.map(mp);Ia.debug(`Firestore (${Wo}): ${n}`,...t)}}function ns(n,...e){if(Ia.logLevel<=vi.in.ERROR){const t=e.map(mp);Ia.error(`Firestore (${Wo}): ${n}`,...t)}}function pc(n,...e){if(Ia.logLevel<=vi.in.WARN){const t=e.map(mp);Ia.warn(`Firestore (${Wo}): ${n}`,...t)}}function mp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Xt(n="Unexpected state"){const e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+n;throw ns(e),new Error(e)}function Pn(n,e){n||Xt()}function Lt(n,e){return n}const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends he.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Us.UNAUTHENTICATED))}shutdown(){}}class bb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class wb{constructor(e){this.t=e,this.currentUser=Us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=D=>this.i!==i?(i=this.i,t(D)):Promise.resolve();let u=new Is;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Is,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const D=u;e.enqueueRetryable((0,xe.Z)(function*(){yield D.promise,yield l(r.currentUser)}))},_=D=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Is)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pn("string"==typeof r.accessToken),new vb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pn(null===e||"string"==typeof e),new Us(e)}}class nd{constructor(e,t,r){this.type="FirstParty",this.user=Us.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Cb{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new nd(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Us.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ID{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,_t("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pn("string"==typeof t.token),this.p=t.token,new iy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Eb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ta.A=-1;class oy{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Eb(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function rr(n,e){return n<e?-1:n>e?1:0}function eu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ay(n){return n+"\0"}class Oi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Oi.fromMillis(Date.now())}static fromDate(e){return Oi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Oi(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rr(this.nanoseconds,e.nanoseconds):rr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class En{constructor(e){this.timestamp=e}static fromTimestamp(e){return new En(e)}static min(){return new En(new Oi(0,0))}static max(){return new En(new Oi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ly(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class rd{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xt(),void 0===r?r=e.length-t:r>e.length-t&&Xt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),u=t.get(i);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sr extends rd{construct(e,t,r){return new sr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new gt(Ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sr(t)}static emptyPath(){return new sr([])}}const TD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class js extends rd{construct(e,t,r){return new js(e,t,r)}static isValidIdentifier(e){return TD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),js.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new js(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new gt(Ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const m=e[i];if("\\"===m){if(i+1===e.length)throw new gt(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new gt(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===m?(u=!u,i++):"."!==m||u?(r+=m,i++):(l(),i++)}if(l(),u)throw new gt(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new js(t)}static emptyPath(){return new js([])}}class Dh{constructor(e){this.fields=e,e.sort(js.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ts(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new Ts(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const uy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mc(n){if(Pn(!!n),"string"==typeof n){let e=0;const t=uy.exec(n);if(Pn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gs(n.seconds),nanos:gs(n.nanos)}}function gs(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tu(n){return"string"==typeof n?Ts.fromBase64String(n):Ts.fromUint8Array(n)}function dy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function hy(n){const e=n.mapValue.fields.__previous_value__;return dy(e)?hy(e):e}function _p(n){const e=mc(n.mapValue.fields.__local_write_time__.timestampValue);return new Oi(e.seconds,e.nanos)}class AD{constructor(e,t,r,i,l,u,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.useFetchStreams=_}}class Hs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hs&&e.projectId===this.projectId&&e.database===this.database}}function id(n){return null==n}function Ih(n){return 0===n&&1/n==-1/0}function Db(n){return"number"==typeof n&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(sr.fromString(e))}static fromName(e){return new Ot(sr.fromString(e).popFirst(5))}static empty(){return new Ot(sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new sr(e.slice()))}}const Ib={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Tb={nullValue:"NULL_VALUE"};function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dy(n)?4:Zg(n)?9:10:Xt()}function Pl(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _p(n).isEqual(_p(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=mc(r.timestampValue),u=mc(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,tu(n.bytesValue).isEqual(tu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gs(r.geoPointValue.latitude)===gs(i.geoPointValue.latitude)&&gs(r.geoPointValue.longitude)===gs(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gs(r.integerValue)===gs(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=gs(r.doubleValue),u=gs(i.doubleValue);return l===u?Ih(l)===Ih(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return eu(n.arrayValue.values||[],e.arrayValue.values||[],Pl);case 10:return function(r,i){const l=r.mapValue.fields||{},u=i.mapValue.fields||{};if(ly(l)!==ly(u))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===u[m]||!Pl(l[m],u[m])))return!1;return!0}(n,e);default:return Xt()}var i}function yp(n,e){return void 0!==(n.values||[]).find(t=>Pl(t,e))}function ru(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return rr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rr(n.booleanValue,e.booleanValue);case 2:return function(i,l){const u=gs(i.integerValue||i.doubleValue),m=gs(l.integerValue||l.doubleValue);return u<m?-1:u>m?1:u===m?0:isNaN(u)?isNaN(m)?0:-1:1}(n,e);case 3:return Bn(n.timestampValue,e.timestampValue);case 4:return Bn(_p(n),_p(e));case 5:return rr(n.stringValue,e.stringValue);case 6:return function(i,l){const u=tu(i),m=tu(l);return u.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),m=l.split("/");for(let _=0;_<u.length&&_<m.length;_++){const D=rr(u[_],m[_]);if(0!==D)return D}return rr(u.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const u=rr(gs(i.latitude),gs(l.latitude));return 0!==u?u:rr(gs(i.longitude),gs(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const u=i.values||[],m=l.values||[];for(let _=0;_<u.length&&_<m.length;++_){const D=ru(u[_],m[_]);if(D)return D}return rr(u.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){const u=i.fields||{},m=Object.keys(u),_=l.fields||{},D=Object.keys(_);m.sort(),D.sort();for(let L=0;L<m.length&&L<D.length;++L){const $=rr(m[L],D[L]);if(0!==$)return $;const Q=ru(u[m[L]],_[D[L]]);if(0!==Q)return Q}return rr(m.length,D.length)}(n.mapValue,e.mapValue);default:throw Xt()}}function Bn(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rr(n,e);const t=mc(n),r=mc(e),i=rr(t.seconds,r.seconds);return 0!==i?i:rr(t.nanos,r.nanos)}function sd(n){return qg(n)}function qg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=mc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tu(n.bytesValue).toBase64():"referenceValue"in n?Ot.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const u of r.values||[])l?l=!1:i+=",",i+=qg(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const m of i)u?u=!1:l+=",",l+=`${m}:${qg(r.fields[m])}`;return l+"}"}(n.mapValue):Xt();var e}function od(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Th(n){return!!n&&"integerValue"in n}function zo(n){return!!n&&"arrayValue"in n}function fy(n){return!!n&&"nullValue"in n}function Sb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sh(n){return!!n&&"mapValue"in n}function Sa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sa(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zg(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function py(n,e){return void 0===n?e:void 0===e||ru(n,e)>0?n:e}function Kg(n,e){return void 0===n?e:void 0===e||ru(n,e)<0?n:e}class qo{constructor(e){this.value=e}static empty(){return new qo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sa(t)}setAll(e){let t=js.emptyPath(),r={},i=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=m.popLast()}u?r[m.lastSegment()]=Sa(u):i.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gc(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new qo(Sa(this.value))}}function gy(n){const e=[];return gc(n.fields,(t,r)=>{const i=new js([t]);if(Sh(r)){const l=gy(r.mapValue).fields;if(0===l.length)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new Dh(e)}class ki{constructor(e,t,r,i,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=l,this.documentState=u}static newInvalidDocument(e){return new ki(e,0,En.min(),En.min(),qo.empty(),0)}static newFoundDocument(e,t,r){return new ki(e,1,t,En.min(),r,0)}static newNoDocument(e,t){return new ki(e,2,t,En.min(),qo.empty(),0)}static newUnknownDocument(e,t){return new ki(e,3,t,En.min(),qo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ki&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ki(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ad{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ah(n){return n.fields.find(e=>2===e.kind)}function iu(n){return n.fields.filter(e=>2!==e.kind)}ad.UNKNOWN_ID=-1;class Nh{constructor(e,t){this.fieldPath=e,this.kind=t}}class ld{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ld(0,_c.min())}}function ND(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=En.fromTimestamp(1e9===r?new Oi(t+1,0):new Oi(t,r));return new _c(i,Ot.empty(),e)}function xD(n){return new _c(n.readTime,n.key,-1)}class _c{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _c(En.min(),Ot.empty(),-1)}static max(){return new _c(En.max(),Ot.empty(),-1)}}function MD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(n.documentKey,e.documentKey),0!==t?t:rr(n.largestBatchId,e.largestBatchId))}class OD{constructor(e,t=null,r=[],i=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=m,this.P=null}}function my(n,e=null,t=[],r=[],i=null,l=null,u=null){return new OD(n,e,t,r,i,l,u)}function xh(n){const e=Lt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+sd(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sd(r)).join(",")),e.P=t}return e.P}function Yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Pl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jg(n.startAt,e.startAt)&&Jg(n.endAt,e.endAt)}function vp(n){return Ot.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function bp(n,e){return n.filters.filter(t=>t instanceof fo&&t.field.isEqual(e))}class fo extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new _y(e,t,r):"array-contains"===t?new gS(e,r):"in"===t?new mS(e,r):"not-in"===t?new _S(e,r):"array-contains-any"===t?new yS(e,r):new fo(e,t,r)}static V(e,t,r){return"in"===t?new fS(e,r):new pS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ru(t,this.value)):null!==t&&nu(this.value)===nu(t)&&this.v(ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _y extends fo{constructor(e,t,r){super(e,t,r),this.key=Ot.fromName(r.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.v(t)}}class fS extends fo{constructor(e,t){super(e,"in",t),this.keys=RD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pS extends fo{constructor(e,t){super(e,"not-in",t),this.keys=RD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ot.fromName(r.referenceValue))}class gS extends fo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zo(t)&&yp(t.arrayValue,this.value)}}class mS extends fo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&yp(this.value.arrayValue,t)}}class _S extends fo{constructor(e,t){super(e,"not-in",t)}matches(e){if(yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!yp(this.value.arrayValue,t)}}class yS extends fo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yp(this.value.arrayValue,r))}}class cd{constructor(e,t){this.position=e,this.inclusive=t}}class wp{constructor(e,t="asc"){this.field=e,this.dir=t}}function vS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function yc(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(r=l.field.isKeyField()?Ot.comparator(Ot.fromName(u.referenceValue),t.key):ru(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Jg(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pl(n.position[t],e.position[t]))return!1;return!0}class vc{constructor(e,t=null,r=[],i=[],l=null,u="F",m=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=_,this.D=null,this.C=null}}function yy(n,e,t,r,i,l,u,m){return new vc(n,e,t,r,i,l,u,m)}function su(n){return new vc(n)}function Cp(n){return!id(n.limit)&&"F"===n.limitType}function Mh(n){return!id(n.limit)&&"L"===n.limitType}function vy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Fl(n){for(const e of n.filters)if(e.S())return e.field;return null}function Qg(n){return null!==n.collectionGroup}function Oh(n){const e=Lt(n);if(null===e.D){e.D=[];const t=Fl(e),r=vy(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new wp(t)),e.D.push(new wp(js.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wp(js.keyField(),l))}}}return e.D}function ha(n){const e=Lt(n);if(!e.C)if("F"===e.limitType)e.C=my(e.path,e.collectionGroup,Oh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Oh(e))t.push(new wp(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new cd(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new cd(e.startAt.position,!e.startAt.inclusive):null;e.C=my(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function Ab(n,e,t){return new vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kh(n,e){return Yg(ha(n),ha(e))&&n.limitType===e.limitType}function Nb(n){return`${xh(ha(n))}|lt:${n.limitType}`}function by(n){return`Query(target=${function kD(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${sd(r.value)}`;var r}).join(", ")}]`),id(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>sd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>sd(t)).join(",")),`Target(${e})`}(ha(n))}; limitType=${n.limitType})`}function ud(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ot.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,u){const m=yc(i,l,u);return i.inclusive?m<=0:m<0}(t.startAt,Oh(t),r)||t.endAt&&!function(i,l,u){const m=yc(i,l,u);return i.inclusive?m>=0:m>0}(t.endAt,Oh(t),r)));var t,r}function dd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xg(n){return(e,t)=>{let r=!1;for(const i of Oh(n)){const l=Rh(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function Rh(n,e,t){const r=n.field.isKeyField()?Ot.comparator(e.key,t.key):function(i,l,u){const m=l.data.field(i),_=u.data.field(i);return null!==m&&null!==_?ru(m,_):Xt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xt()}}function Ph(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function hd(n){return{integerValue:""+n}}function xb(n,e){return Db(e)?hd(e):Ph(n,e)}class Ep{constructor(){this._=void 0}}function Mb(n,e,t){return n instanceof fd?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Ll?Ob(n,e):n instanceof ou?PD(n,e):function(r,i){const l=em(r,i),u=Cy(l)+Cy(r.k);return Th(l)&&Th(r.k)?hd(u):Ph(r.M,u)}(n,e)}function wy(n,e,t){return n instanceof Ll?Ob(n,e):n instanceof ou?PD(n,e):t}function em(n,e){return n instanceof pd?Th(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class fd extends Ep{}class Ll extends Ep{constructor(e){super(),this.elements=e}}function Ob(n,e){const t=kb(e);for(const r of n.elements)t.some(i=>Pl(i,r))||t.push(r);return{arrayValue:{values:t}}}class ou extends Ep{constructor(e){super(),this.elements=e}}function PD(n,e){let t=kb(e);for(const r of n.elements)t=t.filter(i=>!Pl(i,r));return{arrayValue:{values:t}}}class pd extends Ep{constructor(e,t){super(),this.M=e,this.k=t}}function Cy(n){return gs(n.integerValue||n.doubleValue)}function kb(n){return zo(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fh{constructor(e,t){this.field=e,this.transform=t}}class LD{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nm{}function bS(n,e,t){n instanceof gd?function(r,i,l){const u=r.value.clone(),m=Bb(r.fieldTransforms,i,l.transformResults);u.setAll(m),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof au?function(r,i,l){if(!tm(r.precondition,i))return void i.convertToUnknownDocument(l.version);const u=Bb(r.fieldTransforms,i,l.transformResults),m=i.data;m.setAll(Lb(r)),m.setAll(u),i.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rb(n,e,t){var i;n instanceof gd?function(r,i,l){if(!tm(r.precondition,i))return;const u=r.value.clone(),m=Vb(r.fieldTransforms,l,i);u.setAll(m),i.convertToFoundDocument(Fb(i),u).setHasLocalMutations()}(n,e,t):n instanceof au?function(r,i,l){if(!tm(r.precondition,i))return;const u=Vb(r.fieldTransforms,l,i),m=i.data;m.setAll(Lb(r)),m.setAll(u),i.convertToFoundDocument(Fb(i),m).setHasLocalMutations()}(n,e,t):tm(n.precondition,i=e)&&i.convertToNoDocument(En.min())}function Pb(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=em(r.transform,i||null);null!=l&&(null==t&&(t=qo.empty()),t.set(r.field,l))}return t||null}function BD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&eu(t,r,(i,l)=>function FD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ll&&r instanceof Ll||t instanceof ou&&r instanceof ou?eu(t.elements,r.elements,Pl):t instanceof pd&&r instanceof pd?Pl(t.k,r.k):t instanceof fd&&r instanceof fd);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Fb(n){return n.isFoundDocument()?n.version:En.min()}class gd extends nm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class au extends nm{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function Lb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bb(n,e,t){const r=new Map;Pn(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,m=e.data.field(l.field);r.set(l.field,wy(u,m,t[i]))}return r}function Vb(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,Mb(l,u,e))}return r}class Lh extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ey extends nm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ub{constructor(e){this.count=e}}var Ss,yr;function Dy(n){switch(n){default:return Xt();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function Iy(n){if(void 0===n)return ns("GRPC error has no .code"),Ke.UNKNOWN;switch(n){case Ss.OK:return Ke.OK;case Ss.CANCELLED:return Ke.CANCELLED;case Ss.UNKNOWN:return Ke.UNKNOWN;case Ss.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case Ss.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case Ss.INTERNAL:return Ke.INTERNAL;case Ss.UNAVAILABLE:return Ke.UNAVAILABLE;case Ss.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case Ss.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case Ss.NOT_FOUND:return Ke.NOT_FOUND;case Ss.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case Ss.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case Ss.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case Ss.ABORTED:return Ke.ABORTED;case Ss.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case Ss.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case Ss.DATA_LOSS:return Ke.DATA_LOSS;default:return Xt()}}(yr=Ss||(Ss={}))[yr.OK=0]="OK",yr[yr.CANCELLED=1]="CANCELLED",yr[yr.UNKNOWN=2]="UNKNOWN",yr[yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yr[yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yr[yr.NOT_FOUND=5]="NOT_FOUND",yr[yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",yr[yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",yr[yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",yr[yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yr[yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yr[yr.ABORTED=10]="ABORTED",yr[yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",yr[yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",yr[yr.INTERNAL=13]="INTERNAL",yr[yr.UNAVAILABLE=14]="UNAVAILABLE",yr[yr.DATA_LOSS=15]="DATA_LOSS";class lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gc(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return cy(this.inner)}size(){return this.innerSize}}class Ur{constructor(e,t){this.comparator=e,this.root=t||po.EMPTY}insert(e,t){return new Ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,po.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,po.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class po{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??po.RED,this.left=i??po.EMPTY,this.right=l??po.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new po(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return po.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return po.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,po.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xt();const e=this.left.check();if(e!==this.right.check())throw Xt();return e+(this.isRed()?0:1)}}po.EMPTY=null,po.RED=!0,po.BLACK=!1,po.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt()}get value(){throw Xt()}get color(){throw Xt()}get left(){throw Xt()}get right(){throw Xt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new po(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Di{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VD(this.data.getIterator())}getIteratorFrom(e){return new VD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Di(this.comparator);return t.data=e,t}}class VD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function md(n){return n.hasNext()?n.getNext():void 0}const UD=new Ur(Ot.comparator);function za(){return UD}const jD=new Ur(Ot.comparator);function Dp(){return jD}function Ip(){return new lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const HD=new Ur(Ot.comparator),rm=new Di(Ot.comparator);function xr(...n){let e=rm;for(const t of n)e=e.add(t);return e}const GD=new Di(rr);function Vh(){return GD}class _d{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Uh.createSynthesizedTargetChangeForCurrentChange(e,t)),new _d(En.min(),r,Vh(),za(),xr())}}class Uh{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Uh(Ts.EMPTY_BYTE_STRING,t,xr(),xr(),xr())}}class im{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class jb{constructor(e,t){this.targetId=e,this.$=t}}class sm{constructor(e,t,r=Ts.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class $D{constructor(){this.B=0,this.L=Sy(),this.U=Ts.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=xr(),t=xr(),r=xr();return this.L.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Xt()}}),new Uh(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=Sy()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class WD{constructor(e){this.nt=e,this.st=new Map,this.it=za(),this.rt=Ty(),this.ot=new Di(rr)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const l=i.target;if(vp(l))if(0===r){const u=new Ot(l.path);this.ct(t,u,ki.newNoDocument(u,En.min()))}else Pn(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,u)=>{const m=this.wt(u);if(m){if(l.current&&vp(m.target)){const _=new Ot(m.target.path);null!==this.it.get(_)||this.It(u,_)||this.ct(u,_,ki.newNoDocument(_,e))}l.j&&(t.set(u,l.H()),l.J())}});let r=xr();this.rt.forEach((l,u)=>{let m=!0;u.forEachWhile(_=>{const D=this.wt(_);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,u)=>u.setReadTime(e));const i=new _d(e,t,this.ot,this.it,r);return this.it=za(),this.rt=Ty(),this.ot=new Di(rr),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new $D,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Di(rr),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||_t("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new $D),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Ty(){return new Ur(Ot.comparator)}function Sy(){return new Ur(Ot.comparator)}const Hb={asc:"ASCENDING",desc:"DESCENDING"},Gb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class $b{constructor(e,t){this.databaseId=e,this.N=t}}function Aa(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tp(n,e){return n.N?e.toBase64():e.toUint8Array()}function zD(n,e){return Aa(n,e.toTimestamp())}function Js(n){return Pn(!!n),En.fromTimestamp(function(e){const t=mc(e);return new Oi(t.seconds,t.nanos)}(n))}function Wb(n,e){return(t=n,new sr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function om(n){const e=sr.fromString(n);return Pn(Py(e)),e}function jh(n,e){return Wb(n.databaseId,e.path)}function qa(n,e){const t=om(e);if(t.get(1)!==n.databaseId.projectId)throw new gt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new gt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ot(Ay(t))}function yd(n,e){return Wb(n.databaseId,e)}function zb(n){const e=om(n);return 4===e.length?sr.emptyPath():Ay(e)}function vd(n){return new sr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ay(n){return Pn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Ny(n,e,t){return{name:jh(n,e),fields:t.value.mapValue.fields}}function xy(n,e,t){const r=qa(n,e.name),i=Js(e.updateTime),l=new qo({mapValue:{fields:e.fields}}),u=ki.newFoundDocument(r,i,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Sp(n,e){let t;if(e instanceof gd)t={update:Ny(n,e.key,e.value)};else if(e instanceof Lh)t={delete:jh(n,e.key)};else if(e instanceof au)t={update:Ny(n,e.key,e.data),updateMask:Kb(e.fieldMask)};else{if(!(e instanceof Ey))return Xt();t={verify:jh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof fd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ll)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ou)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof pd)return{fieldPath:l.field.canonicalString(),increment:u.k};throw Xt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:zD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Xt()),t;var i}function Oy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Nr.updateTime(Js(i.updateTime)):void 0!==i.exists?Nr.exists(i.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let m=null;"setToServerValue"in u?(Pn("REQUEST_TIME"===u.setToServerValue),m=new fd):"appendMissingElements"in u?m=new Ll(u.appendMissingElements.values||[]):"removeAllFromArray"in u?m=new ou(u.removeAllFromArray.values||[]):"increment"in u?m=new pd(l,u.increment):Xt();const _=js.fromServerFormat(u.fieldPath);return new Fh(_,m)}(n,i)):[];var i;if(e.update){const i=qa(n,e.update.name),l=new qo({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Dh((e.updateMask.fieldPaths||[]).map(D=>js.fromServerFormat(D)));return new au(i,l,u,t,r)}return new gd(i,l,t,r)}if(e.delete){const i=qa(n,e.delete);return new Lh(i,t)}if(e.verify){const i=qa(n,e.verify);return new Ey(i,t)}return Xt()}function bd(n,e){return{documents:[yd(n,e.path)]}}function ky(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yd(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yd(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const D=_.map(L=>function($){if("=="===$.op){if(Sb($.value))return{unaryFilter:{field:Hh($.field),op:"IS_NAN"}};if(fy($.value))return{unaryFilter:{field:Hh($.field),op:"IS_NULL"}}}else if("!="===$.op){if(Sb($.value))return{unaryFilter:{field:Hh($.field),op:"IS_NOT_NAN"}};if(fy($.value))return{unaryFilter:{field:Hh($.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh($.field),op:YD($.op),value:$.value}}}(L));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);i&&(t.structuredQuery.where=i);const l=function(_){if(0!==_.length)return _.map(D=>{return{field:Hh((L=D).field),direction:KD(L.dir)};var L})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(D=e.limit,n.N||id(D)?D:{value:D});var D,m,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Zb(n){let e=zb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pn(1===r);const L=t.from[0];L.allDescendants?i=L.collectionId:e=e.child(L.collectionId)}let l=[];t.where&&(l=wd(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(L=>{return new wp(Gh(($=L).field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction));var $}));let m=null;t.limit&&(m=function(L){let $;return $="object"==typeof L?L.value:L,id($)?null:$}(t.limit));let _=null;var L;t.startAt&&(_=new cd((L=t.startAt).values||[],!!L.before));let D=null;return t.endAt&&(D=function(L){return new cd(L.values||[],!L.before)}(t.endAt)),yy(e,i,u,l,m,"F",_,D)}function wd(n){return n?void 0!==n.unaryFilter?[Ry(n)]:void 0!==n.fieldFilter?[yl(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wd(e)).reduce((e,t)=>e.concat(t)):Xt():[]}function KD(n){return Hb[n]}function YD(n){return Gb[n]}function Hh(n){return{fieldPath:n.canonicalString()}}function Gh(n){return js.fromServerFormat(n.fieldPath)}function yl(n){return fo.create(Gh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ry(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gh(n.unaryFilter.field);return fo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gh(n.unaryFilter.field);return fo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gh(n.unaryFilter.field);return fo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gh(n.unaryFilter.field);return fo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xt()}}function Kb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Py(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Gs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jb(e)),e=Yb(n.get(t),e);return Jb(e)}function Yb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Jb(n){return n+"\x01\x01"}function vl(n){const e=n.length;if(Pn(e>=2),2===e)return Pn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sr.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&Xt(),n.charAt(u+1)){case"\x01":const m=n.substring(l,u);let _;0===i.length?_=m:(i+=m,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(l,u),i+="\0";break;case"\x11":i+=n.substring(l,u+1);break;default:Xt()}l=u+2}return new sr(r)}const Qb=["userId","batchId"];function am(n,e){return[n,Gs(e)]}function Fy(n,e,t){return[n,Gs(e),t]}const wS={},Xb=["prefixPath","collectionGroup","readTime","documentId"],JD=["prefixPath","collectionGroup","documentId"],QD=["collectionGroup","readTime","prefixPath","documentId"],CS=["canonicalId","targetId"],ES=["targetId","path"],Ly=["path","targetId"],XD=["collectionId","parent"],ew=["indexId","uid"],tw=["uid","sequenceNumber"],DS=["indexId","uid","arrayValue","directionalValue","documentKey"],bl=["indexId","uid","documentKey"],IS=["userId","collectionPath","documentId"],TS=["userId","collectionPath","largestBatchId"],nw=["userId","collectionGroup","largestBatchId"],By=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rw=[...By,"documentOverlays"],iw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SS=[...iw,"indexConfiguration","indexState","indexEntries"],Vy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tt((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tt?t:tt.resolve(t)}catch(t){return tt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tt.reject(t)}static resolve(e){return new tt((t,r)=>{t(e)})}static reject(e){return new tt((t,r)=>{r(e)})}static waitFor(e){return new tt((t,r)=>{let i=0,l=0,u=!1;e.forEach(m=>{++i,m.next(()=>{++l,u&&l===i&&t()},_=>r(_))}),u=!0,l===i&&t()})}static or(e){let t=tt.resolve(!1);for(const r of e)t=t.next(i=>i?tt.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}}class $h{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Is,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ap(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=cu(r.target.error);this.At.reject(new Ap(e,i))}}static open(e,t,r,i){try{return new $h(t,e.transaction(i,r))}catch(l){throw new Ap(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(_t("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new t1(t)}}class wl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===wl.Vt((0,he.z$)())&&ns("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _t("SimpleDb","Removing database:",e),Ed(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,he.hl)())return!1;if(wl.St())return!0;const e=(0,he.z$)(),t=wl.Vt(e),r=0<t&&t<10,i=wl.Dt(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,xe.Z)(function*(){return t.db||(_t("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{i(new Ap(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const m=u.target.error;i("VersionError"===m.name?new gt(Ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new gt(Ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ap(e,m))},l.onupgradeneeded=u=>{_t("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{_t("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,xe.Z)(function*(){const u="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const _=$h.open(l.db,e,u?"readonly":"readwrite",r),D=i(_).next(L=>(_.bt(),L)).catch(L=>(_.abort(L),tt.reject(L))).toPromise();return D.catch(()=>{}),yield _.Rt,D}catch(_){const D="FirebaseError"!==_.name&&m<3;if(_t("SimpleDb","Transaction failed with error:",_.message,"Retrying:",D),l.close(),!D)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class e1{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ed(this.Ft.delete())}}class Ap extends gt{constructor(e,t){super(Ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cd(n){return"IndexedDbTransactionError"===n.name}class t1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(_t("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(_t("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ed(r)}add(e){return _t("SimpleDb","ADD",this.store.name,e,e),Ed(this.store.add(e))}get(e){return Ed(this.store.get(e)).next(t=>(void 0===t&&(t=null),_t("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _t("SimpleDb","DELETE",this.store.name,e),Ed(this.store.delete(e))}count(){return _t("SimpleDb","COUNT",this.store.name),Ed(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Gt(i,(u,m)=>{l.push(m)}).next(()=>l)}{const i=this.store.getAll(r.range);return new tt((l,u)=>{i.onerror=m=>{u(m.target.error)},i.onsuccess=m=>{l(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new tt((i,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){_t("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(l,u,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new tt((r,i)=>{t.onerror=l=>{const u=cu(l.target.error);i(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(m=>{m?u.continue():r()}):r()}})}Gt(e,t){const r=[];return new tt((i,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const m=u.target.result;if(!m)return void i();const _=new e1(m),D=t(m.primaryKey,m.value,_);if(D instanceof tt){const L=D.catch($=>(_.done(),tt.reject($)));r.push(L)}_.isDone?i():null===_.Lt?m.continue():m.continue(_.Lt)}}).next(()=>tt.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ed(n){return new tt((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=cu(r.target.error);t(i)}})}let Np=!1;function cu(n){const e=wl.Vt((0,he.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new gt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Np||(Np=!0,setTimeout(()=>{throw r},0)),r}}return n}class sw extends lm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function rs(n,e){const t=Lt(n);return wl.xt(t.Ht,e)}class Uy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&bS(l,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Rb(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Rb(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(En.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xr())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(t,r)=>BD(t,r))&&eu(this.baseMutations,e.baseMutations,(t,r)=>BD(t,r))}}class jy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pn(e.mutations.length===r.length);let i=HD;const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new jy(e,t,r,i)}}class xp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class go{constructor(e,t,r,i,l=En.min(),u=En.min(),m=Ts.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m}withSequenceNumber(e){return new go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Wh{constructor(e){this.Jt=e}}function uu(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jh(i=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Aa(i,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qs(e.version)};else{if(!e.isUnknownDocument())return Xt();r.unknownDocument={path:t.path.toArray(),version:Qs(e.version)}}var i,l;return r}function Dd(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qs(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(n){const e=new Oi(n.seconds,n.nanoseconds);return En.fromTimestamp(e)}function Cl(n,e){const t=(e.baseMutations||[]).map(l=>Oy(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>Oy(n.Jt,l)),i=Oi.fromMillis(e.localWriteTimeMs);return new Uy(e.batchId,i,t,r)}function Bl(n){const e=bc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bc(n.lastLimboFreeSnapshotVersion):En.min();let r;var i;return void 0!==n.query.documents?(Pn(1===(i=n.query).documents.length),r=ha(su(zb(i.documents[0])))):r=ha(Zb(n.query)),new go(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ts.fromBase64String(n.resumeToken))}function Id(n,e){const t=Qs(e.snapshotVersion),r=Qs(e.lastLimboFreeSnapshotVersion);let i;i=vp(e.target)?bd(n.Jt,e.target):ky(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xh(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function du(n){const e=Zb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ab(e,e.limit,"L"):e}function hu(n,e){return new xp(e.largestBatchId,Oy(n.Jt,e.overlayMutation))}function Td(n,e){const t=e.path.lastSegment();return[n,Gs(e.path.popLast()),t]}class zh{getBundleMetadata(e,t){return Sd(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Sd(e).put({bundleId:(r=t).id,createTime:Qs(Js(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ad(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:du(i.bundledQuery),readTime:bc(i.readTime)};var i})}saveNamedQuery(e,t){return Ad(e).put({name:(r=t).name,readTime:Qs(Js(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Sd(n){return rs(n,"bundles")}function Ad(n){return rs(n,"namedQueries")}class cm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new cm(e,t.uid||"")}getOverlay(e,t){return qh(e).get(Td(this.userId,t)).next(r=>r?hu(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((l,u)=>{const m=new xp(t,u);i.push(this.Xt(e,m))}),tt.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Gs(u.getCollectionPath())));const l=[];return i.forEach(u=>{const m=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(qh(e).Qt("collectionPathOverlayIndex",m))}),tt.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Ip(),l=Gs(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return qh(e).qt("collectionPathOverlayIndex",u).next(m=>{for(const _ of m){const D=hu(this.M,_);i.set(D.getKey(),D)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Ip();let u;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qh(e).Wt({index:"collectionGroupOverlayIndex",range:m},(_,D,L)=>{const $=hu(this.M,D);l.size()<i||$.largestBatchId===u?(l.set($.getKey(),$),u=$.largestBatchId):L.done()}).next(()=>l)}Xt(e,t){return qh(e).put(function(r,i,l){const[u,m,_]=Td(i,l.mutation.key);return{userId:i,collectionPath:m,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Sp(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function qh(n){return rs(n,"documentOverlays")}class Nd{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(gs(e.integerValue));else if("doubleValue"in e){const r=gs(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ih(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Zg(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ot.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function ow(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Hy(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=ow(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Nd.fe=new Nd;class aw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Hy(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Hy(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class cw{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Mp{constructor(){this.De=new aw,this.Ce=new lw(this.De),this.xe=new cw(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class fu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fu(this.indexId,this.documentKey,this.arrayValue,r)}}function pu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uw(n.arrayValue,e.arrayValue),0!==t?t:(t=uw(n.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(n.documentKey,e.documentKey)))}function uw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Ah(e);if(void 0!==t&&!this.Be(t))return!1;const r=iu(e);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[l++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class hw{constructor(){this.qe=new Gy}addToCollectionParentIndex(e,t){return this.qe.add(t),tt.resolve()}getCollectionParents(e,t){return tt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return tt.resolve()}deleteFieldIndex(e,t){return tt.resolve()}getDocumentsMatchingTarget(e,t){return tt.resolve(null)}getFieldIndex(e,t){return tt.resolve(null)}getFieldIndexes(e,t){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}updateCollectionGroup(e,t,r){return tt.resolve()}updateIndexEntries(e,t){return tt.resolve()}}class Gy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Di(sr.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Di(sr.comparator)).toArray()}}const um=new Uint8Array(0);class fw{constructor(e){this.user=e,this.Ge=new Gy,this.Ke=new lu(t=>xh(t),(t,r)=>Yg(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:r,parent:Gs(i)};return pw(e).put(l)}return tt.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[ay(t),""],!1,!0);return pw(e).qt(i).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(vl(u.parent))}return r})}addFieldIndex(e,t){const r=dm(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=dm(e),i=hm(e),l=Zh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zh(e);let i=!0;const l=new Map;return tt.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(m=>{i&&(i=!!m),l.set(u,m)})).next(()=>{if(i){let u=xr();return tt.forEach(l,(m,_)=>{var D;_t("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(At=>`${At.fieldPath}:${At.kind}`).join(",")}`} to execute ${xh(t)}`);const L=function(At,Dn){const Pt=Ah(Dn);if(void 0===Pt)return null;for(const Zt of bp(At,Pt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(_,m),$=function(At,Dn){const Pt=new Map;for(const Zt of iu(Dn))for(const Ht of bp(At,Zt.fieldPath))switch(Ht.op){case"==":case"in":Pt.set(Zt.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return Pt.set(Zt.fieldPath.canonicalString(),Ht.value),Array.from(Pt.values())}return null}(_,m),Q=function(At,Dn){const Pt=[];let Zt=!0;for(const lr of iu(Dn)){let zn,Wi=!0;for(const mr of bp(At,lr.fieldPath)){let Hn,Oo=!0;switch(mr.op){case"<":case"<=":Hn="nullValue"in(Ht=mr.value)?Tb:"booleanValue"in Ht?{booleanValue:!1}:"integerValue"in Ht||"doubleValue"in Ht?{doubleValue:NaN}:"timestampValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ht?{stringValue:""}:"bytesValue"in Ht?{bytesValue:""}:"referenceValue"in Ht?od(Hs.empty(),Ot.empty()):"geoPointValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ht?{arrayValue:{}}:"mapValue"in Ht?{mapValue:{}}:Xt();break;case"==":case"in":case">=":Hn=mr.value;break;case">":Hn=mr.value,Oo=!1;break;case"!=":case"not-in":Hn=Tb}py(zn,Hn)===Hn&&(zn=Hn,Wi=Oo)}if(null!==At.startAt)for(let mr=0;mr<At.orderBy.length;++mr)if(At.orderBy[mr].field.isEqual(lr.fieldPath)){const Hn=At.startAt.position[mr];py(zn,Hn)===Hn&&(zn=Hn,Wi=At.startAt.inclusive);break}if(void 0===zn)return null;Pt.push(zn),Zt&&(Zt=Wi)}var Ht;return new cd(Pt,Zt)}(_,m),oe=function(At,Dn){const Pt=[];let Zt=!0;for(const lr of iu(Dn)){let zn,Wi=!0;for(const mr of bp(At,lr.fieldPath)){let Hn,Oo=!0;switch(mr.op){case">=":case">":Hn="nullValue"in(Ht=mr.value)?{booleanValue:!1}:"booleanValue"in Ht?{doubleValue:NaN}:"integerValue"in Ht||"doubleValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ht?{stringValue:""}:"stringValue"in Ht?{bytesValue:""}:"bytesValue"in Ht?od(Hs.empty(),Ot.empty()):"referenceValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ht?{arrayValue:{}}:"arrayValue"in Ht?{mapValue:{}}:"mapValue"in Ht?Ib:Xt(),Oo=!1;break;case"==":case"in":case"<=":Hn=mr.value;break;case"<":Hn=mr.value,Oo=!1;break;case"!=":case"not-in":Hn=Ib}Kg(zn,Hn)===Hn&&(zn=Hn,Wi=Oo)}if(null!==At.endAt)for(let mr=0;mr<At.orderBy.length;++mr)if(At.orderBy[mr].field.isEqual(lr.fieldPath)){const Hn=At.endAt.position[mr];Kg(zn,Hn)===Hn&&(zn=Hn,Wi=At.endAt.inclusive);break}if(void 0===zn)return null;Pt.push(zn),Zt&&(Zt=Wi)}var Ht;return new cd(Pt,Zt)}(_,m),be=this.je(m,_,Q),Ge=this.je(m,_,oe),ft=this.We(m,_,$),Qt=this.ze(m.indexId,L,be,!!Q&&Q.inclusive,Ge,!!oe&&oe.inclusive,ft);return tt.forEach(Qt,At=>r.Kt(At,t.limit).next(Dn=>{Dn.forEach(Pt=>{u=u.add(new Ot(vl(Pt.documentKey)))})}))}).next(()=>u)}return tt.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,l,u,m){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),D=_/(null!=t?t.length:1),L=[];for(let $=0;$<_;++$){const Q=t?this.He(t[$/D]):um,oe=r?this.Je(e,Q,r[$%D],i):this.Ye(e),be=l?this.Xe(e,Q,l[$%D],u):this.Ye(e+1);L.push(...this.createRange(oe,be,m.map(Ge=>this.Je(e,Q,Ge,!0))))}return L}Je(e,t,r,i){const l=new fu(e,Ot.empty(),t,r);return i?l:l.ke()}Xe(e,t,r,i){const l=new fu(e,Ot.empty(),t,r);return i?l.ke():l}Ye(e){return new fu(e,Ot.empty(),um,um)}getFieldIndex(e,t){const r=new dw(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{const u=l.filter(m=>r.$e(m));return u.sort((m,_)=>_.fields.length-m.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new Mp;for(const i of iu(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const u=r.Ne(i.kind);Nd.fe.Zt(l,u)}return r.Se()}He(e){const t=new Mp;return Nd.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Mp);let l=0;for(const u of iu(e)){const m=r[l++];for(const _ of i)if(this.tn(t,u.fieldPath)&&zo(m))i=this.en(i,u,m);else{const D=_.Ne(u.kind);Nd.fe.Zt(m,D)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],l=[];for(const u of r.arrayValue.values||[])for(const m of i){const _=new Mp;_.seed(m.Se()),Nd.fe.Zt(u,_.Ne(t.kind)),l.push(_)}return l}tn(e,t){return!!e.filters.find(r=>r instanceof fo&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dm(e),i=hm(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const u=[];return tt.forEach(l,m=>i.get([m.indexId,this.uid]).next(_=>{u.push(function(D,L){const $=L?new ld(L.sequenceNumber,new _c(bc(L.readTime),new Ot(vl(L.documentKey)),L.largestBatchId)):ld.empty(),Q=D.fields.map(([oe,be])=>new Nh(js.fromServerFormat(oe),be));return new ad(D.indexId,D.collectionGroup,Q,$)}(m,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:rr(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=dm(e),l=hm(e);return this.sn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>tt.forEach(m,_=>{return l.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Qs((Q=r).readTime),documentKey:Gs(Q.documentKey.path),largestBatchId:Q.largestBatchId});var Q})))}updateIndexEntries(e,t){const r=new Map;return tt.forEach(t,(i,l)=>{const u=r.get(i.collectionGroup);return(u?tt.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(m=>(r.set(i.collectionGroup,m),tt.forEach(m,_=>this.rn(e,i,_).next(D=>{const L=this.on(l,_);return D.isEqual(L)?tt.resolve():this.un(e,l,D,L)}))))})}an(e,t,r){return Zh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Gs(t.key.path)})}cn(e,t,r){return Zh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Gs(t.key.path)])}rn(e,t,r){const i=Zh(e);let l=new Di(pu);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Gs(t.path)])},(u,m)=>{l=l.add(new fu(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}on(e,t){let r=new Di(pu);const i=this.Ze(t,e);if(null==i)return r;const l=Ah(t);if(null!=l){const u=e.data.field(l.fieldPath);if(zo(u))for(const m of u.arrayValue.values||[])r=r.add(new fu(t.indexId,e.key,this.He(m),i))}else r=r.add(new fu(t.indexId,e.key,um,i));return r}un(e,t,r,i){_t("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(u,m,_,D,L){const $=u.getIterator(),Q=m.getIterator();let oe=md($),be=md(Q);for(;oe||be;){let Ge=!1,ft=!1;if(oe&&be){const Qt=_(oe,be);Qt<0?ft=!0:Qt>0&&(Ge=!0)}else null!=oe?ft=!0:Ge=!0;Ge?(D(be),be=md(Q)):ft?(L(oe),oe=md($)):(oe=md($),be=md(Q))}}(r,i,pu,u=>{l.push(this.an(e,t,u))},u=>{l.push(this.cn(e,t,u))}),tt.waitFor(l)}sn(e){let t=1;return hm(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,m)=>pu(u,m)).filter((u,m,_)=>!m||0!==pu(u,_[m-1]));const i=[];i.push(e);for(const u of r){const m=pu(u,e),_=pu(u,t);if(0===m)i[0]=e.ke();else if(m>0&&_<0)i.push(u),i.push(u.ke());else if(_>0)break}i.push(t);const l=[];for(let u=0;u<i.length;u+=2)l.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,""],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,""]));return l}}function pw(n){return rs(n,"collectionParents")}function Zh(n){return rs(n,"indexEntries")}function dm(n){return rs(n,"indexConfiguration")}function hm(n){return rs(n,"indexState")}const n1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fa{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fa(e,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fm(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let m=0;const _=r.Wt({range:u},(L,$,Q)=>(m++,Q.delete()));l.push(_.next(()=>{Pn(1===m)}));const D=[];for(const L of t.mutations){const $=Fy(e,L.key.path,t.batchId);l.push(i.delete($)),D.push(L.key)}return tt.waitFor(l).next(()=>D)}function Kh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xt();e=n.noDocument}return JSON.stringify(e).length}fa.DEFAULT_COLLECTION_PERCENTILE=10,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fa.DEFAULT=new fa(41943040,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fa.DISABLED=new fa(-1,0,0);class $y{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Pn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new $y(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).Wt({index:"userMutationsIndex",range:r},(i,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=Op(e),u=xd(e);return u.add({}).next(m=>{Pn("number"==typeof m);const _=new Uy(m,t,r,i),D=function(Q,oe,be){const Ge=be.baseMutations.map(Qt=>Sp(Q.Jt,Qt)),ft=be.mutations.map(Qt=>Sp(Q.Jt,Qt));return{userId:oe,batchId:be.batchId,localWriteTimeMs:be.localWriteTime.toMillis(),baseMutations:Ge,mutations:ft}}(this.M,this.userId,_),L=[];let $=new Di((Q,oe)=>rr(Q.canonicalString(),oe.canonicalString()));for(const Q of i){const oe=Fy(this.userId,Q.key.path,m);$=$.add(Q.key.path.popLast()),L.push(u.put(D)),L.push(l.put(oe,wS))}return $.forEach(Q=>{L.push(this.indexManager.addToCollectionParentIndex(e,Q))}),e.addOnCommittedListener(()=>{this.hn[m]=_.keys()}),tt.waitFor(L).next(()=>_)})}lookupMutationBatch(e,t){return xd(e).get(t).next(r=>r?(Pn(r.userId===this.userId),Cl(this.M,r)):null)}ln(e,t){return this.hn[t]?tt.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return xd(e).Wt({index:"userMutationsIndex",range:i},(u,m,_)=>{m.userId===this.userId&&(Pn(m.batchId>=r),l=Cl(this.M,m)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xd(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Cl(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=am(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return Op(e).Wt({range:i},(u,m,_)=>{const[D,L,$]=u,Q=vl(L);if(D===this.userId&&t.path.isEqual(Q))return xd(e).get($).next(oe=>{if(!oe)throw Xt();Pn(oe.userId===this.userId),l.push(Cl(this.M,oe))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Di(rr);const i=[];return t.forEach(l=>{const u=am(this.userId,l.path),m=IDBKeyRange.lowerBound(u),_=Op(e).Wt({range:m},(D,L,$)=>{const[Q,oe,be]=D,Ge=vl(oe);Q===this.userId&&l.path.isEqual(Ge)?r=r.add(be):$.done()});i.push(_)}),tt.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=am(this.userId,r),u=IDBKeyRange.lowerBound(l);let m=new Di(rr);return Op(e).Wt({range:u},(_,D,L)=>{const[$,Q,oe]=_,be=vl(Q);$===this.userId&&r.isPrefixOf(be)?be.length===i&&(m=m.add(oe)):L.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],i=[];return t.forEach(l=>{i.push(xd(e).get(l).next(u=>{if(null===u)throw Xt();Pn(u.userId===this.userId),r.push(Cl(this.M,u))}))}),tt.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fm(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),tt.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tt.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Op(e).Wt({range:r},(l,u,m)=>{if(l[0]===this.userId){const _=vl(l[1]);i.push(_)}else m.done()}).next(()=>{Pn(0===i.length)})})}containsKey(e,t){return r1(e,this.userId,t)}_n(e){return gw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r1(n,e,t){const r=am(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Op(n).Wt({range:l,jt:!0},(m,_,D)=>{const[L,$,Q]=m;L===e&&$===i&&(u=!0),D.done()}).next(()=>u)}function xd(n){return rs(n,"mutations")}function Op(n){return rs(n,"documentMutations")}function gw(n){return rs(n,"mutationQueues")}class gu{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new gu(0)}static gn(){return new gu(-1)}}class AS{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new gu(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>En.fromTimestamp(new Oi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yh(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Pn(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return Yh(e).Wt((u,m)=>{const _=Bl(m);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,l.push(this.removeTargetData(e,_)))}).next(()=>tt.waitFor(l)).next(()=>i)}forEachTarget(e,t){return Yh(e).Wt((r,i)=>{const l=Bl(i);t(l)})}yn(e){return Md(e).get("targetGlobalKey").next(t=>(Pn(null!==t),t))}pn(e,t){return Md(e).put("targetGlobalKey",t)}In(e,t){return Yh(e).put(Id(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Yh(e).Wt({range:i,index:"queryTargetsIndex"},(u,m,_)=>{const D=Bl(m);Yg(t,D.target)&&(l=D,_.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=mu(e);return t.forEach(u=>{const m=Gs(u.path);i.push(l.put({targetId:r,path:m})),i.push(this.referenceDelegate.addReference(e,r,u))}),tt.waitFor(i)}removeMatchingKeys(e,t,r){const i=mu(e);return tt.forEach(t,l=>{const u=Gs(l.path);return tt.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=mu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=mu(e);let l=xr();return i.Wt({range:r,jt:!0},(u,m,_)=>{const D=vl(u[1]),L=new Ot(D);l=l.add(L)}).next(()=>l)}containsKey(e,t){const r=Gs(t.path),i=IDBKeyRange.bound([r],[ay(r)],!1,!0);let l=0;return mu(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,m],_,D)=>{0!==u&&(l++,D.done())}).next(()=>l>0)}Et(e,t){return Yh(e).get(t).next(r=>r?Bl(r):null)}}function Yh(n){return rs(n,"targets")}function Md(n){return rs(n,"targetGlobal")}function mu(n){return rs(n,"targetDocuments")}function _u(n){return Wy.apply(this,arguments)}function Wy(){return Wy=(0,xe.Z)(function*(n){if(n.code!==Ke.FAILED_PRECONDITION||n.message!==Vy)throw n;_t("LocalStore","Unexpectedly lost primary lease")}),Wy.apply(this,arguments)}function zy([n,e],[t,r]){const i=rr(n,t);return 0===i?rr(e,r):i}class pm{constructor(e){this.En=e,this.buffer=new Di(zy),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();zy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class i1{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;_t("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,xe.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Cd(i)?_t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield _u(i)}yield t.vn(e)}))}}class mw{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return tt.resolve(Ta.A);const r=new pm(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(n1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n1):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,l,u,m,_,D;const L=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next($=>($>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${$}`),i=this.params.maximumSequenceNumbersToCollect):i=$,u=Date.now(),this.nthSequenceNumber(e,i))).next($=>(r=$,m=Date.now(),this.removeTargets(e,r,t))).next($=>(l=$,_=Date.now(),this.removeOrphanedDocuments(e,r))).next($=>(D=Date.now(),td()<=vi.in.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-L}ms\n\tDetermined least recently used ${i} in `+(m-u)+`ms\n\tRemoved ${l} targets in `+(_-m)+`ms\n\tRemoved ${$} documents in `+(D-_)+`ms\nTotal Duration: ${D-L}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:$})))}}class s1{constructor(e,t){this.db=e,this.garbageCollector=new mw(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return gm(e,r)}removeReference(e,t,r){return gm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gm(e,t)}Mn(e,t){return function(r,i){let l=!1;return gw(r).zt(u=>r1(r,u,i).next(m=>(m&&(l=!0),tt.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.kn(e,(u,m)=>{if(m<=t){const _=this.Mn(e,u).next(D=>{if(!D)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,En.min()),mu(e).delete([0,Gs(u.path)])))});i.push(_)}}).next(()=>tt.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gm(e,t)}kn(e,t){const r=mu(e);let i,l=Ta.A;return r.Wt({index:"documentTargetsIndex"},([u,m],{path:_,sequenceNumber:D})=>{0===u?(l!==Ta.A&&t(new Ot(vl(i)),l),l=D,i=_):l=Ta.A}).next(()=>{l!==Ta.A&&t(new Ot(vl(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gm(n,e){return mu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Gs(e.path),sequenceNumber:r}));var r}class _w{constructor(){this.changes=new lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ki.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?tt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o1{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Od(e).put(r)}removeEntry(e,t,r){return Od(e).delete(function(i,l){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Dd(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=ki.newInvalidDocument(t);return Od(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jh(t))},(i,l)=>{r=this.Fn(t,l)}).next(()=>r)}$n(e,t){let r={size:0,document:ki.newInvalidDocument(t)};return Od(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Jh(t))},(i,l)=>{r={document:this.Fn(t,l),size:Kh(l)}}).next(()=>r)}getEntries(e,t){let r=za();return this.Bn(e,t,(i,l)=>{const u=this.Fn(i,l);r=r.insert(i,u)}).next(()=>r)}Ln(e,t){let r=za(),i=new Ur(Ot.comparator);return this.Bn(e,t,(l,u)=>{const m=this.Fn(l,u);r=r.insert(l,m),i=i.insert(l,Kh(u))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return tt.resolve();let i=new Di(mm);t.forEach(_=>i=i.add(_));const l=IDBKeyRange.bound(Jh(i.first()),Jh(i.last())),u=i.getIterator();let m=u.getNext();return Od(e).Wt({index:"documentKeyIndex",range:l},(_,D,L)=>{const $=Ot.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&mm(m,$)<0;)r(m,null),m=u.getNext();m&&m.isEqual($)&&(r(m,D),m=u.hasNext()?u.getNext():null),m?L.Ut(Jh(m)):L.done()}).next(()=>{for(;m;)r(m,null),m=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Dd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Od(e).qt(IDBKeyRange.bound(i,l,!0)).next(u=>{let m=za();for(const _ of u){const D=this.Fn(Ot.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,i){let l=za();const u=Zy(t,r),m=Zy(t,_c.max());return Od(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,m,!0)},(_,D,L)=>{const $=this.Fn(Ot.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);l=l.insert($.key,$),l.size===i&&L.done()}).next(()=>l)}newChangeBuffer(e){return new a1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qy(e).get("remoteDocumentGlobalKey").next(t=>(Pn(!!t),t))}On(e,t){return qy(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function xo(n,e){let t;if(e.document)t=xy(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ot.fromSegments(e.noDocument.path),i=bc(e.noDocument.readTime);t=ki.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xt();{const r=Ot.fromSegments(e.unknownDocument.path),i=bc(e.unknownDocument.version);t=ki.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Oi(r[0],r[1]);return En.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(En.min()))return r}return ki.newInvalidDocument(e)}}class a1 extends _w{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new lu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Di((l,u)=>rr(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const m=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,m.readTime)),u.isValidDocument()){const _=uu(this.qn.M,u);i=i.add(l.path.popLast()),r+=Kh(_)-m.size,t.push(this.qn.addEntry(e,l,_))}else if(r-=m.size,this.trackRemovals){const _=uu(this.qn.M,u.convertToNoDocument(En.min()));t.push(this.qn.addEntry(e,l,_))}}),i.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,r)),tt.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((l,u)=>{this.Gn.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function qy(n){return rs(n,"remoteDocumentGlobal")}function Od(n){return rs(n,"remoteDocumentsV14")}function Jh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zy(n,e){const t=e.documentKey.path.toArray();return[n,Dd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mm(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ot.comparator(n,e)}class NS{constructor(e){this.M=e}kt(e,t,r,i){const l=new $h("createOrUpgrade",t);var m;r<1&&i>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qb,{unique:!0}),m.createObjectStore("documentMutations"),_m(e),function(m){m.createObjectStore("remoteDocuments")}(e));let u=tt.resolve();return r<3&&i>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),_m(e)),u=u.next(()=>function(m){const _=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:En.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(l))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(m,_){return _.store("mutations").qt().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qb,{unique:!0});const L=_.store("mutations"),$=D.map(Q=>L.put(Q));return tt.waitFor($)})}(e,l))),u=u.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Kn(l))),r<6&&i>=6&&(u=u.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),r<7&&i>=7&&(u=u.next(()=>this.jn(l))),r<8&&i>=8&&(u=u.next(()=>this.Wn(e,l))),r<9&&i>=9&&(u=u.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.zn(l))),r<11&&i>=11&&(u=u.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(m){const _=m.createObjectStore("documentOverlays",{keyPath:IS});_.createIndex("collectionPathOverlayIndex",TS,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",nw,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(m){const _=m.createObjectStore("remoteDocumentsV14",{keyPath:Xb});_.createIndex("documentKeyIndex",JD),_.createIndex("collectionGroupIndex",QD)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:ew}).createIndex("sequenceNumberIndex",tw,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:DS}).createIndex("documentKeyIndex",bl,{unique:!1})}(e)})),u}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Kh(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>tt.forEach(i,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(m=>tt.forEach(m,_=>{Pn(_.userId===l.userId);const D=Cl(this.M,_);return fm(e,l.userId,D).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((u,m)=>{const _=new sr(u),D=[0,Gs(_)];l.push(t.get(D).next(L=>L?tt.resolve():t.put({targetId:0,path:Gs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>tt.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:XD});const r=t.store("collectionParents"),i=new Gy,l=u=>{if(i.add(u)){const m=u.lastSegment(),_=u.popLast();return r.put({collectionId:m,parent:Gs(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,m)=>{const _=new sr(u);return l(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,m,_],D)=>{const L=vl(m);return l(L.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const l=Bl(i),u=Id(this.M,l);return t.put(u)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((l,u)=>{const m=t.store("remoteDocumentsV14"),_=(D=u,D.document?new Ot(sr.fromString(D.document.name).popFirst(5)):D.noDocument?Ot.fromSegments(D.noDocument.path):D.unknownDocument?Ot.fromSegments(D.unknownDocument.path):Xt()).path.toArray();var D;const L={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(m.put(L))}).next(()=>tt.waitFor(i))}}function _m(n){n.createObjectStore("targetDocuments",{keyPath:ES}).createIndex("documentTargetsIndex",Ly,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CS,{unique:!0}),n.createObjectStore("targetGlobal")}const Ky="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yw{constructor(e,t,r,i,l,u,m,_,D,L,$=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=l,this.window=u,this.document=m,this.Yn=D,this.Xn=L,this.Zn=$,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=Q=>Promise.resolve(),!yw.vt())throw new gt(Ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new s1(this,i),this.cs=t+"main",this.M=new Wh(_),this.hs=new wl(this.cs,this.Zn,new NS(this.M)),this.ls=new AS(this.referenceDelegate,this.M),this.fs=new o1(this.M),this.ds=new zh,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===L&&ns("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gt(Ke.FAILED_PRECONDITION,Ky);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Ta(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,xe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,xe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Cd(e))return _t("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return wc(e).get("owner").next(t=>tt.resolve(this.bs(t)))}Ps(e){return kp(e).delete(this.clientId)}Vs(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rs(r,"clientMetadata");return i.qt().next(l=>{const u=e.Ss(l,18e5),m=l.filter(_=>-1===u.indexOf(_));return tt.forEach(m,_=>i.delete(_.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?tt.resolve(!0):wc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new gt(Ke.FAILED_PRECONDITION,Ky);return!1}}return!(!this.networkEnabled||!this.inForeground)||kp(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,m=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&_t("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new sw(t,Ta.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>kp(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return $y.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new fw(e)}getDocumentOverlayCache(e){return cm.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){_t("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=14===(u=this.Zn)?SS:13===u?iw:12===u?rw:11===u?By:void Xt();var u;let m;return this.hs.runTransaction(e,i,l,_=>(m=new sw(_,this.ts?this.ts.next():Ta.A),"readwrite-primary"===t?this.Ts(m).next(D=>!!D||this.Es(m)).next(D=>{if(!D)throw ns(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new gt(Ke.FAILED_PRECONDITION,Vy);return r(m)}).next(D=>this.Rs(m).next(()=>D)):this.Fs(m).next(()=>r(m)))).then(_=>(m.raiseOnCommittedEvent(),_))}Fs(e){return wc(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new gt(Ke.FAILED_PRECONDITION,Ky)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wc(e).put("owner",t)}static vt(){return wl.vt()}As(e){const t=wc(e);return t.get("owner").next(r=>this.bs(r)?(_t("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):tt.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(ns(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,he.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return _t("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ns("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ns("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch{}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wc(n){return rs(n,"owner")}function kp(n){return rs(n,"clientMetadata")}function Rp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Yy{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const l of t)l.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ot.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):Qg(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new Ot(t)).next(r=>{let i=Dp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let l=Dp();return this.indexManager.getCollectionParents(e,i).next(u=>tt.forEach(u,m=>{const _=(D=t,L=m.child(i),new vc(L,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,L;return this.Ws(e,_,r).next(D=>{D.forEach((L,$)=>{l=l.insert(L,$)})})}).next(()=>l))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(l=>(i=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const u of l)for(const m of u.mutations){const _=m.key;let D=i.get(_);null==D&&(D=ki.newInvalidDocument(_),i=i.insert(_,D)),Rb(m,D,u.localWriteTime),D.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((l,u)=>{ud(t,u)||(i=i.remove(l))}),i))}}class Jy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=xr(),i=xr();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Jy(e,t.fromCache,r,i)}}class Pp{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(En.min())?this.Zs(e,t):this.Xs.qs(e,i).next(l=>{const u=this.ti(t,l);return(Cp(t)||Mh(t))&&this.ei(t.limitType,u,i,r)?this.Zs(e,t):(td()<=vi.in.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),by(t)),this.Xs.Ks(e,t,ND(r,-1)).next(m=>(u.forEach(_=>{m=m.insert(_.key,_)}),m)))});var l}ti(e,t){let r=new Di(Xg(e));return t.forEach((i,l)=>{ud(e,l)&&(r=r.add(l))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Zs(e,t){return td()<=vi.in.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",by(t)),this.Xs.Ks(e,t,_c.min())}}class ym{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Ur(rr),this.ii=new lu(l=>xh(l),Yg),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new Yy(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function vm(n,e,t,r){return new ym(n,e,t,r)}function l1(n,e){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,xe.Z)(function*(n,e){const t=Lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(l=>(i=l,t.ui(e),t.$s.getAllMutationBatches(r))).next(l=>{const u=[],m=[];let _=xr();for(const D of i){u.push(D.batchId);for(const L of D.mutations)_=_.add(L.key)}for(const D of l){m.push(D.batchId);for(const L of D.mutations)_=_.add(L.key)}return t.ai.qs(r,_).next(D=>({ci:D,removedBatchIds:u,addedBatchIds:m}))})})}),Qy.apply(this,arguments)}function Xy(n,e){const t=Lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(u,m,_,D){const L=_.batch,$=L.keys();let Q=tt.resolve();return $.forEach(oe=>{Q=Q.next(()=>D.getEntry(m,oe)).next(be=>{const Ge=_.docVersions.get(oe);Pn(null!==Ge),be.version.compareTo(Ge)<0&&(L.applyToRemoteDocument(be,_),be.isValidDocument()&&(be.setReadTime(_.commitVersion),D.addEntry(be)))})}),Q.next(()=>u.$s.removeMutationBatch(m,L))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function bm(n){const e=Lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function vw(n,e){const t=Lt(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const m=[];e.targetChanges.forEach((D,L)=>{const $=i.get(L);if(!$)return;m.push(t.ls.removeMatchingKeys(l,D.removedDocuments,L).next(()=>t.ls.addMatchingKeys(l,D.addedDocuments,L)));let Q=$.withSequenceNumber(l.currentSequenceNumber);var oe,be,Ge;e.targetMismatches.has(L)?Q=Q.withResumeToken(Ts.EMPTY_BYTE_STRING,En.min()).withLastLimboFreeSnapshotVersion(En.min()):D.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(D.resumeToken,r)),i=i.insert(L,Q),be=Q,Ge=D,(0===(oe=$).resumeToken.approximateByteSize()||be.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(l,Q))});let _=za();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,D))}),m.push(ev(l,u,e.documentUpdates).next(D=>{_=D})),!r.isEqual(En.min())){const D=t.ls.getLastRemoteSnapshotVersion(l).next(L=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(D)}return tt.waitFor(m).next(()=>u.apply(l)).next(()=>t.ai.Gs(l,_)).next(()=>_)}).then(l=>(t.si=i,l))}function ev(n,e,t){let r=xr();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let l=za();return t.forEach((u,m)=>{const _=i.get(u);m.isNoDocument()&&m.version.isEqual(En.min())?(e.removeEntry(u,m.readTime),l=l.insert(u,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||0===m.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(m),l=l.insert(u,m)):_t("LocalStore","Ignoring outdated watch update for ",u,". Current version:",_.version," Watch version:",m.version)}),l})}function tv(n,e){const t=Lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function kd(n,e){const t=Lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(l=>l?(i=l,tt.resolve(i)):t.ls.allocateTargetId(r).next(u=>(i=new go(e,u,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Rd(n,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,xe.Z)(function*(n,e,t){const r=Lt(n),i=r.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Cd(u))throw u;_t("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),Fp.apply(this,arguments)}function Lp(n,e,t){const r=Lt(n);let i=En.min(),l=xr();return r.persistence.runTransaction("Execute query","readonly",u=>function(m,_,D){const L=Lt(m),$=L.ii.get(D);return void 0!==$?tt.resolve(L.si.get($)):L.ls.getTargetData(_,D)}(r,u,ha(e)).next(m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(u,m.targetId).next(_=>{l=_})}).next(()=>r.ni.Ks(u,e,t?i:En.min(),t?l:xr())).next(m=>(rv(r,dd(e),m),{documents:m,hi:l})))}function bw(n,e){const t=Lt(n),r=Lt(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(u=>u?u.target:null))}function nv(n,e){const t=Lt(n),r=t.ri.get(e)||En.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,ND(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rv(t,e,i),i))}function rv(n,e,t){let r=En.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.ri.set(e,r)}function wm(){return wm=(0,xe.Z)(function*(n,e,t,r){const i=Lt(n);let l=xr(),u=za();for(const D of t){const L=e.li(D.metadata.name);D.document&&(l=l.add(L));const $=e.fi(D);$.setReadTime(e.di(D.metadata.readTime)),u=u.insert(L,$)}const m=i.oi.newChangeBuffer({trackRemovals:!0}),_=yield kd(i,(D=r,ha(su(sr.fromString(`__bundle__/docs/${D}`)))));var D;return i.persistence.runTransaction("Apply bundle documents","readwrite",D=>ev(D,m,u).next(L=>(m.apply(D),L)).next(L=>i.ls.removeMatchingKeysForTargetId(D,_.targetId).next(()=>i.ls.addMatchingKeys(D,l,_.targetId)).next(()=>i.ai.Gs(D,L)).next(()=>L)))}),wm.apply(this,arguments)}function c1(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,xe.Z)(function*(n,e,t=xr()){const r=yield kd(n,ha(du(e.bundledQuery))),i=Lt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const u=Js(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.ds.saveNamedQuery(l,e);const m=r.withResumeToken(Ts.EMPTY_BYTE_STRING,u);return i.si=i.si.insert(m.targetId,m),i.ls.updateTargetData(l,m).next(()=>i.ls.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.ls.addMatchingKeys(l,t,r.targetId)).next(()=>i.ds.saveNamedQuery(l,e))})}),Cm.apply(this,arguments)}class ww{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return tt.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Js(r.createTime)}),tt.resolve()}getNamedQuery(e,t){return tt.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:du(r.bundledQuery),readTime:Js(r.readTime)}),tt.resolve();var r}}class sv{constructor(){this.overlays=new Ur(Ot.comparator),this.mi=new Map}getOverlay(e,t){return tt.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.Xt(e,t,l)}),tt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(r)),tt.resolve()}getOverlaysForCollection(e,t,r){const i=Ip(),l=t.length+1,u=new Ot(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const _=m.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===l&&_.largestBatchId>r&&i.set(_.getKey(),_)}return tt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Ur((D,L)=>D-L);const u=this.overlays.getIterator();for(;u.hasNext();){const D=u.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let L=l.get(D.largestBatchId);null===L&&(L=Ip(),l=l.insert(D.largestBatchId,L)),L.set(D.getKey(),D)}}const m=Ip(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,L)=>m.set(D,L)),!(m.size()>=i)););return tt.resolve(m)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new xp(t,r));let l=this.mi.get(t);void 0===l&&(l=xr(),this.mi.set(t,l)),this.mi.set(t,l.add(r.key))}}class Qh{constructor(){this.gi=new Di($s.yi),this.pi=new Di($s.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new $s(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new $s(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ot(new sr([])),r=new $s(t,e),i=new $s(t,e+1),l=[];return this.pi.forEachInRange([r,i],u=>{this.Ei(u),l.push(u.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ot(new sr([])),r=new $s(t,e),i=new $s(t,e+1);let l=xr();return this.pi.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new $s(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class $s{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ot.comparator(e.key,t.key)||rr(e.Vi,t.Vi)}static Ii(e,t){return rr(e.Vi,t.Vi)||Ot.comparator(e.key,t.key)}}class Cw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new Di($s.yi)}checkEmpty(e){return tt.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const l=this.vi;this.vi++;const u=new Uy(l,t,r,i);this.$s.push(u);for(const m of i)this.Si=this.Si.add(new $s(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return tt.resolve(u)}lookupMutationBatch(e,t){return tt.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),l=i<0?0:i;return tt.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return tt.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $s(t,0),i=new $s(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([r,i],u=>{const m=this.Di(u.Vi);l.push(m)}),tt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Di(rr);return t.forEach(i=>{const l=new $s(i,0),u=new $s(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,u],m=>{r=r.add(m.Vi)})}),tt.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Ot.isDocumentKey(l)||(l=l.child(""));const u=new $s(new Ot(l),0);let m=new Di(rr);return this.Si.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===i&&(m=m.add(_.Vi)),!0)},u),tt.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pn(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return tt.forEach(t.mutations,i=>{const l=new $s(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new $s(t,0),i=this.Si.firstAfterOrEqual(r);return tt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return tt.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Ew{constructor(e){this.ki=e,this.docs=new Ur(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return tt.resolve(r?r.document.mutableCopy():ki.newInvalidDocument(t))}getEntries(e,t){let r=za();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():ki.newInvalidDocument(i))}),tt.resolve(r)}getAllFromCollection(e,t,r){let i=za();const l=new Ot(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:m,value:{document:_}}=u.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||MD(xD(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return tt.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Xt()}Mi(e,t){return tt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Dw(this)}getSize(e){return tt.resolve(this.size)}}class Dw extends _w{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),tt.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Iw{constructor(e){this.persistence=e,this.Oi=new lu(t=>xh(t),Yg),this.lastRemoteSnapshotVersion=En.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Qh,this.targetCount=0,this.Bi=gu.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),tt.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new gu(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,tt.resolve()}updateTargetData(e,t){return this.In(t),tt.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Oi.forEach((u,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)}),tt.waitFor(l).next(()=>i)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return tt.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),tt.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),tt.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),tt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return tt.resolve(r)}containsKey(e,t){return tt.resolve(this.$i.containsKey(t))}}class Tw{constructor(e,t){this.Li={},this.overlays={},this.ts=new Ta(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Iw(this),this.indexManager=new hw,this.fs=new Ew(r=>this.referenceDelegate.Ui(r)),this.M=new Wh(t),this.ds=new ww(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new Cw(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){_t("MemoryPersistence","Starting transaction:",e);const i=new Sw(this.ts.next());return this.referenceDelegate.qi(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e,t){return tt.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class Sw extends lm{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Qi=new Qh,this.ji=null}static Wi(e){return new Em(e)}get zi(){if(this.ji)return this.ji;throw Xt()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),tt.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),tt.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),tt.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.zi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.zi,r=>{const i=Ot.fromPath(r);return this.Hi(e,i).next(l=>{l||t.removeEntry(i,En.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return tt.or([()=>tt.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function u1(n,e){return`firestore_clients_${n}_${e}`}function Aw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ov(n,e){return`firestore_targets_${n}_${e}`}class Bp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let l,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(l=new gt(i.error.code,i.error.message))),u?new Bp(e,t,i.state,l):(ns("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new gt(r.error.code,r.error.message))),l?new Vp(e,r.state,i):(ns("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class is{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=Vh();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Db(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return i?new is(e,l):(ns("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Dm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Dm(t.clientId,t.onlineState):(ns("SharedClientState",`Failed to parse online state: ${e}`),null)}}class av{constructor(){this.activeTargetIds=Vh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lv{constructor(e,t,r,i,l){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Ur(rr),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=u1(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new av),this.ar=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const l=e.getItem(u1(e.persistenceKey,i));if(l){const u=is.Ji(i,l);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ov(this.persistenceKey,e));if(r){const i=Vp.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ov(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _t("SharedClientState","READ",e,t),t}setItem(e,t){_t("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_t("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(_t("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ns("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(l){let u=Ta.A;if(null!=l)try{const m=JSON.parse(l);Pn("number"==typeof m),u=m}catch(m){ns("SharedClientState","Failed to read sequence number from WebStorage",m)}return u}(r.newValue);i!==Ta.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new Bp(this.currentUser,e,t,r),l=Aw(this.persistenceKey,this.currentUser,e);this.setItem(l,i.Yi())}pr(e){const t=Aw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=ov(this.persistenceKey,e),l=new Vp(e,t,r);this.setItem(i,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return is.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return Bp.Ji(new Us(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Vp.Ji(i,t)}wr(e){return Dm.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);_t("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),l=this.gr(r),u=[],m=[];return l.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{l.has(_)||m.push(_)}),this.syncEngine.Or(u,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Vh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class cv{constructor(){this.Fr=new av,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new av,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class d1{Br(e){}shutdown(){}}class uv{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Nw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xh{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class h1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,l){const u=this.oo(e,t);_t("RestConnection","Sending: ",u,r);const m={};return this.uo(m,i,l),this.ao(e,u,m,r).then(_=>(_t("RestConnection","Received: ",_),_),_=>{throw pc("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}co(e,t,r,i,l){return this.ro(e,t,r,i,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}oo(e,t){return`${this.so}/v1/${t}:${Nw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((l,u)=>{const m=new ed;m.listenOnce(cn.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case gn.NO_ERROR:const D=m.getResponseJson();_t("Connection","XHR received:",JSON.stringify(D)),l(D);break;case gn.TIMEOUT:_t("Connection",'RPC "'+e+'" timed out'),u(new gt(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case gn.HTTP_ERROR:const L=m.getStatus();if(_t("Connection",'RPC "'+e+'" failed with status:',L,"response text:",m.getResponseText()),L>0){const $=m.getResponseJson().error;if($&&$.status&&$.message){const Q=function(oe){const be=oe.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(be)>=0?be:Ke.UNKNOWN}($.status);u(new gt(Q,$.message))}else u(new gt(Ke.UNKNOWN,"Server responded with status "+m.getStatus()))}else u(new gt(Ke.UNAVAILABLE,"Connection failed."));break;default:Xt()}}finally{_t("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);m.send(t,"POST",_,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=xt(),u=qt(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Xu({})),this.uo(m.initMessageHeaders,t,r),(0,he.uI)()||(0,he.b$)()||(0,he.d)()||(0,he.w1)()||(0,he.Mn)()||(0,he.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");_t("Connection","Creating WebChannel: "+_,m);const D=l.createWebChannel(_,m);let L=!1,$=!1;const Q=new Xh({jr:be=>{$?_t("Connection","Not sending because WebChannel is closed:",be):(L||(_t("Connection","Opening WebChannel transport."),D.open(),L=!0),_t("Connection","WebChannel sending:",be),D.send(be))},Wr:()=>D.close()}),oe=(be,Ge,ft)=>{be.listen(Ge,Qt=>{try{ft(Qt)}catch(At){setTimeout(()=>{throw At},0)}})};return oe(D,fc.EventType.OPEN,()=>{$||_t("Connection","WebChannel transport opened.")}),oe(D,fc.EventType.CLOSE,()=>{$||($=!0,_t("Connection","WebChannel transport closed"),Q.eo())}),oe(D,fc.EventType.ERROR,be=>{$||($=!0,pc("Connection","WebChannel transport errored:",be),Q.eo(new gt(Ke.UNAVAILABLE,"The operation could not be completed")))}),oe(D,fc.EventType.MESSAGE,be=>{var Ge;if(!$){const ft=be.data[0];Pn(!!ft);const Qt=ft,At=Qt.error||(null===(Ge=Qt[0])||void 0===Ge?void 0:Ge.error);if(At){_t("Connection","WebChannel received error:",At);const Dn=At.status;let Pt=function(Ht){const lr=Ss[Ht];if(void 0!==lr)return Iy(lr)}(Dn),Zt=At.message;void 0===Pt&&(Pt=Ke.INTERNAL,Zt="Unknown error status: "+Dn+" with message "+At.message),$=!0,Q.eo(new gt(Pt,Zt)),D.close()}else _t("Connection","WebChannel received:",ft),Q.no(ft)}}),oe(u,Ei.STAT_EVENT,be=>{be.stat===$o.PROXY?_t("Connection","Detected buffering proxy"):be.stat===$o.NOPROXY&&_t("Connection","Detected no buffering proxy")}),setTimeout(()=>{Q.Zr()},0),Q}}function xw(){return typeof window<"u"?window:null}function Up(){return typeof document<"u"?document:null}function jp(n){return new $b(n,!0)}class Im{constructor(e,t,r=1e3,i=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&_t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class f1{constructor(e,t,r,i,l,u,m,_){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Im(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,xe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,xe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,xe.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===Ke.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===Ke.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new gt(Ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,xe.Z)(function*(){e.state=0,e.start()}))}qo(e){return _t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dv extends f1{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function My(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:Xt(),i=e.targetChange.targetIds||[],l=function(_,D){return _.N?(Pn(void 0===D||"string"==typeof D),Ts.fromBase64String(D||"")):(Pn(void 0===D||D instanceof Uint8Array),Ts.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(_){const D=void 0===_.code?Ke.UNKNOWN:Iy(_.code);return new gt(D,_.message||"")}(u);t=new sm(r,i,l,m||null)}else if("documentChange"in e){const r=e.documentChange,i=qa(n,r.document.name),l=Js(r.document.updateTime),u=new qo({mapValue:{fields:r.document.fields}}),m=ki.newFoundDocument(i,l,u);t=new im(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=qa(n,r.document),l=r.readTime?Js(r.readTime):En.min(),u=ki.newNoDocument(i,l);t=new im([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=qa(n,r.document);t=new im([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Xt();{const r=e.filter,l=new Ub(r.count||0);t=new jb(r.targetId,l)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return En.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?En.min():l.readTime?Js(l.readTime):En.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=vd(this.M),t.addTarget=function(i,l){let u;const m=l.target;return u=vp(m)?{documents:bd(i,m)}:{query:ky(i,m)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=Tp(i,l.resumeToken):l.snapshotVersion.compareTo(En.min())>0&&(u.readTime=Aa(i,l.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function ZD(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=vd(this.M),t.removeTarget=e,this.Oo(t)}}class hv extends f1{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Pn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function qb(n,e){return n&&n.length>0?(Pn(void 0!==e),n.map(t=>function(r,i){let l=Js(r.updateTime?r.updateTime:i);return l.isEqual(En.min())&&(l=Js(i)),new LD(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Js(e.commitTime);return this.listener.Jo(r,t)}return Pn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=vd(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Sp(this.M,r))};this.Oo(t)}}class Vl extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new gt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ro(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new gt(Ke.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.co(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new gt(Ke.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class p1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ns(t),this.su=!1):_t("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Mw{constructor(e,t,r,i,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(m=>{r.enqueueAndForget((0,xe.Z)(function*(){var _;Za(u)&&(_t("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,xe.Z)(function*(D){const L=Lt(D);L.lu.add(4),yield Mo(L),L._u.set("Unknown"),L.lu.delete(4),yield pa(L)}),function(D){return _.apply(this,arguments)})(u))}))}),this._u=new p1(r,i)}}function pa(n){return Na.apply(this,arguments)}function Na(){return Na=(0,xe.Z)(function*(n){if(Za(n))for(const e of n.fu)yield e(!0)}),Na.apply(this,arguments)}function Mo(n){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,xe.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Tm.apply(this,arguments)}function Hp(n,e){const t=Lt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),$p(t)?pv(t):ef(t).Co()&&fv(t,e))}function Gp(n,e){const t=Lt(n),r=ef(t);t.hu.delete(e),r.Co()&&Ow(t,e),0===t.hu.size&&(r.Co()?r.ko():Za(t)&&t._u.set("Unknown"))}function fv(n,e){n.wu.Z(e.targetId),ef(n).Qo(e)}function Ow(n,e){n.wu.Z(e),ef(n).jo(e)}function pv(n){n.wu=new WD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),ef(n).start(),n._u.iu()}function $p(n){return Za(n)&&!ef(n).Do()&&n.hu.size>0}function Za(n){return 0===Lt(n).lu.size}function kw(n){n.wu=void 0}function Rw(n){return gv.apply(this,arguments)}function gv(){return gv=(0,xe.Z)(function*(n){n.hu.forEach((e,t)=>{fv(n,e)})}),gv.apply(this,arguments)}function Pw(n,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,xe.Z)(function*(n,e){kw(n),$p(n)?(n._u.uu(e),pv(n)):n._u.set("Unknown")}),Sm.apply(this,arguments)}function Am(n,e,t){return mv.apply(this,arguments)}function mv(){return mv=(0,xe.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof sm&&2===e.state&&e.cause)try{yield(r=(0,xe.Z)(function*(i,l){const u=l.cause;for(const m of l.targetIds)i.hu.has(m)&&(yield i.remoteSyncer.rejectListen(m,u),i.hu.delete(m),i.wu.removeTarget(m))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){_t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Wp(n,r)}else if(e instanceof im?n.wu.ut(e):e instanceof jb?n.wu._t(e):n.wu.ht(e),!t.isEqual(En.min()))try{const r=yield bm(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const u=i.wu.yt(l);return u.targetChanges.forEach((m,_)=>{if(m.resumeToken.approximateByteSize()>0){const D=i.hu.get(_);D&&i.hu.set(_,D.withResumeToken(m.resumeToken,l))}}),u.targetMismatches.forEach(m=>{const _=i.hu.get(m);if(!_)return;i.hu.set(m,_.withResumeToken(Ts.EMPTY_BYTE_STRING,_.snapshotVersion)),Ow(i,m);const D=new go(_.target,m,1,_.sequenceNumber);fv(i,D)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){_t("RemoteStore","Failed to raise snapshot:",r),yield Wp(n,r)}var r}),mv.apply(this,arguments)}function Wp(n,e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,xe.Z)(function*(n,e,t){if(!Cd(e))throw e;n.lu.add(1),yield Mo(n),n._u.set("Offline"),t||(t=()=>bm(n.localStore)),n.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){_t("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield pa(n)}))}),Nm.apply(this,arguments)}function xm(n,e){return e().catch(t=>Wp(n,t,e))}function Cc(n){return zp.apply(this,arguments)}function zp(){return zp=(0,xe.Z)(function*(n){const e=Lt(n),t=yu(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;Fw(e);)try{const i=yield tv(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,Lw(e,i)}catch(i){yield Wp(e,i)}_v(e)&&yv(e)}),zp.apply(this,arguments)}function Fw(n){return Za(n)&&n.cu.length<10}function Lw(n,e){n.cu.push(e);const t=yu(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function _v(n){return Za(n)&&!yu(n).Do()&&n.cu.length>0}function yv(n){yu(n).start()}function Bw(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,xe.Z)(function*(n){yu(n).Xo()}),Mm.apply(this,arguments)}function Vw(n){return vv.apply(this,arguments)}function vv(){return vv=(0,xe.Z)(function*(n){const e=yu(n);for(const t of n.cu)e.Ho(t.mutations)}),vv.apply(this,arguments)}function g1(n,e,t){return bv.apply(this,arguments)}function bv(){return bv=(0,xe.Z)(function*(n,e,t){const r=n.cu.shift(),i=jy.from(r,e,t);yield xm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cc(n)}),bv.apply(this,arguments)}function m1(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,xe.Z)(function*(n,e){var t;e&&yu(n).zo&&(yield(t=(0,xe.Z)(function*(r,i){if(Dy(l=i.code)&&l!==Ke.ABORTED){const u=r.cu.shift();yu(r).No(),yield xm(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Cc(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),_v(n)&&yv(n)}),wv.apply(this,arguments)}function Uw(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,xe.Z)(function*(n,e){const t=Lt(n);t.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");const r=Za(t);t.lu.add(3),yield Mo(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield pa(t)}),Cv.apply(this,arguments)}function Ev(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,xe.Z)(function*(n,e){const t=Lt(n);e?(t.lu.delete(2),yield pa(t)):e||(t.lu.add(2),yield Mo(t),t._u.set("Unknown"))}),Dv.apply(this,arguments)}function ef(n){return n.mu||(n.mu=function(e,t,r){const i=Lt(e);return i.tu(),new dv(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Rw.bind(null,n),Jr:Pw.bind(null,n),Ko:Am.bind(null,n)}),n.fu.push(function(){var e=(0,xe.Z)(function*(t){t?(n.mu.No(),$p(n)?pv(n):n._u.set("Unknown")):(yield n.mu.stop(),kw(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function yu(n){return n.gu||(n.gu=function(e,t,r){const i=Lt(e);return i.tu(),new hv(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:Bw.bind(null,n),Jr:m1.bind(null,n),Yo:Vw.bind(null,n),Jo:g1.bind(null,n)}),n.fu.push(function(){var e=(0,xe.Z)(function*(t){t?(n.gu.No(),yield Cc(n)):(yield n.gu.stop(),n.cu.length>0&&(_t("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Iv{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,m=new Iv(e,t,u,i,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gt(Ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tf(n,e){if(ns("AsyncQueue",`${e}: ${n}`),Cd(n))return new gt(Ke.UNAVAILABLE,`${e}: ${n}`);throw n}class nf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ot.comparator(t.key,r.key):(t,r)=>Ot.comparator(t.key,r.key),this.keyedMap=Dp(),this.sortedSet=new Ur(this.comparator)}static emptySet(e){return new nf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new nf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jw{constructor(){this.yu=new Ur(Ot.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Xt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class rf{constructor(e,t,r,i,l,u,m,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new rf(e,t,nf.emptySet(t),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _1{constructor(){this.Iu=void 0,this.listeners=[]}}class y1{constructor(){this.queries=new lu(e=>Nb(e),kh),this.onlineState="Unknown",this.Tu=new Set}}function Om(n,e){return km.apply(this,arguments)}function km(){return km=(0,xe.Z)(function*(n,e){const t=Lt(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new _1),i)try{l.Iu=yield t.onListen(r)}catch(u){const m=tf(u,`Initialization of query '${by(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&Fm(t)}),km.apply(this,arguments)}function Rm(n,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,xe.Z)(function*(n,e){const t=Lt(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Pm.apply(this,arguments)}function Hw(n,e){const t=Lt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const m of u.listeners)m.Au(i)&&(r=!0);u.Iu=i}}r&&Fm(t)}function Gw(n,e,t){const r=Lt(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function Fm(n){n.Tu.forEach(e=>{e.next()})}class Lm{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new rf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=rf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class $w{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Bm{constructor(e){this.M=e}li(e){return qa(this.M,e)}fi(e){return e.metadata.exists?xy(this.M,e.document,!1):ki.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Js(e)}}class Ww{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vu(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new Bm(this.M);for(const i of e)if(i.metadata.queries){const l=r.li(i.metadata.name);for(const u of i.metadata.queries){const m=(t.get(u)||xr()).add(l);t.set(u,m)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function iv(n,e,t,r){return wm.apply(this,arguments)}(e.localStore,new Bm(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield c1(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function vu(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class zw{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class Pd{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=xr(),this.mutatedKeys=xr(),this.Lu=Xg(e),this.Uu=new nf(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new jw,i=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,m=!1;const _=Cp(this.query)&&i.size===this.query.limit?i.last():null,D=Mh(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((L,$)=>{const Q=i.get(L),oe=ud(this.query,$)?$:null,be=!!Q&&this.mutatedKeys.has(Q.key),Ge=!!oe&&(oe.hasLocalMutations||this.mutatedKeys.has(oe.key)&&oe.hasCommittedMutations);let ft=!1;Q&&oe?Q.data.isEqual(oe.data)?be!==Ge&&(r.track({type:3,doc:oe}),ft=!0):this.Qu(Q,oe)||(r.track({type:2,doc:oe}),ft=!0,(_&&this.Lu(oe,_)>0||D&&this.Lu(oe,D)<0)&&(m=!0)):!Q&&oe?(r.track({type:0,doc:oe}),ft=!0):Q&&!oe&&(r.track({type:1,doc:Q}),ft=!0,(_||D)&&(m=!0)),ft&&(oe?(u=u.add(oe),l=Ge?l.add(L):l.delete(L)):(u=u.delete(L),l=l.delete(L)))}),Cp(this.query)||Mh(this.query))for(;u.size>this.query.limit;){const L=Cp(this.query)?u.last():u.first();u=u.delete(L.key),l=l.delete(L.key),r.track({type:1,doc:L})}return{Uu:u,Ku:r,ei:m,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((D,L)=>function($,Q){const oe=be=>{switch(be){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xt()}};return oe($)-oe(Q)}(D.type,L.type)||this.Lu(D.doc,L.doc)),this.ju(r);const u=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,_=m!==this.$u;return this.$u=m,0!==l.length||_?{snapshot:new rf(this.query,e.Uu,i,l,e.mutatedKeys,0===m,_,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new jw,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=xr(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new qw(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new zw(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=xr();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return rf.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class xS{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Tv{constructor(e){this.key=e,this.Xu=!1}}class MS{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new lu(m=>Nb(m),kh),this.ea=new Map,this.na=new Set,this.sa=new Ur(Ot.comparator),this.ia=new Map,this.ra=new Qh,this.oa={},this.ua=new Map,this.aa=gu.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function Zw(n,e){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,xe.Z)(function*(n,e){const t=oC(n);let r,i;const l=t.ta.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.Yu();else{const u=yield kd(t.localStore,ha(e));t.isPrimaryClient&&Hp(t.remoteStore,u);const m=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Kw(t,e,r,"current"===m)}return i}),Vm.apply(this,arguments)}function Kw(n,e,t,r){return bn.apply(this,arguments)}function bn(){return bn=(0,xe.Z)(function*(n,e,t,r){n.ha=(L,$,Q)=>{return(oe=(0,xe.Z)(function*(be,Ge,ft,Qt){let At=Ge.view.Gu(ft);At.ei&&(At=yield Lp(be.localStore,Ge.query,!1).then(({documents:Zt})=>Ge.view.Gu(Zt,At)));const Dn=Qt&&Qt.targetChanges.get(Ge.targetId),Pt=Ge.view.applyChanges(At,be.isPrimaryClient,Dn);return Fd(be,Ge.targetId,Pt.zu),Pt.snapshot}),function(be,Ge,ft,Qt){return oe.apply(this,arguments)})(n,L,$,Q);var oe};const i=yield Lp(n.localStore,e,!0),l=new Pd(e,i.hi),u=l.Gu(i.documents),m=Uh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=l.applyChanges(u,n.isPrimaryClient,m);Fd(n,t,_.zu);const D=new xS(e,t,l);return n.ta.set(e,D),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),bn.apply(this,arguments)}function v1(n,e){return Sv.apply(this,arguments)}function Sv(){return Sv=(0,xe.Z)(function*(n,e){const t=Lt(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(l=>!kh(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Rd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Gp(t.remoteStore,r.targetId),lf(t,r.targetId)}).catch(_u))):(lf(t,r.targetId),yield Rd(t.localStore,r.targetId,!0))}),Sv.apply(this,arguments)}function sf(){return sf=(0,xe.Z)(function*(n,e,t){const r=Wm(n);try{const i=yield function(l,u){const m=Lt(l),_=Oi.now(),D=u.reduce(($,Q)=>$.add(Q.key),xr());let L;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>m.ai.qs($,D).next(Q=>{L=Q;const oe=[];for(const be of u){const Ge=Pb(be,L.get(be.key));null!=Ge&&oe.push(new au(be.key,Ge,gy(Ge.value.mapValue),Nr.exists(!0)))}return m.$s.addMutationBatch($,_,oe,u)})).then($=>($.applyToLocalDocumentSet(L),{batchId:$.batchId,changes:L}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,m){let _=l.oa[l.currentUser.toKey()];_||(_=new Ur(rr)),_=_.insert(u,m),l.oa[l.currentUser.toKey()]=_}(r,i.batchId,t),yield Ec(r,i.changes),yield Cc(r.remoteStore)}catch(i){const l=tf(i,"Failed to persist write");t.reject(l)}}),sf.apply(this,arguments)}function Yw(n,e){return af.apply(this,arguments)}function af(){return af=(0,xe.Z)(function*(n,e){const t=Lt(n);try{const r=yield vw(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.ia.get(l);u&&(Pn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Pn(u.Xu):i.removedDocuments.size>0&&(Pn(u.Xu),u.Xu=!1))}),yield Ec(t,r,e)}catch(r){yield _u(r)}}),af.apply(this,arguments)}function qp(n,e,t){const r=Lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((l,u)=>{const m=u.view.Eu(e);m.snapshot&&i.push(m.snapshot)}),function(l,u){const m=Lt(l);m.onlineState=u;let _=!1;m.queries.forEach((D,L)=>{for(const $ of L.listeners)$.Eu(u)&&(_=!0)}),_&&Fm(m)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ss(n,e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=(0,xe.Z)(function*(n,e,t){const r=Lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),l=i&&i.key;if(l){let u=new Ur(Ot.comparator);u=u.insert(l,ki.newNoDocument(l,En.min()));const m=xr().add(l),_=new _d(En.min(),new Map,new Di(rr),u,m);yield Yw(r,_),r.sa=r.sa.remove(l),r.ia.delete(e),xv(r)}else yield Rd(r.localStore,e,!1).then(()=>lf(r,e,t)).catch(_u)}),Jw.apply(this,arguments)}function Qw(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,xe.Z)(function*(n,e){const t=Lt(n),r=e.batch.batchId;try{const i=yield Xy(t.localStore,e);Nv(t,r,null),Hm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ec(t,i)}catch(i){yield _u(i)}}),Av.apply(this,arguments)}function w1(n,e,t){return Um.apply(this,arguments)}function Um(){return Um=(0,xe.Z)(function*(n,e,t){const r=Lt(n);try{const i=yield function(l,u){const m=Lt(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return m.$s.lookupMutationBatch(_,u).next(L=>(Pn(null!==L),D=L.keys(),m.$s.removeMutationBatch(_,L))).next(()=>m.$s.performConsistencyCheck(_)).next(()=>m.ai.qs(_,D))})}(r.localStore,e);Nv(r,e,t),Hm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ec(r,i)}catch(i){yield _u(i)}}),Um.apply(this,arguments)}function jm(){return jm=(0,xe.Z)(function*(n,e){const t=Lt(n);Za(t.remoteStore)||_t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=Lt(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>u.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=tf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),jm.apply(this,arguments)}function Hm(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function Nv(n,e,t){const r=Lt(n);let i=r.oa[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function lf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||eC(n,r)})}function eC(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Gp(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),xv(n))}function Fd(n,e,t){for(const r of t)r instanceof zw?(n.ra.addReference(r.key,e),C1(n,r)):r instanceof qw?(_t("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||eC(n,r.key)):Xt()}function C1(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(_t("SyncEngine","New document in limbo: "+t),n.na.add(r),xv(n))}function xv(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ot(sr.fromString(e)),r=n.aa.next();n.ia.set(r,new Tv(t)),n.sa=n.sa.insert(t,r),Hp(n.remoteStore,new go(ha(su(t.path)),r,2,Ta.A))}}function Ec(n,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,xe.Z)(function*(n,e,t){const r=Lt(n),i=[],l=[],u=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,_)=>{u.push(r.ha(_,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D.fromCache?"not-current":"current"),i.push(D);const L=Jy.Js(_.targetId,D);l.push(L)}}))}),yield Promise.all(u),r.Zu.Ko(i),yield(m=(0,xe.Z)(function*(_,D){const L=Lt(_);try{yield L.persistence.runTransaction("notifyLocalViewChanges","readwrite",$=>tt.forEach(D,Q=>tt.forEach(Q.zs,oe=>L.persistence.referenceDelegate.addReference($,Q.targetId,oe)).next(()=>tt.forEach(Q.Hs,oe=>L.persistence.referenceDelegate.removeReference($,Q.targetId,oe)))))}catch($){if(!Cd($))throw $;_t("LocalStore","Failed to update sequence numbers: "+$)}for(const $ of D){const Q=$.targetId;if(!$.fromCache){const oe=L.si.get(Q),Ge=oe.withLastLimboFreeSnapshotVersion(oe.snapshotVersion);L.si=L.si.insert(Q,Ge)}}}),function(_,D){return m.apply(this,arguments)})(r.localStore,l))}),cf.apply(this,arguments)}function tC(n,e){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,xe.Z)(function*(n,e){const t=Lt(n);if(!t.currentUser.isEqual(e)){_t("SyncEngine","User change. New user:",e.toKey());const r=yield l1(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(u=>{u.forEach(m=>{m.reject(new gt(Ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ec(t,r.ci)}var i}),Gm.apply(this,arguments)}function nC(n,e){const t=Lt(n),r=t.ia.get(e);if(r&&r.Xu)return xr().add(r.key);{let i=xr();const l=t.ea.get(e);if(!l)return i;for(const u of l){const m=t.ta.get(u);i=i.unionWith(m.view.qu)}return i}}function E1(n,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,xe.Z)(function*(n,e){const t=Lt(n),r=yield Lp(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Fd(t,e.targetId,i.zu),i}),Ld.apply(this,arguments)}function Zp(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,xe.Z)(function*(n,e){const t=Lt(n);return nv(t.localStore,e).then(r=>Ec(t,r))}),Mv.apply(this,arguments)}function D1(n,e,t,r){return Ov.apply(this,arguments)}function Ov(){return Ov=(0,xe.Z)(function*(n,e,t,r){const i=Lt(n),l=yield function(u,m){const _=Lt(u),D=Lt(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",L=>D.ln(L,m).next($=>$?_.ai.qs(L,$):tt.resolve(null)))}(i.localStore,e);var m;null!==l?("pending"===t?yield Cc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Nv(i,e,r||null),Hm(i,e),m=e,Lt(Lt(i.localStore).$s).dn(m)):Xt(),yield Ec(i,l)):_t("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ov.apply(this,arguments)}function $m(){return $m=(0,xe.Z)(function*(n,e){const t=Lt(n);if(oC(t),Wm(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield kv(t,r.toArray());t.ca=!0,yield Ev(t.remoteStore,!0);for(const l of i)Hp(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(lf(t,u),Rd(t.localStore,u,!0))),Gp(t.remoteStore,u)}),yield i,yield kv(t,r),function(l){const u=Lt(l);u.ia.forEach((m,_)=>{Gp(u.remoteStore,_)}),u.ra.bi(),u.ia=new Map,u.sa=new Ur(Ot.comparator)}(t),t.ca=!1,yield Ev(t.remoteStore,!1)}}),$m.apply(this,arguments)}function kv(n,e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,xe.Z)(function*(n,e,t){const r=Lt(n),i=[],l=[];for(const u of e){let m;const _=r.ea.get(u);if(_&&0!==_.length){m=yield kd(r.localStore,ha(_[0]));for(const D of _){const L=r.ta.get(D),$=yield E1(r,L);$.snapshot&&l.push($.snapshot)}}else{const D=yield bw(r.localStore,u);m=yield kd(r.localStore,D),yield Kw(r,Pv(D),u,!1)}i.push(m)}return r.Zu.Ko(l),i}),Rv.apply(this,arguments)}function Pv(n){return yy(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function I1(n){const e=Lt(n);return Lt(Lt(e.localStore).persistence).Os()}function T1(n,e,t,r){return iC.apply(this,arguments)}function iC(){return iC=(0,xe.Z)(function*(n,e,t,r){const i=Lt(n);if(i.ca)return void _t("SyncEngine","Ignoring unexpected query state notification.");const l=i.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield nv(i.localStore,dd(l[0])),m=_d.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ec(i,u,m);break}case"rejected":yield Rd(i.localStore,e,!0),lf(i,e,r);break;default:Xt()}}),iC.apply(this,arguments)}function OS(n,e,t){return sC.apply(this,arguments)}function sC(){return sC=(0,xe.Z)(function*(n,e,t){const r=oC(n);if(r.ca){for(const i of e){if(r.ea.has(i)){_t("SyncEngine","Adding an already active target "+i);continue}const l=yield bw(r.localStore,i),u=yield kd(r.localStore,l);yield Kw(r,Pv(l),u.targetId,!1),Hp(r.remoteStore,u)}for(const i of t)r.ea.has(i)&&(yield Rd(r.localStore,i,!1).then(()=>{Gp(r.remoteStore,i),lf(r,i)}).catch(_u))}}),sC.apply(this,arguments)}function oC(n){const e=Lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ss.bind(null,e),e.Zu.Ko=Hw.bind(null,e.eventManager),e.Zu.la=Gw.bind(null,e.eventManager),e}function Wm(n){const e=Lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w1.bind(null,e),e}class aC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.M=jp(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return vm(this.persistence,new Pp,e.initialUser,this.M)}_a(e){return new Tw(Em.Wi,this.M)}da(e){return new cv}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lC extends aC{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield Wm(r.ga.syncEngine),yield Cc(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return vm(this.persistence,new Pp,e.initialUser,this.M)}wa(e){return new i1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fa.withCacheSize(this.cacheSizeBytes):fa.DEFAULT;return new yw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xw(),Up(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new cv}}class cC extends lC{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,xe.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof lv&&(r.sharedClientState.syncEngine={kr:D1.bind(null,i),Mr:T1.bind(null,i),Or:OS.bind(null,i),Os:I1.bind(null,i),Nr:Zp.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var l=(0,xe.Z)(function*(u){yield function rC(n,e){return $m.apply(this,arguments)}(r.ga.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}da(e){const t=xw();if(!lv.vt(t))throw new gt(Ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bd{initialize(e,t){var r=this;return(0,xe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qp(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tC.bind(null,r.syncEngine),yield Ev(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new y1}createDatastore(e){const t=jp(e.databaseInfo.databaseId),r=new h1(e.databaseInfo);return new Vl(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=m=>qp(this.syncEngine,m,0),u=uv.vt()?new uv:new d1,new Mw(t,r,i,l,u);var t,r,i,l,u}createSyncEngine(e,t){return function(r,i,l,u,m,_,D){const L=new MS(r,i,l,u,m,_);return D&&(L.ca=!0),L}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const r=Lt(t);_t("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Mo(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function uC(n,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class S1{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Is,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const l=yield e.ba(i);return new $w(JSON.parse(l),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,xe.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class A1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new gt(Ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,xe.Z)(function*(l,u){const m=Lt(l),_=vd(m.M)+"/documents",D={documents:u.map(oe=>jh(m.M,oe))},L=yield m.co("BatchGetDocuments",_,D),$=new Map;L.forEach(oe=>{const be=function qD(n,e){return"found"in e?function(t,r){Pn(!!r.found);const i=qa(t,r.found.name),l=Js(r.found.updateTime),u=new qo({mapValue:{fields:r.found.fields}});return ki.newFoundDocument(i,l,u)}(n,e):"missing"in e?function(t,r){Pn(!!r.missing),Pn(!!r.readTime);const i=qa(t,r.missing),l=Js(r.readTime);return ki.newNoDocument(i,l)}(n,e):Xt()}(m.M,oe);$.set(be.key.toString(),be)});const Q=[];return u.forEach(oe=>{const be=$.get(oe.toString());Pn(!!be),Q.push(be)}),Q}),function(l,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=Ot.fromPath(i);e.mutations.push(new Ey(l,e.precondition(l)))}),yield(r=(0,xe.Z)(function*(i,l){const u=Lt(i),m=vd(u.M)+"/documents",_={writes:l.map(D=>Sp(u.M,D))};yield u.ro("Commit",m,_)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xt();t=En.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new gt(Ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(En.min()))throw new gt(Ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class N1{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Im(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,xe.Z)(function*(){const t=new A1(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.Ca(l)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!id(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Dy(t)}return!1}}class dC{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Us.UNAUTHENTICATED,this.clientId=oy.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,xe.Z)(function*(m){_t("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(_t("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=tf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function hC(n,e){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,xe.Z)(function*(l){r.isEqual(l)||(yield l1(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Fv.apply(this,arguments)}function Vd(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,xe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Zm(n);_t("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Uw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>Uw(e.remoteStore,l)),n.onlineComponents=e}),Lv.apply(this,arguments)}function Zm(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,xe.Z)(function*(n){return n.offlineComponents||(_t("FirestoreClient","Using default OfflineComponentProvider"),yield hC(n,new aC)),n.offlineComponents}),Bv.apply(this,arguments)}function Kp(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,xe.Z)(function*(n){return n.onlineComponents||(_t("FirestoreClient","Using default OnlineComponentProvider"),yield Vd(n,new Bd)),n.onlineComponents}),Vv.apply(this,arguments)}function Uv(n){return Zm(n).then(e=>e.persistence)}function jv(n){return Zm(n).then(e=>e.localStore)}function Km(n){return Kp(n).then(e=>e.remoteStore)}function Hv(n){return Kp(n).then(e=>e.syncEngine)}function Ud(n){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,xe.Z)(function*(n){const e=yield Kp(n),t=e.eventManager;return t.onListen=Zw.bind(null,e.syncEngine),t.onUnlisten=v1.bind(null,e.syncEngine),t}),Ym.apply(this,arguments)}function Jm(n,e,t={}){const r=new Is;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(i,l,u,m,_){const D=new qm({next:$=>{l.enqueueAndForget(()=>Rm(i,L));const Q=$.docs.has(u);!Q&&$.fromCache?_.reject(new gt(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):Q&&$.fromCache&&m&&"server"===m.source?_.reject(new gt(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve($)},error:$=>_.reject($)}),L=new Lm(su(u.path),D,{includeMetadataChanges:!0,Du:!0});return Om(i,L)}(yield Ud(n),n.asyncQueue,e,t,r)})),r.promise}function Gv(n,e,t={}){const r=new Is;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(i,l,u,m,_){const D=new qm({next:$=>{l.enqueueAndForget(()=>Rm(i,L)),$.fromCache&&"server"===m.source?_.reject(new gt(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve($)},error:$=>_.reject($)}),L=new Lm(u,D,{includeMetadataChanges:!0,Du:!0});return Om(i,L)}(yield Ud(n),n.asyncQueue,e,t,r)})),r.promise}const fC=new Map;function $v(n,e,t){if(!t)throw new gt(Ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pC(n,e,t,r){if(!0===e&&!0===r)throw new gt(Ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gC(n){if(!Ot.isDocumentKey(n))throw new gt(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wv(n){if(Ot.isDocumentKey(n))throw new gt(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xt()}function fr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new gt(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yp(n);throw new gt(Ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mC(n,e){if(e<=0)throw new gt(Ke.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Qm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gt(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uf{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qm({}),this._settingsFrozen=!1,e instanceof Hs?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new gt(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(i.options.projectId)}(e))}get app(){if(!this._app)throw new gt(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gt(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new DD;switch(t.type){case"gapi":const r=t.client;return Pn(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Cb(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new gt(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fC.get(e);t&&(_t("ComponentProvider","Removing Datastore"),fC.delete(e),t.terminate())}(this),Promise.resolve()}}class Ii{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ii(this.firestore,e,this._key)}}class Xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class Ka extends Xs{constructor(e,t,r){super(e,t,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ii(this.firestore,null,new Ot(e))}withConverter(e){return new Ka(this.firestore,e,this._path)}}function zv(n,e,...t){if(n=(0,he.m9)(n),$v("collection","path",e),n instanceof uf){const r=sr.fromString(e,...t);return Wv(r),new Ka(n,null,r)}{if(!(n instanceof Ii||n instanceof Ka))throw new gt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sr.fromString(e,...t));return Wv(r),new Ka(n.firestore,null,r)}}function Xm(n,e,...t){if(n=(0,he.m9)(n),1===arguments.length&&(e=oy.R()),$v("doc","path",e),n instanceof uf){const r=sr.fromString(e,...t);return gC(r),new Ii(n,null,new Ot(r))}{if(!(n instanceof Ii||n instanceof Ka))throw new gt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sr.fromString(e,...t));return gC(r),new Ii(n.firestore,n instanceof Ka?n.converter:null,new Ot(r))}}function _C(n,e){return n=(0,he.m9)(n),e=(0,he.m9)(e),(n instanceof Ii||n instanceof Ka)&&(e instanceof Ii||e instanceof Ka)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function e_(n,e){return n=(0,he.m9)(n),e=(0,he.m9)(e),n instanceof Xs&&e instanceof Xs&&n.firestore===e.firestore&&kh(n._query,e._query)&&n.converter===e.converter}class V1{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Im(this,"async_queue_retry"),this.Ua=()=>{const t=Up();t&&_t("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Up();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Up();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Is;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,xe.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Cd(t))throw t;_t("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,ns("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=Iv.createAndSchedule(this,e,t,r,l=>this.Qa(l));return this.Oa.push(i),i}qa(){this.Fa&&Xt()}verifyOperationInProgress(){}ja(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function t_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class U1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Is,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ri extends uf{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new V1,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Jp(this),this._firestoreClient.terminate()}}function As(n){return n._firestoreClient||Jp(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Jp(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AD(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new dC(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hf(n,e,t){const r=new Is;return n.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield hC(n,t),yield Vd(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===Ke.FAILED_PRECONDITION||l.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function Zv(n){if(n._initialized||n._terminated)throw new gt(Ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new gt(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new js(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(Ts.fromBase64String(e))}catch(t){throw new gt(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xa(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class El{constructor(e){this._methodName=e}}class n_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gt(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gt(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rr(this._lat,e._lat)||rr(this._long,e._long)}}const wC=/^__.*__$/;class CC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new au(e,this.data,this.fieldMask,t,this.fieldTransforms):new gd(e,this.data,t,this.fieldTransforms)}}class EC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt()}}class ff{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new ff(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return l_(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(DC(this.Ya)&&wC.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class q1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||jp(e)}uc(e,t,r,i=!1){return new ff({Ya:e,methodName:t,oc:r,path:js.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function pf(n){const e=n._freezeSettings(),t=jp(n._databaseId);return new q1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r_(n,e,t,r,i,l={}){const u=n.uc(l.merge||l.mergeFields?2:0,e,t,i);o_("Data must be an object, but it was:",u,r);const m=Jv(r,u);let _,D;if(l.merge)_=new Dh(u.fieldMask),D=u.fieldTransforms;else if(l.mergeFields){const L=[];for(const $ of l.mergeFields){const Q=a_(e,$,t);if(!u.contains(Q))throw new gt(Ke.INVALID_ARGUMENT,`Field '${Q}' is specified in your field mask but missing from your input data.`);AC(L,Q)||L.push(Q)}_=new Dh(L),D=u.fieldTransforms.filter($=>_.covers($.field))}else _=null,D=u.fieldTransforms;return new CC(new qo(m),_,D)}class Qp extends El{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qp}}function jd(n,e,t){return new ff({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class i_ extends El{_toFieldTransform(e){return new Fh(e.path,new fd)}isEqual(e){return e instanceof i_}}class gf extends El{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=jd(this,e,!0),r=this.ac.map(l=>mf(l,t)),i=new Ll(r);return new Fh(e.path,i)}isEqual(e){return this===e}}class PS extends El{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=jd(this,e,!0),r=this.ac.map(l=>mf(l,t)),i=new ou(r);return new Fh(e.path,i)}isEqual(e){return this===e}}class IC extends El{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new pd(e.M,xb(e.M,this.cc));return new Fh(e.path,t)}isEqual(e){return this===e}}function Kv(n,e,t,r){const i=n.uc(1,e,t);o_("Data must be an object, but it was:",i,r);const l=[],u=qo.empty();gc(r,(_,D)=>{const L=Xp(e,_,t);D=(0,he.m9)(D);const $=i.nc(L);if(D instanceof Qp)l.push(L);else{const Q=mf(D,$);null!=Q&&(l.push(L),u.set(L,Q))}});const m=new Dh(l);return new EC(u,m,i.fieldTransforms)}function TC(n,e,t,r,i,l){const u=n.uc(1,e,t),m=[a_(e,r,t)],_=[i];if(l.length%2!=0)throw new gt(Ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Q=0;Q<l.length;Q+=2)m.push(a_(e,l[Q])),_.push(l[Q+1]);const D=[],L=qo.empty();for(let Q=m.length-1;Q>=0;--Q)if(!AC(D,m[Q])){const oe=m[Q];let be=_[Q];be=(0,he.m9)(be);const Ge=u.nc(oe);if(be instanceof Qp)D.push(oe);else{const ft=mf(be,Ge);null!=ft&&(D.push(oe),L.set(oe,ft))}}const $=new Dh(D);return new EC(L,$,u.fieldTransforms)}function Yv(n,e,t,r=!1){return mf(t,n.uc(r?4:3,e))}function mf(n,e){if(s_(n=(0,he.m9)(n)))return o_("Unsupported field value:",e,n),Jv(n,e);if(n instanceof El)return function(t,r){if(!DC(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const u of t){let m=mf(u,r.sc(l));null==m&&(m={nullValue:"NULL_VALUE"}),i.push(m),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,he.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xb(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Oi.fromDate(t);return{timestampValue:Aa(r.M,i)}}if(t instanceof Oi){const i=new Oi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Aa(r.M,i)}}if(t instanceof n_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof xa)return{bytesValue:Tp(r.M,t._byteString)};if(t instanceof Ii){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wb(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${Yp(t)}`)}(n,e)}function Jv(n,e){const t={};return cy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gc(n,(r,i)=>{const l=mf(i,e.Za(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function s_(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Oi||n instanceof n_||n instanceof xa||n instanceof Ii||n instanceof El)}function o_(n,e,t){if(!s_(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Yp(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function a_(n,e,t){if((e=(0,he.m9)(e))instanceof Ul)return e._internalPath;if("string"==typeof e)return Xp(n,e);throw l_("Field path arguments must be of type string or ",n,!1,void 0,t)}const SC=new RegExp("[~\\*/\\[\\]]");function Xp(n,e,t){if(e.search(SC)>=0)throw l_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ul(...e.split("."))._internalPath}catch{throw l_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function l_(n,e,t,r,i){const l=r&&!r.isEmpty(),u=void 0!==i;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let _="";return(l||u)&&(_+=" (found",l&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new gt(Ke.INVALID_ARGUMENT,m+n+_)}function AC(n,e){return n.some(t=>t.isEqual(e))}class eg{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Z1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(c_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Z1 extends eg{data(){return super.data()}}function c_(n,e){return"string"==typeof e?Xp(n,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}class Hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends eg{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(c_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _f extends Ma{data(e={}){return super.data(e)}}class Dc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _f(this._firestore,this._userDataWriter,r.key,r,new Hd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gt(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new _f(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Hd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const m=new _f(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Hd(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==u.type&&(_=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),D=l.indexOf(u.doc.key)),{type:NC(u.type),doc:m,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function NC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xt()}}function Qv(n,e){return n instanceof Ma&&e instanceof Ma?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dc&&e instanceof Dc&&n._firestore===e._firestore&&e_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Xv(n){if(Mh(n)&&0===n.explicitOrderBy.length)throw new gt(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yf{}function bu(n,...e){for(const t of e)n=t._apply(n);return n}class xC extends yf{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=pf(e.firestore),r=function(i,l,u,m,_,D,L){let $;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new gt(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){rg(L,D);const oe=[];for(const be of L)oe.push(kC(m,i,be));$={arrayValue:{values:oe}}}else $=kC(m,i,L)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||rg(L,D),$=Yv(u,"where",L,"in"===D||"not-in"===D);const Q=fo.create(_,D,$);return function(oe,be){if(be.S()){const ft=Fl(oe);if(null!==ft&&!ft.isEqual(be.field))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ft.toString()}' and '${be.field.toString()}'`);const Qt=vy(oe);null!==Qt&&ig(0,be.field,Qt)}const Ge=function(ft,Qt){for(const At of ft.filters)if(Qt.indexOf(At.op)>=0)return At.op;return null}(oe,function(ft){switch(ft){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(be.op));if(null!==Ge)throw new gt(Ke.INVALID_ARGUMENT,Ge===be.op?`Invalid query. You cannot use more than one '${be.op.toString()}' filter.`:`Invalid query. You cannot use '${be.op.toString()}' filters with '${Ge.toString()}' filters.`)}(i,Q),Q}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Xs(e.firestore,e.converter,function(i,l){const u=i.filters.concat([l]);return new vc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Y1 extends yf{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new wp(i,l);return function(m,_){if(null===vy(m)){const D=Fl(m);null!==D&&ig(0,D,_.field)}}(r,u),u}(e._query,this.hc,this.dc);return new Xs(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new vc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class MC extends yf{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Xs(e.firestore,e.converter,Ab(e._query,this._c,this.wc))}}class u_ extends yf{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=OC(e,this.type,this.mc,this.gc);return new Xs(e.firestore,e.converter,(i=t,new vc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class d_ extends yf{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=OC(e,this.type,this.mc,this.gc);return new Xs(e.firestore,e.converter,(i=t,new vc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function OC(n,e,t,r){if(t[0]=(0,he.m9)(t[0]),t[0]instanceof eg)return function(i,l,u,m,_){if(!m)throw new gt(Ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const D=[];for(const L of Oh(i))if(L.field.isKeyField())D.push(od(l,m.key));else{const $=m.data.field(L.field);if(dy($))throw new gt(Ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+L.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===$){const Q=L.field.canonicalString();throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Q}' (used as the orderBy) does not exist.`)}D.push($)}return new cd(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=pf(n.firestore);return function(l,u,m,_,D,L){const $=l.explicitOrderBy;if(D.length>$.length)throw new gt(Ke.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Q=[];for(let oe=0;oe<D.length;oe++){const be=D[oe];if($[oe].field.isKeyField()){if("string"!=typeof be)throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof be}`);if(!Qg(l)&&-1!==be.indexOf("/"))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${be}' contains a slash.`);const Ge=l.path.child(sr.fromString(be));if(!Ot.isDocumentKey(Ge))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ge}' is not because it contains an odd number of segments.`);const ft=new Ot(Ge);Q.push(od(u,ft))}else{const Ge=Yv(m,_,be);Q.push(Ge)}}return new cd(Q,L)}(n._query,n.firestore._databaseId,i,e,t,r)}}function kC(n,e,t){if("string"==typeof(t=(0,he.m9)(t))){if(""===t)throw new gt(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qg(e)&&-1!==t.indexOf("/"))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sr.fromString(t));if(!Ot.isDocumentKey(r))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return od(n,new Ot(r))}if(t instanceof Ii)return od(n,t._key);throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(t)}.`)}function rg(n,e){if(!Array.isArray(n)||0===n.length)throw new gt(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new gt(Ke.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ig(n,e,t){if(!t.isEqual(e))throw new gt(Ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class e0{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xt()}}convertObject(e,t){const r={};return gc(e.fields,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new n_(gs(e.latitude),gs(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_p(e));default:return null}}convertTimestamp(e){const t=mc(e);return new Oi(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sr.fromString(e);Pn(Py(r));const i=new Hs(r.get(1),r.get(3)),l=new Ot(r.popFirst(5));return i.isEqual(t)||ns(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function h_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class RC extends e0{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,t)}}class t0{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pf(e)}set(e,t,r){this._verifyNotCommitted();const i=Hl(e,this._firestore),l=h_(i.converter,t,r),u=r_(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Nr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Hl(e,this._firestore);let u;return u="string"==typeof(t=(0,he.m9)(t))||t instanceof Ul?TC(this._dataReader,"WriteBatch.update",l._key,t,r,i):Kv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hl(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gt(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hl(n,e){if((n=(0,he.m9)(n)).firestore!==e)throw new gt(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Gd extends e0{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ii(this.firestore,null,t)}}function f_(n,e,t){n=fr(n,Ii);const r=fr(n.firestore,Ri),i=h_(n.converter,e,t);return $d(r,[r_(pf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Nr.none())])}function p_(n,e,t,...r){n=fr(n,Ii);const i=fr(n.firestore,Ri),l=pf(i);let u;return u="string"==typeof(e=(0,he.m9)(e))||e instanceof Ul?TC(l,"updateDoc",n._key,e,t,r):Kv(l,"updateDoc",n._key,e),$d(i,[u.toMutation(n._key,Nr.exists(!0))])}function LC(n,...e){var t,r,i;n=(0,he.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||t_(e[u])||(l=e[u],u++);const m={includeMetadataChanges:l.includeMetadataChanges};if(t_(e[u])){const $=e[u];e[u]=null===(t=$.next)||void 0===t?void 0:t.bind($),e[u+1]=null===(r=$.error)||void 0===r?void 0:r.bind($),e[u+2]=null===(i=$.complete)||void 0===i?void 0:i.bind($)}let _,D,L;if(n instanceof Ii)D=fr(n.firestore,Ri),L=su(n._key.path),_={next:$=>{e[u]&&e[u](sg(D,n,$))},error:e[u+1],complete:e[u+2]};else{const $=fr(n,Xs);D=fr($.firestore,Ri),L=$._query;const Q=new Gd(D);_={next:oe=>{e[u]&&e[u](new Dc(D,Q,$,oe))},error:e[u+1],complete:e[u+2]},Xv(n._query)}return function($,Q,oe,be){const Ge=new qm(be),ft=new Lm(Q,Ge,oe);return $.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Om(yield Ud($),ft)})),()=>{Ge.pa(),$.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Rm(yield Ud($),ft)}))}}(As(D),L,m,_)}function $d(n,e){return function(t,r){const i=new Is;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function b1(n,e,t){return sf.apply(this,arguments)}(yield Hv(t),r,i)})),i.promise}(As(n),e)}function sg(n,e,t){const r=t.docs.get(e._key),i=new Gd(n);return new Ma(n,i,e._key,r,new Hd(t.hasPendingWrites,t.fromCache),e.converter)}class BC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pf(e)}get(e){const t=Hl(e,this._firestore),r=new RC(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Xt();const l=i[0];if(l.isFoundDocument())return new eg(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new eg(this._firestore,r,t._key,null,t.converter);throw Xt()})}set(e,t,r){const i=Hl(e,this._firestore),l=h_(i.converter,t,r),u=r_(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const l=Hl(e,this._firestore);let u;return u="string"==typeof(t=(0,he.m9)(t))||t instanceof Ul?TC(this._dataReader,"Transaction.update",l._key,t,r,i):Kv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Hl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hl(e,this._firestore),r=new Gd(this._firestore);return super.get(e).then(i=>new Ma(this._firestore,r,t._key,i._document,new Hd(!1,!1),t.converter))}}function o0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new gt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $C(){if(typeof Uint8Array>"u")throw new gt("unimplemented","Uint8Arrays are not available in this environment.")}function aI(){if(!function SD(){return typeof atob<"u"}())throw new gt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Wo=Rr.SDK_VERSION,(0,Rr._registerComponent)(new bs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),l=new Ri(i,new wb(t.getProvider("auth-internal")),new ID(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Rr.registerVersion)(Eh,"3.4.7",n),(0,Rr.registerVersion)(Eh,"3.4.7","esm2017")}();class Ic{constructor(e){this._delegate=e}static fromBase64String(e){return aI(),new Ic(xa.fromBase64String(e))}static fromUint8Array(e){return $C(),new Ic(xa.fromUint8Array(e))}toBase64(){return aI(),this._delegate.toBase64()}toUint8Array(){return $C(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function a0(n){return function l0(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class lI{enableIndexedDbPersistence(e,t){return function H1(n,e){Zv(n=fr(n,Ri));const t=As(n),r=n._freezeSettings(),i=new Bd;return hf(t,i,new lC(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function df(n){Zv(n=fr(n,Ri));const e=As(n),t=n._freezeSettings(),r=new Bd;return hf(e,r,new cC(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function G1(n){if(n._initialized&&!n._terminated)throw new gt(Ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Is;return n._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(r){if(!wl.vt())return Promise.resolve();const i=r+"main";yield wl.delete(i)}),function(r){return t.apply(this,arguments)})(Rp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class c0{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function B1(n,e,t,r={}){var i;const l=(n=fr(n,uf))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&pc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,m;if("string"==typeof r.mockUserToken)u=r.mockUserToken,m=Us.MOCK_USER;else{u=(0,he.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new gt(Ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Us(_)}n._authCredentials=new bb(new vb(u,m))}}(this._delegate,e,t,r)}enableNetwork(){return function vC(n){return function x1(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Uv(n),t=yield Km(n);return e.setNetworkEnabled(!0),function(r){const i=Lt(r);return i.lu.delete(0),pa(i)}(t)}))}(As(n=fr(n,Ri)))}(this._delegate)}disableNetwork(){return function $1(n){return function M1(n){return n.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield Uv(n),t=yield Km(n);return e.setNetworkEnabled(!1),(r=(0,xe.Z)(function*(i){const l=Lt(i);l.lu.add(0),yield Mo(l),l._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(As(n=fr(n,Ri)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kS(n){return function(e){const t=new Is;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Xw(n,e){return jm.apply(this,arguments)}(yield Hv(e),t)})),t.promise}(As(n=fr(n,Ri)))}(this._delegate)}onSnapshotsInSync(e){return function iI(n,e){return function R1(n,e){const t=new qm(e);return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield Ud(n),i=t,Lt(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return r=yield Ud(n),i=t,void Lt(r).Tu.delete(i);var r,i}))}}(As(n=fr(n,Ri)),t_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new gt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cu(this,zv(this._delegate,e))}catch(t){throw mo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,Xm(this._delegate,e))}catch(t){throw mo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function qv(n,e){if(n=fr(n,uf),$v("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new gt(Ke.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xs(n,null,(t=e,new vc(sr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw mo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VC(n,e){return function P1(n,e){const t=new Is;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const r=yield(i=n,Kp(i).then(l=>l.datastore));var i;new N1(n.asyncQueue,r,e,t).run()})),t.promise}(As(n=fr(n,Ri)),t=>e(new BC(n,t)))}(this._delegate,t=>e(new m_(this,t)))}batch(){return As(this._delegate),new u0(new t0(this._delegate,e=>$d(this._delegate,e)))}loadBundle(e){return function W1(n,e){const t=As(n=fr(n,Ri)),r=new U1;return function F1(n,e,t,r){const i=function(l,u){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,D){if(_ instanceof Uint8Array)return uC(_,D);if(_ instanceof ArrayBuffer)return uC(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new S1(_,u);var _}(t,jp(e));n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function zm(n,e,t){const r=Lt(n);var i;(i=(0,xe.Z)(function*(l,u,m){try{const _=yield u.getMetadata();if(yield function(Q,oe){const be=Lt(Q),Ge=Js(oe.createTime);return be.persistence.runTransaction("hasNewerBundle","readonly",ft=>be.ds.getBundleMetadata(ft,oe.id)).then(ft=>!!ft&&ft.createTime.compareTo(Ge)>=0)}(l.localStore,_))return yield u.close(),m._completeWith({taskState:"Success",documentsLoaded:(Q=_).totalDocuments,bytesLoaded:Q.totalBytes,totalDocuments:Q.totalDocuments,totalBytes:Q.totalBytes}),Promise.resolve(new Set);m._updateProgress(vu(_));const D=new Ww(_,l.localStore,u.M);let L=yield u.fa();for(;L;){const Q=yield D.Nu(L);Q&&m._updateProgress(Q),L=yield u.fa()}const $=yield D.complete();return yield Ec(l,$.Ou,void 0),yield function(Q,oe){const be=Lt(Q);return be.persistence.runTransaction("Save bundle","readwrite",Ge=>be.ds.saveBundleMetadata(Ge,oe))}(l.localStore,_),m._completeWith($.progress),Promise.resolve($.Mu)}catch(_){return pc("SyncEngine",`Loading bundle failed with ${_}`),m._failWith(_),Promise.resolve(new Set)}var Q}),function(l,u,m){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Hv(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function z1(n,e){return function L1(n,e){return n.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,r){const i=Lt(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.ds.getNamedQuery(l,r))}(yield jv(n),e)}))}(As(n=fr(n,Ri)),e).then(t=>t?new Xs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class g_ extends e0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ic(new xa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class m_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new g_(e)}get(e){const t=Tc(e);return this._delegate.get(t).then(r=>new og(this._firestore,new Ma(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Tc(e);return r?(o0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Tc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}}class u0{constructor(e){this._delegate=e}set(e,t,r){const i=Tc(e);return r?(o0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=Tc(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=Tc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new wu(e,new g_(e),t),i.set(t,l)),l}}wu.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new g_(e)}static forPath(e,t,r){if(e.length%2!=0)throw new gt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new Ii(t._delegate,r,new Ot(e)))}static forKey(e,t,r){return new Ko(t,new Ii(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cu(this.firestore,zv(this._delegate,e))}catch(t){throw mo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,he.m9)(e))instanceof Ii&&_C(this._delegate,e)}set(e,t){t=o0("DocumentReference.set",t);try{return t?f_(this._delegate,e,t):f_(this._delegate,e)}catch(r){throw mo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?p_(this._delegate,e):p_(this._delegate,e,t,...r)}catch(i){throw mo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nI(n){return $d(fr(n.firestore,Ri),[new Lh(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=uI(e),r=d0(e,i=>new og(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tI(n){n=fr(n,Ii);const e=fr(n.firestore,Ri),t=As(e),r=new Gd(e);return function O1(n,e){const t=new Is;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(i,l,u){try{const m=yield function(_,D){const L=Lt(_);return L.persistence.runTransaction("read document","readonly",$=>L.ai.Bs($,D))}(i,l);m.isFoundDocument()?u.resolve(m):m.isNoDocument()?u.resolve(null):u.reject(new gt(Ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const _=tf(m,`Failed to get document '${l} from cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ma(e,r,n._key,i,new Hd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function FS(n){n=fr(n,Ii);const e=fr(n.firestore,Ri);return Jm(As(e),n._key,{source:"server"}).then(t=>sg(e,n,t))}(this._delegate):function PC(n){n=fr(n,Ii);const e=fr(n.firestore,Ri);return Jm(As(e),n._key).then(t=>sg(e,n,t))}(this._delegate),t.then(r=>new og(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?wu.getInstance(this.firestore,e):null))}}function mo(n,e,t){return n.message=n.message.replace(e,t),n}function uI(n){for(const e of n)if("object"==typeof e&&!a0(e))return e;return{}}function d0(n,e){var t,r;let i;return i=a0(n[0])?n[0]:a0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class og{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Qv(this._delegate,e._delegate)}}class bf extends og{data(e){const t=this._delegate.data(e);return function ED(n,e){n||Xt()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new g_(e)}where(e,t,r){try{return new eo(this.firestore,bu(this._delegate,function K1(n,e,t){const r=e,i=c_("where",n);return new xC(i,r,t)}(e,t,r)))}catch(i){throw mo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,bu(this._delegate,function J1(n,e="asc"){const t=e,r=c_("orderBy",n);return new Y1(r,t)}(e,t)))}catch(r){throw mo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,bu(this._delegate,function tg(n){return mC("limit",n),new MC("limit",n,"F")}(e)))}catch(t){throw mo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,bu(this._delegate,function Q1(n){return mC("limitToLast",n),new MC("limitToLast",n,"L")}(e)))}catch(t){throw mo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,bu(this._delegate,function jl(...n){return new u_("startAt",n,!0)}(...e)))}catch(t){throw mo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,bu(this._delegate,function X1(...n){return new u_("startAfter",n,!1)}(...e)))}catch(t){throw mo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,bu(this._delegate,function ng(...n){return new d_("endBefore",n,!1)}(...e)))}catch(t){throw mo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,bu(this._delegate,function eI(...n){return new d_("endAt",n,!0)}(...e)))}catch(t){throw mo(t,"endAt()","Query.endAt()")}}isEqual(e){return e_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function r0(n){n=fr(n,Xs);const e=fr(n.firestore,Ri),t=As(e),r=new Gd(e);return function k1(n,e){const t=new Is;return n.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(r=(0,xe.Z)(function*(i,l,u){try{const m=yield Lp(i,l,!0),_=new Pd(l,m.hi),D=_.Gu(m.documents),L=_.applyChanges(D,!1);u.resolve(L.snapshot)}catch(m){const _=tf(m,`Failed to execute query '${l} against cache`);u.reject(_)}}),function(i,l,u){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function FC(n){n=fr(n,Xs);const e=fr(n.firestore,Ri),t=As(e),r=new Gd(e);return Gv(t,n._query,{source:"server"}).then(i=>new Dc(e,r,n,i))}(this._delegate):function n0(n){n=fr(n,Xs);const e=fr(n.firestore,Ri),t=As(e),r=new Gd(e);return Xv(n._query),Gv(t,n._query).then(i=>new Dc(e,r,n,i))}(this._delegate),t.then(r=>new h0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uI(e),r=d0(e,i=>new h0(this.firestore,new Dc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LC(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?wu.getInstance(this.firestore,e):null))}}class WC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class h0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WC(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new bf(this._firestore,r))})}isEqual(e){return Qv(this._delegate,e._delegate)}}class Cu extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?Xm(this._delegate):Xm(this._delegate,e))}catch(t){throw mo(t,"doc()","CollectionReference.doc()")}}add(e){return function rI(n,e){const t=fr(n.firestore,Ri),r=Xm(n),i=h_(n.converter,e);return $d(t,[r_(pf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return _C(this._delegate,e._delegate)}withConverter(e){return new Cu(this.firestore,this._delegate.withConverter(e?wu.getInstance(this.firestore,e):null))}}function Tc(n){return fr(n,Ii)}class zC{constructor(...e){this._delegate=new Ul(...e)}static documentId(){return new zC(js.keyField().canonicalString())}isEqual(e){return(e=(0,he.m9)(e))instanceof Ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jC(){return new i_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wd(e)}static delete(){const e=function UC(){return new Qp("deleteField")}();return e._methodName="FieldValue.delete",new Wd(e)}static arrayUnion(...e){const t=function sI(...n){return new gf("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wd(t)}static arrayRemove(...e){const t=function HC(...n){return new PS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wd(t)}static increment(e){const t=function GC(n){return new IC("increment",n)}(e);return t._methodName="FieldValue.increment",new Wd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const dI={Firestore:c0,GeoPoint:n_,Timestamp:Oi,Blob:Ic,Transaction:m_,WriteBatch:u0,DocumentReference:Ko,DocumentSnapshot:og,Query:eo,QueryDocumentSnapshot:bf,QuerySnapshot:h0,CollectionReference:Cu,FieldPath:zC,FieldValue:Wd,setLogLevel:function cI(n){!function gp(n){Ia.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function f0(n,e){return function hI(n,e=es.z){return new rn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function p0(n,e){return f0(n,e).pipe((0,ln.U)(t=>({payload:t,type:"query"})))}function __(n,e){return p0(n,e).pipe((0,gi.O)(void 0),ao(),(0,ln.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,m)=>{const _=i.find(L=>L.doc.ref.isEqual(u.ref)),D=null==t?void 0:t.payload.docs.find(L=>L.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:u}})}),l}))}function g0(n,e,t){return __(n,t).pipe((0,Ls.R)((r,i)=>function fI(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function YC(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return y_(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return y_(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return y_(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),function Va(n,e=rl.y){return n=n??xu,(0,To.e)((t,r)=>{let i,l=!0;t.subscribe((0,fs.x)(r,u=>{const m=e(u);(l||!n(i,m))&&(l=!1,i=m,r.next(u))}))})}(),(0,ln.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function y_(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function m0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function ZC(n){(function qC(n,e){n.INTERNAL.registerComponent(new bs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},dI)))})(n,(e,t)=>new c0(e,t,new lI)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(T.Z);class _0{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=__(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ln.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe((0,gi.O)(void 0),ao(),(0,qr.h)(([r,i])=>i.length>0||!r),(0,ln.U)(([r,i])=>i),Qn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ls.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m0(e);return g0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return p0(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qn.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Qn.iC)}add(e){return this.ref.add(e)}doc(e){return new JC(this.ref.doc(e),this.afs)}}class JC{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=gI(r,t);return new _0(i,l,this.afs)}snapshotChanges(){return function KC(n,e){return f0(n,e).pipe((0,gi.O)(void 0),ao(),(0,ln.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ln.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(Qn.iC)}}class pI{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?__(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,qr.h)(t=>t.length>0),Qn.iC):__(this.query,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ls.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=m0(e);return g0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qn.iC)}valueChanges(e={}){return p0(this.query,this.afs.schedulers.outsideAngular).pipe((0,ln.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Qn.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Qn.iC)}}const BS=new h.OlP("angularfire2.enableFirestorePersistence"),QC=new h.OlP("angularfire2.firestore.persistenceSettings"),VS=new h.OlP("angularfire2.firestore.settings"),US=new h.OlP("angularfire2.firestore.use-emulator");function gI(n,e=(t=>t)){return{query:e(n),ref:n}}let jS=(()=>{class n{constructor(t,r,i,l,u,m,_,D,L,$,Q,oe,be,Ge,ft,Qt,At){this.schedulers=_;const Dn=(0,Or.on)(t,m,r),Pt=L;$&&Jr(Dn,m,Q,be,Ge,ft,oe,Qt),[this.firestore,this.persistenceEnabled$]=(0,Or.cc)(`${Dn.name}.firestore`,"AngularFirestore",Dn.name,()=>{const Zt=m.runOutsideAngular(()=>Dn.firestore());if(l&&Zt.settings(l),Pt&&Zt.useEmulator(...Pt),i&&!(0,b.PM)(u)){const Ht=()=>{try{return(0,kn.D)(Zt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(lr){return typeof console<"u"&&console.warn(lr),(0,Un.of)(!1)}};return[Zt,m.runOutsideAngular(Ht)]}return[Zt,(0,Un.of)(!1)]},[l,Pt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=gI(i,r),m=this.schedulers.ngZone.run(()=>l);return new _0(m,u,this)}collectionGroup(t,r){const i=r||(u=>u),l=this.firestore.collectionGroup(t);return new pI(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JC(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Or.Dh),h.LFG(Or.xv,8),h.LFG(BS,8),h.LFG(VS,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qn.HU),h.LFG(QC,8),h.LFG(US,8),h.LFG(aa,8),h.LFG(pi,8),h.LFG(Jl,8),h.LFG(wa,8),h.LFG(ds,8),h.LFG(qs,8),h.LFG(hs,8),h.LFG(ra,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),v_=(()=>{class n{constructor(t,r,i,l,u){this.afauth=t,this.afStore=r,this.ngFireAuth=i,this.router=l,this.ngZone=u,this.ngFireAuth.authState.subscribe(m=>{m?(this.userData=m,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")||"{}")):(localStorage.setItem("user",""),JSON.parse(localStorage.getItem("user")||"{}"))})}logInGoogle(){var t=this;return(0,xe.Z)(function*(){try{return yield t.afauth.signInWithPopup(new Tr.Z.auth.GoogleAuthProvider)}catch(r){return console.log("error en login ",r),null}})()}SignIn(t,r){var i=this;return(0,xe.Z)(function*(){return i.ngFireAuth.signInWithEmailAndPassword(t,r)})()}RegisterUser(t,r){var i=this;return(0,xe.Z)(function*(){return new Date,i.ngFireAuth.createUserWithEmailAndPassword(t,r)})()}PasswordRecover(t){var r=this;return(0,xe.Z)(function*(){return r.ngFireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email has been sent, please check your inbox.")}).catch(i=>{window.alert(i)})})()}isLoggedIn(){return this.afauth.authState}SetUserData(t){return this.afStore.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.ngFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(aa),h.LFG(jS),h.LFG(aa),h.LFG(Wt.F0),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HS(n,e){1&n&&(h.TgZ(0,"div",14)(1,"a",15),h._uU(2,"Jugar"),h.qZA()())}function GS(n,e){1&n&&(h.TgZ(0,"strong",null,11),h._uU(2,"Registrese para jugar."),h.qZA())}function b_(n,e){1&n&&(h.TgZ(0,"div",14)(1,"a",16),h._uU(2,"Jugar"),h.qZA()())}function $S(n,e){1&n&&(h.TgZ(0,"div",14)(1,"a",17),h._uU(2,"Jugar"),h.qZA()())}let XC=(()=>{class n{constructor(t){this.authService=t,this.estaLogueado=this.authService.isLoggedIn()}logOut(){var t=this;return(0,xe.Z)(function*(){t.authService.SignOut()})()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(v_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:38,vars:12,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"card-group"],[1,"card"],["src","https://firebasestorage.googleapis.com/v0/b/tpsaladejuegos-8b998.appspot.com/o/MayorOMenor.PNG?alt=media&token=f7134886-34d1-4398-961b-e139e78fa642","alt","Card image cap",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["class","nav-item",4,"ngIf","ngIfElse"],["elseBlock",""],["src","https://firebasestorage.googleapis.com/v0/b/tpsaladejuegos-8b998.appspot.com/o/ahorcado.PNG?alt=media&token=0a4541f9-7ecd-4b5d-a232-9b08f5689881","alt","Card image cap",1,"card-img-top"],["src","https://www.tec.ac.cr/sites/all/themes/tec/img/404.png","alt","Card image cap",1,"card-img-top"],[1,"nav-item"],["href","/juegos/mayor-menor",1,"card-text"],["href","/juegos/ahorcado",1,"card-text"],["href","/juegos/preguntados",1,"card-text"]],template:function(t,r){if(1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),h.TgZ(5,"title"),h._uU(6,"Document"),h.qZA()(),h.TgZ(7,"body")(8,"div",4)(9,"div",5),h._UZ(10,"img",6),h.TgZ(11,"div",7)(12,"h5",8),h._uU(13,"Mayor O Menor"),h.qZA(),h.TgZ(14,"p",9),h._uU(15,"Un juego de Mayor O Menor con naipes"),h.qZA(),h.YNc(16,HS,3,0,"div",10),h.ALo(17,"async"),h.YNc(18,GS,3,0,"ng-template",null,11,h.W1O),h.qZA()(),h.TgZ(20,"div",5),h._UZ(21,"img",12),h.TgZ(22,"div",7)(23,"h5",8),h._uU(24,"Ahorcado"),h.qZA(),h.TgZ(25,"p",9),h._uU(26,"Un juego de Ahorcado de redes sociales"),h.qZA(),h.YNc(27,b_,3,0,"div",10),h.ALo(28,"async"),h.qZA()(),h.TgZ(29,"div",5),h._UZ(30,"img",13),h.TgZ(31,"div",7)(32,"h5",8),h._uU(33,"Preguntados"),h.qZA(),h.TgZ(34,"p",9),h._uU(35,"En proceso..."),h.qZA(),h.YNc(36,$S,3,0,"div",10),h.ALo(37,"async"),h.qZA()()()()()),2&t){const i=h.MAs(19);h.xp6(16),h.Q6J("ngIf",h.lcZ(17,6,r.estaLogueado))("ngIfElse",i),h.xp6(11),h.Q6J("ngIf",h.lcZ(28,8,r.estaLogueado))("ngIfElse",i),h.xp6(9),h.Q6J("ngIf",h.lcZ(37,10,r.estaLogueado))("ngIfElse",i)}},directives:[b.O5],pipes:[b.Ov],styles:[""]}),n})(),y0=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-not-found"]],decls:2,vars:0,consts:[[1,"container","col-12"],["src","https://www.tec.ac.cr/sites/all/themes/tec/img/404.png"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"img",1),h.qZA())},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100vw;height:90vh}"]}),n})(),eE=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-quien-soy"]],decls:17,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3","crossorigin","anonymous"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],["src","https://firebasestorage.googleapis.com/v0/b/pruebaapp-d5f1d.appspot.com/o/yo.png?alt=media&token=8d44c79d-03cb-4d03-abeb-a70e27f49e24","alt","Card image cap",1,"card-img-top",2,"max-width","100px","max-height","100px;"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4)(6,"link",5),h.qZA(),h.TgZ(7,"body")(8,"div",6)(9,"div",7),h._uU(10," Quien Soy "),h.qZA(),h.TgZ(11,"div",8),h._UZ(12,"img",9),h.TgZ(13,"h5",10),h._uU(14,"Ian Garcia"),h.qZA(),h.TgZ(15,"p",11),h._uU(16,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Possimus porro necessitatibus sint ipsam, libero, dolor a maiores iure, impedit aspernatur odit nam temporibus quam dolorem? Tenetur esse saepe provident excepturi."),h.qZA()()()()())},styles:[""]}),n})();var tE=G(8259),ag=G.n(tE),Pi=G(9900);let v0=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.usuario={email:"",password:""}}ngOnInit(){}logIn(){const{email:t,password:r}=this.usuario;this.authService.SignIn(t,r).then(i=>{this.router.navigate(["/"])}).catch(i=>(ag().fire(i.message),null))}accesoRapido(){var t=this;return(0,xe.Z)(function*(){t.usuario.email="JuanPerez@gmail.com",t.usuario.password="Contrase\xf1a123"})()}logInGoogle(){var t=this;return(0,xe.Z)(function*(){t.authService.logInGoogle().then(r=>{t.router.navigate(["/"])}).catch(r=>(ag().fire(r.message),null))})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(v_),h.Y36(Wt.F0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:37,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["action","#","id","login-form"],[1,"heading"],[1,"left"],["for","email"],["type","email","name","email","id","email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","pass",3,"ngModel","ngModelChange"],["type","submit","value","Login",3,"click"],[2,"font-size","1em"],["href","/registro"],[1,"right"],[1,"connect"],[1,"google-plus",3,"click"],["aria-hidden","true",1,"bi","bi-google"],[1,"twitter",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4),h.TgZ(6,"title"),h._uU(7,"Ian Garcia"),h.qZA()(),h.TgZ(8,"body")(9,"form",5)(10,"div",6),h._uU(11,"Login"),h.qZA(),h.TgZ(12,"div",7)(13,"label",8),h._uU(14,"Email"),h.qZA(),h._UZ(15,"br"),h.TgZ(16,"input",9),h.NdJ("ngModelChange",function(l){return r.usuario.email=l}),h.qZA(),h._UZ(17,"br"),h.TgZ(18,"label",10),h._uU(19,"Password"),h.qZA(),h._UZ(20,"br"),h.TgZ(21,"input",11),h.NdJ("ngModelChange",function(l){return r.usuario.password=l}),h.qZA(),h._UZ(22,"br"),h.TgZ(23,"input",12),h.NdJ("click",function(){return r.logIn()}),h.qZA(),h._UZ(24,"br"),h.TgZ(25,"label",13),h._uU(26,"No tenes cuenta? "),h.TgZ(27,"a",14),h._uU(28,"Registrate"),h.qZA()()(),h.TgZ(29,"div",15)(30,"div",16),h._uU(31,"Entrar con"),h.qZA(),h.TgZ(32,"a",17),h.NdJ("click",function(){return r.logInGoogle()}),h._UZ(33,"i",18),h.qZA(),h.TgZ(34,"a",19),h.NdJ("click",function(){return r.accesoRapido()}),h.TgZ(35,"p"),h._uU(36,"Acceso Rapido"),h.qZA()()()()()()),2&t&&(h.xp6(16),h.Q6J("ngModel",r.usuario.email),h.xp6(5),h.Q6J("ngModel",r.usuario.password))},directives:[Pi._Y,Pi.JL,Pi.F,Pi.Fj,Pi.JJ,Pi.On],styles:['div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}body[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}form#login-form[_ngcontent-%COMP%]{background:#fff;width:40em;margin:2em auto;overflow:hidden;position:relative;border-radius:.3em;box-shadow:0 0 .2em #000}form#login-form[_ngcontent-%COMP%]   div.heading[_ngcontent-%COMP%]{background:#f85f64;color:#fff;text-align:center;text-transform:uppercase;font-weight:700;padding:1.5em;font-size:1.1em}form#login-form[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:45%;float:left;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{width:45%;float:right;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]:before, form#login-form[_ngcontent-%COMP%]:after{position:absolute;top:0;right:0;left:0;bottom:0;margin:auto}form#login-form[_ngcontent-%COMP%]:before{content:"or";color:gray;height:.5em;width:.5em;top:1.75em}form#login-form[_ngcontent-%COMP%]:after{content:"";background:rgba(128,128,128,.3);height:8em;width:.12em;top:-7em;left:.5em;z-index:900;box-shadow:0 9.6em #8080804d}',"div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}"]}),n})();const b0="@firebase/database";let nE="";class mI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,he.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,he.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class C0{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,he.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mI(e)}}catch{}return new C0},wf=iE("localStorage"),sE=iE("sessionStorage"),lg=new vi.Yd("@firebase/database"),oE=function(){let n=1;return function(){return n++}}(),aE=function(n){const e=(0,he.dS)(n),t=new he.gQ;t.update(e);const r=t.digest();return he.US.encodeByteArray(r)},cg=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=cg.apply(null,r):e+="object"==typeof r?(0,he.Pz)(r):r,e+=" "}return e};let Cf=null,lE=!0;const to=function(...n){if(!0===lE&&(lE=!1,null===Cf&&!0===sE.get("logging_enabled")&&function(n,e){(0,he.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(lg.logLevel=vi.in.VERBOSE,Cf=lg.log.bind(lg),e&&sE.set("logging_enabled",!0)):"function"==typeof n?Cf=n:(Cf=null,sE.remove("logging_enabled"))}(!0)),Cf){const e=cg.apply(null,n);Cf(e)}},Yo=function(n){return function(...e){to(n,...e)}},E0=function(...n){const e="FIREBASE INTERNAL ERROR: "+cg(...n);lg.error(e)},Ya=function(...n){const e=`FIREBASE FATAL ERROR: ${cg(...n)}`;throw lg.error(e),new Error(e)},Jo=function(...n){const e="FIREBASE WARNING: "+cg(...n);lg.warn(e)},Ef=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Gl="[MIN_NAME]",$l="[MAX_NAME]",Eu=function(n,e){if(n===e)return 0;if(n===Gl||e===$l)return-1;if(e===Gl||n===$l)return 1;{const t=D_(n),r=D_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},uE=function(n,e){return n===e?0:n<e?-1:1},ug=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,he.Pz)(e))},D0=function(n){if("object"!=typeof n||null===n)return(0,he.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,he.Pz)(e[r]),t+=":",t+=D0(n[e[r]]);return t+="}",t},C_=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const dE=function(n){(0,he.hu)(!Ef(n),"Invalid JSON number");const r=1023;let i,l,u,m,_;0===n?(l=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=m+r,u=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const D=[];for(_=52;_;_-=1)D.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)D.push(l%2?1:0),l=Math.floor(l/2);D.push(i?1:0),D.reverse();const L=D.join("");let $="";for(_=0;_<64;_+=8){let Q=parseInt(L.substr(_,8),2).toString(16);1===Q.length&&(Q="0"+Q),$+=Q}return $.toLowerCase()},vI=new RegExp("^-?(0*)\\d{1,10}$"),D_=function(n){if(vI.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dg=function(n){try{n()}catch(e){setTimeout(()=>{throw Jo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Df=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class bI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Jo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wI{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(to("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Jo(e)}}let If=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const S0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EI="websocket",A0="long_polling";class N0{constructor(e,t,r,i,l=!1,u="",m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yE(n,e,t){let r;if((0,he.hu)("string"==typeof e,"typeof type must == string"),(0,he.hu)("object"==typeof t,"typeof params must == object"),e===EI)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==A0)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function DI(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Qr(t,(l,u)=>{i.push(l+"="+u)}),r+i.join("&")}class zS{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,he.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,he.p$)(this.counters_)}}const vE={},bE={};function wE(n){const e=n.toString();return vE[e]||(vE[e]=new zS),vE[e]}class II{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Sf{constructor(e,t,r,i,l,u,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=u,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yo(e),this.stats_=wE(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),yE(t,A0,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new II(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,he.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new R0((...l)=>{const[u,m,_,D,L]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=m,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,m]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&S0.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Sf.forceAllow_=!0}static forceDisallow(){Sf.forceDisallow_=!0}static isAvailable(){return!((0,he.Yr)()||!Sf.forceAllow_&&(Sf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,he.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,he.h$)(t),i=C_(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,he.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,he.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class R0{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,he.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=oE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=R0.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(m){to("frame writing exception"),m.stack&&to(m.stack),to(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||to("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,he.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{to("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Af=null;typeof MozWebSocket<"u"?Af=MozWebSocket:typeof WebSocket<"u"&&(Af=WebSocket);let Nf=(()=>{class n{constructor(t,r,i,l,u,m,_){this.connId=t,this.applicationId=i,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yo(this.connId),this.stats_=wE(r),this.connURL=n.connectionURL_(r,m,_,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,l){const u={v:"5"};return!(0,he.Yr)()&&typeof location<"u"&&location.hostname&&S0.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),l&&(u.ac=l),yE(t,EI,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wf.set("previous_websocket_failure",!0);try{if((0,he.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${nE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,m=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;m&&(l.proxy={origin:m}),this.mySock=new Af(this.connURL,[],l)}else this.mySock=new Af(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Af&&!n.forceDisallow_}static previouslyFailed(){return wf.isInMemoryStorage||!0===wf.get("previous_websocket_failure")}markConnectionHealthy(){wf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,he.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,he.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,he.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=C_(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class A_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Sf,Nf]}initTransports_(e){const t=Nf&&Nf.isAvailable();let r=t&&!Nf.previouslyFailed();if(e.webSocketOnly&&(t||Jo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Nf];else{const i=this.transports_=[];for(const l of A_.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class UI{constructor(e,t,r,i,l,u,m,_,D,L){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=u,this.onReady_=m,this.onDisconnect_=_,this.onKill_=D,this.lastSessionId=L,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yo("c:"+this.id+":"),this.transportManager_=new A_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Df(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ug("t",e),r=ug("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ug("t",e),r=ug("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ug("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?E0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Jo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Df(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Df(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jI{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class HI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,he.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let l=0;l<i.length;l++)if(i[l].callback===t&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(e){(0,he.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class B0 extends HI{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,he.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new B0}getInitialEvent(e){return(0,he.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Wr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Pr(){return new Wr("")}function or(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function zd(n){return n.pieces_.length-n.pieceNum_}function s(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wr(n.pieces_,e)}function o(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function c(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function d(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wr(e,0)}function p(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wr(t,0)}function y(n){return n.pieceNum_>=n.pieces_.length}function I(n,e){const t=or(n),r=or(e);if(null===t)return e;if(t===r)return I(s(n),s(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function j(n,e){if(zd(n)!==zd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function z(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(zd(n)>zd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ne{constructor(e,t){this.errorPrefix_=t,this.parts_=c(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,he.ug)(this.parts_[r]);rt(this)}}function rt(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yt(n))}function yt(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Mt extends HI{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Mt}getInitialEvent(e){return(0,he.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const jt=1e3;let Mf,Sc=(()=>{class n extends jI{constructor(t,r,i,l,u,m,_,D){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=m,this.appCheckTokenProvider_=_,this.authOverride_=D,this.id=n.nextPersistentConnectionId_++,this.log_=Yo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,D&&!(0,he.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mt.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&B0.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const l=++this.requestNumber_,u={r:l,a:t,b:r};this.log_((0,he.Pz)(u)),(0,he.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[l]=i)}get(t){this.initConnection_();const r=new he.BH,i={p:t._path.toString(),q:t._queryObject},l={action:"g",request:i,onComplete:m=>{const _=m.d;"ok"===m.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const m=this.outstandingGets_[u];void 0===m||l!==m||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,l){this.initConnection_();const u=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+u),this.listens.has(m)||this.listens.set(m,new Map),(0,he.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,he.hu)(!this.listens.get(m).has(u),"listen() called twice for same path/queryId.");const _={onComplete:l,hashFn:r,query:t,tag:i};this.listens.get(m).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const D=_.d,L=_.s;n.warnOnListenWarnings_(D,r),(this.listens.get(i)&&this.listens.get(i).get(l))===t&&(this.log_("listen response",_),"ok"!==L&&this.removeListen_(i,l),t.onComplete&&t.onComplete(L,D))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,he.r3)(t,"w")){const i=(0,he.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Jo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,he.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,he.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const u=l.s,m=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,he.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,t._queryObject,r)}sendUnlisten_(t,r,i,l){this.log_("Unlisten on "+t+" for "+r);const u={p:t};l&&(u.q=i,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,l){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,m=>{l&&setTimeout(()=>{l(m.s,m.d)},Math.floor(0))})}put(t,r,i,l){this.putInternal("p",t,r,i,l)}merge(t,r,i,l){this.putInternal("m",t,r,i,l)}putInternal(t,r,i,l,u){this.initConnection_();const m={p:r,d:i};void 0!==u&&(m.h=u),this.outstandingPuts_.push({action:t,request:m,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,he.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):E0("Unrecognized action received from server: "+(0,he.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,he.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,xe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let _=!1,D=null;const L=function(){D?D.close():(_=!0,l())};t.realtime_={close:L,sendRequest:function(oe){(0,he.hu)(D,"sendRequest call when we're not connected not allowed."),D.sendRequest(oe)}};const Q=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[oe,be]=yield Promise.all([t.authTokenProvider_.getToken(Q),t.appCheckTokenProvider_.getToken(Q)]);_?to("getToken() completed but was canceled"):(to("getToken() completed. Creating connection."),t.authToken_=oe&&oe.accessToken,t.appCheckToken_=be&&be.token,D=new UI(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,l,Ge=>{Jo(Ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(oe){t.log_("Failed to get token: "+oe),_||(t.repoInfo_.nodeAdmin&&Jo(oe),L())}}})()}interrupt(t){to("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){to("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,he.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>D0(u)).join("$"):"default";const l=this.removeListen_(t,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const i=new Wr(t).toString();let l;if(this.listens.has(i)){const u=this.listens.get(i);l=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(t,r){to("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){to("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,he.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+nE.replace(/\./g,"-")]=1,(0,he.uI)()?t["framework.cordova"]=1:(0,he.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=B0.getInstance().currentlyOnline();return(0,he.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class tr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tr(e,t)}}class xf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tr(Gl,e),i=new tr(Gl,t);return 0!==this.compare(r,i)}minPost(){return tr.MIN}}class x_ extends xf{static get __EMPTY_NODE(){return Mf}static set __EMPTY_NODE(e){Mf=e}compare(e,t){return Eu(e.name,t.name)}isDefinedOn(e){throw(0,he.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tr.MIN}maxPost(){return new tr($l,Mf)}makePost(e,t){return(0,he.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new tr(e,Mf)}toString(){return".key"}}const Ja=new x_;class Of{constructor(e,t,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let WI,ka=(()=>{class n{constructor(t,r,i,l,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=l??Qa.EMPTY_NODE,this.right=u??Qa.EMPTY_NODE}copy(t,r,i,l,u){return new n(t??this.key,r??this.value,i??this.color,l??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let l=this;const u=i(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,r,i),null):0===u?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qa.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,l;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Qa.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Qa{constructor(e,t=Qa.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Qa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ka.BLACK,null,null))}remove(e){return new Qa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ka.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Of(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Of(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Of(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Of(this.root_,null,this.comparator_,!0,e)}}function jx(n,e){return Eu(n.name,e.name)}function $I(n,e){return Eu(n,e)}Qa.EMPTY_NODE=new class Ux{copy(e,t,r,i,l){return this}insert(e,t,r){return new ka(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const YS=function(n){return"number"==typeof n?"number:"+dE(n):"string:"+n},JS=function(n){if(n.isLeafNode()){const e=n.val();(0,he.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,he.r3)(e,".sv"),"Priority must be a string or number.")}else(0,he.hu)(n===WI||n.isEmpty(),"priority of unexpected type.");(0,he.hu)(n===WI||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QS,XS,eA,M_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,he.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),JS(this.priorityNode_)}static set __childrenNodeConstructor(t){QS=t}static get __childrenNodeConstructor(){return QS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return y(t)?this:".priority"===or(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=or(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,he.hu)(".priority"!==i||1===zd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(s(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+YS(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?dE(this.value_):this.value_,this.lazyHash_=aE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,he.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,he.hu)(l>=0,"Unknown leaf type: "+r),(0,he.hu)(u>=0,"Unknown leaf type: "+i),l===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Fi=new class Wx extends xf{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),l=r.compareTo(i);return 0===l?Eu(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tr.MIN}maxPost(){return new tr($l,new M_("[PRIORITY-POST]",eA))}makePost(e,t){const r=XS(e);return new tr(t,new M_("[PRIORITY-POST]",r))}toString(){return".priority"}},zx=Math.log(2);class qx{constructor(e){this.count=parseInt(Math.log(e+1)/zx,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const NE=function(n,e,t,r){n.sort(e);const i=function(_,D){const L=D-_;let $,Q;if(0===L)return null;if(1===L)return $=n[_],Q=t?t($):$,new ka(Q,$.node,ka.BLACK,null,null);{const oe=parseInt(L/2,10)+_,be=i(_,oe),Ge=i(oe+1,D);return $=n[oe],Q=t?t($):$,new ka(Q,$.node,ka.BLACK,be,Ge)}},m=function(_){let D=null,L=null,$=n.length;const Q=function(be,Ge){const ft=$-be,Qt=$;$-=be;const At=i(ft+1,Qt),Dn=n[ft],Pt=t?t(Dn):Dn;oe(new ka(Pt,Dn.node,Ge,null,At))},oe=function(be){D?(D.left=be,D=be):(L=be,D=be)};for(let be=0;be<_.count;++be){const Ge=_.nextBitIsOne(),ft=Math.pow(2,_.count-(be+1));Ge?Q(ft,ka.BLACK):(Q(ft,ka.BLACK),Q(ft,ka.RED))}return L}(new qx(n.length));return new Qa(r||e,m)};let zI;const O_={};class Zd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,he.hu)(O_&&Fi,"ChildrenNode.ts has not been loaded"),zI=zI||new Zd({".priority":O_},{".priority":Fi}),zI}get(e){const t=(0,he.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qa?t:null}hasIndex(e){return(0,he.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,he.hu)(e!==Ja,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=t.getIterator(tr.Wrap);let m,u=l.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=l.getNext();m=i?NE(r,e.getCompare()):O_;const _=e.toString(),D=Object.assign({},this.indexSet_);D[_]=e;const L=Object.assign({},this.indexes_);return L[_]=m,new Zd(L,D)}addToIndexes(e,t){const r=(0,he.UI)(this.indexes_,(i,l)=>{const u=(0,he.DV)(this.indexSet_,l);if((0,he.hu)(u,"Missing index implementation for "+l),i===O_){if(u.isDefinedOn(e.node)){const m=[],_=t.getIterator(tr.Wrap);let D=_.getNext();for(;D;)D.name!==e.name&&m.push(D),D=_.getNext();return m.push(e),NE(m,u.getCompare())}return O_}{const m=t.get(e.name);let _=i;return m&&(_=_.remove(new tr(e.name,m))),_.insert(e,e.node)}});return new Zd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,he.UI)(this.indexes_,i=>{if(i===O_)return i;{const l=t.get(e.name);return l?i.remove(new tr(e.name,l)):i}});return new Zd(r,this.indexSet_)}}let V0,Kn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&JS(this.priorityNode_),this.children_.isEmpty()&&(0,he.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return V0||(V0=new n(new Qa($I),null,Zd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||V0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?V0:r}}getChild(t){const r=or(t);return null===r?this:this.getImmediateChild(r).getChild(s(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,he.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new tr(t,r);let l,u;r.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const m=l.isEmpty()?V0:this.priorityNode_;return new n(l,m,u)}}updateChild(t,r){const i=or(t);if(null===i)return r;{(0,he.hu)(".priority"!==or(t)||1===zd(t),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(s(t),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,l=0,u=!0;if(this.forEachChild(Fi,(m,_)=>{r[m]=_.val(t),i++,u&&n.INTEGER_REGEXP_.test(m)?l=Math.max(l,Number(m)):u=!1}),!t&&u&&l<2*i){const m=[];for(const _ in r)m[_]=r[_];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+YS(this.getPriority().val())+":"),this.forEachChild(Fi,(r,i)=>{const l=i.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":aE(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const l=this.resolveIndex_(i);if(l){const u=l.getPredecessorKey(new tr(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new tr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new tr(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,tr.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,tr.Wrap);let u=l.peek();for(;null!=u&&r.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===U0?-1:0}withIndex(t){if(t===Ja||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ja||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Fi),l=r.getIterator(Fi);let u=i.getNext(),m=l.getNext();for(;u&&m;){if(u.name!==m.name||!u.node.equals(m.node))return!1;u=i.getNext(),m=l.getNext()}return null===u&&null===m}return!1}return!1}}resolveIndex_(t){return t===Ja?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const U0=new class Zx extends Kn{constructor(){super(new Qa($I),Kn.EMPTY_NODE,Zd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kn.EMPTY_NODE}isEmpty(){return!1}};function ms(n,e=null){if(null===n)return Kn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,he.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new M_(n,ms(e));if(n instanceof Array){let t=Kn.EMPTY_NODE;return Qr(n,(r,i)=>{if((0,he.r3)(n,r)&&"."!==r.substring(0,1)){const l=ms(i);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(ms(e))}{const t=[];let r=!1;if(Qr(n,(u,m)=>{if("."!==u.substring(0,1)){const _=ms(m);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new tr(u,_)))}}),0===t.length)return Kn.EMPTY_NODE;const l=NE(t,jx,u=>u.name,$I);if(r){const u=NE(t,Fi.getCompare());return new Kn(l,ms(e),new Zd({".priority":u},{".priority":Fi}))}return new Kn(l,ms(e),Zd.Default)}}Object.defineProperties(tr,{MIN:{value:new tr(Gl,Kn.EMPTY_NODE)},MAX:{value:new tr($l,U0)}}),x_.__EMPTY_NODE=Kn.EMPTY_NODE,M_.__childrenNodeConstructor=Kn,function Hx(n){WI=n}(U0),function $x(n){eA=n}(U0),function Gx(n){XS=n}(ms);class qI extends xf{constructor(e){super(),this.indexPath_=e,(0,he.hu)(!y(e)&&".priority"!==or(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),l=r.compareTo(i);return 0===l?Eu(e.name,t.name):l}makePost(e,t){const r=ms(e),i=Kn.EMPTY_NODE.updateChild(this.indexPath_,r);return new tr(t,i)}maxPost(){const e=Kn.EMPTY_NODE.updateChild(this.indexPath_,U0);return new tr($l,e)}toString(){return c(this.indexPath_,0).join("/")}}const ZI=new class Yx extends xf{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Eu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tr.MIN}maxPost(){return tr.MAX}makePost(e,t){const r=ms(e);return new tr(t,r)}toString(){return".value"}};function H0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class JI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fi}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,he.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,he.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,he.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,he.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$l}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,he.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fi}copy(){const e=new JI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function oA(n){const e={};if(n.isDefault())return e;let t;return n.index_===Fi?t="$priority":n.index_===ZI?t="$value":n.index_===Ja?t="$key":((0,he.hu)(n.index_ instanceof qI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,he.Pz)(t),n.startSet_&&(e.startAt=(0,he.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,he.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,he.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,he.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function aA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Fi&&(e.i=n.index_.toString()),e}class ME extends jI{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Yo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,he.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=ME.getListenId_(e,r),m={};this.listens_[u]=m;const _=oA(e._queryParams);this.restRequest_(l+".json",_,(D,L)=>{let $=L;if(404===D&&($=null,D=null),null===D&&this.onDataUpdate_(l,$,!1,r),(0,he.DV)(this.listens_,u)===m){let Q;Q=D?401===D?"permission_denied":"rest_error:"+D:"ok",i(Q,null)}})}unlisten(e,t){const r=ME.getListenId_(e,t);delete this.listens_[r]}get(e){const t=oA(e._queryParams),r=e._path.toString(),i=new he.BH;return this.restRequest_(r+".json",t,(l,u)=>{let m=u;404===l&&(m=null,l=null),null===l?(this.onDataUpdate_(r,m,!1,null),i.resolve(m)):i.reject(new Error(m))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(t.auth=i.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,he.xO)(t);this.log_("Sending REST request for "+u);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+u+" received. status:",m.status,"response:",m.responseText);let _=null;if(m.status>=200&&m.status<300){try{_=(0,he.cI)(m.responseText)}catch{Jo("Failed to parse JSON response for "+u+": "+m.responseText)}r(null,_)}else 401!==m.status&&404!==m.status&&Jo("Got unsuccessful REST response for "+u+" Status: "+m.status),r(m.status);r=null}},m.open("GET",u,!0),m.send()})}}class sM{constructor(){this.rootNode_=Kn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function OE(){return{value:null,children:new Map}}function P_(n,e,t){if(y(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=or(e);n.children.has(r)||n.children.set(r,OE()),P_(n.children.get(r),e=s(e),t)}}function tT(n,e,t){null!==n.value?t(e,n.value):function oM(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tT(i,new Wr(e.toString()+"/"+r),t)})}class aM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class uM{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aM(e);const r=1e4+2e4*Math.random();Df(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Qr(e,(i,l)=>{l>0&&(0,he.r3)(this.statsToReport_,i)&&(t[i]=l,r=!0)}),r&&this.server_.reportStats(t),Df(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Wl||(Wl={})),Wl))();function iT(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class kE{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Wl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(y(this.path)){if(null!=this.affectedTree.value)return(0,he.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wr(e));return new kE(Pr(),t,this.revert)}}return(0,he.hu)(or(this.path)===e,"operationForChild called for unrelated child."),new kE(s(this.path),this.affectedTree,this.revert)}}class fg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Wl.OVERWRITE}operationForChild(e){return y(this.path)?new fg(this.source,Pr(),this.snap.getImmediateChild(e)):new fg(this.source,s(this.path),this.snap)}}class F_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Wl.MERGE}operationForChild(e){if(y(this.path)){const t=this.children.subtree(new Wr(e));return t.isEmpty()?null:t.value?new fg(this.source,Pr(),t.value):new F_(this.source,Pr(),t)}return(0,he.hu)(or(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new F_(this.source,s(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(y(e))return this.isFullyInitialized()&&!this.filtered_;const t=or(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function W0(n,e,t,r,i,l){const u=r.filter(m=>m.type===t);u.sort((m,_)=>function pM(n,e,t){if(null==e.childName||null==t.childName)throw(0,he.g5)("Should only compare child_ events.");const r=new tr(e.childName,e.snapshotNode),i=new tr(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,m,_)),u.forEach(m=>{const _=function fM(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,l);i.forEach(D=>{D.respondsTo(m.type)&&e.push(D.createEvent(_,n.query_))})})}function RE(n,e){return{eventCache:n,serverCache:e}}function z0(n,e,t,r){return RE(new kf(e,t,r),n.serverCache)}function cA(n,e,t,r){return RE(n.eventCache,new kf(e,t,r))}function PE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function pg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let sT;class Li{constructor(e,t=(()=>(sT||(sT=new Qa(uE)),sT))()){this.value=e,this.children=t}static fromObject(e){let t=new Li(null);return Qr(e,(r,i)=>{t=t.set(new Wr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Pr(),value:this.value};if(y(e))return null;{const r=or(e),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(s(e),t);return null!=l?{path:p(new Wr(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(y(e))return this;{const t=or(e),r=this.children.get(t);return null!==r?r.subtree(s(e)):new Li(null)}}set(e,t){if(y(e))return new Li(t,this.children);{const r=or(e),l=(this.children.get(r)||new Li(null)).set(s(e),t),u=this.children.insert(r,l);return new Li(this.value,u)}}remove(e){if(y(e))return this.children.isEmpty()?new Li(null):new Li(null,this.children);{const t=or(e),r=this.children.get(t);if(r){const i=r.remove(s(e));let l;return l=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&l.isEmpty()?new Li(null):new Li(this.value,l)}return this}}get(e){if(y(e))return this.value;{const t=or(e),r=this.children.get(t);return r?r.get(s(e)):null}}setTree(e,t){if(y(e))return t;{const r=or(e),l=(this.children.get(r)||new Li(null)).setTree(s(e),t);let u;return u=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Li(this.value,u)}}fold(e){return this.fold_(Pr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(p(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Pr(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(y(e))return null;{const l=or(e),u=this.children.get(l);return u?u.findOnPath_(s(e),p(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Pr(),t)}foreachOnPath_(e,t,r){if(y(e))return this;{this.value&&r(t,this.value);const i=or(e),l=this.children.get(i);return l?l.foreachOnPath_(s(e),p(t,i),r):new Li(null)}}foreach(e){this.foreach_(Pr(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(p(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ac{constructor(e){this.writeTree_=e}static empty(){return new Ac(new Li(null))}}function q0(n,e,t){if(y(e))return new Ac(new Li(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let l=r.value;const u=I(i,e);return l=l.updateChild(u,t),new Ac(n.writeTree_.set(i,l))}{const i=new Li(t),l=n.writeTree_.setTree(e,i);return new Ac(l)}}}function oT(n,e,t){let r=n;return Qr(t,(i,l)=>{r=q0(r,p(e,i),l)}),r}function uA(n,e){if(y(e))return Ac.empty();{const t=n.writeTree_.setTree(e,new Li(null));return new Ac(t)}}function aT(n,e){return null!=gg(n,e)}function gg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(I(t.path,e)):null}function dA(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Fi,(r,i)=>{e.push(new tr(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new tr(r,i.value))}),e}function Rf(n,e){if(y(e))return n;{const t=gg(n,e);return new Ac(null!=t?new Li(t):n.writeTree_.subtree(e))}}function lT(n){return n.writeTree_.isEmpty()}function L_(n,e){return hA(Pr(),n.writeTree_,e)}function hA(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,l)=>{".priority"===i?((0,he.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=hA(p(n,i),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(p(n,".priority"),r)),t}}function FE(n,e){return _A(e,n)}function bM(n,e){if(n.snap)return z(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&z(p(n.path,t),e))return!0;return!1}function CM(n){return n.visible}function fA(n,e,t){let r=Ac.empty();for(let i=0;i<n.length;++i){const l=n[i];if(e(l)){const u=l.path;let m;if(l.snap)z(t,u)?(m=I(t,u),r=q0(r,m,l.snap)):z(u,t)&&(m=I(u,t),r=q0(r,Pr(),l.snap.getChild(m)));else{if(!l.children)throw(0,he.g5)("WriteRecord should have .snap or .children");if(z(t,u))m=I(t,u),r=oT(r,m,l.children);else if(z(u,t))if(m=I(u,t),y(m))r=oT(r,Pr(),l.children);else{const _=(0,he.DV)(l.children,or(m));if(_){const D=_.getChild(s(m));r=q0(r,Pr(),D)}}}}}return r}function pA(n,e,t,r,i){if(r||i){const l=Rf(n.visibleWrites,e);return!i&&lT(l)?t:i||null!=t||aT(l,Pr())?L_(fA(n.allWrites,function(D){return(D.visible||i)&&(!r||!~r.indexOf(D.writeId))&&(z(D.path,e)||z(e,D.path))},e),t||Kn.EMPTY_NODE):null}{const l=gg(n.visibleWrites,e);if(null!=l)return l;{const u=Rf(n.visibleWrites,e);return lT(u)?t:null!=t||aT(u,Pr())?L_(u,t||Kn.EMPTY_NODE):null}}}function LE(n,e,t,r){return pA(n.writeTree,n.treePath,e,t,r)}function cT(n,e){return function EM(n,e,t){let r=Kn.EMPTY_NODE;const i=gg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Fi,(l,u)=>{r=r.updateImmediateChild(l,u)}),r;if(t){const l=Rf(n.visibleWrites,e);return t.forEachChild(Fi,(u,m)=>{const _=L_(Rf(l,new Wr(u)),m);r=r.updateImmediateChild(u,_)}),dA(l).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return dA(Rf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function gA(n,e,t,r){return function DM(n,e,t,r,i){(0,he.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=p(e,t);if(aT(n.visibleWrites,l))return null;{const u=Rf(n.visibleWrites,l);return lT(u)?i.getChild(t):L_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function BE(n,e){return function TM(n,e){return gg(n.visibleWrites,e)}(n.writeTree,p(n.treePath,e))}function uT(n,e,t){return function IM(n,e,t,r){const i=p(e,t),l=gg(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(t)?L_(Rf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function mA(n,e){return _A(p(n.treePath,e),n.writeTree)}function _A(n,e){return{treePath:n,writeTree:e}}class xM{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,he.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,he.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,H0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,function j0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,function R_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,he.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,H0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const yA=new class MM{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class dT{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new kf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uT(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pg(this.viewCache_),l=function NM(n,e,t,r,i,l){return function SM(n,e,t,r,i,l,u){let m;const _=Rf(n.visibleWrites,e),D=gg(_,Pr());if(null!=D)m=D;else{if(null==t)return[];m=L_(_,t)}if(m=m.withIndex(u),m.isEmpty()||m.isLeafNode())return[];{const L=[],$=u.getCompare(),Q=l?m.getReverseIteratorFrom(r,u):m.getIteratorFrom(r,u);let oe=Q.getNext();for(;oe&&L.length<i;)0!==$(oe,r)&&L.push(oe),oe=Q.getNext();return L}}(n.writeTree,n.treePath,e,t,r,i,l)}(this.writes_,i,t,1,r,e);return 0===l.length?null:l[0]}}function vA(n,e,t,r,i,l){const u=e.eventCache;if(null!=BE(r,t))return e;{let m,_;if(y(t))if((0,he.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const D=pg(e),$=cT(r,D instanceof Kn?D:Kn.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),$,l)}else{const D=LE(r,pg(e));m=n.filter.updateFullNode(e.eventCache.getNode(),D,l)}else{const D=or(t);if(".priority"===D){(0,he.hu)(1===zd(t),"Can't have a priority with additional path components");const L=u.getNode();_=e.serverCache.getNode();const $=gA(r,t,L,_);m=null!=$?n.filter.updatePriority(L,$):u.getNode()}else{const L=s(t);let $;if(u.isCompleteForChild(D)){_=e.serverCache.getNode();const Q=gA(r,t,u.getNode(),_);$=null!=Q?u.getNode().getImmediateChild(D).updateChild(L,Q):u.getNode().getImmediateChild(D)}else $=uT(r,D,e.serverCache);m=null!=$?n.filter.updateChild(u.getNode(),D,$,L,i,l):u.getNode()}}return z0(e,m,u.isFullyInitialized()||y(t),n.filter.filtersNodes())}}function VE(n,e,t,r,i,l,u,m){const _=e.serverCache;let D;const L=u?n.filter:n.filter.getIndexedFilter();if(y(t))D=L.updateFullNode(_.getNode(),r,null);else if(L.filtersNodes()&&!_.isFiltered()){const oe=_.getNode().updateChild(t,r);D=L.updateFullNode(_.getNode(),oe,null)}else{const oe=or(t);if(!_.isCompleteForPath(t)&&zd(t)>1)return e;const be=s(t),ft=_.getNode().getImmediateChild(oe).updateChild(be,r);D=".priority"===oe?L.updatePriority(_.getNode(),ft):L.updateChild(_.getNode(),oe,ft,be,yA,null)}const $=cA(e,D,_.isFullyInitialized()||y(t),L.filtersNodes());return vA(n,$,t,i,new dT(i,$,l),m)}function hT(n,e,t,r,i,l,u){const m=e.eventCache;let _,D;const L=new dT(i,e,l);if(y(t))D=n.filter.updateFullNode(e.eventCache.getNode(),r,u),_=z0(e,D,!0,n.filter.filtersNodes());else{const $=or(t);if(".priority"===$)D=n.filter.updatePriority(e.eventCache.getNode(),r),_=z0(e,D,m.isFullyInitialized(),m.isFiltered());else{const Q=s(t),oe=m.getNode().getImmediateChild($);let be;if(y(Q))be=r;else{const Ge=L.getCompleteChild($);be=null!=Ge?".priority"===o(Q)&&Ge.getChild(d(Q)).isEmpty()?Ge:Ge.updateChild(Q,r):Kn.EMPTY_NODE}_=oe.equals(be)?e:z0(e,n.filter.updateChild(m.getNode(),$,be,Q,L,u),m.isFullyInitialized(),n.filter.filtersNodes())}}return _}function bA(n,e){return n.eventCache.isCompleteForChild(e)}function wA(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function fT(n,e,t,r,i,l,u,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let D,_=e;D=y(t)?r:new Li(null).setTree(t,r);const L=e.serverCache.getNode();return D.children.inorderTraversal(($,Q)=>{if(L.hasChild($)){const be=wA(0,e.serverCache.getNode().getImmediateChild($),Q);_=VE(n,_,new Wr($),be,i,l,u,m)}}),D.children.inorderTraversal(($,Q)=>{const oe=!e.serverCache.isCompleteForChild($)&&void 0===Q.value;if(!L.hasChild($)&&!oe){const Ge=wA(0,e.serverCache.getNode().getImmediateChild($),Q);_=VE(n,_,new Wr($),Ge,i,l,u,m)}}),_}function GM(n,e){const t=pg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!y(e)&&!t.getImmediateChild(or(e)).isEmpty())?t.getChild(e):null}function DA(n,e,t,r){e.type===Wl.MERGE&&null!==e.source.queryId&&((0,he.hu)(pg(n.viewCache_),"We should always have a full cache before handling merges"),(0,he.hu)(PE(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function RM(n,e,t,r,i){const l=new xM;let u,m;if(t.type===Wl.OVERWRITE){const D=t;D.source.fromUser?u=hT(n,e,D.path,D.snap,r,i,l):((0,he.hu)(D.source.fromServer,"Unknown source."),m=D.source.tagged||e.serverCache.isFiltered()&&!y(D.path),u=VE(n,e,D.path,D.snap,r,i,m,l))}else if(t.type===Wl.MERGE){const D=t;D.source.fromUser?u=function FM(n,e,t,r,i,l,u){let m=e;return r.foreach((_,D)=>{const L=p(t,_);bA(e,or(L))&&(m=hT(n,m,L,D,i,l,u))}),r.foreach((_,D)=>{const L=p(t,_);bA(e,or(L))||(m=hT(n,m,L,D,i,l,u))}),m}(n,e,D.path,D.children,r,i,l):((0,he.hu)(D.source.fromServer,"Unknown source."),m=D.source.tagged||e.serverCache.isFiltered(),u=fT(n,e,D.path,D.children,r,i,m,l))}else if(t.type===Wl.ACK_USER_WRITE){const D=t;u=D.revert?function VM(n,e,t,r,i,l){let u;if(null!=BE(r,t))return e;{const m=new dT(r,e,i),_=e.eventCache.getNode();let D;if(y(t)||".priority"===or(t)){let L;if(e.serverCache.isFullyInitialized())L=LE(r,pg(e));else{const $=e.serverCache.getNode();(0,he.hu)($ instanceof Kn,"serverChildren would be complete if leaf node"),L=cT(r,$)}L=L,D=n.filter.updateFullNode(_,L,l)}else{const L=or(t);let $=uT(r,L,e.serverCache);null==$&&e.serverCache.isCompleteForChild(L)&&($=_.getImmediateChild(L)),D=null!=$?n.filter.updateChild(_,L,$,s(t),m,l):e.eventCache.getNode().hasChild(L)?n.filter.updateChild(_,L,Kn.EMPTY_NODE,s(t),m,l):_,D.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=LE(r,pg(e)),u.isLeafNode()&&(D=n.filter.updateFullNode(D,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=BE(r,Pr()),z0(e,D,u,n.filter.filtersNodes())}}(n,e,D.path,r,i,l):function LM(n,e,t,r,i,l,u){if(null!=BE(i,t))return e;const m=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(y(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return VE(n,e,t,_.getNode().getChild(t),i,l,m,u);if(y(t)){let D=new Li(null);return _.getNode().forEachChild(Ja,(L,$)=>{D=D.set(new Wr(L),$)}),fT(n,e,t,D,i,l,m,u)}return e}{let D=new Li(null);return r.foreach((L,$)=>{const Q=p(t,L);_.isCompleteForPath(Q)&&(D=D.set(L,_.getNode().getChild(Q)))}),fT(n,e,t,D,i,l,m,u)}}(n,e,D.path,D.affectedTree,r,i,l)}else{if(t.type!==Wl.LISTEN_COMPLETE)throw(0,he.g5)("Unknown operation type: "+t.type);u=function BM(n,e,t,r,i){const l=e.serverCache;return vA(n,cA(e,l.getNode(),l.isFullyInitialized()||y(t),l.isFiltered()),t,r,yA,i)}(n,e,t.path,r,l)}const _=l.getChanges();return function PM(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=PE(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(function sA(n){return{type:"value",snapshotNode:n}}(PE(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,i,e,t,r);return function kM(n,e){(0,he.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,he.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,he.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,function IA(n,e,t,r){return function hM(n,e,t,r){const i=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function Qx(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),W0(n,i,"child_removed",e,r,t),W0(n,i,"child_added",e,r,t),W0(n,i,"child_moved",l,r,t),W0(n,i,"child_changed",e,r,t),W0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,l.changes,l.viewCache.eventCache.getNode(),null)}let UE,HE;function pT(n,e,t,r){const i=e.source.queryId;if(null!==i){const l=n.views.get(i);return(0,he.hu)(null!=l,"SyncTree gave us an op for an invalid query."),DA(l,e,t,r)}{let l=[];for(const u of n.views.values())l=l.concat(DA(u,e,t,r));return l}}function Pf(n,e){let t=null;for(const r of n.views.values())t=t||GM(r,e);return t}class MA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Li(null),this.pendingWriteTree_=function AM(){return{visibleWrites:Ac.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gT(n,e,t,r,i){return function mM(n,e,t,r,i){(0,he.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=q0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?B_(n,new fg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Lf(n,e,t=!1){const r=function yM(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vM(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,he.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,l=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const m=n.allWrites[u];m.visible&&(u>=t&&bM(m,r.path)?i=!1:z(r.path,m.path)&&(l=!0)),u--}return!!i&&(l?(function wM(n){n.visibleWrites=fA(n.allWrites,CM,Pr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=uA(n.visibleWrites,r.path):Qr(r.children,_=>{n.visibleWrites=uA(n.visibleWrites,p(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let l=new Li(null);return null!=r.snap?l=l.set(Pr(),!0):Qr(r.children,u=>{l=l.set(new Wr(u),!0)}),B_(n,new kE(r.path,l,t))}return[]}function Z0(n,e,t){return B_(n,new fg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function GE(n,e,t){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,m)=>{const D=Pf(m,I(u,e));if(D)return D});return pA(i,e,l,t,!0)}function B_(n,e){return kA(e,n.syncPointTree_,null,FE(n.pendingWriteTree_,Pr()))}function kA(n,e,t,r){if(y(n.path))return RA(n,e,t,r);{const i=e.get(Pr());null==t&&null!=i&&(t=Pf(i,Pr()));let l=[];const u=or(n.path),m=n.operationForChild(u),_=e.children.get(u);if(_&&m){const D=t?t.getImmediateChild(u):null,L=mA(r,u);l=l.concat(kA(m,_,D,L))}return i&&(l=l.concat(pT(i,n,r,t))),l}}function RA(n,e,t,r){const i=e.get(Pr());null==t&&null!=i&&(t=Pf(i,Pr()));let l=[];return e.children.inorderTraversal((u,m)=>{const _=t?t.getImmediateChild(u):null,D=mA(r,u),L=n.operationForChild(u);L&&(l=l.concat(RA(L,m,_,D)))}),i&&(l=l.concat(pT(i,n,r,t))),l}function _T(n,e){return n.tagToQueryMap.get(e)}function yT(n){const e=n.indexOf("$");return(0,he.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wr(n.substr(0,e))}}function vT(n,e,t){const r=n.syncPointTree_.get(e);return(0,he.hu)(r,"Missing sync point for query tag that we're tracking"),pT(r,t,FE(n.pendingWriteTree_,e),null)}class bT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new bT(t)}node(){return this.node_}}class wT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=p(this.path_,e);return new wT(this.syncTree_,t)}node(){return GE(this.syncTree_,this.path_)}}const FA=function(n,e,t){return n&&"object"==typeof n?((0,he.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hO(n[".sv"],e,t):"object"==typeof n[".sv"]?fO(n[".sv"],e):void(0,he.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hO=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,he.hu)(!1,"Unexpected server value: "+n)},fO=function(n,e,t){n.hasOwnProperty("increment")||(0,he.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,he.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,he.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},CT=function(n,e,t){return ET(n,new bT(e),t)};function ET(n,e,t){const r=n.getPriority().val(),i=FA(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,m=FA(u.getValue(),e,t);return m!==u.getValue()||i!==u.getPriority().val()?new M_(m,ms(i)):n}{const u=n;return l=u,i!==u.getPriority().val()&&(l=l.updatePriority(new M_(i))),u.forEachChild(Fi,(m,_)=>{const D=ET(_,e.getImmediateChild(m),t);D!==_&&(l=l.updateImmediateChild(m,D))}),l}}class DT{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function zE(n,e){let t=e instanceof Wr?e:new Wr(e),r=n,i=or(t);for(;null!==i;){const l=(0,he.DV)(r.node.children,i)||{children:{},childCount:0};r=new DT(i,r,l),t=s(t),i=or(t)}return r}function mg(n){return n.node.value}function IT(n,e){n.node.value=e,TT(n)}function BA(n){return n.node.childCount>0}function qE(n,e){Qr(n.node.children,(t,r)=>{e(new DT(t,n,r))})}function VA(n,e,t,r){t&&!r&&e(n),qE(n,i=>{VA(i,e,!0,r)}),t&&r&&e(n)}function Y0(n){return new Wr(null===n.parent?n.name:Y0(n.parent)+"/"+n.name)}function TT(n){null!==n.parent&&function mO(n,e,t){const r=function pO(n){return void 0===mg(n)&&!BA(n)}(t),i=(0,he.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,TT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,TT(n))}(n.parent,n.name,n)}const _O=/[\[\].#$\/\u0000-\u001F\u007F]/,yO=/[\[\].#$\u0000-\u001F\u007F]/,ST=10485760,ZE=function(n){return"string"==typeof n&&0!==n.length&&!_O.test(n)},UA=function(n){return"string"==typeof n&&0!==n.length&&!yO.test(n)},Q0=function(n,e,t){const r=t instanceof Wr?new ne(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yt(r));if("function"==typeof e)throw new Error(n+"contains a function "+yt(r)+" with contents = "+e.toString());if(Ef(e))throw new Error(n+"contains "+e.toString()+" "+yt(r));if("string"==typeof e&&e.length>ST/3&&(0,he.ug)(e)>ST)throw new Error(n+"contains a string greater than "+ST+" utf8 bytes "+yt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,l=!1;if(Qr(e,(u,m)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!ZE(u)))throw new Error(n+" contains an invalid key ("+u+") "+yt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,he.ug)(e),rt(n)})(r,u),Q0(n,m,r),function Pe(n){const e=n.parts_.pop();n.byteLength_-=(0,he.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+yt(r)+" in addition to actual children.")}},NT=function(n,e,t,r){if(!(r&&void 0===t||UA(t)))throw new Error((0,he.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class CO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function KE(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],l=i.getPath();null!==t&&!j(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(i)}t&&n.eventLists_.push(t)}function zl(n,e,t){KE(n,t),function GA(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(EO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>z(r,e)||z(e,r))}function EO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Cf&&to("event: "+t.toString()),dg(r)}}}class IO{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=OE(),this.transactionQueueTree_=new DT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WA(n){const t=n.infoData_.getNode(new Wr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:WA(n)})}function zA(n,e,t,r,i){n.dataUpdateCount++;const l=new Wr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const _=(0,he.UI)(t,D=>ms(D));u=function sO(n,e,t,r){const i=_T(n,r);if(i){const l=yT(i),u=l.path,m=l.queryId,_=I(u,e),D=Li.fromObject(t);return vT(n,u,new F_(iT(m),_,D))}return[]}(n.serverSyncTree_,l,_,i)}else{const _=ms(t);u=function iO(n,e,t,r){const i=_T(n,r);if(null!=i){const l=yT(i),u=l.path,m=l.queryId,_=I(u,e);return vT(n,u,new fg(iT(m),_,t))}return[]}(n.serverSyncTree_,l,_,i)}else if(r){const _=(0,he.UI)(t,D=>ms(D));u=function tO(n,e,t){const r=Li.fromObject(t);return B_(n,new F_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,_)}else{const _=ms(t);u=Z0(n.serverSyncTree_,l,_)}let m=l;u.length>0&&(m=U_(n,l)),zl(n.eventQueue_,m,u)}function qA(n,e){MT(n,"connected",e),!1===e&&function xO(n){V_(n,"onDisconnectEvents");const e=eb(n),t=OE();tT(n.onDisconnect_,Pr(),(i,l)=>{const u=function(n,e,t,r){return ET(e,new wT(t,n),r)}(i,l,n.serverSyncTree_,e);P_(t,i,u)});let r=[];tT(t,Pr(),(i,l)=>{r=r.concat(Z0(n.serverSyncTree_,i,l));const u=PT(n,i);U_(n,u)}),n.onDisconnect_=OE(),zl(n.eventQueue_,Pr(),r)}(n)}function MT(n,e,t){const r=new Wr("/.info/"+e),i=ms(t);n.infoData_.updateSnapshot(r,i);const l=Z0(n.infoSyncTree_,r,i);zl(n.eventQueue_,r,l)}function YE(n){return n.nextWriteId_++}function OT(n,e,t,r,i){V_(n,"set",{path:e.toString(),value:t,priority:r});const l=eb(n),u=ms(t,r),m=GE(n.serverSyncTree_,e),_=CT(u,m,l),D=YE(n),L=gT(n.serverSyncTree_,e,_,D,!0);KE(n.eventQueue_,L),n.server_.put(e.toString(),u.val(!0),(Q,oe)=>{const be="ok"===Q;be||Jo("set at "+e+" failed: "+Q);const Ge=Lf(n.serverSyncTree_,D,!be);zl(n.eventQueue_,e,Ge),function Bf(n,e,t,r){e&&dg(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let l=i;r&&(l+=": "+r);const u=new Error(l);u.code=i,e(u)}})}(0,i,Q,oe)});const $=PT(n,e);U_(n,$),zl(n.eventQueue_,$,[])}function V_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),to(t,...e)}function RT(n,e,t){return GE(n.serverSyncTree_,e,t)||Kn.EMPTY_NODE}function JE(n,e=n.transactionQueueTree_){if(e||QE(n,e),mg(e)){const t=JA(n,e);(0,he.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function LO(n,e,t){const r=t.map(D=>D.currentWriteId),i=RT(n,e,r);let l=i;const u=i.hash();for(let D=0;D<t.length;D++){const L=t[D];(0,he.hu)(0===L.status,"tryToSendTransactionQueue_: items in queue should all be run."),L.status=1,L.retryCount++;const $=I(e,L.path);l=l.updateChild($,L.currentOutputSnapshotRaw)}const m=l.val(!0),_=e;n.server_.put(_.toString(),m,D=>{V_(n,"transaction put response",{path:_.toString(),status:D});let L=[];if("ok"===D){const $=[];for(let Q=0;Q<t.length;Q++)t[Q].status=2,L=L.concat(Lf(n.serverSyncTree_,t[Q].currentWriteId)),t[Q].onComplete&&$.push(()=>t[Q].onComplete(null,!0,t[Q].currentOutputSnapshotResolved)),t[Q].unwatcher();QE(n,zE(n.transactionQueueTree_,e)),JE(n,n.transactionQueueTree_),zl(n.eventQueue_,e,L);for(let Q=0;Q<$.length;Q++)dg($[Q])}else{if("datastale"===D)for(let $=0;$<t.length;$++)t[$].status=3===t[$].status?4:0;else{Jo("transaction at "+_.toString()+" failed: "+D);for(let $=0;$<t.length;$++)t[$].status=4,t[$].abortReason=D}U_(n,e)}},u)}(n,Y0(e),t)}else BA(e)&&qE(e,t=>{JE(n,t)})}function U_(n,e){const t=YA(n,e),r=Y0(t);return function BO(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const _=e[m],D=I(t,_.path);let $,L=!1;if((0,he.hu)(null!==D,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)L=!0,$=_.abortReason,i=i.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)L=!0,$="maxretry",i=i.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0));else{const Q=RT(n,_.path,u);_.currentInputSnapshot=Q;const oe=e[m].update(Q.val());if(void 0!==oe){Q0("transaction failed: Data returned ",oe,_.path);let be=ms(oe);"object"==typeof oe&&null!=oe&&(0,he.r3)(oe,".priority")||(be=be.updatePriority(Q.getPriority()));const ft=_.currentWriteId,Qt=eb(n),At=CT(be,Q,Qt);_.currentOutputSnapshotRaw=be,_.currentOutputSnapshotResolved=At,_.currentWriteId=YE(n),u.splice(u.indexOf(ft),1),i=i.concat(gT(n.serverSyncTree_,_.path,At,_.currentWriteId,_.applyLocally)),i=i.concat(Lf(n.serverSyncTree_,ft,!0))}else L=!0,$="nodata",i=i.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0))}zl(n.eventQueue_,t,i),i=[],L&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===$?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error($),!1,null)))}QE(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)dg(r[m]);JE(n,n.transactionQueueTree_)}(n,JA(n,t),r),r}function YA(n,e){let t,r=n.transactionQueueTree_;for(t=or(e);null!==t&&void 0===mg(r);)r=zE(r,t),t=or(e=s(e));return r}function JA(n,e){const t=[];return QA(n,e,t),t.sort((r,i)=>r.order-i.order),t}function QA(n,e,t){const r=mg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);qE(e,i=>{QA(n,i,t)})}function QE(n,e){const t=mg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,IT(e,t.length>0?t:void 0)}qE(e,r=>{QE(n,r)})}function PT(n,e){const t=Y0(YA(n,e)),r=zE(n.transactionQueueTree_,e);return function gO(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{FT(n,i)}),FT(n,r),VA(r,i=>{FT(n,i)}),t}function FT(n,e){const t=mg(e);if(t){const r=[];let i=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,he.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):((0,he.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Lf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?IT(e,void 0):t.length=l+1,zl(n.eventQueue_,Y0(e),i);for(let u=0;u<r.length;u++)dg(r[u])}}const LT=function(n,e){const t=jO(n),r=t.namespace;return"firebase.com"===t.domain&&Ya(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ya("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Jo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new N0(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Wr(t.pathString)}},jO=function(n){let e="",t="",r="",i="",l="",u=!0,m="https",_=443;if("string"==typeof n){let D=n.indexOf("//");D>=0&&(m=n.substring(0,D-1),n=n.substring(D+2));let L=n.indexOf("/");-1===L&&(L=n.length);let $=n.indexOf("?");-1===$&&($=n.length),e=n.substring(0,Math.min(L,$)),L<$&&(i=function VO(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(L,$)));const Q=function UO(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Jo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,$)));D=e.indexOf(":"),D>=0?(u="https"===m||"wss"===m,_=parseInt(e.substring(D+1),10)):D=e.length;const oe=e.slice(0,D);if("localhost"===oe.toLowerCase())t="localhost";else if(oe.split(".").length<=2)t=oe;else{const be=e.indexOf(".");r=e.substring(0,be).toLowerCase(),t=e.substring(be+1),l=r}"ns"in Q&&(l=Q.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:u,scheme:m,pathString:i,namespace:l}};class Dl{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return y(this._path)?null:o(this._path)}get ref(){return new Nc(this._repo,this._path)}get _queryIdentifier(){const e=aA(this._queryParams),t=D0(e);return"{}"===t?"default":t}get _queryObject(){return aA(this._queryParams)}isEqual(e){if(!((e=(0,he.m9)(e))instanceof Dl))return!1;const t=this._repo===e._repo,r=j(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function a(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Nc extends Dl{constructor(e,t){super(e,t,new JI,!1)}get parent(){const e=d(this._path);return null===e?null:new Nc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function nN(n,e){return(n=(0,he.m9)(n))._checkNotDeleted("ref"),void 0!==e?function j_(n,e){return null===or((n=(0,he.m9)(n))._path)?function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),NT(n,e,t,r)}("child","path",e,!1):NT("child","path",e,!1),new Nc(n._repo,p(n._path,e))}(n._root,e):n._root}function BT(n,e){(function(n,e){if(".info"===or(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=(0,he.m9)(n))._path),function(n,e,t,r){r&&void 0===e||Q0((0,he.gK)(n,"value"),e,t)}("set",e,n._path,!1);const t=new he.BH;return OT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}(function zM(n){(0,he.hu)(!UE,"__referenceConstructor has already been defined"),UE=n})(Nc),function JM(n){(0,he.hu)(!HE,"__referenceConstructor has already been defined"),HE=n}(Nc);const VT={};function tk(n,e,t,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Ya("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),to("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,D,u=LT(l,i),m=u.repoInfo;typeof process<"u"&&(D=process.env.FIREBASE_DATABASE_EMULATOR_HOST),D?(_=!0,l=`http://${D}?ns=${m.namespace}`,u=LT(l,i),m=u.repoInfo):_=!u.repoInfo.secure;const L=i&&_?new If(If.OWNER):new wI(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ZE(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UA(n)}(t))throw new Error((0,he.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),y(u.path)||Ya("Database URL must point to the root of a Firebase Database (not including a child path).");const $=function rk(n,e,t,r){let i=VT[e.name];i||(i={},VT[e.name]=i);let l=i[n.toURLString()];return l&&Ya("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new IO(n,false,t,r),i[n.toURLString()]=l,l}(m,n,L,new bI(n.name,t));return new sk($,n)}class sk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function TO(n,e,t){if(n.stats_=wE(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ME(n.repoInfo_,(r,i,l,u)=>{zA(n,r,i,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>qA(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,he.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Sc(n.repoInfo_,e,(r,i,l,u)=>{zA(n,r,i,l,u)},r=>{qA(n,r)},r=>{!function SO(n,e){Qr(e,(t,r)=>{MT(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function qS(n,e){const t=n.toString();return bE[t]||(bE[t]=e()),bE[t]}(n.repoInfo_,()=>new uM(n.stats_,n.server_)),n.infoData_=new sM,n.infoSyncTree_=new MA({startListening:(r,i,l,u)=>{let m=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(m=Z0(n.infoSyncTree_,r._path,_),setTimeout(()=>{u("ok")},0)),m},stopListening:()=>{}}),MT(n,"connected",!1),n.serverSyncTree_=new MA({startListening:(r,i,l,u)=>(n.server_.listen(r,l,i,(m,_)=>{const D=u(m,_);zl(n.eventQueue_,r._path,D)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nc(this._repo,Pr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nk(n,e){const t=VT[e];(!t||t[n.key]!==n)&&Ya(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function KA(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ya("Cannot call "+e+" on a deleted database.")}}Sc.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Sc.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function ak(n){(function rE(n){nE=n})(Rr.SDK_VERSION),(0,Rr._registerComponent)(new bs.wA("database",(e,{instanceIdentifier:t})=>tk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Rr.registerVersion)(b0,"0.12.7",n),(0,Rr.registerVersion)(b0,"0.12.7","esm2017")}();const uk=[{path:"login",component:v0},{path:"registro",component:(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.db=function ok(n=(0,Rr.getApp)(),e){return(0,Rr._getProvider)(n,"database").getImmediate({identifier:e})}(),this.usuario={email:"",password:""}}ngOnInit(){}registro(){var t=this;return(0,xe.Z)(function*(){const{email:r,password:i}=t.usuario;t.authService.RegisterUser(r,i).then(l=>{ag().fire("Registrado Correctamente");var u=new v0(t.authService,t.router);u.usuario=t.usuario,u.logIn(),t.logger()}).catch(l=>(ag().fire(l.message),null))})()}logInGoogle(){var t=this;return(0,xe.Z)(function*(){t.authService.logInGoogle().then(r=>{ag().fire("Logueado Correctamente")}).catch(r=>(ag().fire(r.message),null))})()}logger(){var t=this;return(0,xe.Z)(function*(){let r=new Date,i=r.getDate()+"/"+r.getMonth()+"/"+r.getFullYear();console.log(`${t.usuario.email}, ${i} `),BT(nN(t.db,"users/"+i),{email:t.usuario.email,date:i})})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(v_),h.Y36(Wt.F0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:31,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["action","#","id","login-form"],[1,"heading"],[1,"left"],["for","email"],["type","email","name","email","id","email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","pass",3,"ngModel","ngModelChange"],["type","submit","value","Registrarse",3,"click"],[1,"right"],[1,"connect"],[1,"google-plus",3,"click"],[1,"fontawesome-google-plus"],["aria-hidden","true",1,"bi","bi-google"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4),h.TgZ(6,"title"),h._uU(7,"Ian Garcia"),h.qZA()(),h.TgZ(8,"body")(9,"form",5)(10,"div",6),h._uU(11,"Registro"),h.qZA(),h.TgZ(12,"div",7)(13,"label",8),h._uU(14,"Email"),h.qZA(),h._UZ(15,"br"),h.TgZ(16,"input",9),h.NdJ("ngModelChange",function(l){return r.usuario.email=l}),h.qZA(),h._UZ(17,"br"),h.TgZ(18,"label",10),h._uU(19,"Password"),h.qZA(),h._UZ(20,"br"),h.TgZ(21,"input",11),h.NdJ("ngModelChange",function(l){return r.usuario.password=l}),h.qZA(),h._UZ(22,"br"),h.TgZ(23,"input",12),h.NdJ("click",function(){return r.registro()}),h.qZA(),h._UZ(24,"br"),h.qZA(),h.TgZ(25,"div",13)(26,"div",14),h._uU(27,"Entrar con"),h.qZA(),h.TgZ(28,"a",15),h.NdJ("click",function(){return r.logInGoogle()}),h.TgZ(29,"span",16),h._UZ(30,"i",17),h.qZA()()()()()()),2&t&&(h.xp6(16),h.Q6J("ngModel",r.usuario.email),h.xp6(5),h.Q6J("ngModel",r.usuario.password))},directives:[Pi._Y,Pi.JL,Pi.F,Pi.Fj,Pi.JJ,Pi.On],styles:['div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}body[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}form#login-form[_ngcontent-%COMP%]{background:#fff;width:40em;margin:2em auto;overflow:hidden;position:relative;border-radius:.3em;box-shadow:0 0 .2em #000}form#login-form[_ngcontent-%COMP%]   div.heading[_ngcontent-%COMP%]{background:#f85f64;color:#fff;text-align:center;text-transform:uppercase;font-weight:700;padding:1.5em;font-size:1.1em}form#login-form[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:45%;float:left;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{width:45%;float:right;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]:before, form#login-form[_ngcontent-%COMP%]:after{position:absolute;top:0;right:0;left:0;bottom:0;margin:auto}form#login-form[_ngcontent-%COMP%]:before{content:"or";color:gray;height:.5em;width:.5em;top:1.75em}form#login-form[_ngcontent-%COMP%]:after{content:"";background:rgba(128,128,128,.3);height:8em;width:.12em;top:-7em;left:.5em;z-index:900;box-shadow:0 9.6em #8080804d}',"div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}"]}),n})()},{path:"quien-soy",component:eE},{path:"juegos",loadChildren:()=>G.e(69).then(G.bind(G,1069)).then(n=>n.JuegosModule)},{path:"",pathMatch:"full",component:XC},{path:"**",component:y0}];let dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Wt.Bz.forRoot(uk)],Wt.Bz]}),n})();var oN=G(9018),H_=G(5955),aN=G(4882),hk=G(6602),fk=G(2692);const pk=["addListener","removeListener"],gk=["addEventListener","removeEventListener"],mk=["on","off"];function Ra(n,e,t,r){if((0,zr.m)(t)&&(r=t,t=void 0),r)return Ra(n,e,t).pipe((0,fk.Z)(r));const[i,l]=function vk(n){return(0,zr.m)(n.addEventListener)&&(0,zr.m)(n.removeEventListener)}(n)?gk.map(u=>m=>n[u](e,m,t)):function _k(n){return(0,zr.m)(n.addListener)&&(0,zr.m)(n.removeListener)}(n)?pk.map(lN(n,e)):function yk(n){return(0,zr.m)(n.on)&&(0,zr.m)(n.off)}(n)?mk.map(lN(n,e)):[];if(!i&&(0,hk.z)(n))return(0,aN.z)(u=>Ra(u,e,t))((0,H_.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new rn.y(u=>{const m=(..._)=>u.next(1<_.length?_:_[0]);return i(m),()=>l(m)})}function lN(n,e){return t=>r=>n[t](e,r)}var bk=G(1830);const{isArray:Ck}=Array;function cN(n){return 1===n.length&&Ck(n[0])?n[0]:n}G(4121),G(5696);var rD=G(408);new rn.y(rD.Z);var fN=G(6651);function iD(...n){const e=(0,fN.jO)(n),t=cN(n);return t.length?new rn.y(r=>{let i=t.map(()=>[]),l=t.map(()=>!1);r.add(()=>{i=l=null});for(let u=0;!r.closed&&u<t.length;u++)(0,H_.Xf)(t[u]).subscribe((0,fs.x)(r,m=>{if(i[u].push(m),i.every(_=>_.length)){const _=i.map(D=>D.shift());r.next(e?e(..._):_),i.some((D,L)=>!D.length&&l[L])&&r.complete()}},()=>{l[u]=!0,!i[u].length&&r.complete()}));return()=>{i=l=null}}):oN.E}var pN=G(3729);function _o(n){return(0,To.e)((e,t)=>{(0,H_.Xf)(n).subscribe((0,fs.x)(t,()=>t.complete(),rD.Z)),!t.closed&&e.subscribe(t)})}var ql=G(5598),gN=G(8168);function jT(...n){const e=(0,fN.jO)(n);return(0,To.e)((t,r)=>{const i=n.length,l=new Array(i);let u=n.map(()=>!1),m=!1;for(let _=0;_<i;_++)(0,H_.Xf)(n[_]).subscribe((0,fs.x)(r,D=>{l[_]=D,!m&&!u[_]&&(u[_]=!0,(m=u.every(rl.y))&&(u=null))},rD.Z));t.subscribe((0,fs.x)(r,_=>{if(m){const D=[_,...l];r.next(e?e(...D):D)}}))})}Math,Math,Math;const LR=["*"],tP=["dialog"];function bg(n){return null!=n}function Z_(n){return(n||document.body).getBoundingClientRect()}const ON={animation:!0,transitionTimerDelayMs:5},YP=()=>{},{transitionTimerDelayMs:JP}=ON,lb=new Map,Pa=(n,e,t,r)=>{let i=r.context||{};const l=lb.get(e);if(l)switch(r.runningTransition){case"continue":return oN.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),lb.delete(e)}const u=t(e,r.animation,i)||YP;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),(0,Un.of)(void 0).pipe(function ZP(n){return e=>new rn.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const m=new en.x,_=new en.x,D=m.pipe(function Dk(...n){return e=>(0,pN.z)(e,(0,Un.of)(...n))}(!0));lb.set(e,{transition$:m,complete:()=>{_.next(),_.complete()},context:i});const L=function KP(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const $=Ra(e,"transitionend").pipe(_o(D),(0,qr.h)(({target:oe})=>oe===e));(function uN(...n){return 1===(n=cN(n)).length?(0,H_.Xf)(n[0]):new rn.y(function Ek(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,H_.Xf)(n[r]).subscribe((0,fs.x)(e,i=>{if(t){for(let l=0;l<t.length;l++)l!==r&&t[l].unsubscribe();t=null}e.next(i)})))}}(n))})(function UT(n=0,e,t=es.P){let r=-1;return null!=e&&((0,bk.K)(e)?t=e:r=e),new rn.y(i=>{let l=function wk(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},l)})}(L+JP).pipe(_o(D)),$,_).pipe(_o(D)).subscribe(()=>{lb.delete(e),n.run(()=>{u(),m.next(),m.complete()})})}),m.asObservable()};let uD=(()=>{class n{constructor(){this.animation=ON.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),VN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),jN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),$N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),WN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();var yo=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(yo||(yo={})),yo))();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const qN=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ZN(n){const e=Array.from(n.querySelectorAll(qN)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let nx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez,Pi.u5]]}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),sx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class Dg{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let GF=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,ql.q)(1)).subscribe(()=>{Pa(this._zone,this._el.nativeElement,(t,r)=>{r&&Z_(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Pa(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(h.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),h.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class ox{close(e){}dismiss(e){}}class $F{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new en.x,this._dismissed=new en.x,this._hidden=new en.x,e.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,u)=>{this._resolve=l,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(_o(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(_o(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function zP(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Un.of)(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),iD(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var hb=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(hb||(hb={})),hb))();let WF=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new en.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new en.x,this.hidden=new en.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,ql.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},u=iD(Pa(this._zone,t,()=>t.classList.remove("show"),r),Pa(this._zone,this._dialogEl.nativeElement,()=>{},r));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};iD(Pa(this._zone,this._elRef.nativeElement,(l,u)=>{u&&Z_(l),l.classList.add("show")},t),Pa(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ra(t,"keydown").pipe(_o(this._closed$),(0,qr.h)(i=>i.which===yo.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(hb.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ra(this._dialogEl.nativeElement,"mousedown").pipe(_o(this._closed$),(0,gN.b)(()=>r=!1),(0,sn.w)(()=>Ra(t,"mouseup").pipe(_o(this._closed$),(0,ql.q)(1))),(0,qr.h)(({target:i})=>t===i)).subscribe(()=>{r=!0}),Ra(t,"click").pipe(_o(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(hb.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=ZN(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Pa(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(b.K0),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&h.Gf(tP,7),2&t){let i;h.iGM(i=h.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(h.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),h.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),h.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:LR,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&t&&h.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),zF=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:l,paddingRight:u}=i;if(t>0){const m=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${m+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=u),i.overflow=l}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(b.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qF=(()=>{class n{constructor(t,r,i,l,u,m){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=u,this._ngZone=m,this._activeWindowCmptHasChanged=new en.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Ra(e,"focusin").pipe(_o(t),(0,ln.U)(l=>l.target));Ra(e,"keydown").pipe(_o(t),(0,qr.h)(l=>l.which===yo.Tab),jT(i)).subscribe(([l,u])=>{const[m,_]=ZN(e);(u===m||u===e)&&l.shiftKey&&(_.focus(),l.preventDefault()),u===_&&!l.shiftKey&&(m.focus(),l.preventDefault())}),r&&Ra(e,"click").pipe(_o(t),jT(i),(0,ln.U)(l=>l[1])).subscribe(l=>l.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i,l){const u=l.container instanceof HTMLElement?l.container:bg(l.container)?this._document.querySelector(l.container):this._document.body,m=this._rendererFactory.createRenderer(null,null),_=()=>{this._modalRefs.length||(m.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())};if(!u)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const D=new ox,L=this._getContentRef(t,l.injector||r,i,D,l);let $=!1!==l.backdrop?this._attachBackdrop(t,u):void 0,Q=this._attachWindowComponent(t,u,L),oe=new $F(Q,L,$,l.beforeDismiss);return this._registerModalRef(oe),this._registerWindowCmpt(Q),oe.result.then(_,_),D.close=be=>{oe.close(be)},D.dismiss=be=>{oe.dismiss(be)},this._applyWindowOptions(Q.instance,l),1===this._modalRefs.length&&m.addClass(this._document.body,"modal-open"),$&&$.instance&&(this._applyBackdropOptions($.instance,l),$.changeDetectorRef.detectChanges()),Q.changeDetectorRef.detectChanges(),oe}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let l=t.resolveComponentFactory(GF).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(t,r,i){let u=t.resolveComponentFactory(WF).create(this._injector,i.nodes);return this._applicationRef.attachView(u.hostView),r.appendChild(u.location.nativeElement),u}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{bg(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{bg(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,l,u){return i?i instanceof h.Rgc?this._createFromTemplateRef(i,l):function MN(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(t,r,i,l,u):new Dg([])}_createFromTemplateRef(t,r){const l=t.createEmbeddedView({$implicit:r,close(u){r.close(u)},dismiss(u){r.dismiss(u)}});return this._applicationRef.attachView(l),new Dg([l.rootNodes],l)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Dg([[r]])}_createFromComponent(t,r,i,l,u){const m=t.resolveComponentFactory(i),_=h.zs3.create({providers:[{provide:ox,useValue:l}],parent:r}),D=m.create(_),L=D.location.nativeElement;return u.scrollable&&L.classList.add("component-host-scrollable"),this._applicationRef.attachView(D.hostView),new Dg([[L]],D.hostView,D)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(b.K0),h.LFG(zF),h.LFG(h.FYo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZF=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uD))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KF=(()=>{class n{constructor(t,r,i,l){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=l}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.zs3),h.LFG(qF),h.LFG(ZF))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ax=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[KF]}),n})(),dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),Cx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),Ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),Dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),Ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})(),Tx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();new h.OlP("live announcer delay",{providedIn:"root",factory:function lL(){return 100}});let Sx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[b.ez]]}),n})();const cL=[BN,VN,jN,$N,WN,nx,sx,ax,dx,vx,wx,Cx,Ex,Dx,Ix,Tx,Sx];let uL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[cL,BN,VN,jN,$N,WN,nx,sx,ax,dx,vx,wx,Cx,Ex,Dx,Ix,Tx,Sx]}),n})();function dL(n,e){if(1&n&&(h.TgZ(0,"li",7)(1,"p",13),h._uU(2),h.qZA()()),2&n){const t=e.ngIf;h.xp6(2),h.Oqu(t.email)}}function hL(n,e){1&n&&(h.TgZ(0,"li",7)(1,"a",13),h._uU(2,"Login"),h.qZA()())}function fL(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",7)(1,"p",14),h.NdJ("click",function(){return h.CHM(t),h.oxw().logOut()}),h._uU(2,"LogOut"),h.qZA()()}}let pL=(()=>{class n{constructor(t){this.authService=t,this.estaLogueado=this.authService.isLoggedIn()}logOut(){var t=this;return(0,xe.Z)(function*(){t.authService.SignOut()})()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(v_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav"]],decls:21,vars:9,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["id","lNavBar",1,"container-fluid"],["width","40","height","40","src","https://www.centroculturalhaedo.edu.ar/wp-content/uploads/2016/05/UTN_logo.png","href","#"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","/quien-soy",1,"nav-link"],["id","rNavBar",1,"collapse","navbar-collapse","flex-grow-1","text-right"],[1,"navbar-nav","ms-auto","flex-nowrap"],["class","nav-item",4,"ngIf"],["href","/login",1,"nav-link","menu-item"],[1,"nav-link","menu-item",2,"cursor","pointer",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1),h._UZ(2,"img",2),h.TgZ(3,"button",3),h._UZ(4,"span",4),h.qZA(),h.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),h._uU(9,"Home"),h.qZA()(),h.TgZ(10,"li",7)(11,"a",9),h._uU(12,"Quien Soy"),h.qZA()()()()(),h.TgZ(13,"div",10)(14,"ul",11),h.YNc(15,dL,3,1,"li",12),h.ALo(16,"async"),h.YNc(17,hL,3,0,"li",12),h.ALo(18,"async"),h.YNc(19,fL,3,0,"li",12),h.ALo(20,"async"),h.qZA()()()),2&t&&(h.xp6(15),h.Q6J("ngIf",h.lcZ(16,3,r.estaLogueado)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(18,5,r.estaLogueado)),h.xp6(2),h.Q6J("ngIf",h.lcZ(20,7,r.estaLogueado)))},directives:[sS,b.O5],pipes:[b.Ov],styles:[""]}),n})();function gL(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2),h.NdJ("click",function(){return h.CHM(t),h.oxw().mostrarChat=!0}),h._UZ(1,"img",3),h.qZA()}}function mL(n,e){if(1&n&&(h.TgZ(0,"p",15),h._uU(1),h._UZ(2,"br"),h._uU(3),h.qZA()),2&n){const t=e.$implicit,r=h.oxw(2);h.Q6J("ngClass",r.usuario.uid==t.emisor?"enviado":"recibido"),h.xp6(1),h.AsE(" ",t.nombre," ",t.hora,": "),h.xp6(2),h.hij(" ",t.texto," ")}}const _L=function(){return{standalone:!0}};function yL(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4)(1,"div",5),h._uU(2," Chat "),h.TgZ(3,"div",6),h.NdJ("click",function(){return h.CHM(t),h.oxw().mostrarChat=!1}),h._uU(4,"X"),h.qZA()(),h.TgZ(5,"div",7)(6,"div",8),h.YNc(7,mL,4,4,"p",9),h.qZA()(),h.TgZ(8,"form",10),h.NdJ("ngSubmit",function(){return h.CHM(t),h.oxw().MensajeEnviado()}),h.TgZ(9,"input",11),h.NdJ("ngModelChange",function(i){return h.CHM(t),h.oxw().mensaje=i}),h.qZA(),h.TgZ(10,"div",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().MensajeEnviado()}),h.TgZ(11,"span",13),h._UZ(12,"img",14),h.qZA()()()()}if(2&n){const t=h.oxw();h.xp6(7),h.Q6J("ngForOf",t.mensajeList),h.xp6(2),h.Q6J("ngModel",t.mensaje)("ngModelOptions",h.DdM(3,_L))}}let vL=(()=>{class n{constructor(t){this.authS=t,this.mostrarChat=!1,this.mensaje="",this.mensajeList=[{emisor:"NTHkbRuDTtQ6XC6yhmMSpQgNM0U2",nombre:"",texto:"Hola",fecha:"4/5/2022",hora:"21:21"},{emisor:"id",nombre:"",texto:"Chau",fecha:"4/5/2022",hora:"21:22"},{emisor:"NTHkbRuDTtQ6XC6yhmMSpQgNM0U2",nombre:"",texto:"Hola de nuevo",fecha:"4/5/2022",hora:"21:23"},{emisor:"id",nombre:"",texto:"Chau de nuevo",fecha:"4/5/2022",hora:"21:24"}]}ngOnInit(){this.authS.isLoggedIn().subscribe(t=>{this.usuario=t})}MensajeEnviado(){console.log(this.mensaje),console.log(this.usuario);let t=new Date,r={emisor:this.usuario.uid,nombre:this.usuario.email,texto:this.mensaje,fecha:`${t.getDay()}/${t.getMonth()}/${t.getFullYear()}`,hora:`${t.getHours()}:${t.getMinutes()}`};null!=this.usuario.displayName&&(r={emisor:this.usuario.uid,nombre:this.usuario.displayName,texto:this.mensaje,fecha:`${t.getDay()}/${t.getMonth()}/${t.getFullYear()}`,hora:`${t.getHours()}:${t.getMinutes()}`}),console.log(r),this.mensajeList.push(r),this.mensaje="",setTimeout(()=>{this.ScrollAUltimoMensajeByClassname()},10)}ScrollAUltimoMensajeByClassname(){let t=document.getElementsByClassName("msj"),i=t[t.length-1].offsetTop;document.getElementById("contenedorChat").scrollTop=i}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(v_))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-chat"]],decls:2,vars:2,consts:[["class","chatContainer",3,"click",4,"ngIf"],["class","card text-center cardContainer",4,"ngIf"],[1,"chatContainer",3,"click"],["src","https://vignette.wikia.nocookie.net/lab-rats/images/a/a3/Chat-icon.png/revision/latest/scale-to-width-down/480?cb=20151227002733","alt","chatIcon",1,"chatIcon"],[1,"card","text-center","cardContainer"],[1,"card-header"],[1,"closeIcon",3,"click"],[1,"card-body"],["id","contenedorChat",1,"contenedorChat","h-100"],["class","msj p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","input-group",3,"ngSubmit"],["type","text","placeholder","Envie un mensaje",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"input-group-append",3,"click"],["id","basic-addon2",1,"input-group-text"],["src","https://vignette.wikia.nocookie.net/lab-rats/images/a/a3/Chat-icon.png/revision/latest/scale-to-width-down/480?cb=20151227002733","width","30px","height","38px","alt","Envie un mensaje",1,"inputFoto"],[1,"msj","p-2",3,"ngClass"]],template:function(t,r){1&t&&(h.YNc(0,gL,2,0,"div",0),h.YNc(1,yL,13,4,"div",1)),2&t&&(h.Q6J("ngIf",r.usuario&&!r.mostrarChat),h.xp6(1),h.Q6J("ngIf",r.usuario&&r.mostrarChat))},directives:[b.O5,b.sg,b.mk,Pi._Y,Pi.JL,Pi.F,Pi.Fj,Pi.JJ,Pi.On],styles:[".cardContainer[_ngcontent-%COMP%]{width:300px;height:500px;position:fixed;right:.5rem;bottom:.5rem}.card-header[_ngcontent-%COMP%]{background-color:#f85f64;color:#fff;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:.5rem}.inputFoto[_ngcontent-%COMP%]:active{transform:scale(.75)}.enviado[_ngcontent-%COMP%]{display:block;float:right;background-color:#6495ed;color:#fff;min-width:50.01%;border-radius:10px;text-align:left}.recibido[_ngcontent-%COMP%]{display:block;float:left;background-color:#dc143c;color:#fff;min-width:50.01%;border-radius:10px;text-align:left}.contenedorChat[_ngcontent-%COMP%]{overflow:scroll;padding:.3rem}.contenedorChat[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.chatContainer[_ngcontent-%COMP%]{width:60px;height:60px;position:fixed;right:.5rem;bottom:.5rem;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:gray;border-radius:100%;box-shadow:0 0 10px 2px}.chatIcon[_ngcontent-%COMP%]{width:40px;height:40px}.closeIcon[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:0rem;cursor:pointer}"]}),n})(),bL=(()=>{class n{constructor(){this.title="TPSALAJUEGOS"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-nav")(1,"router-outlet")(2,"app-chat")},directives:[pL,Wt.lC,vL],styles:[""]}),n})();const Ax_firebaseConfig={apiKey:"AIzaSyCrEF2mAkH45Kt3c5otkMuj3lmh2JzmXaE",authDomain:"tpsaladejuegos-8b998.firebaseapp.com",projectId:"tpsaladejuegos-8b998",storageBucket:"tpsaladejuegos-8b998.appspot.com",messagingSenderId:"985909907155",appId:"1:985909907155:web:c27c368d47cdb9e7404e26"};var wL=G(5732);let CL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[bL]}),n.\u0275inj=h.cJS({providers:[],imports:[[wr,dk,uL,Pi.u5,Or.hO.initializeApp(Ax_firebaseConfig),wL.JF]]}),n})();(0,h.G48)(),Lr().bootstrapModule(CL).catch(n=>console.error(n))},4762:(Nt,Ve,G)=>{"use strict";function ve(ye,Le){var Ne={};for(var Ee in ye)Object.prototype.hasOwnProperty.call(ye,Ee)&&Le.indexOf(Ee)<0&&(Ne[Ee]=ye[Ee]);if(null!=ye&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Ee=Object.getOwnPropertySymbols(ye);lt<Ee.length;lt++)Le.indexOf(Ee[lt])<0&&Object.prototype.propertyIsEnumerable.call(ye,Ee[lt])&&(Ne[Ee[lt]]=ye[Ee[lt]])}return Ne}function Se(ye,Le,Ne,Ee){return new(Ne||(Ne=Promise))(function(He,Jt){function In(Tt){try{Dt(Ee.next(Tt))}catch(Tn){Jt(Tn)}}function qn(Tt){try{Dt(Ee.throw(Tt))}catch(Tn){Jt(Tn)}}function Dt(Tt){Tt.done?He(Tt.value):function lt(He){return He instanceof Ne?He:new Ne(function(Jt){Jt(He)})}(Tt.value).then(In,qn)}Dt((Ee=Ee.apply(ye,Le||[])).next())})}function Be(ye){return this instanceof Be?(this.v=ye,this):new Be(ye)}function Qe(ye,Le,Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Ee=Ne.apply(ye,Le||[]),He=[];return lt={},Jt("next"),Jt("throw"),Jt("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Jt(xn){Ee[xn]&&(lt[xn]=function(Ir){return new Promise(function(wn,Hr){He.push([xn,Ir,wn,Hr])>1||In(xn,Ir)})})}function In(xn,Ir){try{!function qn(xn){xn.value instanceof Be?Promise.resolve(xn.value.v).then(Dt,Tt):Tn(He[0][2],xn)}(Ee[xn](Ir))}catch(wn){Tn(He[0][3],wn)}}function Dt(xn){In("next",xn)}function Tt(xn){In("throw",xn)}function Tn(xn,Ir){xn(Ir),He.shift(),He.length&&In(He[0][0],He[0][1])}}function wt(ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,Le=ye[Symbol.asyncIterator];return Le?Le.call(ye):(ye=function we(ye){var Le="function"==typeof Symbol&&Symbol.iterator,Ne=Le&&ye[Le],Ee=0;if(Ne)return Ne.call(ye);if(ye&&"number"==typeof ye.length)return{next:function(){return ye&&Ee>=ye.length&&(ye=void 0),{value:ye&&ye[Ee++],done:!ye}}};throw new TypeError(Le?"Object is not iterable.":"Symbol.iterator is not defined.")}(ye),Ne={},Ee("next"),Ee("throw"),Ee("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne);function Ee(He){Ne[He]=ye[He]&&function(Jt){return new Promise(function(In,qn){!function lt(He,Jt,In,qn){Promise.resolve(qn).then(function(Dt){He({value:Dt,done:In})},Jt)}(In,qn,(Jt=ye[He](Jt)).done,Jt.value)})}}}G.d(Ve,{_T:()=>ve,mG:()=>Se,qq:()=>Be,FC:()=>Qe,KL:()=>wt})},8692:(Nt,Ve,G)=>{"use strict";G.d(Ve,{mr:()=>It,Ov:()=>Po,ez:()=>hi,K0:()=>ke,Do:()=>Je,V_:()=>se,Ye:()=>We,S$:()=>Be,mk:()=>jn,sg:()=>ys,O5:()=>vs,tP:()=>Ki,b0:()=>wt,lw:()=>Se,EM:()=>Kr,JF:()=>Xn,NF:()=>ri,PM:()=>ii,w_:()=>Te,bD:()=>ji,q:()=>Y,Mx:()=>Zr,HT:()=>pe});var b=G(4537);let h=null;function Y(){return h}function pe(P){h||(h=P)}class Te{}const ke=new b.OlP("DocumentToken");let Se=(()=>{class P{historyGo(R){throw new Error("Not implemented")}}return P.\u0275fac=function(R){return new(R||P)},P.\u0275prov=b.Yz7({token:P,factory:function(){return function Me(){return(0,b.LFG)(ae)}()},providedIn:"platform"}),P})();const se=new b.OlP("Location Initialized");let ae=(()=>{class P extends Se{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(R){const J=Y().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",R,!1),()=>J.removeEventListener("popstate",R)}onHashChange(R){const J=Y().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",R,!1),()=>J.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,J,ge){we()?this._history.pushState(R,J,ge):this.location.hash=ge}replaceState(R,J,ge){we()?this._history.replaceState(R,J,ge):this.location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return P.\u0275fac=function(R){return new(R||P)(b.LFG(ke))},P.\u0275prov=b.Yz7({token:P,factory:function(){return function at(){return new ae((0,b.LFG)(ke))}()},providedIn:"platform"}),P})();function we(){return!!window.history.pushState}function Ae(P,q){if(0==P.length)return q;if(0==q.length)return P;let R=0;return P.endsWith("/")&&R++,q.startsWith("/")&&R++,2==R?P+q.substring(1):1==R?P+q:P+"/"+q}function Ze(P){const q=P.match(/#|\?|$/),R=q&&q.index||P.length;return P.slice(0,R-("/"===P[R-1]?1:0))+P.slice(R)}function ut(P){return P&&"?"!==P[0]?"?"+P:P}let Be=(()=>{class P{historyGo(R){throw new Error("Not implemented")}}return P.\u0275fac=function(R){return new(R||P)},P.\u0275prov=b.Yz7({token:P,factory:function(){return function Qe(P){const q=(0,b.LFG)(ke).location;return new wt((0,b.LFG)(Se),q&&q.origin||"")}()},providedIn:"root"}),P})();const It=new b.OlP("appBaseHref");let wt=(()=>{class P extends Be{constructor(R,J){if(super(),this._platformLocation=R,this._removeListenerFns=[],null==J&&(J=this._platformLocation.getBaseHrefFromDOM()),null==J)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=J}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return Ae(this._baseHref,R)}path(R=!1){const J=this._platformLocation.pathname+ut(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&R?`${J}${ge}`:J}pushState(R,J,ge,$e){const it=this.prepareExternalUrl(ge+ut($e));this._platformLocation.pushState(R,J,it)}replaceState(R,J,ge,$e){const it=this.prepareExternalUrl(ge+ut($e));this._platformLocation.replaceState(R,J,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return P.\u0275fac=function(R){return new(R||P)(b.LFG(Se),b.LFG(It,8))},P.\u0275prov=b.Yz7({token:P,factory:P.\u0275fac}),P})(),Je=(()=>{class P extends Be{constructor(R,J){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(R){const J=Ae(this._baseHref,R);return J.length>0?"#"+J:J}pushState(R,J,ge,$e){let it=this.prepareExternalUrl(ge+ut($e));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.pushState(R,J,it)}replaceState(R,J,ge,$e){let it=this.prepareExternalUrl(ge+ut($e));0==it.length&&(it=this._platformLocation.pathname),this._platformLocation.replaceState(R,J,it)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return P.\u0275fac=function(R){return new(R||P)(b.LFG(Se),b.LFG(It,8))},P.\u0275prov=b.Yz7({token:P,factory:P.\u0275fac}),P})(),We=(()=>{class P{constructor(R,J){this._subject=new b.vpe,this._urlChangeListeners=[],this._platformStrategy=R;const ge=this._platformStrategy.getBaseHref();this._platformLocation=J,this._baseHref=Ze(ue(ge)),this._platformStrategy.onPopState($e=>{this._subject.emit({url:this.path(!0),pop:!0,state:$e.state,type:$e.type})})}path(R=!1){return this.normalize(this._platformStrategy.path(R))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(R,J=""){return this.path()==this.normalize(R+ut(J))}normalize(R){return P.stripTrailingSlash(function pt(P,q){return P&&q.startsWith(P)?q.substring(P.length):q}(this._baseHref,ue(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._platformStrategy.prepareExternalUrl(R)}go(R,J="",ge=null){this._platformStrategy.pushState(ge,"",R,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ut(J)),ge)}replaceState(R,J="",ge=null){this._platformStrategy.replaceState(ge,"",R,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ut(J)),ge)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(R=0){this._platformStrategy.historyGo?.(R)}onUrlChange(R){this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)}))}_notifyUrlChangeListeners(R="",J){this._urlChangeListeners.forEach(ge=>ge(R,J))}subscribe(R,J,ge){return this._subject.subscribe({next:R,error:J,complete:ge})}}return P.normalizeQueryParams=ut,P.joinWithSlash=Ae,P.stripTrailingSlash=Ze,P.\u0275fac=function(R){return new(R||P)(b.LFG(Be),b.LFG(Se))},P.\u0275prov=b.Yz7({token:P,factory:function(){return function Xe(){return new We((0,b.LFG)(Be),(0,b.LFG)(Se))}()},providedIn:"root"}),P})();function ue(P){return P.replace(/\/index.html$/,"")}function Zr(P,q){q=encodeURIComponent(q);for(const R of P.split(";")){const J=R.indexOf("="),[ge,$e]=-1==J?[R,""]:[R.slice(0,J),R.slice(J+1)];if(ge.trim()===q)return decodeURIComponent($e)}return null}let jn=(()=>{class P{constructor(R,J,ge,$e){this._iterableDiffers=R,this._keyValueDiffers=J,this._ngEl=ge,this._renderer=$e,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(R){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof R?R.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(R){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof R?R.split(/\s+/):R,this._rawClass&&((0,b.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const R=this._iterableDiffer.diff(this._rawClass);R&&this._applyIterableChanges(R)}else if(this._keyValueDiffer){const R=this._keyValueDiffer.diff(this._rawClass);R&&this._applyKeyValueChanges(R)}}_applyKeyValueChanges(R){R.forEachAddedItem(J=>this._toggleClass(J.key,J.currentValue)),R.forEachChangedItem(J=>this._toggleClass(J.key,J.currentValue)),R.forEachRemovedItem(J=>{J.previousValue&&this._toggleClass(J.key,!1)})}_applyIterableChanges(R){R.forEachAddedItem(J=>{if("string"!=typeof J.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,b.AaK)(J.item)}`);this._toggleClass(J.item,!0)}),R.forEachRemovedItem(J=>this._toggleClass(J.item,!1))}_applyClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(J=>this._toggleClass(J,!0)):Object.keys(R).forEach(J=>this._toggleClass(J,!!R[J])))}_removeClasses(R){R&&(Array.isArray(R)||R instanceof Set?R.forEach(J=>this._toggleClass(J,!1)):Object.keys(R).forEach(J=>this._toggleClass(J,!1)))}_toggleClass(R,J){(R=R.trim())&&R.split(/\s+/g).forEach(ge=>{J?this._renderer.addClass(this._ngEl.nativeElement,ge):this._renderer.removeClass(this._ngEl.nativeElement,ge)})}}return P.\u0275fac=function(R){return new(R||P)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),P})();class _s{constructor(q,R,J,ge){this.$implicit=q,this.ngForOf=R,this.index=J,this.count=ge}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ys=(()=>{class P{constructor(R,J,ge){this._viewContainer=R,this._template=J,this._differs=ge,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const J=this._viewContainer;R.forEachOperation((ge,$e,it)=>{if(null==ge.previousIndex)J.createEmbeddedView(this._template,new _s(ge.item,this._ngForOf,-1,-1),null===it?void 0:it);else if(null==it)J.remove(null===$e?void 0:$e);else if(null!==$e){const Et=J.get($e);J.move(Et,it),qi(Et,ge)}});for(let ge=0,$e=J.length;ge<$e;ge++){const Et=J.get(ge).context;Et.index=ge,Et.count=$e,Et.ngForOf=this._ngForOf}R.forEachIdentityChange(ge=>{qi(J.get(ge.currentIndex),ge)})}static ngTemplateContextGuard(R,J){return!0}}return P.\u0275fac=function(R){return new(R||P)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),P})();function qi(P,q){P.context.$implicit=q.item}let vs=(()=>{class P{constructor(R,J){this._viewContainer=R,this._context=new Zi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){kr("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){kr("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,J){return!0}}return P.\u0275fac=function(R){return new(R||P)(b.Y36(b.s_b),b.Y36(b.Rgc))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),P})();class Zi{constructor(){this.$implicit=null,this.ngIf=null}}function kr(P,q){if(q&&!q.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,b.AaK)(q)}'.`)}let Ki=(()=>{class P{constructor(R){this._viewContainerRef=R,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(R){if(R.ngTemplateOutlet){const J=this._viewContainerRef;this._viewRef&&J.remove(J.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?J.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&R.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(R){return new(R||P)(b.Y36(b.s_b))},P.\u0275dir=b.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[b.TTD]}),P})();class _r{createSubscription(q,R){return q.subscribe({next:R,error:J=>{throw J}})}dispose(q){q.unsubscribe()}onDestroy(q){q.unsubscribe()}}class Ui{createSubscription(q,R){return q.then(R,J=>{throw J})}dispose(q){}onDestroy(q){}}const di=new Ui,Ro=new _r;let Po=(()=>{class P{constructor(R){this._ref=R,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(R){return this._obj?R!==this._obj?(this._dispose(),this.transform(R)):this._latestValue:(R&&this._subscribe(R),this._latestValue)}_subscribe(R){this._obj=R,this._strategy=this._selectStrategy(R),this._subscription=this._strategy.createSubscription(R,J=>this._updateLatestValue(R,J))}_selectStrategy(R){if((0,b.QGY)(R))return di;if((0,b.F4k)(R))return Ro;throw function Er(P,q){return new b.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(R,J){R===this._obj&&(this._latestValue=J,this._ref.markForCheck())}}return P.\u0275fac=function(R){return new(R||P)(b.Y36(b.sBO,16))},P.\u0275pipe=b.Yjl({name:"async",type:P,pure:!1}),P})(),hi=(()=>{class P{}return P.\u0275fac=function(R){return new(R||P)},P.\u0275mod=b.oAB({type:P}),P.\u0275inj=b.cJS({}),P})();const ji="browser";function ri(P){return P===ji}function ii(P){return"server"===P}let Kr=(()=>{class P{}return P.\u0275prov=(0,b.Yz7)({token:P,providedIn:"root",factory:()=>new ws((0,b.LFG)(ke),window)}),P})();class ws{constructor(q,R){this.document=q,this.window=R,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const R=function fi(P,q){const R=P.getElementById(q)||P.getElementsByName(q)[0];if(R)return R;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const J=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let ge=J.currentNode;for(;ge;){const $e=ge.shadowRoot;if($e){const it=$e.getElementById(q)||$e.querySelector(`[name="${q}"]`);if(it)return it}ge=J.nextNode()}}return null}(this.document,q);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=q)}}scrollToElement(q){const R=q.getBoundingClientRect(),J=R.left+this.window.pageXOffset,ge=R.top+this.window.pageYOffset,$e=this.offset();this.window.scrollTo(J-$e[0],ge-$e[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=Gr(this.window.history)||Gr(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Gr(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Xn{}},5732:(Nt,Ve,G)=>{"use strict";G.d(Ve,{eN:()=>He,JF:()=>Rt});var b=G(8692),h=G(4537),Y=G(4945),ve=G(818),pe=G(4551),Te=G(4970),ke=G(7969);class Se{}class Me{}class se{constructor(ce){this.normalizedNames=new Map,this.lazyUpdate=null,ce?this.lazyInit="string"==typeof ce?()=>{this.headers=new Map,ce.split("\n").forEach(me=>{const ct=me.indexOf(":");if(ct>0){const Ue=me.slice(0,ct),Ye=Ue.toLowerCase(),Ct=me.slice(ct+1).trim();this.maybeSetNormalizedName(Ue,Ye),this.headers.has(Ye)?this.headers.get(Ye).push(Ct):this.headers.set(Ye,[Ct])}})}:()=>{this.headers=new Map,Object.keys(ce).forEach(me=>{let ct=ce[me];const Ue=me.toLowerCase();"string"==typeof ct&&(ct=[ct]),ct.length>0&&(this.headers.set(Ue,ct),this.maybeSetNormalizedName(me,Ue))})}:this.headers=new Map}has(ce){return this.init(),this.headers.has(ce.toLowerCase())}get(ce){this.init();const me=this.headers.get(ce.toLowerCase());return me&&me.length>0?me[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ce){return this.init(),this.headers.get(ce.toLowerCase())||null}append(ce,me){return this.clone({name:ce,value:me,op:"a"})}set(ce,me){return this.clone({name:ce,value:me,op:"s"})}delete(ce,me){return this.clone({name:ce,value:me,op:"d"})}maybeSetNormalizedName(ce,me){this.normalizedNames.has(me)||this.normalizedNames.set(me,ce)}init(){this.lazyInit&&(this.lazyInit instanceof se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ce=>this.applyUpdate(ce)),this.lazyUpdate=null))}copyFrom(ce){ce.init(),Array.from(ce.headers.keys()).forEach(me=>{this.headers.set(me,ce.headers.get(me)),this.normalizedNames.set(me,ce.normalizedNames.get(me))})}clone(ce){const me=new se;return me.lazyInit=this.lazyInit&&this.lazyInit instanceof se?this.lazyInit:this,me.lazyUpdate=(this.lazyUpdate||[]).concat([ce]),me}applyUpdate(ce){const me=ce.name.toLowerCase();switch(ce.op){case"a":case"s":let ct=ce.value;if("string"==typeof ct&&(ct=[ct]),0===ct.length)return;this.maybeSetNormalizedName(ce.name,me);const Ue=("a"===ce.op?this.headers.get(me):void 0)||[];Ue.push(...ct),this.headers.set(me,Ue);break;case"d":const Ye=ce.value;if(Ye){let Ct=this.headers.get(me);if(!Ct)return;Ct=Ct.filter(Cn=>-1===Ye.indexOf(Cn)),0===Ct.length?(this.headers.delete(me),this.normalizedNames.delete(me)):this.headers.set(me,Ct)}else this.headers.delete(me),this.normalizedNames.delete(me)}}forEach(ce){this.init(),Array.from(this.normalizedNames.keys()).forEach(me=>ce(this.normalizedNames.get(me),this.headers.get(me)))}}class ae{encodeKey(ce){return Ze(ce)}encodeValue(ce){return Ze(ce)}decodeKey(ce){return decodeURIComponent(ce)}decodeValue(ce){return decodeURIComponent(ce)}}const at=/%(\d[a-f0-9])/gi,Ae={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Ze(Re){return encodeURIComponent(Re).replace(at,(ce,me)=>Ae[me]??ce)}function ut(Re){return`${Re}`}class Be{constructor(ce={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ce.encoder||new ae,ce.fromString){if(ce.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function we(Re,ce){const me=new Map;return Re.length>0&&Re.replace(/^\?/,"").split("&").forEach(Ue=>{const Ye=Ue.indexOf("="),[Ct,Cn]=-1==Ye?[ce.decodeKey(Ue),""]:[ce.decodeKey(Ue.slice(0,Ye)),ce.decodeValue(Ue.slice(Ye+1))],$t=me.get(Ct)||[];$t.push(Cn),me.set(Ct,$t)}),me}(ce.fromString,this.encoder)}else ce.fromObject?(this.map=new Map,Object.keys(ce.fromObject).forEach(me=>{const ct=ce.fromObject[me];this.map.set(me,Array.isArray(ct)?ct:[ct])})):this.map=null}has(ce){return this.init(),this.map.has(ce)}get(ce){this.init();const me=this.map.get(ce);return me?me[0]:null}getAll(ce){return this.init(),this.map.get(ce)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ce,me){return this.clone({param:ce,value:me,op:"a"})}appendAll(ce){const me=[];return Object.keys(ce).forEach(ct=>{const Ue=ce[ct];Array.isArray(Ue)?Ue.forEach(Ye=>{me.push({param:ct,value:Ye,op:"a"})}):me.push({param:ct,value:Ue,op:"a"})}),this.clone(me)}set(ce,me){return this.clone({param:ce,value:me,op:"s"})}delete(ce,me){return this.clone({param:ce,value:me,op:"d"})}toString(){return this.init(),this.keys().map(ce=>{const me=this.encoder.encodeKey(ce);return this.map.get(ce).map(ct=>me+"="+this.encoder.encodeValue(ct)).join("&")}).filter(ce=>""!==ce).join("&")}clone(ce){const me=new Be({encoder:this.encoder});return me.cloneFrom=this.cloneFrom||this,me.updates=(this.updates||[]).concat(ce),me}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ce=>this.map.set(ce,this.cloneFrom.map.get(ce))),this.updates.forEach(ce=>{switch(ce.op){case"a":case"s":const me=("a"===ce.op?this.map.get(ce.param):void 0)||[];me.push(ut(ce.value)),this.map.set(ce.param,me);break;case"d":if(void 0===ce.value){this.map.delete(ce.param);break}{let ct=this.map.get(ce.param)||[];const Ue=ct.indexOf(ut(ce.value));-1!==Ue&&ct.splice(Ue,1),ct.length>0?this.map.set(ce.param,ct):this.map.delete(ce.param)}}}),this.cloneFrom=this.updates=null)}}class It{constructor(){this.map=new Map}set(ce,me){return this.map.set(ce,me),this}get(ce){return this.map.has(ce)||this.map.set(ce,ce.defaultValue()),this.map.get(ce)}delete(ce){return this.map.delete(ce),this}has(ce){return this.map.has(ce)}keys(){return this.map.keys()}}function Je(Re){return typeof ArrayBuffer<"u"&&Re instanceof ArrayBuffer}function We(Re){return typeof Blob<"u"&&Re instanceof Blob}function Xe(Re){return typeof FormData<"u"&&Re instanceof FormData}class ue{constructor(ce,me,ct,Ue){let Ye;if(this.url=me,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ce.toUpperCase(),function wt(Re){switch(Re){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ue?(this.body=void 0!==ct?ct:null,Ye=Ue):Ye=ct,Ye&&(this.reportProgress=!!Ye.reportProgress,this.withCredentials=!!Ye.withCredentials,Ye.responseType&&(this.responseType=Ye.responseType),Ye.headers&&(this.headers=Ye.headers),Ye.context&&(this.context=Ye.context),Ye.params&&(this.params=Ye.params)),this.headers||(this.headers=new se),this.context||(this.context=new It),this.params){const Ct=this.params.toString();if(0===Ct.length)this.urlWithParams=me;else{const Cn=me.indexOf("?");this.urlWithParams=me+(-1===Cn?"?":Cn<me.length-1?"&":"")+Ct}}else this.params=new Be,this.urlWithParams=me}serializeBody(){return null===this.body?null:Je(this.body)||We(this.body)||Xe(this.body)||function pt(Re){return typeof URLSearchParams<"u"&&Re instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Be?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Xe(this.body)?null:We(this.body)?this.body.type||null:Je(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Be?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ce={}){const me=ce.method||this.method,ct=ce.url||this.url,Ue=ce.responseType||this.responseType,Ye=void 0!==ce.body?ce.body:this.body,Ct=void 0!==ce.withCredentials?ce.withCredentials:this.withCredentials,Cn=void 0!==ce.reportProgress?ce.reportProgress:this.reportProgress;let $t=ce.headers||this.headers,an=ce.params||this.params;const Yn=ce.context??this.context;return void 0!==ce.setHeaders&&($t=Object.keys(ce.setHeaders).reduce((Vn,Jn)=>Vn.set(Jn,ce.setHeaders[Jn]),$t)),ce.setParams&&(an=Object.keys(ce.setParams).reduce((Vn,Jn)=>Vn.set(Jn,ce.setParams[Jn]),an)),new ue(me,ct,Ye,{params:an,headers:$t,context:Yn,reportProgress:Cn,responseType:Ue,withCredentials:Ct})}}var De=(()=>((De=De||{})[De.Sent=0]="Sent",De[De.UploadProgress=1]="UploadProgress",De[De.ResponseHeader=2]="ResponseHeader",De[De.DownloadProgress=3]="DownloadProgress",De[De.Response=4]="Response",De[De.User=5]="User",De))();class ye{constructor(ce,me=200,ct="OK"){this.headers=ce.headers||new se,this.status=void 0!==ce.status?ce.status:me,this.statusText=ce.statusText||ct,this.url=ce.url||null,this.ok=this.status>=200&&this.status<300}}class Le extends ye{constructor(ce={}){super(ce),this.type=De.ResponseHeader}clone(ce={}){return new Le({headers:ce.headers||this.headers,status:void 0!==ce.status?ce.status:this.status,statusText:ce.statusText||this.statusText,url:ce.url||this.url||void 0})}}class Ne extends ye{constructor(ce={}){super(ce),this.type=De.Response,this.body=void 0!==ce.body?ce.body:null}clone(ce={}){return new Ne({body:void 0!==ce.body?ce.body:this.body,headers:ce.headers||this.headers,status:void 0!==ce.status?ce.status:this.status,statusText:ce.statusText||this.statusText,url:ce.url||this.url||void 0})}}class Ee extends ye{constructor(ce){super(ce,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ce.url||"(unknown url)"}`:`Http failure response for ${ce.url||"(unknown url)"}: ${ce.status} ${ce.statusText}`,this.error=ce.error||null}}function lt(Re,ce){return{body:ce,headers:Re.headers,context:Re.context,observe:Re.observe,params:Re.params,reportProgress:Re.reportProgress,responseType:Re.responseType,withCredentials:Re.withCredentials}}let He=(()=>{class Re{constructor(me){this.handler=me}request(me,ct,Ue={}){let Ye;if(me instanceof ue)Ye=me;else{let $t,an;$t=Ue.headers instanceof se?Ue.headers:new se(Ue.headers),Ue.params&&(an=Ue.params instanceof Be?Ue.params:new Be({fromObject:Ue.params})),Ye=new ue(me,ct,void 0!==Ue.body?Ue.body:null,{headers:$t,context:Ue.context,params:an,reportProgress:Ue.reportProgress,responseType:Ue.responseType||"json",withCredentials:Ue.withCredentials})}const Ct=(0,Y.of)(Ye).pipe((0,pe.b)($t=>this.handler.handle($t)));if(me instanceof ue||"events"===Ue.observe)return Ct;const Cn=Ct.pipe((0,Te.h)($t=>$t instanceof Ne));switch(Ue.observe||"body"){case"body":switch(Ye.responseType){case"arraybuffer":return Cn.pipe((0,ke.U)($t=>{if(null!==$t.body&&!($t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return $t.body}));case"blob":return Cn.pipe((0,ke.U)($t=>{if(null!==$t.body&&!($t.body instanceof Blob))throw new Error("Response is not a Blob.");return $t.body}));case"text":return Cn.pipe((0,ke.U)($t=>{if(null!==$t.body&&"string"!=typeof $t.body)throw new Error("Response is not a string.");return $t.body}));default:return Cn.pipe((0,ke.U)($t=>$t.body))}case"response":return Cn;default:throw new Error(`Unreachable: unhandled observe type ${Ue.observe}}`)}}delete(me,ct={}){return this.request("DELETE",me,ct)}get(me,ct={}){return this.request("GET",me,ct)}head(me,ct={}){return this.request("HEAD",me,ct)}jsonp(me,ct){return this.request("JSONP",me,{params:(new Be).append(ct,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(me,ct={}){return this.request("OPTIONS",me,ct)}patch(me,ct,Ue={}){return this.request("PATCH",me,lt(Ue,ct))}post(me,ct,Ue={}){return this.request("POST",me,lt(Ue,ct))}put(me,ct,Ue={}){return this.request("PUT",me,lt(Ue,ct))}}return Re.\u0275fac=function(me){return new(me||Re)(h.LFG(Se))},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Jt{constructor(ce,me){this.next=ce,this.interceptor=me}handle(ce){return this.interceptor.intercept(ce,this.next)}}const In=new h.OlP("HTTP_INTERCEPTORS");let qn=(()=>{class Re{intercept(me,ct){return ct.handle(me)}}return Re.\u0275fac=function(me){return new(me||Re)},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const _n=/^\)\]\}',?\n/;let Fr=(()=>{class Re{constructor(me){this.xhrFactory=me}handle(me){if("JSONP"===me.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ve.y(ct=>{const Ue=this.xhrFactory.build();if(Ue.open(me.method,me.urlWithParams),me.withCredentials&&(Ue.withCredentials=!0),me.headers.forEach((St,Mn)=>Ue.setRequestHeader(St,Mn.join(","))),me.headers.has("Accept")||Ue.setRequestHeader("Accept","application/json, text/plain, */*"),!me.headers.has("Content-Type")){const St=me.detectContentTypeHeader();null!==St&&Ue.setRequestHeader("Content-Type",St)}if(me.responseType){const St=me.responseType.toLowerCase();Ue.responseType="json"!==St?St:"text"}const Ye=me.serializeBody();let Ct=null;const Cn=()=>{if(null!==Ct)return Ct;const St=Ue.statusText||"OK",Mn=new se(Ue.getAllResponseHeaders()),un=function vr(Re){return"responseURL"in Re&&Re.responseURL?Re.responseURL:/^X-Request-URL:/m.test(Re.getAllResponseHeaders())?Re.getResponseHeader("X-Request-URL"):null}(Ue)||me.url;return Ct=new Le({headers:Mn,status:Ue.status,statusText:St,url:un}),Ct},$t=()=>{let{headers:St,status:Mn,statusText:un,url:ot}=Cn(),et=null;204!==Mn&&(et=typeof Ue.response>"u"?Ue.responseText:Ue.response),0===Mn&&(Mn=et?200:0);let kt=Mn>=200&&Mn<300;if("json"===me.responseType&&"string"==typeof et){const Gt=et;et=et.replace(_n,"");try{et=""!==et?JSON.parse(et):null}catch(yn){et=Gt,kt&&(kt=!1,et={error:yn,text:et})}}kt?(ct.next(new Ne({body:et,headers:St,status:Mn,statusText:un,url:ot||void 0})),ct.complete()):ct.error(new Ee({error:et,headers:St,status:Mn,statusText:un,url:ot||void 0}))},an=St=>{const{url:Mn}=Cn(),un=new Ee({error:St,status:Ue.status||0,statusText:Ue.statusText||"Unknown Error",url:Mn||void 0});ct.error(un)};let Yn=!1;const Vn=St=>{Yn||(ct.next(Cn()),Yn=!0);let Mn={type:De.DownloadProgress,loaded:St.loaded};St.lengthComputable&&(Mn.total=St.total),"text"===me.responseType&&!!Ue.responseText&&(Mn.partialText=Ue.responseText),ct.next(Mn)},Jn=St=>{let Mn={type:De.UploadProgress,loaded:St.loaded};St.lengthComputable&&(Mn.total=St.total),ct.next(Mn)};return Ue.addEventListener("load",$t),Ue.addEventListener("error",an),Ue.addEventListener("timeout",an),Ue.addEventListener("abort",an),me.reportProgress&&(Ue.addEventListener("progress",Vn),null!==Ye&&Ue.upload&&Ue.upload.addEventListener("progress",Jn)),Ue.send(Ye),ct.next({type:De.Sent}),()=>{Ue.removeEventListener("error",an),Ue.removeEventListener("abort",an),Ue.removeEventListener("load",$t),Ue.removeEventListener("timeout",an),me.reportProgress&&(Ue.removeEventListener("progress",Vn),null!==Ye&&Ue.upload&&Ue.upload.removeEventListener("progress",Jn)),Ue.readyState!==Ue.DONE&&Ue.abort()}})}}return Re.\u0275fac=function(me){return new(me||Re)(h.LFG(b.JF))},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Xr=new h.OlP("XSRF_COOKIE_NAME"),br=new h.OlP("XSRF_HEADER_NAME");class Lr{}let Mr=(()=>{class Re{constructor(me,ct,Ue){this.doc=me,this.platform=ct,this.cookieName=Ue,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const me=this.doc.cookie||"";return me!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,b.Mx)(me,this.cookieName),this.lastCookieString=me),this.lastToken}}return Re.\u0275fac=function(me){return new(me||Re)(h.LFG(b.K0),h.LFG(h.Lbi),h.LFG(Xr))},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),wr=(()=>{class Re{constructor(me,ct){this.tokenService=me,this.headerName=ct}intercept(me,ct){const Ue=me.url.toLowerCase();if("GET"===me.method||"HEAD"===me.method||Ue.startsWith("http://")||Ue.startsWith("https://"))return ct.handle(me);const Ye=this.tokenService.getToken();return null!==Ye&&!me.headers.has(this.headerName)&&(me=me.clone({headers:me.headers.set(this.headerName,Ye)})),ct.handle(me)}}return Re.\u0275fac=function(me){return new(me||Re)(h.LFG(Lr),h.LFG(br))},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),nr=(()=>{class Re{constructor(me,ct){this.backend=me,this.injector=ct,this.chain=null}handle(me){if(null===this.chain){const ct=this.injector.get(In,[]);this.chain=ct.reduceRight((Ue,Ye)=>new Jt(Ue,Ye),this.backend)}return this.chain.handle(me)}}return Re.\u0275fac=function(me){return new(me||Re)(h.LFG(Me),h.LFG(h.zs3))},Re.\u0275prov=h.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),fn=(()=>{class Re{static disable(){return{ngModule:Re,providers:[{provide:wr,useClass:qn}]}}static withOptions(me={}){return{ngModule:Re,providers:[me.cookieName?{provide:Xr,useValue:me.cookieName}:[],me.headerName?{provide:br,useValue:me.headerName}:[]]}}}return Re.\u0275fac=function(me){return new(me||Re)},Re.\u0275mod=h.oAB({type:Re}),Re.\u0275inj=h.cJS({providers:[wr,{provide:In,useExisting:wr,multi:!0},{provide:Lr,useClass:Mr},{provide:Xr,useValue:"XSRF-TOKEN"},{provide:br,useValue:"X-XSRF-TOKEN"}]}),Re})(),Rt=(()=>{class Re{}return Re.\u0275fac=function(me){return new(me||Re)},Re.\u0275mod=h.oAB({type:Re}),Re.\u0275inj=h.cJS({providers:[He,{provide:Se,useClass:nr},Fr,{provide:Me,useExisting:Fr}],imports:[[fn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Re})()},4537:(Nt,Ve,G)=>{"use strict";G.d(Ve,{deG:()=>th,tb:()=>w0,AFp:()=>eE,ip1:()=>XC,CZH:()=>y0,hGG:()=>VI,z2F:()=>Tf,sBO:()=>N0,Sil:()=>aE,_Vd:()=>Jp,EJc:()=>iE,SBq:()=>hf,qLn:()=>ts,vpe:()=>jl,tBr:()=>ca,XFs:()=>Bt,OlP:()=>li,zs3:()=>yl,ZZ4:()=>P0,aQg:()=>L0,soG:()=>C0,YKP:()=>i_,h0i:()=>jd,PXZ:()=>vI,R0b:()=>Yo,FiY:()=>Ds,Lbi:()=>b0,g9A:()=>v0,Qsj:()=>$1,FYo:()=>vC,JOm:()=>ze,tp0:()=>dl,Rgc:()=>ng,dDg:()=>Eu,q4F:()=>Ul,GfV:()=>Zv,s_b:()=>ig,ifc:()=>Ue,eFA:()=>E_,G48:()=>CI,Gpc:()=>ae,X6Q:()=>mE,_c5:()=>SE,VLi:()=>D0,c2e:()=>rE,zSh:()=>qa,wAp:()=>bn,vHH:()=>Ze,cg1:()=>Tv,kL8:()=>Zw,dqk:()=>an,sIi:()=>rs,CqO:()=>Rd,QGY:()=>tv,F4k:()=>kd,RDi:()=>Gr,AaK:()=>Se,qOj:()=>lm,TTD:()=>Ms,_Bn:()=>t_,xp6:()=>sd,uIk:()=>bc,Tol:()=>Mw,ekj:()=>hv,Suo:()=>UC,Xpm:()=>nn,lG2:()=>xe,Yz7:()=>wn,cJS:()=>Fn,oAB:()=>Ie,Yjl:()=>Tr,Y36:()=>wc,_UZ:()=>vm,qZA:()=>ym,TgZ:()=>Pp,EpF:()=>ev,n5z:()=>Ou,Ikx:()=>Bm,SDv:()=>fr,QtT:()=>uf,pQV:()=>Qm,LFG:()=>Yt,$8M:()=>Nl,$Z:()=>kp,NdJ:()=>Fp,CRH:()=>jC,oxw:()=>wm,ALo:()=>yf,lcZ:()=>xC,Hsn:()=>ww,F$t:()=>Cm,Q6J:()=>Rp,s9C:()=>sv,MGl:()=>Qh,DdM:()=>o_,VKq:()=>a_,WLB:()=>SC,kEZ:()=>Xp,iGM:()=>BC,MAs:()=>dw,CHM:()=>Vt,LSH:()=>op,Udp:()=>dv,YNc:()=>pu,W1O:()=>s0,_uU:()=>Nm,Oqu:()=>xm,hij:()=>Cc,AsE:()=>zp,Gf:()=>VC});var b=G(8023),h=G(4813),Y=G(818),ve=G(1860),pe=G(815);function Te(s){for(let o in s)if(s[o]===Te)return o;throw Error("Could not find renamed property on target object.")}function ke(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function Se(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Se).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const se=Te({__forward_ref__:Te});function ae(s){return s.__forward_ref__=ae,s.toString=function(){return Se(this())},s}function we(s){return at(s)?s():s}function at(s){return"function"==typeof s&&s.hasOwnProperty(se)&&s.__forward_ref__===ae}class Ze extends Error{constructor(o,a){super(function ut(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function Be(s){return"string"==typeof s?s:null==s?"":String(s)}function Qe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Be(s)}function We(s,o){const a=o?` in ${o}`:"";throw new Ze(-201,`No provider for ${Qe(s)} found${a}`)}function Tt(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}function wn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Fn(s){return{providers:s.providers||[],imports:s.imports||[]}}function _n(s){return vr(s,Lr)||vr(s,wr)}function vr(s,o){return s.hasOwnProperty(o)?s[o]:null}function br(s){return s&&(s.hasOwnProperty(Mr)||s.hasOwnProperty(nr))?s[Mr]:null}const Lr=Te({\u0275prov:Te}),Mr=Te({\u0275inj:Te}),wr=Te({ngInjectableDef:Te}),nr=Te({ngInjectorDef:Te});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let ci;function Rt(s){const o=ci;return ci=s,o}function ei(s,o,a){const c=_n(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Bt.Optional?null:void 0!==o?o:void We(Se(s),"Injector")}function Re(s){return{toString:s}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),Ue=(()=>{return(s=Ue||(Ue={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Ue;var s})();const Ye=typeof globalThis<"u"&&globalThis,Ct=typeof window<"u"&&window,Cn=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,an=Ye||typeof global<"u"&&global||Ct||Cn,Jn={},St=[],Mn=Te({\u0275cmp:Te}),un=Te({\u0275dir:Te}),ot=Te({\u0275pipe:Te}),et=Te({\u0275mod:Te}),kt=Te({\u0275fac:Te}),Gt=Te({__NG_ELEMENT_ID__:Te});let yn=0;function nn(s){return Re(()=>{const a={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ue.Emulated,id:"c",styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return c.id+=yn++,c.inputs=Wt(s.inputs,a),c.outputs=Wt(s.outputs),p&&p.forEach(I=>I(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(te):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(_e):null,c})}function te(s){return en(s)||function Un(s){return s[un]||null}(s)}function _e(s){return function rn(s){return s[ot]||null}(s)}const qe={};function Ie(s){return Re(()=>{const o={type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(qe[s.id]=s.type),o})}function Wt(s,o){if(null==s)return Jn;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const xe=nn;function Tr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[Mn]||null}function kn(s,o){const a=s[et]||null;if(!a&&!0===o)throw new Error(`Type ${Se(s)} does not have '\u0275mod' property.`);return a}function ti(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ti(s){return Array.isArray(s)&&!0===s[1]}function vo(s){return 0!=(8&s.flags)}function Rr(s){return 2==(2&s.flags)}function bs(s){return 1==(1&s.flags)}function he(s){return null!==s.template}function vi(s){return 0!=(512&s[2])}function pr(s,o){return s.hasOwnProperty(kt)?s[kt]:null}class xs{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ms(){return Os}function Os(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ws),ea}function ea(){const s=ji(this),o=s?.current;if(o){const a=s.previous;if(a===Jn)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ws(s,o,a,c){const d=ji(s)||function Sr(s,o){return s[hi]=o}(s,{previous:Jn,current:null}),p=d.current||(d.current={}),y=d.previous,I=this.declaredInputs[a],N=y[I];p[I]=new xs(N&&N.currentValue,o,y===Jn),s[c]=o}Ms.ngInherit=!0;const hi="__ngSimpleChanges__";function ji(s){return s[hi]||null}let ws;function Gr(s){ws=s}function fi(){return void 0!==ws?ws:typeof document<"u"?document:void 0}function Xn(s){return!!s.listen}const P={createRenderer:(s,o)=>fi()};function R(s){for(;Array.isArray(s);)s=s[0];return s}function $e(s,o){return R(o[s])}function it(s,o){return R(o[s.index])}function Ln(s,o){return s.data[o]}function Sn(s,o){return s[o]}function vn(s,o){const a=o[s];return ti(a)?a:a[0]}function An(s){return 4==(4&s[2])}function dr(s){return 128==(128&s[2])}function ur(s,o){return null==o?null:s[o]}function Xi(s){s[18]=0}function Yr(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const zt={lFrame:sa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function B(){return zt.bindingsEnabled}function H(){return zt.lFrame.lView}function Fe(){return zt.lFrame.tView}function Vt(s){return zt.lFrame.contextLView=s,s[8]}function pn(){let s=si();for(;null!==s&&64===s.type;)s=s.parent;return s}function si(){return zt.lFrame.currentTNode}function Ai(){const s=zt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function oi(s,o){const a=zt.lFrame;a.currentTNode=s,a.isParent=o}function Eo(){return zt.lFrame.isParent}function Bo(){zt.lFrame.isParent=!1}function ta(){return zt.isInCheckNoChangesMode}function so(s){zt.isInCheckNoChangesMode=s}function Ni(){const s=zt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Fs(){return zt.lFrame.bindingIndex}function Do(){return zt.lFrame.bindingIndex++}function us(s){const o=zt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function La(s){zt.lFrame.inI18n=s}function ya(s,o){const a=zt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Vo(o)}function Vo(s){zt.lFrame.currentDirectiveIndex=s}function Io(){return zt.lFrame.currentQueryIndex}function ra(s){zt.lFrame.currentQueryIndex=s}function el(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function oo(s,o,a){if(a&Bt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&Bt.Host||(d=el(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=zt.lFrame=Ba();return c.currentTNode=o,c.lView=s,!0}function ia(s){const o=Ba(),a=s[1];zt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ba(){const s=zt.lFrame,o=null===s?null:s.child;return null===o?sa(s):o}function sa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function oa(){const s=zt.lFrame;return zt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const tl=oa;function Uo(){const s=oa();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Hi(){return zt.lFrame.selectedIndex}function ba(s){zt.lFrame.selectedIndex=s}function ai(){const s=zt.lFrame;return Ln(s.tView,s.selectedIndex)}function ds(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:N,ngAfterViewChecked:j,ngOnDestroy:z}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),I&&((s.contentHooks||(s.contentHooks=[])).push(a,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,I)),N&&(s.viewHooks||(s.viewHooks=[])).push(-a,N),j&&((s.viewHooks||(s.viewHooks=[])).push(a,j),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,j)),null!=z&&(s.destroyHooks||(s.destroyHooks=[])).push(a,z)}}function qs(s,o,a){aa(s,o,3,a)}function hs(s,o,a,c){(3&s[2])===a&&aa(s,o,a,c)}function Jr(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function aa(s,o,a,c){const p=c??-1,y=o.length-1;let I=0;for(let N=void 0!==c?65535&s[18]:0;N<y;N++)if("number"==typeof o[N+1]){if(I=o[N],null!=c&&I>=c)break}else o[N]<0&&(s[18]+=65536),(I<p||-1==p)&&(Ql(s,a,o,N),s[18]=(4294901760&s[18])+N+2),N++}function Ql(s,o,a,c){const d=a[c]<0,p=a[c+1],I=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class gi{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function T(s,o,a){const c=Xn(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const y=a[d++],I=a[d++],N=a[d++];c?s.setAttribute(o,I,N,y):o.setAttributeNS(y,I,N)}else{const y=p,I=a[++d];W(y)?c&&s.setProperty(o,y,I):c?s.setAttribute(o,y,I):o.setAttribute(y,I),d++}}return d}function S(s){return 3===s||4===s||6===s}function W(s){return 64===s.charCodeAt(0)}function ee(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||st(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function st(s,o,a,c,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){y=-1;break}if(I>o){y=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function ht(s){return-1!==s}function hn(s){return 32767&s}function hr(s,o){let a=function wi(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let lo=!0;function ps(s){const o=lo;return lo=s,o}let E=0;function k(s,o){const a=K(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,V(c.data,s),V(o,null),V(c.blueprint,null));const d=re(s,o),p=s.injectorIndex;if(ht(d)){const y=hn(d),I=hr(d,o),N=I[1].data;for(let j=0;j<8;j++)o[p+j]=I[y+j]|N[y+j]}return o[p+8]=d,p}function V(s,o){s.push(0,0,0,0,0,0,0,0,o)}function K(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function re(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(c=2===y?p.declTNode:1===y?d[6]:null,null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function de(s,o,a){!function w(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Gt)&&(c=a[Gt]),null==c&&(c=a[Gt]=E++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Ft(s,o,a){if(a&Bt.Optional)return s;We(o,"NodeInjector")}function Zn(s,o,a,c){if(a&Bt.Optional&&void 0===c&&(c=null),0==(a&(Bt.Self|Bt.Host))){const d=s[9],p=Rt(void 0);try{return d?d.get(o,c,a&Bt.Optional):ei(o,c,a&Bt.Optional)}finally{Rt(p)}}return Ft(c,o,a)}function Kt(s,o,a,c=Bt.Default,d){if(null!==s){const p=function Xl(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Gt)?s[Gt]:void 0;return"number"==typeof o?o>=0?255&o:gr:o}(a);if("function"==typeof p){if(!oo(o,s,c))return c&Bt.Host?Ft(d,a,c):Zn(o,a,c,d);try{const y=p(c);if(null!=y||c&Bt.Optional)return y;We(a)}finally{tl()}}else if("number"==typeof p){let y=null,I=K(s,o),N=-1,j=c&Bt.Host?o[16][6]:null;for((-1===I||c&Bt.SkipSelf)&&(N=-1===I?re(s,o):o[I+8],-1!==N&&Al(c,!1)?(y=o[1],I=hn(N),o=hr(N,o)):I=-1);-1!==I;){const z=o[1];if(Ho(p,I,z.data)){const ne=xi(I,o,a,y,c,j);if(ne!==$n)return ne}N=o[I+8],-1!==N&&Al(c,o[1].data[I+8]===j)&&Ho(p,I,o)?(y=z,I=hn(N),o=hr(N,o)):I=-1}}}return Zn(o,a,c,d)}const $n={};function gr(){return new Go(pn(),H())}function xi(s,o,a,c,d,p){const y=o[1],I=y.data[s+8],z=jo(I,y,a,null==c?Rr(I)&&lo:c!=y&&0!=(3&I.type),d&Bt.Host&&p===I);return null!==z?Ar(o,y,z,I):$n}function jo(s,o,a,c,d){const p=s.providerIndexes,y=o.data,I=1048575&p,N=s.directiveStart,z=p>>20,fe=d?I+z:s.directiveEnd;for(let Pe=c?I:I+z;Pe<fe;Pe++){const rt=y[Pe];if(Pe<N&&a===rt||Pe>=N&&rt.type===a)return Pe}if(d){const Pe=y[N];if(Pe&&he(Pe)&&Pe.type===a)return N}return null}function Ar(s,o,a,c){let d=s[a];const p=o.data;if(function To(s){return s instanceof gi}(d)){const y=d;y.resolving&&function It(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ze(-200,`Circular dependency in DI detected for ${s}${a}`)}(Qe(p[a]));const I=ps(y.canSeeViewProviders);y.resolving=!0;const N=y.injectImpl?Rt(y.injectImpl):null;oo(s,c,Bt.Default);try{d=s[a]=y.factory(void 0,p,s,c),o.firstCreatePass&&a>=c.directiveStart&&function wa(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const y=Os(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==N&&Rt(N),ps(I),y.resolving=!1,tl()}}return d}function Ho(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Al(s,o){return!(s&Bt.Self||s&Bt.Host&&o)}class Go{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Kt(this._tNode,this._lView,o,c,a)}}function Ou(s){return Re(()=>{const o=s.prototype.constructor,a=o[kt]||il(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[kt]||il(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function il(s){return at(s)?()=>{const o=il(we(s));return o&&o()}:pr(s)}function Nl(s){return function nt(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(S(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(pn(),s)}const xl="__parameters__";function sl(s,o,a){return Re(()=>{const c=function ec(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const y=new d(...p);return I.annotation=y,I;function I(N,j,z){const ne=N.hasOwnProperty(xl)?N[xl]:Object.defineProperty(N,xl,{value:[]})[xl];for(;ne.length<=z;)ne.push(null);return(ne[z]=ne[z]||[]).push(y),N}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class li{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=wn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const th=new li("AnalyzeForEntryComponents");function Bs(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),Bs(c,o)):o!==s&&o.push(c)}return o}function Vs(s,o){s.forEach(a=>Array.isArray(a)?Vs(a,o):o(a))}function tc(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function la(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function co(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}function Zs(s,o,a){let c=cl(s,o);return c>=0?s[1|c]=a:(c=~c,function Bc(s,o,a,c){let d=s.length;if(d==o)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function Uc(s,o){const a=cl(s,o);if(a>=0)return s[1|a]}function cl(s,o){return function Ca(s,o,a){let c=0,d=s.length>>a;for(;d!==c;){const p=c+(d-c>>1),y=s[p<<a];if(o===y)return p<<a;y>o?d=p:c=p+1}return~(d<<a)}(s,o,1)}const ul={},nc="__NG_DI_FLAG__",rc="ngTempTokenPath",F=/\n/gm,ie="__source",Oe=Te({provide:String,useValue:Te});let je;function mt(s){const o=je;return je=s,o}function Ut(s,o=Bt.Default){if(void 0===je)throw new Ze(203,"");return null===je?ei(s,void 0,o):je.get(s,o&Bt.Optional?null:void 0,o)}function Yt(s,o=Bt.Default){return(function fn(){return ci}()||Ut)(we(s),o)}const Wn=Yt;function On(s){const o=[];for(let a=0;a<s.length;a++){const c=we(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Ze(900,"");let d,p=Bt.Default;for(let y=0;y<c.length;y++){const I=c[y],N=Ci(I);"number"==typeof N?-1===N?d=I.token:p|=N:d=I}o.push(Yt(d,p))}else o.push(Yt(c))}return o}function Gi(s,o){return s[nc]=o,s.prototype[nc]=o,s}function Ci(s){return s[nc]}const ca=Gi(sl("Inject",s=>({token:s})),-1),Ds=Gi(sl("Optional"),8),dl=Gi(sl("SkipSelf"),4);let Wc;function Ha(s){return function zc(){if(void 0===Wc&&(Wc=null,an.trustedTypes))try{Wc=an.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Wc}()?.createHTML(s)||s}class kg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ua(s){return s instanceof kg?s.changingThisBreaksApplicationSecurity:s}class pl{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Ha(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class ph{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ha(o),a;const c=this.inertDocument.createElement("body");return c.innerHTML=Ha(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const y=a.item(d).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Ga=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function gl(s){return(s=String(s)).match(Ga)||s.match(mi)?s:"unsafe:"+s}function Fg(s){return(s=String(s)).split(",").map(o=>gl(o.trim())).join(", ")}function da(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function ml(...s){const o={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const Zc=da("area,br,col,hr,img,wbr"),gh=da("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ep=da("rp,rt"),tp=ml(Zc,ml(gh,da("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ml(ep,da("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ml(ep,gh)),cc=da("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$a=da("srcset"),Gu=ml(cc,$a,da("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),da("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var $i=(()=>(($i=$i||{})[$i.NONE=0]="NONE",$i[$i.HTML=1]="HTML",$i[$i.STYLE=2]="STYLE",$i[$i.SCRIPT=3]="SCRIPT",$i[$i.URL=4]="URL",$i[$i.RESOURCE_URL=5]="RESOURCE_URL",$i))();function op(s){const o=function _l(){const s=H();return s&&s[12]}();return o?o.sanitize($i.URL,s)||"":function ju(s,o){const a=function hh(s){return s instanceof kg&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?ua(s):gl(Be(s))}const lp="__ngContext__";function Ys(s,o){s[lp]=o}function cp(s){const o=function dc(s){return s[lp]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Jc(s){return s.ngOriginalError}function bh(s,...o){s.error(...o)}class ts{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),c=function Hg(s){return s&&s.ngErrorLogger||bh}(o);c(this._console,"ERROR",o),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Jc(o);for(;a&&Jc(a);)a=Jc(a);return a||null}}const Ju=/^>|^->|<!--|-->|--!>|<!-$/g,Wa=/(<|>)/;const Wg=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(an))();function g(s){return s instanceof Function?s():s}var ze=(()=>((ze=ze||{})[ze.Important=1]="Important",ze[ze.DashCase=2]="DashCase",ze))();let xt;function qt(s,o){return xt(s,o)}function Ei(s){const o=s[3];return Ti(o)?o[3]:o}function fc(s){return Eh(s[13])}function ed(s){return Eh(s[4])}function Eh(s){for(;null!==s&&!Ti(s);)s=s[4];return s}function Wo(s,o,a,c,d){if(null!=c){let p,y=!1;Ti(c)?p=c:ti(c)&&(y=!0,c=c[0]);const I=R(c);0===s&&null!==a?null==d?Cb(o,a,I):nd(o,a,I,d||null,!0):1===s&&null!==a?nd(o,a,I,d||null,!0):2===s?cy(o,I,y):3===s&&o.destroyNode(I),null!=p&&function Dh(s,o,a,c,d){const p=a[7];p!==R(a)&&Wo(o,s,c,p,d);for(let I=10;I<a.length;I++){const N=a[I];sr(N[1],N,s,o,c,p)}}(o,s,p,a,d)}}function Ia(s,o){return Xn(s)?s.createText(o):s.createTextNode(o)}function td(s,o,a){Xn(s)?s.setValue(o,a):o.textContent=a}function gp(s,o){return s.createComment(function Qu(s){return s.replace(Ju,o=>o.replace(Wa,"\u200b$1\u200b"))}(o))}function _t(s,o,a){if(Xn(s))return s.createElement(o,a);{const c=null!==a?function Kr(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Lt(s,o){const a=s[9],c=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Yr(d,-1)),a.splice(c,1)}function Ke(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&Lt(d,c),o>0&&(s[a-1][4]=c[4]);const p=la(s,10+o);!function ns(s,o){sr(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function gt(s,o){if(!(256&o[2])){const a=o[11];Xn(a)&&a.destroyNode&&sr(s,o,a,3,null,null),function Xt(s){let o=s[13];if(!o)return Is(s[1],s);for(;o;){let a=null;if(ti(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)ti(o)&&Is(o[1],o),o=o[3];null===o&&(o=s),ti(o)&&Is(o[1],o),a=o&&o[4]}o=a}}(o)}}function Is(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function DD(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof gi)){const p=a[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const I=d[p[y]],N=p[y+1];try{N.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function vb(s,o){const a=s.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],I="function"==typeof y?y(o):R(o[y]),N=c[d=a[p+2]],j=a[p+3];"boolean"==typeof j?I.removeEventListener(a[p],N,j):j>=0?c[d=j]():c[d=-j].unsubscribe(),p+=2}else{const y=c[d=a[p+1]];a[p].call(y)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Xn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Ti(o[3])){a!==o[3]&&Lt(a,o);const c=o[19];null!==c&&c.detachView(s)}}}function bb(s,o,a){return wb(s,o.parent,a)}function wb(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===Ue.None||d===Ue.Emulated)return null}return it(c,a)}function nd(s,o,a,c,d){Xn(s)?s.insertBefore(o,a,c,d):o.insertBefore(a,c,d)}function Cb(s,o,a){Xn(s)?s.appendChild(o,a):o.appendChild(a)}function iy(s,o,a,c,d){null!==c?nd(s,o,a,c,d):Cb(s,o,a)}function sy(s,o){return Xn(s)?s.parentNode(o):o.parentNode}function Eb(s,o,a){return rr(s,o,a)}function oy(s,o,a){return 40&s.type?it(s,a):null}let eu,rr=oy;function ay(s,o){rr=s,eu=o}function Oi(s,o,a,c){const d=bb(s,c,o),p=o[11],I=Eb(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let N=0;N<a.length;N++)iy(p,d,a[N],I,!1);else iy(p,d,a,I,!1);void 0!==eu&&eu(p,c,o,a,d)}function En(s,o){if(null!==o){const a=o.type;if(3&a)return it(o,s);if(4&a)return gc(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return En(s,c);{const d=s[o.index];return Ti(d)?gc(-1,d):R(d)}}if(32&a)return qt(o,s)()||R(s[o.index]);{const c=ly(s,o);return null!==c?Array.isArray(c)?c[0]:En(Ei(s[16]),c):En(s,o.next)}}return null}function ly(s,o){return null!==o?s[16][6].projection[o.projection]:null}function gc(s,o){const a=10+s+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return En(c,d)}return o[7]}function cy(s,o,a){const c=sy(s,o);c&&function ID(s,o,a,c){Xn(s)?s.removeChild(o,a,c):o.removeChild(a)}(s,c,o,a)}function rd(s,o,a,c,d,p,y){for(;null!=a;){const I=c[a.index],N=a.type;if(y&&0===o&&(I&&Ys(R(I),c),a.flags|=4),64!=(64&a.flags))if(8&N)rd(s,o,a.child,c,d,p,!1),Wo(o,s,d,I,p);else if(32&N){const j=qt(a,c);let z;for(;z=j();)Wo(o,s,d,z,p);Wo(o,s,d,I,p)}else 16&N?js(s,o,c,a,d,p):Wo(o,s,d,I,p);a=y?a.projectionNext:a.next}}function sr(s,o,a,c,d,p){rd(a,c,s.firstChild,o,d,p,!1)}function js(s,o,a,c,d,p){const y=a[16],N=y[6].projection[c.projection];if(Array.isArray(N))for(let j=0;j<N.length;j++)Wo(o,s,d,N[j],p);else rd(s,o,N,y[3],d,p,!0)}function Ts(s,o,a){Xn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function uy(s,o,a){Xn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function mc(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}a=d+1}}const tu="ng-template";function dy(s,o,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==mc(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function hy(s){return 4===s.type&&s.value!==tu}function _p(s,o,a){return o===(4!==s.type||a?s.value:tu)}function AD(s,o,a){let c=4;const d=s.attrs||[],p=function Ot(s){for(let o=0;o<s.length;o++)if(S(s[o]))return o;return s.length}(d);let y=!1;for(let I=0;I<o.length;I++){const N=o[I];if("number"!=typeof N){if(!y)if(4&c){if(c=2|1&c,""!==N&&!_p(s,N,a)||""===N&&1===o.length){if(Hs(c))return!1;y=!0}}else{const j=8&c?N:o[++I];if(8&c&&null!==s.attrs){if(!dy(s.attrs,j,a)){if(Hs(c))return!1;y=!0}continue}const ne=id(8&c?"class":N,d,hy(s),a);if(-1===ne){if(Hs(c))return!1;y=!0;continue}if(""!==j){let fe;fe=ne>p?"":d[ne+1].toLowerCase();const Pe=8&c?fe:null;if(Pe&&-1!==mc(Pe,j,0)||2&c&&j!==fe){if(Hs(c))return!1;y=!0}}}}else{if(!y&&!Hs(c)&&!Hs(N))return!1;if(y&&Hs(N))continue;y=!1,c=N|1&c}}return Hs(c)||y}function Hs(s){return 0==(1&s)}function id(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function Ib(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Ih(s,o,a=!1){for(let c=0;c<o.length;c++)if(AD(s,o[c],a))return!0;return!1}function Tb(s,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function nu(s,o){return s?":not("+o.trim()+")":o}function Pl(s){let o=s[0],a=1,c=2,d="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const I=s[++a];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Hs(y)&&(o+=nu(p,d),d=""),c=y,p=p||!Hs(c);a++}return""!==d&&(o+=nu(p,d)),o}const Bn={};function sd(s){qg(Fe(),H(),Hi()+s,ta())}function qg(s,o,a,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&qs(o,p,a)}else{const p=s.preOrderHooks;null!==p&&hs(o,p,0,a)}ba(a)}function Th(s,o){return s<<17|o<<2}function zo(s){return s>>17&32767}function Sh(s){return 2|s}function Sa(s){return(131068&s)>>2}function Zg(s,o){return-131069&s|o<<2}function Kg(s){return 1|s}function kh(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const y=s.data[p];ra(d),y.contentQueries(2,o[p],p)}}}function ud(s,o,a,c,d,p,y,I,N,j){const z=o.blueprint.slice();return z[0]=d,z[2]=140|c,Xi(z),z[3]=z[15]=s,z[8]=a,z[10]=y||s&&s[10],z[11]=I||s&&s[11],z[12]=N||s&&s[12]||null,z[9]=j||s&&s[9]||null,z[6]=p,z[16]=2==o.type?s[16]:z,z}function dd(s,o,a,c,d){let p=s.data[o];if(null===p)p=Xg(s,o,a,c,d),function _a(){return zt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const y=Ai();p.injectorIndex=null===y?-1:y.injectorIndex}return oi(p,!0),p}function Xg(s,o,a,c,d){const p=si(),y=Eo(),N=s.data[o]=function kb(s,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=N),null!==p&&(y?null==p.child&&null!==N.parent&&(p.child=N):null===p.next&&(p.next=N)),N}function Rh(s,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Ph(s,o,a){ia(o);try{const c=s.viewQuery;null!==c&&sm(1,c,a);const d=s.template;null!==d&&Ep(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&kh(s,o),s.staticViewQueries&&sm(2,s.viewQuery,a);const p=s.components;null!==p&&function by(s,o){for(let a=0;a<o.length;a++)Ip(s,o[a])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Uo()}}function hd(s,o,a,c){const d=o[2];if(256==(256&d))return;ia(o);const p=ta();try{Xi(o),function Fa(s){return zt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Ep(s,o,a,2,c);const y=3==(3&d);if(!p)if(y){const j=s.preOrderCheckHooks;null!==j&&qs(o,j,null)}else{const j=s.preOrderHooks;null!==j&&hs(o,j,0,null),Jr(o,0)}if(function za(s){for(let o=fc(s);null!==o;o=ed(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(1024&d[2])&&Yr(p,1),d[2]|=1024}}}(o),function UD(s){for(let o=fc(s);null!==o;o=ed(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];dr(c)&&hd(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&kh(s,o),!p)if(y){const j=s.contentCheckHooks;null!==j&&qs(o,j)}else{const j=s.contentHooks;null!==j&&hs(o,j,1),Jr(o,1)}!function Ab(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ba(~d);else{const p=d,y=a[++c],I=a[++c];ya(y,p),I(2,o[p])}}}finally{ba(-1)}}(s,o);const I=s.components;null!==I&&function Nb(s,o){for(let a=0;a<o.length;a++)jD(s,o[a])}(o,I);const N=s.viewQuery;if(null!==N&&sm(2,N,c),!p)if(y){const j=s.viewCheckHooks;null!==j&&qs(o,j)}else{const j=s.viewHooks;null!==j&&hs(o,j,2),Jr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Yr(o[3],-1))}finally{Uo()}}function xb(s,o,a,c){const d=o[10],p=!ta(),y=An(o);try{p&&!y&&d.begin&&d.begin(),y&&Ph(s,o,c),hd(s,o,a,c)}finally{p&&!y&&d.end&&d.end()}}function Ep(s,o,a,c,d){const p=Hi(),y=2&c;try{ba(-1),y&&o.length>20&&qg(s,o,20,ta()),a(c,d)}finally{ba(p)}}function wy(s,o,a){!B()||(function Bb(s,o,a,c){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||k(a,o),Ys(c,o);const y=a.initialInputs;for(let I=d;I<p;I++){const N=s.data[I],j=he(N);j&&lu(o,a,N);const z=Ar(o,s,I,a);Ys(z,o),null!==y&&po(0,I-d,z,N,0,y),j&&(vn(a.index,o)[8]=z)}}(s,o,a,it(a,o)),128==(128&a.flags)&&function Vb(s,o,a){const c=a.directiveStart,d=a.directiveEnd,y=a.index,I=function va(){return zt.lFrame.currentDirectiveIndex}();try{ba(y);for(let N=c;N<d;N++){const j=s.data[N],z=o[N];Vo(N),(null!==j.hostBindings||0!==j.hostVars||null!==j.hostAttrs)&&Lh(j,z)}}finally{ba(-1),Vo(I)}}(s,o,a))}function em(s,o,a=it){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],I=-1===y?a(o,s):s[y];s[d++]=I}}}function fd(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ll(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ll(s,o,a,c,d,p,y,I,N,j){const z=20+c,ne=z+d,fe=function Ob(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:Bn);return a}(z,ne),Pe="function"==typeof j?j():j;return fe[1]={type:s,blueprint:fe,template:a,queries:null,viewQuery:I,declTNode:o,data:fe.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:N,consts:Pe,incompleteFirstPass:!1}}function Cy(s,o,a,c){const d=Ty(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&Sy(s).push(c,d.length-1))}function Fh(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function Nr(s,o,a,c,d,p,y,I){const N=it(o,a);let z,j=o.inputs;!I&&null!=j&&(z=j[c])?($b(s,a,z,c,d),Rr(o)&&function tm(s,o){const a=vn(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(c=function LD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,Xn(p)?p.setProperty(N,c,d):W(c)||(N.setProperty?N.setProperty(c,d):N[c]=d))}function gd(s,o,a,c){let d=!1;if(B()){const p=function Ey(s,o,a){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];Ih(a,y.selectors,!1)&&(d||(d=[]),de(k(a,o),s,y.type),he(y)?(Ub(s,a),d.unshift(y)):d.push(y))}return d}(s,o,a),y=null===c?null:{"":-1};if(null!==p){d=!0,Dy(a,s.data.length,p.length);for(let z=0;z<p.length;z++){const ne=p[z];ne.providersResolver&&ne.providersResolver(ne)}let I=!1,N=!1,j=Rh(s,o,p.length,null);for(let z=0;z<p.length;z++){const ne=p[z];a.mergedAttrs=ee(a.mergedAttrs,ne.hostAttrs),Iy(s,a,o,j,ne),yr(j,ne,y),null!==ne.contentQueries&&(a.flags|=8),(null!==ne.hostBindings||null!==ne.hostAttrs||0!==ne.hostVars)&&(a.flags|=128);const fe=ne.type.prototype;!I&&(fe.ngOnChanges||fe.ngOnInit||fe.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),I=!0),!N&&(fe.ngOnChanges||fe.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),N=!0),j++}!function FD(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,y=[];let I=null,N=null;for(let j=o.directiveStart;j<c;j++){const z=d[j],ne=z.inputs,fe=null===p||hy(o)?null:Di(ne,p);y.push(fe),I=Fh(ne,j,I),N=Fh(z.outputs,j,N)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=I,o.outputs=N}(s,a)}y&&function Ss(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Ze(-301,!1);c.push(o[d],p)}}}(a,c,y)}return a.mergedAttrs=ee(a.mergedAttrs,a.attrs),d}function au(s,o,a,c,d,p){const y=p.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const N=~o.index;(function Lb(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=N&&I.push(N),I.push(c,d,y)}}function Lh(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ub(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function yr(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;he(o)&&(a[""]=s)}}function Dy(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function Iy(s,o,a,c,d){s.data[c]=d;const p=d.factory||(d.factory=pr(d.type)),y=new gi(p,he(d),null);s.blueprint[c]=y,a[c]=y,au(s,o,0,c,Rh(s,a,d.hostVars,Bn),d)}function lu(s,o,a){const c=it(o,s),d=fd(a),p=s[10],y=rm(s,ud(s,d,null,a.onPush?64:16,c,o,p,p.createRenderer(c,a),null,null));s[o.index]=y}function Bh(s,o,a,c,d,p,y){if(null==p)Xn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const I=null==y?Be(p):y(p,c||"",d);Xn(s)?s.setAttribute(o,d,I,a):a?o.setAttributeNS(a,d,I):o.setAttribute(d,I)}}function po(s,o,a,c,d,p){const y=p[o];if(null!==y){const I=c.setInput;for(let N=0;N<y.length;){const j=y[N++],z=y[N++],ne=y[N++];null!==I?c.setInput(a,ne,j,z):a[z]=ne}}}function Di(s,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function md(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function jD(s,o){const a=vn(o,s);if(dr(a)){const c=a[1];80&a[2]?hd(c,a,c.template,a[8]):a[5]>0&&Dp(a)}}function Dp(s){for(let c=fc(s);null!==c;c=ed(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const y=p[1];hd(y,p,y.template,p[8])}else p[5]>0&&Dp(p)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=vn(a[c],s);dr(d)&&d[5]>0&&Dp(d)}}function Ip(s,o){const a=vn(o,s),c=a[1];(function HD(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),Ph(c,a,a[8])}function rm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function xr(s){for(;s;){s[2]|=64;const o=Ei(s);if(vi(s)&&!o)return s;s=o}return null}function _d(s,o,a){const c=o[10];c.begin&&c.begin();try{hd(s,o,s.template,a)}catch(d){throw Gb(o,d),d}finally{c.end&&c.end()}}function Uh(s){!function Vh(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],c=cp(a),d=c[1];xb(d,c,d.template,a)}}(s[8])}function sm(s,o,a){ra(0),o(s,a)}const WD=(()=>Promise.resolve(null))();function Ty(s){return s[7]||(s[7]=[])}function Sy(s){return s.cleanup||(s.cleanup=[])}function Gb(s,o){const a=s[9],c=a?a.get(ts,null):null;c&&c.handleError(o)}function $b(s,o,a,c,d){for(let p=0;p<a.length;){const y=a[p++],I=a[p++],N=o[y],j=s.data[y];null!==j.setInput?j.setInput(N,d,c,I):N[I]=d}}function Aa(s,o,a){const c=$e(o,s);td(s[11],c,a)}function Tp(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const I=o[y];"number"==typeof I?p=I:1==p?d=Me(d,I):2==p&&(c=Me(c,I+": "+o[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}const om=new li("INJECTOR",-1);class jh{get(o,a=ul){if(a===ul){const c=new Error(`NullInjectorError: No provider for ${Se(o)}!`);throw c.name="NullInjectorError",c}return a}}const qa=new li("Set Injector scope."),yd={},zb={};let vd;function Ay(){return void 0===vd&&(vd=new jh),vd}function Ny(s,o=null,a=null,c){const d=xy(s,o,a,c);return d._resolveInjectorDefTypes(),d}function xy(s,o=null,a=null,c){return new qD(s,a,o||Ay(),c)}class qD{constructor(o,a,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Vs(a,I=>this.processProvider(I,o,a)),Vs([o],I=>this.processInjectorType(I,[],p)),this.records.set(om,bd(void 0,this));const y=this.records.get(qa);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:Se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=ul,c=Bt.Default){this.assertNotDestroyed();const d=mt(this),p=Rt(void 0);try{if(!(c&Bt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const N=function Gh(s){return"function"==typeof s||"object"==typeof s&&s instanceof li}(o)&&_n(o);I=N&&this.injectableDefInScope(N)?bd(My(o),yd):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Bt.Self?Ay():this.parent).get(o,a=c&Bt.Optional&&a===ul?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[rc]=y[rc]||[]).unshift(Se(o)),d)throw y;return function Ea(s,o,a,c){const d=s[rc];throw o[ie]&&d.unshift(o[ie]),s.message=function Gc(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=Se(o);if(Array.isArray(o))d=o.map(Se).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let I=o[y];p.push(y+":"+("string"==typeof I?JSON.stringify(I):Se(I)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(F,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[rc]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Rt(p),mt(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(Se(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ze(205,!1)}processInjectorType(o,a,c){if(!(o=we(o)))return!1;let d=br(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,I=-1!==c.indexOf(y);if(void 0!==p&&(d=br(p)),null==d)return!1;if(null!=d.imports&&!I){let z;c.push(y);try{Vs(d.imports,ne=>{this.processInjectorType(ne,a,c)&&(void 0===z&&(z=[]),z.push(ne))})}finally{}if(void 0!==z)for(let ne=0;ne<z.length;ne++){const{ngModule:fe,providers:Pe}=z[ne];Vs(Pe,rt=>this.processProvider(rt,fe,Pe||St))}}this.injectorDefTypes.add(y);const N=pr(y)||(()=>new y);this.records.set(y,bd(N,yd));const j=d.providers;if(null!=j&&!I){const z=o;Vs(j,ne=>this.processProvider(ne,z,j))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,c){let d=wd(o=we(o))?o:we(o&&o.provide);const p=function Oy(s,o,a){return ky(s)?bd(void 0,s.useValue):bd(qb(s),yd)}(o);if(wd(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=bd(void 0,yd,!0),y.factory=()=>On(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===yd&&(a.value=zb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Hh(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=we(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function My(s){const o=_n(s),a=null!==o?o.factory:pr(s);if(null!==a)return a;if(s instanceof li)throw new Ze(204,!1);if(s instanceof Function)return function Sp(s){const o=s.length;if(o>0)throw co(o,"?"),new Ze(204,!1);const a=function Fr(s){const o=s&&(s[Lr]||s[wr]);if(o){const a=function Xr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ze(204,!1)}function qb(s,o,a){let c;if(wd(s)){const d=we(s);return pr(d)||My(d)}if(ky(s))c=()=>we(s.useValue);else if(function ZD(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...On(s.deps||[]));else if(function Zb(s){return!(!s||!s.useExisting)}(s))c=()=>Yt(we(s.useExisting));else{const d=we(s&&(s.useClass||s.provide));if(!function YD(s){return!!s.deps}(s))return pr(d)||My(d);c=()=>new d(...On(s.deps))}return c}function bd(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function ky(s){return null!==s&&"object"==typeof s&&Oe in s}function wd(s){return"function"==typeof s}let yl=(()=>{class s{static create(a,c){if(Array.isArray(a))return Ny({name:""},c,a,"");{const d=a.name??"";return Ny({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=ul,s.NULL=new jh,s.\u0275prov=wn({token:s,providedIn:"any",factory:()=>Yt(om)}),s.__NG_ELEMENT_ID__=-1,s})();function iw(s,o){ds(cp(s)[1],pn())}function lm(s){let o=function Vy(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let d;if(he(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ze(903,"");d=o.\u0275dir}if(d){if(a){c.push(d);const y=s;y.inputs=$h(s.inputs),y.declaredInputs=$h(s.declaredInputs),y.outputs=$h(s.outputs);const I=d.hostBindings;I&&Ap(s,I);const N=d.viewQuery,j=d.contentQueries;if(N&&wl(s,N),j&&e1(s,j),ke(s.inputs,d.inputs),ke(s.declaredInputs,d.declaredInputs),ke(s.outputs,d.outputs),he(d)&&d.data.animation){const z=s.data;z.animation=(z.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const I=p[y];I&&I.ngInherit&&I(s),I===lm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function tt(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ee(d.hostAttrs,a=ee(a,d.hostAttrs))}}(c)}function $h(s){return s===Jn?{}:s===St?[]:s}function wl(s,o){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function e1(s,o){const a=s.contentQueries;s.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function Ap(s,o){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let Np=null;function cu(){if(!Np){const s=an.Symbol;if(s&&s.iterator)Np=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Np=c)}}}return Np}function rs(s){return!!xp(s)&&(Array.isArray(s)||!(s instanceof Map)&&cu()in s)}function xp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function go(s,o,a){return s[o]=a}function xo(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function uu(s,o,a,c){const d=xo(s,o,a);return xo(s,o+1,c)||d}function bc(s,o,a,c){const d=H();return xo(d,Do(),o)&&(Fe(),function Ur(s,o,a,c,d,p){const y=it(s,o);Bh(o[11],y,p,s.value,a,c,d)}(ai(),d,s,o,a,c)),bc}function Bl(s,o,a,c){return xo(s,Do(),a)?o+Be(a)+c:Bn}function pu(s,o,a,c,d,p,y,I){const N=H(),j=Fe(),z=s+20,ne=j.firstCreatePass?function fu(s,o,a,c,d,p,y,I,N){const j=o.consts,z=dd(o,s,4,y||null,ur(j,I));gd(o,a,z,ur(j,N)),ds(o,z);const ne=z.tViews=Ll(2,z,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,j);return null!==o.queries&&(o.queries.template(o,z),ne.queries=o.queries.embeddedTView(z)),z}(z,j,N,o,a,c,d,p,y):j.data[z];oi(ne,!1);const fe=N[11].createComment("");Oi(j,N,fe,ne),Ys(fe,N),rm(N,N[z]=md(fe,N,fe,ne)),bs(ne)&&wy(j,N,ne),null!=y&&em(N,ne,I)}function dw(s){return Sn(function Xa(){return zt.lFrame.contextLView}(),20+s)}function wc(s,o=Bt.Default){const a=H();return null===a?Yt(s,o):Kt(pn(),a,we(s),o)}function kp(){throw new Error("invalid")}function Rp(s,o,a){const c=H();return xo(c,Do(),o)&&Nr(Fe(),ai(),c,s,o,c[11],a,!1),Rp}function Yy(s,o,a,c,d){const y=d?"class":"style";$b(s,a,o.inputs[y],y,c)}function Pp(s,o,a,c){const d=H(),p=Fe(),y=20+s,I=d[11],N=d[y]=_t(I,o,function Jl(){return zt.lFrame.currentNamespace}()),j=p.firstCreatePass?function Jy(s,o,a,c,d,p,y){const I=o.consts,j=dd(o,s,2,d,ur(I,p));return gd(o,a,j,ur(I,y)),null!==j.attrs&&Tp(j,j.attrs,!1),null!==j.mergedAttrs&&Tp(j,j.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,j),j}(y,p,d,0,o,a,c):p.data[y];oi(j,!0);const z=j.mergedAttrs;null!==z&&T(I,N,z);const ne=j.classes;null!==ne&&uy(I,N,ne);const fe=j.styles;return null!==fe&&Ts(I,N,fe),64!=(64&j.flags)&&Oi(p,d,N,j),0===function Rs(){return zt.lFrame.elementDepthCount}()&&Ys(N,d),function Co(){zt.lFrame.elementDepthCount++}(),bs(j)&&(wy(p,d,j),function Mb(s,o,a){if(vo(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}(p,j,d)),null!==c&&em(d,j),Pp}function ym(){let s=pn();Eo()?Bo():(s=s.parent,oi(s,!1));const o=s;!function Ps(){zt.lFrame.elementDepthCount--}();const a=Fe();return a.firstCreatePass&&(ds(a,s),vo(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function rl(s){return 0!=(16&s.flags)}(o)&&Yy(a,o,H(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Va(s){return 0!=(32&s.flags)}(o)&&Yy(a,o,H(),o.stylesWithoutHost,!1),ym}function vm(s,o,a,c){return Pp(s,o,a,c),ym(),vm}function ev(){return H()}function tv(s){return!!s&&"function"==typeof s.then}function kd(s){return!!s&&"function"==typeof s.subscribe}const Rd=kd;function Fp(s,o,a,c){const d=H(),p=Fe(),y=pn();return function nv(s,o,a,c,d,p,y,I){const N=bs(c),z=s.firstCreatePass&&Sy(s),ne=o[8],fe=Ty(o);let Pe=!0;if(3&c.type||I){const Mt=it(c,o),jt=I?I(Mt):Mt,dt=fe.length,mn=I?ar=>I(R(ar[c.index])):c.index;if(Xn(a)){let ar=null;if(!I&&N&&(ar=function bw(s,o,a,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===c){const I=o[7],N=d[p+2];return I.length>N?I[N]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,c.index)),null!==ar)(ar.__ngLastListenerFn__||ar).__ngNextListenerFn__=p,ar.__ngLastListenerFn__=p,Pe=!1;else{p=iv(c,o,ne,p,!1);const jr=a.listen(jt,d,p);fe.push(p,jr),z&&z.push(d,mn,dt,dt+1)}}else p=iv(c,o,ne,p,!0),jt.addEventListener(d,p,y),fe.push(p),z&&z.push(d,mn,dt,y)}else p=iv(c,o,ne,p,!1);const rt=c.outputs;let yt;if(Pe&&null!==rt&&(yt=rt[d])){const Mt=yt.length;if(Mt)for(let jt=0;jt<Mt;jt+=2){const Oa=o[yt[jt]][yt[jt+1]].subscribe(p),qd=fe.length;fe.push(p,Oa),z&&z.push(d,c.index,qd,-(qd+1))}}}(p,d,d[11],y,s,o,!!a,c),Fp}function rv(s,o,a,c){try{return!1!==a(c)}catch(d){return Gb(s,d),!1}}function iv(s,o,a,c,d){return function p(y){if(y===Function)return c;const I=2&s.flags?vn(s.index,o):o;0==(32&o[2])&&xr(I);let N=rv(o,0,c,y),j=p.__ngNextListenerFn__;for(;j;)N=rv(o,0,j,y)&&N,j=j.__ngNextListenerFn__;return d&&!1===N&&(y.preventDefault(),y.returnValue=!1),N}}function wm(s=1){return function Yl(s){return(zt.lFrame.contextLView=function nl(s,o){for(;s>0;)o=o[15],s--;return o}(s,zt.lFrame.contextLView))[8]}(s)}function c1(s,o){let a=null;const c=function Db(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===c?Ih(s,p,!0):Tb(c,p))return d}else a=d}return a}function Cm(s){const o=H()[16][6];if(!o.projection){const c=o.projection=co(s?s.length:1,null),d=c.slice();let p=o.child;for(;null!==p;){const y=s?c1(p,s):0;null!==y&&(d[y]?d[y].projectionNext=p:c[y]=p,d[y]=p),p=p.next}}}function ww(s,o=0,a){const c=H(),d=Fe(),p=dd(d,20+s,16,null,a||null);null===p.projection&&(p.projection=o),Bo(),64!=(64&p.flags)&&function TD(s,o,a){js(o[11],0,o,a,bb(s,a,o),Eb(a.parent||o[6],a,o))}(d,c,p)}function sv(s,o,a){return Qh(s,"",o,"",a),sv}function Qh(s,o,a,c,d){const p=H(),y=Bl(p,o,a,c);return y!==Bn&&Nr(Fe(),ai(),p,s,y,p[11],d,!1),Qh}function Bp(s,o,a,c,d){const p=s[a+1],y=null===o;let I=c?zo(p):Sa(p),N=!1;for(;0!==I&&(!1===N||y);){const z=s[I+1];Vp(s[I],o)&&(N=!0,s[I+1]=c?Kg(z):Sh(z)),I=c?zo(z):Sa(z)}N&&(s[a+1]=c?Sh(p):Kg(p))}function Vp(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&cl(s,o)>=0}const is={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Dm(s){return s.substring(is.key,is.keyEnd)}function cv(s,o){const a=is.textEnd;return a===o?-1:(o=is.keyEnd=function h1(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,is.key=o,a),Xh(s,o,a))}function Xh(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function dv(s,o,a){return Na(s,o,a,!1),dv}function hv(s,o){return Na(s,o,null,!0),hv}function Mw(s){!function Mo(s,o,a,c){const d=Fe(),p=us(2);d.firstUpdatePass&&Hp(d,null,p,c);const y=H();if(a!==Bn&&xo(y,p,a)){const I=d.data[Hi()];if(Wp(I,c)&&!Tm(d,p)){let N=c?I.classesWithoutHost:I.stylesWithoutHost;null!==N&&(a=Me(N,a||"")),Yy(d,I,y,a,c)}else!function gv(s,o,a,c,d,p,y,I){d===Bn&&(d=St);let N=0,j=0,z=0<d.length?d[0]:null,ne=0<p.length?p[0]:null;for(;null!==z||null!==ne;){const fe=N<d.length?d[N+1]:void 0,Pe=j<p.length?p[j+1]:void 0;let yt,rt=null;z===ne?(N+=2,j+=2,fe!==Pe&&(rt=ne,yt=Pe)):null===ne||null!==z&&z<ne?(N+=2,rt=z):(j+=2,rt=ne,yt=Pe),null!==rt&&Pw(s,o,a,c,rt,yt,y,I),z=N<d.length?d[N]:null,ne=j<p.length?p[j]:null}}(d,I,y,y[11],y[p+1],y[p+1]=function kw(s,o,a){if(null==a||""===a)return St;const c=[],d=ua(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(s,o,a),c,p)}}(Zs,pa,s,!0)}function pa(s,o){for(let a=function lv(s){return function Nw(s){is.key=0,is.keyEnd=0,is.value=0,is.valueEnd=0,is.textEnd=s.length}(s),cv(s,Xh(s,0,is.textEnd))}(o);a>=0;a=cv(o,a))Zs(s,Dm(o),!0)}function Na(s,o,a,c){const d=H(),p=Fe(),y=us(2);p.firstUpdatePass&&Hp(p,s,y,c),o!==Bn&&xo(d,y,o)&&Pw(p,p.data[Hi()],d,d[11],s,d[y+1]=function mv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Se(ua(s)))),s}(o,a),c,y)}function Tm(s,o){return o>=s.expandoStartIndex}function Hp(s,o,a,c){const d=s.data;if(null===d[a+1]){const p=d[Hi()],y=Tm(s,a);Wp(p,c)&&null===o&&!y&&(o=!1),o=function Gp(s,o,a,c){const d=function na(s){const o=zt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Za(a=$p(null,s,o,a,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(a=$p(d,s,o,a,c),null===p){let N=function fv(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Sa(c))return s[zo(c)]}(s,o,c);void 0!==N&&Array.isArray(N)&&(N=$p(null,s,o,N[1],c),N=Za(N,o.attrs,c),function Ow(s,o,a,c){s[zo(a?o.classBindings:o.styleBindings)]=c}(s,o,c,N))}else p=function pv(s,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Za(c,s[p].hostAttrs,a);return Za(c,o.attrs,a)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function Aw(s,o,a,c,d,p){let y=p?o.classBindings:o.styleBindings,I=zo(y),N=Sa(y);s[c]=a;let z,j=!1;if(Array.isArray(a)){const ne=a;z=ne[1],(null===z||cl(ne,z)>0)&&(j=!0)}else z=a;if(d)if(0!==N){const fe=zo(s[I+1]);s[c+1]=Th(fe,I),0!==fe&&(s[fe+1]=Zg(s[fe+1],c)),s[I+1]=function Sb(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Th(I,0),0!==I&&(s[I+1]=Zg(s[I+1],c)),I=c;else s[c+1]=Th(N,0),0===I?I=c:s[N+1]=Zg(s[N+1],c),N=c;j&&(s[c+1]=Sh(s[c+1])),Bp(s,z,c,!0),Bp(s,z,c,!1),function ov(s,o,a,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&cl(p,o)>=0&&(a[c+1]=Kg(a[c+1]))}(o,z,s,c,p),y=Th(I,N),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,c)}}function $p(s,o,a,c,d){let p=null;const y=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<y&&(p=o[I],c=Za(c,p.hostAttrs,d),p!==s);)I++;return null!==s&&(a.directiveStylingLast=I),c}function Za(s,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Zs(s,y,!!a||o[++p]))}return void 0===s?null:s}function Pw(s,o,a,c,d,p,y,I){if(!(3&o.type))return;const N=s.data,j=N[I+1];Am(function py(s){return 1==(1&s)}(j)?Sm(N,o,a,d,Sa(j),y):void 0)||(Am(p)||function fy(s){return 2==(2&s)}(j)&&(p=Sm(N,null,a,d,I,y)),function SD(s,o,a,c,d){const p=Xn(s);if(o)d?p?s.addClass(a,c):a.classList.add(c):p?s.removeClass(a,c):a.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:ze.DashCase;if(null==d)p?s.removeStyle(a,c,y):a.style.removeProperty(c);else{const I="string"==typeof d&&d.endsWith("!important");I&&(d=d.slice(0,-10),y|=ze.Important),p?s.setStyle(a,c,d,y):a.style.setProperty(c,d,I?"important":"")}}}(c,y,$e(Hi(),a),d,p))}function Sm(s,o,a,c,d,p){const y=null===o;let I;for(;d>0;){const N=s[d],j=Array.isArray(N),z=j?N[1]:N,ne=null===z;let fe=a[d+1];fe===Bn&&(fe=ne?St:void 0);let Pe=ne?Uc(fe,c):z===c?fe:void 0;if(j&&!Am(Pe)&&(Pe=Uc(N,c)),Am(Pe)&&(I=Pe,y))return I;const rt=s[d+1];d=y?zo(rt):Sa(rt)}if(null!==o){let N=p?o.residualClasses:o.residualStyles;null!=N&&(I=Uc(N,c))}return I}function Am(s){return void 0!==s}function Wp(s,o){return 0!=(s.flags&(o?16:32))}function Nm(s,o=""){const a=H(),c=Fe(),d=s+20,p=c.firstCreatePass?dd(c,d,1,o,null):c.data[d],y=a[d]=Ia(a[11],o);Oi(c,a,y,p),oi(p,!1)}function xm(s){return Cc("",s,""),xm}function Cc(s,o,a){const c=H(),d=Bl(c,s,o,a);return d!==Bn&&Aa(c,Hi(),d),Cc}function zp(s,o,a,c,d){const p=H(),y=function Id(s,o,a,c,d,p){const I=uu(s,Fs(),a,d);return us(2),I?o+Be(a)+c+Be(d)+p:Bn}(p,s,o,a,c,d);return y!==Bn&&Aa(p,Hi(),y),zp}function Bm(s,o,a){const c=H();return xo(c,Do(),o)&&Nr(Fe(),ai(),c,s,o,c[11],a,!0),Bm}const vu=void 0;var qw=["en",[["a","p"],["AM","PM"],vu],[["AM","PM"],vu,vu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vu,"{1} 'at' {0}",vu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zw(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Pd={};function Tv(s){const o=function v1(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Vm(o);if(a)return a;const c=o.split("-")[0];if(a=Vm(c),a)return a;if("en"===c)return qw;throw new Error(`Missing locale data for the locale "${s}".`)}function Zw(s){return Tv(s)[bn.PluralCase]}function Vm(s){return s in Pd||(Pd[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),Pd[s]}var bn=(()=>((bn=bn||{})[bn.LocaleId=0]="LocaleId",bn[bn.DayPeriodsFormat=1]="DayPeriodsFormat",bn[bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",bn[bn.DaysFormat=3]="DaysFormat",bn[bn.DaysStandalone=4]="DaysStandalone",bn[bn.MonthsFormat=5]="MonthsFormat",bn[bn.MonthsStandalone=6]="MonthsStandalone",bn[bn.Eras=7]="Eras",bn[bn.FirstDayOfWeek=8]="FirstDayOfWeek",bn[bn.WeekendRange=9]="WeekendRange",bn[bn.DateFormat=10]="DateFormat",bn[bn.TimeFormat=11]="TimeFormat",bn[bn.DateTimeFormat=12]="DateTimeFormat",bn[bn.NumberSymbols=13]="NumberSymbols",bn[bn.NumberFormats=14]="NumberFormats",bn[bn.CurrencyCode=15]="CurrencyCode",bn[bn.CurrencySymbol=16]="CurrencySymbol",bn[bn.CurrencyName=17]="CurrencyName",bn[bn.Currencies=18]="Currencies",bn[bn.Directionality=19]="Directionality",bn[bn.PluralCase=20]="PluralCase",bn[bn.ExtraData=21]="ExtraData",bn))();const Sv=["zero","one","two","few","many"],sf="en-US",af={marker:"element"},qp={marker:"ICU"};var ss=(()=>((ss=ss||{})[ss.SHIFT=2]="SHIFT",ss[ss.APPEND_EAGERLY=1]="APPEND_EAGERLY",ss[ss.COMMENT=2]="COMMENT",ss))();let Qw=sf;function Um(s,o,a){const c=o.insertBeforeIndex,d=Array.isArray(c)?c[0]:c;return null===d?oy(s,0,a):R(a[d])}function Xw(s,o,a,c,d){const p=o.insertBeforeIndex;if(Array.isArray(p)){let y=c,I=null;if(3&o.type||(I=y,y=d),null!==y&&0==(2&o.flags))for(let N=1;N<p.length;N++)nd(s,y,a[p[N]],I,!1)}}function jm(s,o){if(s.push(o),s.length>1)for(let a=s.length-2;a>=0;a--){const c=s[a];Hm(c)||Nv(c,o)&&null===lf(c)&&eC(c,o.index)}}function Hm(s){return!(64&s.type)}function Nv(s,o){return Hm(o)||s.index>o.index}function lf(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function eC(s,o){const a=s.insertBeforeIndex;Array.isArray(a)?a[0]=o:(ay(Um,Xw),s.insertBeforeIndex=o)}function Fd(s,o){const a=s.data[o];return null===a||"string"==typeof a?null:a.hasOwnProperty("currentCaseLViewIndex")?a:a.value}function Ec(s,o,a){const c=Xg(s,a,64,null,null);return jm(o,c),c}function cf(s,o){const a=o[s.currentCaseLViewIndex];return null===a?a:a<0?~a:a}function tC(s){return s>>>17}function Gm(s){return(131070&s)>>>1}let Ld=0,Zp=0;function rC(s,o,a,c){const d=a[11];let y,p=null;for(let I=0;I<o.length;I++){const N=o[I];if("string"==typeof N){const j=o[++I];null===a[j]&&(a[j]=Ia(d,N))}else if("number"==typeof N)switch(1&N){case 0:const j=tC(N);let z,ne;if(null===p&&(p=j,y=sy(d,c)),j===p?(z=c,ne=y):(z=null,ne=R(a[j])),null!==ne){const yt=Gm(N);nd(d,ne,a[yt],z,!1);const jt=Fd(s,yt);if(null!==jt&&"object"==typeof jt){const dt=cf(jt,a);null!==dt&&rC(s,jt.create[dt],a,a[jt.anchorIdx])}}break;case 1:const Pe=o[++I],rt=o[++I];Bh(d,$e(N>>>1,a),null,null,Pe,rt,null)}else switch(N){case qp:const j=o[++I],z=o[++I];null===a[z]&&Ys(a[z]=gp(d,j),a);break;case af:const ne=o[++I],fe=o[++I];null===a[fe]&&Ys(a[fe]=_t(d,ne,null),a)}}}function $m(s,o,a,c,d){for(let p=0;p<a.length;p++){const y=a[p],I=a[++p];if(y&d){let N="";for(let j=p+1;j<=p+I;j++){const z=a[j];if("string"==typeof z)N+=z;else if("number"==typeof z)if(z<0)N+=Be(o[c-z]);else{const ne=z>>>2;switch(3&z){case 1:const fe=a[++j],Pe=a[++j],rt=s.data[ne];"string"==typeof rt?Bh(o[11],o[ne],null,rt,fe,N,Pe):Nr(s,rt,o,fe,N,o[11],Pe,!1);break;case 0:const yt=o[ne];null!==yt&&td(o[11],yt,N);break;case 2:Rv(s,Fd(s,ne),o,N);break;case 3:kv(s,Fd(s,ne),c,o)}}}}else{const N=a[p+1];if(N>0&&3==(3&N)){const z=Fd(s,N>>>2);o[z.currentCaseLViewIndex]<0&&kv(s,z,c,o)}}p+=I}}function kv(s,o,a,c){let d=c[o.currentCaseLViewIndex];if(null!==d){let p=Ld;d<0&&(d=c[o.currentCaseLViewIndex]=~d,p=-1),$m(s,c,o.update[d],a,p)}}function Rv(s,o,a,c){const d=function I1(s,o){let a=s.cases.indexOf(o);if(-1===a)switch(s.type){case 1:{const c=function b1(s,o){const a=Zw(o)(parseInt(s,10)),c=Sv[a];return void 0!==c?c:"other"}(o,function w1(){return Qw}());a=s.cases.indexOf(c),-1===a&&"other"!==c&&(a=s.cases.indexOf("other"));break}case 0:a=s.cases.indexOf("other")}return-1===a?null:a}(o,c);if(cf(o,a)!==d&&(Pv(s,o,a),a[o.currentCaseLViewIndex]=null===d?null:~d,null!==d)){const y=a[o.anchorIdx];y&&rC(s,o.create[d],a,y)}}function Pv(s,o,a){let c=cf(o,a);if(null!==c){const d=o.remove[c];for(let p=0;p<d.length;p++){const y=d[p];if(y>0){const I=$e(y,a);null!==I&&cy(a[11],I)}else Pv(s,Fd(s,~y),a)}}}function T1(){const s=[];let a,c,o=-1;function p(I,N){o=0;const j=cf(I,N);c=null!==j?I.remove[j]:St}function y(){if(o<c.length){const I=c[o++];return I>0?a[I]:(s.push(o,c),p(a[1].data[~I],a),y())}return 0===s.length?null:(c=s.pop(),o=s.pop(),y())}return function d(I,N){for(a=N;s.length;)s.pop();return p(I.value,N),y}}const zm=/\ufffd(\d+):?\d*\ufffd/gi,lC=/\ufffd(\d+)\ufffd/,cC=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,uC=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,qm=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,S1=/\uE500/g;function dC(s,o,a,c,d,p,y){const I=Rh(s,c,1,null);let N=I<<ss.SHIFT,j=Ai();o===j&&(j=null),null===j&&(N|=ss.APPEND_EAGERLY),y&&(N|=ss.COMMENT,function gn(s){void 0===xt&&(xt=s())}(T1)),d.push(N,null===p?"":p);const z=Xg(s,I,y?32:1,null===p?"":p,null);jm(a,z);const ne=z.index;return oi(z,!1),null!==j&&o!==j&&function xv(s,o){let a=s.insertBeforeIndex;null===a?(ay(Um,Xw),a=s.insertBeforeIndex=[null,o]):(function ye(s,o,a){s!=o&&Tt(a,s,o,"==")}(Array.isArray(a),!0,"Expecting array here"),a.push(o))}(j,ne),z}function hC(s,o,a,c,d,p,y){const I=y.match(zm),N=dC(s,o,a,p,c,I?null:y,!1);I&&Vd(d,y,N.index,null,0,null)}function Vd(s,o,a,c,d,p){const y=s.length,I=y+1;s.push(null,null);const N=y+2,j=o.split(zm);let z=0;for(let ne=0;ne<j.length;ne++){const fe=j[ne];if(1&ne){const Pe=d+parseInt(fe,10);s.push(-1-Pe),z|=Zm(Pe)}else""!==fe&&s.push(fe)}return s.push(a<<2|(c?1:0)),c&&s.push(c,p),s[y]=z,s[I]=s.length-N,z}function Zm(s){return 1<<Math.min(s,31)}function Kp(s){let o,p,a="",c=0,d=!1;for(;null!==(o=uC.exec(s));)d?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,d=!1):(a+=s.substring(c,o.index+o[0].length),p=o[1],d=!0);return a+=s.substr(c),a}function Uv(s,o,a,c,d,p){let y=0;const I={type:d.type,currentCaseLViewIndex:Rh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function M1(s,o,a){s.push(Zm(o.mainBinding),2,-1-o.mainBinding,a<<2|2)})(a,d,p),function C1(s,o,a){const c=s.data[o];null===c?s.data[o]=a:c.value=a}(s,p,I);const N=d.values;for(let j=0;j<N.length;j++){const z=N[j],ne=[];for(let fe=0;fe<z.length;fe++){const Pe=z[fe];if("string"!=typeof Pe){const rt=ne.push(Pe)-1;z[fe]=`\x3c!--\ufffd${rt}\ufffd--\x3e`}}y=Hv(s,I,o,a,c,d.cases[j],z.join(""),ne)|y}y&&function O1(s,o,a){s.push(o,1,a<<2|3)}(a,y,p)}function jv(s){const o=[],a=[];let c=1,d=0;const p=Km(s=s.replace(cC,function(y,I,N){return c="select"===N?0:1,d=parseInt(I.substr(1),10),""}));for(let y=0;y<p.length;){let I=p[y++].trim();1===c&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&o.push(I);const N=Km(p[y++]);o.length>a.length&&a.push(N)}return{type:c,mainBinding:d,cases:o,values:a}}function Km(s){if(!s)return[];let o=0;const a=[],c=[],d=/[{}]/g;let p;for(d.lastIndex=0;p=d.exec(s);){const I=p.index;if("}"==p[0]){if(a.pop(),0==a.length){const N=s.substring(o,I);cC.test(N)?c.push(jv(N)):c.push(N),o=I+1}}else{if(0==a.length){const N=s.substring(o,I);c.push(N),o=I+1}a.push("{")}}const y=s.substring(o);return c.push(y),c}function Hv(s,o,a,c,d,p,y,I){const N=[],j=[],z=[];o.cases.push(p),o.create.push(N),o.remove.push(j),o.update.push(z);const fe=function Rl(s){const o=new ph(s);return function Xf(){try{return!!(new window.DOMParser).parseFromString(Ha(""),"text/html")}catch{return!1}}()?new pl(o):o}(fi()).getInertBodyElement(y),Pe=function zu(s){return"content"in s&&function rp(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(fe)||fe;return Pe?Ud(s,o,a,c,N,j,z,Pe,d,I,0):0}function Ud(s,o,a,c,d,p,y,I,N,j,z){let ne=0,fe=I.firstChild;for(;fe;){const Pe=Rh(s,a,1,null);switch(fe.nodeType){case Node.ELEMENT_NODE:const rt=fe,yt=rt.tagName.toLowerCase();if(tp.hasOwnProperty(yt)){Jm(d,af,yt,N,Pe),s.data[Pe]=yt;const mn=rt.attributes;for(let ar=0;ar<mn.length;ar++){const jr=mn.item(ar),Oa=jr.name.toLowerCase();jr.value.match(zm)?Gu.hasOwnProperty(Oa)&&Vd(y,jr.value,Pe,jr.name,0,cc[Oa]?gl:$a[Oa]?Fg:null):k1(d,Pe,jr)}ne=Ud(s,o,a,c,d,p,y,fe,Pe,j,z+1)|ne,Ym(p,Pe,z)}break;case Node.TEXT_NODE:const Mt=fe.textContent||"",jt=Mt.match(zm);Jm(d,null,jt?"":Mt,N,Pe),Ym(p,Pe,z),jt&&(ne=Vd(y,Mt,Pe,null,0,null)|ne);break;case Node.COMMENT_NODE:const dt=lC.exec(fe.textContent||"");if(dt){const ar=j[parseInt(dt[1],10)];Jm(d,qp,"",N,Pe),Uv(s,a,c,N,ar,Pe),x1(p,Pe,z)}}fe=fe.nextSibling}return ne}function Ym(s,o,a){0===a&&s.push(o)}function x1(s,o,a){0===a&&(s.push(~o),s.push(o))}function Jm(s,o,a,c,d){null!==o&&s.push(o),s.push(a,d,function E1(s,o,a){return s|o<<17|a<<1}(0,c,d))}function k1(s,o,a){s.push(o<<1|1,a.name,a.value)}function Wv(s,o,a=-1){const c=Fe(),d=H(),p=20+s,y=ur(c.consts,o),I=Ai();c.firstCreatePass&&function N1(s,o,a,c,d,p){const y=Ai(),I=[],N=[],j=[[]];d=function Vv(s,o){if(function Bv(s){return-1===s}(o))return Kp(s);{const a=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return Kp(s.substring(a,c))}}(d,p);const z=function A1(s){return s.replace(S1," ")}(d).split(qm);for(let ne=0;ne<z.length;ne++){let fe=z[ne];if(0==(1&ne)){const Pe=Km(fe);for(let rt=0;rt<Pe.length;rt++){let yt=Pe[rt];if(0==(1&rt)){const Mt=yt;""!==Mt&&hC(s,y,j[0],I,N,a,Mt)}else{const Mt=yt;if("object"!=typeof Mt)throw new Error(`Unable to parse ICU expression in "${d}" message.`);Uv(s,a,N,o,Mt,dC(s,y,j[0],a,I,"",!0).index)}}}else{const Pe=47===fe.charCodeAt(0),yt=(fe.charCodeAt(Pe?1:0),20+Number.parseInt(fe.substring(Pe?2:1)));if(Pe)j.shift(),oi(Ai(),!1);else{const Mt=Ec(s,j[0],yt);j.unshift([]),oi(Mt,!0)}}}s.data[c]={create:I,update:N}}(c,null===I?0:I.index,d,p,y,a);const N=c.data[p],z=wb(c,I===d[6]?null:I,d);(function Ov(s,o,a,c){const d=s[11];for(let p=0;p<o.length;p++){const y=o[p++],I=o[p],N=(y&ss.COMMENT)===ss.COMMENT,j=(y&ss.APPEND_EAGERLY)===ss.APPEND_EAGERLY,z=y>>>ss.SHIFT;let ne=s[z];null===ne&&(ne=s[z]=N?d.createComment(I):Ia(d,I)),j&&null!==a&&nd(d,a,ne,c,!1)}})(d,N.create,z,I&&8&I.type?d[I.index]:null),La(!0)}function fr(s,o,a){Wv(s,o,a),function Yp(){La(!1)}()}function Qm(s){return function Mv(s){s&&(Ld|=1<<Math.min(Zp,31)),Zp++}(xo(H(),Do(),s)),Qm}function uf(s){!function D1(s,o,a){if(Zp>0){const c=s.data[a];$m(s,o,Array.isArray(c)?c:c.update,Fs()-Zp-1,Ld)}Ld=0,Zp=0}(Fe(),H(),s+20)}function Xs(s,o,a,c,d){if(s=we(s),Array.isArray(s))for(let p=0;p<s.length;p++)Xs(s[p],o,a,c,d);else{const p=Fe(),y=H();let I=wd(s)?s:we(s.provide),N=qb(s);const j=pn(),z=1048575&j.providerIndexes,ne=j.directiveStart,fe=j.providerIndexes>>20;if(wd(s)||!s.multi){const Pe=new gi(N,d,wc),rt=qv(I,o,d?z:z+fe,ne);-1===rt?(de(k(j,y),p,I),Ka(p,s,o.length),o.push(I),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),a.push(Pe),y.push(Pe)):(a[rt]=Pe,y[rt]=Pe)}else{const Pe=qv(I,o,z+fe,ne),rt=qv(I,o,z,z+fe),yt=Pe>=0&&a[Pe],Mt=rt>=0&&a[rt];if(d&&!Mt||!d&&!yt){de(k(j,y),p,I);const jt=function V1(s,o,a,c,d){const p=new gi(s,a,wc);return p.multi=[],p.index=o,p.componentProviders=0,zv(p,d,c&&!a),p}(d?_C:Xm,a.length,d,c,N);!d&&Mt&&(a[rt].providerFactory=jt),Ka(p,s,o.length,0),o.push(I),j.directiveStart++,j.directiveEnd++,d&&(j.providerIndexes+=1048576),a.push(jt),y.push(jt)}else Ka(p,s,Pe>-1?Pe:rt,zv(a[d?rt:Pe],N,!d&&c));!d&&c&&Mt&&a[rt].componentProviders++}}}function Ka(s,o,a,c){const d=wd(o),p=function KD(s){return!!s.useClass}(o);if(d||p){const N=(p?we(o.useClass):o).prototype.ngOnDestroy;if(N){const j=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const z=j.indexOf(a);-1===z?j.push(a,[c,N]):j[z+1].push(c,N)}else j.push(a,N)}}}function zv(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function qv(s,o,a,c){for(let d=a;d<c;d++)if(o[d]===s)return d;return-1}function Xm(s,o,a,c){return e_(this.multi,[])}function _C(s,o,a,c){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Ar(a,a[1],this.providerFactory.index,c);p=I.slice(0,y),e_(d,p);for(let N=y;N<I.length;N++)p.push(I[N])}else p=[],e_(d,p);return p}function e_(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function t_(s,o=[]){return a=>{a.providersResolver=(c,d)=>function Ii(s,o,a){const c=Fe();if(c.firstCreatePass){const d=he(s);Xs(a,c.data,c.blueprint,d,!0),Xs(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class yC{}class As{resolveComponentFactory(o){throw function Ri(s){const o=Error(`No component factory found for ${Se(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Jp=(()=>{class s{}return s.NULL=new As,s})();function H1(){return df(pn(),H())}function df(s,o){return new hf(it(s,o))}let hf=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=H1,s})();function G1(s){return s instanceof hf?s.nativeElement:s}class vC{}let $1=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function W1(){const s=H(),a=vn(pn().index,s);return function RS(s){return s[11]}(ti(a)?a:s)}(),s})(),z1=(()=>{class s{}return s.\u0275prov=wn({token:s,providedIn:"root",factory:()=>null}),s})();class Zv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ul=new Zv("13.2.7"),bC={};function xa(s,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(R(p)),Ti(p))for(let I=10;I<p.length;I++){const N=p[I],j=N[1].firstChild;null!==j&&xa(N[1],N,j,c)}const y=a.type;if(8&y)xa(s,o,a.child,c);else if(32&y){const I=qt(a,o);let N;for(;N=I();)c.push(N)}else if(16&y){const I=ly(o,a);if(Array.isArray(I))c.push(...I);else{const N=Ei(o[16]);xa(N[1],N,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class El{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return xa(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ti(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Ke(o,c),la(a,c))}this._attachedToViewContainer=!1}gt(this._lView[1],this._lView)}onDestroy(o){Cy(this._lView[1],this._lView,null,o)}markForCheck(){xr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){_d(this._lView[1],this._lView,this.context)}checkNoChanges(){!function im(s,o,a){so(!0);try{_d(s,o,a)}finally{so(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ze(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mp(s,o){sr(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ze(902,"");this._appRef=o}}class n_ extends El{constructor(o){super(o),this._view=o}detectChanges(){Uh(this._view)}checkNoChanges(){!function jb(s){so(!0);try{Uh(s)}finally{so(!1)}}(this._view)}get context(){return null}}class wC extends Jp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=en(o);return new ff(a,this.ngModule)}}function CC(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class ff extends yC{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function yp(s){return s.map(Pl).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return CC(this.componentDef.inputs)}get outputs(){return CC(this.componentDef.outputs)}create(o,a,c,d){const p=(d=d||this.ngModule)?function DC(s,o){return{get:(a,c,d)=>{const p=s.get(a,bC,d);return p!==bC||c===bC?p:o.get(a,c,d)}}}(o,d.injector):o,y=p.get(vC,P),I=p.get(z1,null),N=y.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",z=c?function pd(s,o,a){if(Xn(s))return s.selectRootElement(o,a===Ue.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(N,c,this.componentDef.encapsulation):_t(y.createRenderer(null,this.componentDef),j,function EC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(j)),ne=this.componentDef.onPush?576:528,fe=function rw(s,o){return{components:[],scheduler:s||Wg,clean:WD,playerHandler:o||null,flags:0}}(),Pe=Ll(0,null,null,1,0,null,null,null,null,null),rt=ud(null,Pe,fe,ne,null,null,y,N,I,p);let yt,Mt;ia(rt);try{const jt=function nw(s,o,a,c,d,p){const y=a[1];a[20]=s;const N=dd(y,20,2,"#host",null),j=N.mergedAttrs=o.hostAttrs;null!==j&&(Tp(N,j,!0),null!==s&&(T(d,s,j),null!==N.classes&&uy(d,s,N.classes),null!==N.styles&&Ts(d,s,N.styles)));const z=c.createRenderer(s,o),ne=ud(a,fd(o),null,o.onPush?64:16,a[20],N,c,z,p||null,null);return y.firstCreatePass&&(de(k(N,a),y,o.type),Ub(y,N),Dy(N,a.length,1)),rm(a,ne),a[20]=ne}(z,this.componentDef,rt,y,N);if(z)if(c)T(N,z,["ng-version",Ul.full]);else{const{attrs:dt,classes:mn}=function ru(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&a.push(p);else{if(!Hs(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);dt&&T(N,z,dt),mn&&mn.length>0&&uy(N,z,mn.join(" "))}if(Mt=Ln(Pe,20),void 0!==a){const dt=Mt.projection=[];for(let mn=0;mn<this.ngContentSelectors.length;mn++){const ar=a[mn];dt.push(null!=ar?Array.from(ar):null)}}yt=function By(s,o,a,c,d){const p=a[1],y=function Fb(s,o,a){const c=pn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Iy(s,c,o,Rh(s,o,1,null),a));const d=Ar(o,s,c.directiveStart,c);Ys(d,o);const p=it(c,o);return p&&Ys(p,o),d}(p,a,o);if(c.components.push(y),s[8]=y,d&&d.forEach(N=>N(y,o)),o.contentQueries){const N=pn();o.contentQueries(1,y,N.directiveStart)}const I=pn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ba(I.index),au(a[1],I,0,I.directiveStart,I.directiveEnd,o),Lh(o,y)),y}(jt,this.componentDef,rt,fe,[iw]),Ph(Pe,rt,null)}finally{Uo()}return new r_(this.componentType,yt,df(Mt,rt),rt,Mt)}}class r_ extends class U1{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new n_(d),this.componentType=o}get injector(){return new Go(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class jd{}class i_{}const gf=new Map;class Jv extends jd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wC(this);const c=kn(o);this._bootstrapComponents=g(c.bootstrap),this._r3Injector=xy(o,a,[{provide:jd,useValue:this},{provide:Jp,useValue:this.componentFactoryResolver}],Se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=yl.THROW_IF_NOT_FOUND,c=Bt.Default){return o===yl||o===jd||o===om?this:this._r3Injector.get(o,a,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class s_ extends i_{constructor(o){super(),this.moduleType=o,null!==kn(o)&&function Kv(s){const o=new Set;!function a(c){const d=kn(c,!0),p=d.id;null!==p&&(function IC(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${Se(o)} vs ${Se(o.name)}`)}(p,gf.get(p),c),gf.set(p,c));const y=g(d.imports);for(const I of y)o.has(I)||(o.add(I),a(I))}(s)}(o)}create(o){return new Jv(this.moduleType,o)}}function o_(s,o,a){const c=Ni()+s,d=H();return d[c]===Bn?go(d,c,a?o.call(a):o()):function Wh(s,o){return s[o]}(d,c)}function a_(s,o,a,c){return _f(H(),Ni(),s,o,a,c)}function SC(s,o,a,c,d){return function Dc(s,o,a,c,d,p,y){const I=o+a;return uu(s,I,d,p)?go(s,I+2,y?c.call(y,d,p):c(d,p)):Ma(s,I+2)}(H(),Ni(),s,o,a,c,d)}function Xp(s,o,a,c,d,p){return function NC(s,o,a,c,d,p,y,I){const N=o+a;return function Dd(s,o,a,c,d){const p=uu(s,o,a,c);return xo(s,o+2,d)||p}(s,N,d,p,y)?go(s,N+3,I?c.call(I,d,p,y):c(d,p,y)):Ma(s,N+3)}(H(),Ni(),s,o,a,c,d,p)}function Ma(s,o){const a=s[o];return a===Bn?void 0:a}function _f(s,o,a,c,d,p){const y=o+a;return xo(s,y,d)?go(s,y+1,p?c.call(p,d):c(d)):Ma(s,y+1)}function yf(s,o){const a=Fe();let c;const d=s+20;a.firstCreatePass?(c=function bu(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=pr(c.type)),y=Rt(wc);try{const I=ps(!1),N=p();return ps(I),function uw(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,H(),d,N),N}finally{Rt(y)}}function xC(s,o,a){const c=s+20,d=H(),p=Sn(d,c);return function tg(s,o){return s[1].data[o].pure}(d,c)?_f(d,Ni(),o,p.transform,a,p):p.transform(a)}function u_(s){return o=>{setTimeout(s,void 0,o)}}const jl=class Q1 extends b.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),y=c;if(o&&"object"==typeof o){const N=o;d=N.next?.bind(N),p=N.error?.bind(N),y=N.complete?.bind(N)}this.__isAsync&&(p=u_(p),d&&(d=u_(d)),y&&(y=u_(y)));const I=super.subscribe({next:d,error:p,complete:y});return o instanceof h.w0&&o.add(I),I}};function X1(){return this._results[cu()]()}class d_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=cu(),c=d_.prototype;c[a]||(c[a]=X1)}get changes(){return this._changes||(this._changes=new jl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=Bs(o);(this._changesDetected=!function ku(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ng=(()=>{class s{}return s.__NG_ELEMENT_ID__=kC,s})();const eI=ng,OC=class extends eI{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o){const a=this._declarationTContainer.tViews,c=ud(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(a)),Ph(a,c,o),new El(c)}};function kC(){return rg(pn(),H())}function rg(s,o){return 4&s.type?new OC(o,s,df(s,o)):null}let ig=(()=>{class s{}return s.__NG_ELEMENT_ID__=e0,s})();function e0(){return PC(pn(),H())}const h_=ig,RC=class extends h_{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new Go(this._hostTNode,this._hostLView)}get parentInjector(){const o=re(this._hostTNode,this._hostLView);if(ht(o)){const a=hr(o,this._hostLView),c=hn(o);return new Go(a[1].data[c+8],a)}return new Go(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=t0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){const d=o.createEmbeddedView(a||{});return this.insert(d,c),d}createComponent(o,a,c,d,p){const y=o&&!function Ml(s){return"function"==typeof s}(o);let I;if(y)I=a;else{const ne=a||{};I=ne.index,c=ne.injector,d=ne.projectableNodes,p=ne.ngModuleRef}const N=y?o:new ff(en(o)),j=c||this.parentInjector;if(!p&&null==N.ngModule){const fe=(y?j:this.parentInjector).get(jd,null);fe&&(p=fe)}const z=N.create(j,d,void 0,p);return this.insert(z.hostView,I),z}insert(o,a){const c=o._lView,d=c[1];if(function cr(s){return Ti(s[3])}(c)){const z=this.indexOf(o);if(-1!==z)this.detach(z);else{const ne=c[3],fe=new RC(ne,ne[6],ne[3]);fe.detach(fe.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function Pn(s,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],tc(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function ED(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=128}(d,c,y,p);const I=gc(p,y),N=c[11],j=sy(N,y[7]);return null!==j&&function pc(s,o,a,c,d,p){c[0]=d,c[6]=o,sr(s,c,a,1,d,p)}(d,y[6],N,c,j,I),o.attachToViewContainerRef(),tc(Hl(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=t0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Ke(this._lContainer,a);c&&(la(Hl(this._lContainer),a),gt(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=Ke(this._lContainer,a);return c&&null!=la(Hl(this._lContainer),a)?new El(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function t0(s){return s[8]}function Hl(s){return s[8]||(s[8]=[])}function PC(s,o){let a;const c=o[s.index];if(Ti(c))a=c;else{let d;if(8&s.type)d=R(c);else{const p=o[11];d=p.createComment("");const y=it(s,o);nd(p,sy(p,y),d,function Ta(s,o){return Xn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=a=md(c,o,d,s),rm(o,a)}return new RC(a,s,o)}class n0{constructor(o){this.queryList=o,this.matches=null}clone(){return new n0(this.queryList)}setDirty(){this.queryList.setDirty()}}class r0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new r0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==oI(o,a).matches&&this.queries[a].setDirty()}}class FC{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class f_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new f_(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class p_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new p_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,nI(a,p)),this.matchTNodeWithReadOption(o,a,jo(a,o,p,!1,!1))}else c===ng?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,jo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===hf||d===ig||d===ng&&4&a.type)this.addMatch(a.index,-2);else{const p=jo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function nI(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function LC(s,o,a,c){return-1===a?function rI(s,o){return 11&s.type?df(s,o):4&s.type?rg(s,o):null}(o,s):-2===a?function iI(s,o,a){return a===hf?df(o,s):a===ng?rg(o,s):a===ig?PC(o,s):void 0}(s,o,c):Ar(s,s[1],a,o)}function $d(s,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,y=a.matches,I=[];for(let N=0;N<y.length;N+=2){const j=y[N];I.push(j<0?null:LC(o,p[j],y[N+1],a.metadata.read))}d.matches=I}return d.matches}function sg(s,o,a,c){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const y=$d(s,o,d,a);for(let I=0;I<p.length;I+=2){const N=p[I];if(N>0)c.push(y[I/2]);else{const j=p[I+1],z=o[-N];for(let ne=10;ne<z.length;ne++){const fe=z[ne];fe[17]===fe[3]&&sg(fe[1],fe,j,c)}if(null!==z[9]){const ne=z[9];for(let fe=0;fe<ne.length;fe++){const Pe=ne[fe];sg(Pe[1],Pe,j,c)}}}}}return c}function BC(s){const o=H(),a=Fe(),c=Io();ra(c+1);const d=oI(a,c);if(s.dirty&&An(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?sg(a,o,c,[]):$d(a,o,d,c);s.reset(p,G1),s.notifyOnChanges()}return!0}return!1}function VC(s,o,a){const c=Fe();c.firstCreatePass&&(GC(c,new FC(s,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),HC(c,H(),o)}function UC(s,o,a,c){const d=Fe();if(d.firstCreatePass){const p=pn();GC(d,new FC(o,a,c),p.index),function LS(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}HC(d,H(),a)}function jC(){return function sI(s,o){return s[19].queries[o].queryList}(H(),Io())}function HC(s,o,a){const c=new d_(4==(4&a));Cy(s,o,c,c.destroy),null===o[19]&&(o[19]=new r0),o[19].queries.push(new n0(c))}function GC(s,o,a){null===s.queries&&(s.queries=new f_),s.queries.track(new p_(o,a))}function oI(s,o){return s.queries.getByIndex(o)}function s0(s,o){return rg(s,o)}function b_(...s){}const XC=new li("Application Initializer");let y0=(()=>{class s{constructor(a){this.appInits=a,this.resolve=b_,this.reject=b_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(tv(p))a.push(p);else if(Rd(p)){const y=new Promise((I,N)=>{p.subscribe({complete:I,error:N})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Yt(XC,8))},s.\u0275prov=wn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const eE=new li("AppId",{providedIn:"root",factory:function tE(){return`${Pi()}${Pi()}${Pi()}`}});function Pi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const v0=new li("Platform Initializer"),b0=new li("Platform ID"),w0=new li("appBootstrapListener");let rE=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();const C0=new li("LocaleId",{providedIn:"root",factory:()=>Wn(C0,Bt.Optional|Bt.SkipSelf)||function mI(){return typeof $localize<"u"&&$localize.locale||sf}()}),iE=new li("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class oE{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let aE=(()=>{class s{compileModuleSync(a){return new s_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=g(kn(a).declarations).reduce((y,I)=>{const N=en(I);return N&&y.push(new ff(N)),y},[]);return new oE(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lE=(()=>Promise.resolve(0))();function w_(s){typeof Zone>"u"?lE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Yo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jl(!1),this.onMicrotaskEmpty=new jl(!1),this.onStable=new jl(!1),this.onError=new jl(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function to(){let s=an.requestAnimationFrame,o=an.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function _I(s){const o=()=>{!function Jo(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ef(s),s.isCheckStableRunning=!0,Ya(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ef(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,y,I)=>{try{return cE(s),a.invokeTask(d,p,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Gl(s)}},onInvoke:(a,c,d,p,y,I,N)=>{try{return cE(s),a.invoke(d,p,y,I,N)}finally{s.shouldCoalesceRunChangeDetection&&o(),Gl(s)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Ef(s),Ya(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,E0,b_,b_);try{return p.runTask(y,a,c)}finally{p.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const E0={};function Ya(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ef(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Gl(s){s._nesting--,Ya(s)}class $l{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jl,this.onMicrotaskEmpty=new jl,this.onStable=new jl,this.onError=new jl}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}let Eu=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yo.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Yt(Yo))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})(),uE=(()=>{class s{constructor(){this._applications=new Map,C_.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return C_.findTestabilityInTree(this,a,c)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();class ug{addToWindow(o){}findTestabilityInTree(o,a,c){return null}}function D0(s){C_=s}let Qr,C_=new ug;const hE=new li("AllowMultipleToken");class vI{constructor(o,a){this.name=o,this.token=a}}function E_(s,o,a=[]){const c=`Platform: ${o}`,d=new li(c);return(p=[])=>{let y=pE();if(!y||y.injector.get(hE,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const I=a.concat(p).concat({provide:d,useValue:!0},{provide:qa,useValue:"platform"});!function fE(s){if(Qr&&!Qr.destroyed&&!Qr.injector.get(hE,!1))throw new Ze(400,"");Qr=s.get(Df);const o=s.get(v0,null);o&&o.forEach(a=>a())}(yl.create({providers:I,name:c}))}return function D_(s){const o=pE();if(!o)throw new Ze(401,"");return o}()}}function pE(){return Qr&&!Qr.destroyed?Qr:null}let Df=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const I=function bI(s,o){let a;return a="noop"===s?new $l:("zone.js"===s?void 0:s)||new Yo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!o?.ngZoneEventCoalescing,shouldCoalesceRunChangeDetection:!!o?.ngZoneRunCoalescing}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),N=[{provide:Yo,useValue:I}];return I.run(()=>{const j=yl.create({providers:N,parent:this.injector,name:a.moduleType.name}),z=a.create(j),ne=z.injector.get(ts,null);if(!ne)throw new Ze(402,"");return I.runOutsideAngular(()=>{const fe=I.onError.subscribe({next:Pe=>{ne.handleError(Pe)}});z.onDestroy(()=>{I_(this._modules,z),fe.unsubscribe()})}),function wI(s,o,a){try{const c=a();return tv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(ne,I,()=>{const fe=z.injector.get(y0);return fe.runInitializers(),fe.donePromise.then(()=>(function Av(s){(function Dt(s,o){null==s&&Tt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Qw=s.toLowerCase().replace(/_/g,"-"))}(z.injector.get(C0,sf)||sf),this._moduleDoBootstrap(z),z))})})}bootstrapModule(a,c=[]){const d=If({},c);return function dE(s,o,a){const c=new s_(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(Tf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ze(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ze(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Yt(yl))},s.\u0275prov=wn({token:s,factory:s.\u0275fac}),s})();function If(s,o){return Array.isArray(o)?o.reduce(If,s):{...s,...o}}let Tf=(()=>{class s{constructor(a,c,d,p,y){this._zone=a,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new Y.y(j=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{j.next(this._stable),j.complete()})}),N=new Y.y(j=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{Yo.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,j.next(!0))})})});const ne=this._zone.onUnstable.subscribe(()=>{Yo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{j.next(!1)}))});return()=>{z.unsubscribe(),ne.unsubscribe()}});this.isStable=(0,ve.T)(I,N.pipe((0,pe.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Ze(405,"");let d;d=a instanceof yC?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function yI(s){return s.isBoundToModule}(d)?void 0:this._injector.get(jd),I=d.create(yl.NULL,[],c||d.selector,p),N=I.location.nativeElement,j=I.injector.get(Eu,null),z=j&&I.injector.get(uE);return j&&z&&z.registerApplication(N,j),I.onDestroy(()=>{this.detachView(I.hostView),I_(this.components,I),z&&z.unregisterApplication(N)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Ze(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;I_(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(w0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Yt(Yo),Yt(yl),Yt(ts),Yt(Jp),Yt(y0))},s.\u0275prov=wn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function I_(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let T0=!0,S0=!1;function mE(){return S0=!0,T0}function CI(){if(S0)throw new Error("Cannot enable prod mode after platform setup.");T0=!1}let N0=(()=>{class s{}return s.__NG_ELEMENT_ID__=DI,s})();function DI(s){return function yE(s,o,a){if(Rr(s)&&!a){const c=vn(s.index,o);return new El(c,c)}return 47&s.type?new El(o[16],o):null}(pn(),H(),16==(16&s))}class EE{constructor(){}supports(o){return rs(o)}create(o){return new R0(o)}}const Sf=(s,o)=>o;class R0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Sf}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const y=!c||a&&a.currentIndex<Nf(c,d,p)?a:c,I=Nf(y,d,p),N=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const j=I-d,z=N-d;if(j!=z){for(let fe=0;fe<j;fe++){const Pe=fe<p.length?p[fe]:p[fe]=0,rt=Pe+fe;z<=rt&&rt<j&&(p[fe]=Pe+1)}p[y.previousIndex]=z-j}}I!==N&&o(y,I,N)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!rs(o))throw new Ze(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],y=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,p,y,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,I),c=!0),a=a._next}else d=0,function jy(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[cu()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{y=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,I,y,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new MI(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Af),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Af),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class MI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Af{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new OI,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Nf(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class A_{constructor(){}supports(o){return o instanceof Map||xp(o)}create(){return new kI}}class kI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||xp(o)))throw new Ze(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const c=new RI(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class RI{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DE(){return new P0([new EE])}let P0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||DE()),deps:[[s,new dl,new Ds]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Ze(901,"")}}return s.\u0275prov=wn({token:s,providedIn:"root",factory:DE}),s})();function F0(){return new L0([new A_])}let L0=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||F0()),deps:[[s,new dl,new Ds]]}}find(a){const c=this.factories.find(p=>p.supports(a));if(c)return c;throw new Ze(901,"")}}return s.\u0275prov=wn({token:s,providedIn:"root",factory:F0}),s})();const SE=E_(null,"core",[{provide:b0,useValue:"unknown"},{provide:Df,deps:[yl]},{provide:uE,deps:[]},{provide:rE,deps:[]}]);let VI=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Yt(Tf))},s.\u0275mod=Ie({type:s}),s.\u0275inj=Fn({}),s})()},9900:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Fj:()=>Je,u5:()=>zt,JU:()=>Ze,JJ:()=>ce,JL:()=>me,F:()=>ti,On:()=>_r,YN:()=>Sr,_Y:()=>Ui,Kr:()=>zs});var b=G(4537),h=G(8692),Y=G(818),ve=G(447),pe=G(5955),Te=G(6651),ke=G(8499),Se=G(2692),Me=G(9299),ae=G(237),we=G(7969);let at=(()=>{class B{constructor(M,H){this._renderer=M,this._elementRef=H,this.onChange=Fe=>{},this.onTouched=()=>{}}setProperty(M,H){this._renderer.setProperty(this._elementRef.nativeElement,M,H)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(b.Qsj),b.Y36(b.SBq))},B.\u0275dir=b.lG2({type:B}),B})(),Ae=(()=>{class B extends at{}return B.\u0275fac=function(){let O;return function(H){return(O||(O=b.n5z(B)))(H||B)}}(),B.\u0275dir=b.lG2({type:B,features:[b.qOj]}),B})();const Ze=new b.OlP("NgValueAccessor"),Qe={provide:Ze,useExisting:(0,b.Gpc)(()=>Je),multi:!0},wt=new b.OlP("CompositionEventMode");let Je=(()=>{class B extends at{constructor(M,H,Fe){super(M,H),this._compositionMode=Fe,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function It(){const B=(0,h.q)()?(0,h.q)().getUserAgent():"";return/android (\d+)/.test(B.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(wt,8))},B.\u0275dir=b.lG2({type:B,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,H){1&M&&b.NdJ("input",function(Vt){return H._handleInput(Vt.target.value)})("blur",function(){return H.onTouched()})("compositionstart",function(){return H._compositionStart()})("compositionend",function(Vt){return H._compositionEnd(Vt.target.value)})},features:[b._Bn([Qe]),b.qOj]}),B})();const pt=new b.OlP("NgValidators"),ue=new b.OlP("NgAsyncValidators");function Tt(B){return null!=B}function Tn(B){const O=(0,b.QGY)(B)?(0,ae.D)(B):B;return(0,b.CqO)(O),O}function xn(B){let O={};return B.forEach(M=>{O=null!=M?{...O,...M}:O}),0===Object.keys(O).length?null:O}function Ir(B,O){return O.map(M=>M(B))}function Hr(B){return B.map(O=>function wn(B){return!B.validate}(O)?O:M=>O.validate(M))}function _n(B){return null!=B?function Fn(B){if(!B)return null;const O=B.filter(Tt);return 0==O.length?null:function(M){return xn(Ir(M,O))}}(Hr(B)):null}function Fr(B){return null!=B?function vr(B){if(!B)return null;const O=B.filter(Tt);return 0==O.length?null:function(M){return function se(...B){const O=(0,Te.jO)(B),{args:M,keys:H}=(0,ve.D)(B),Fe=new Y.y(Vt=>{const{length:pn}=M;if(!pn)return void Vt.complete();const si=new Array(pn);let Ai=pn,oi=pn;for(let Eo=0;Eo<pn;Eo++){let Bo=!1;(0,pe.Xf)(M[Eo]).subscribe((0,ke.x)(Vt,ma=>{Bo||(Bo=!0,oi--),si[Eo]=ma},()=>Ai--,void 0,()=>{(!Ai||!Bo)&&(oi||Vt.next(H?(0,Me.n)(H,si):si),Vt.complete())}))}});return O?Fe.pipe((0,Se.Z)(O)):Fe}(Ir(M,O).map(Tn)).pipe((0,we.U)(xn))}}(Hr(B)):null}function Xr(B,O){return null===B?[O]:Array.isArray(B)?[...B,O]:[B,O]}function Mr(B){return B?Array.isArray(B)?B:[B]:[]}function wr(B,O){return Array.isArray(B)?B.includes(O):B===O}function nr(B,O){const M=Mr(O);return Mr(B).forEach(Fe=>{wr(M,Fe)||M.push(Fe)}),M}function Bt(B,O){return Mr(O).filter(M=>!wr(B,M))}class ci{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=_n(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=Fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,M){return!!this.control&&this.control.hasError(O,M)}getError(O,M){return this.control?this.control.getError(O,M):null}}class fn extends ci{get formDirective(){return null}get path(){return null}}class Rt extends ci{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ei{constructor(O){this._cd=O}is(O){return"submitted"===O?!!this._cd?.submitted:!!this._cd?.control?.[O]}}let ce=(()=>{class B extends ei{constructor(M){super(M)}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(Rt,2))},B.\u0275dir=b.lG2({type:B,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,H){2&M&&b.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))},features:[b.qOj]}),B})(),me=(()=>{class B extends ei{constructor(M){super(M)}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(fn,10))},B.\u0275dir=b.lG2({type:B,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,H){2&M&&b.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))("ng-submitted",H.is("submitted"))},features:[b.qOj]}),B})();function yn(B,O){_e(B,O),O.valueAccessor.writeValue(B.value),function Ie(B,O){O.valueAccessor.registerOnChange(M=>{B._pendingValue=M,B._pendingChange=!0,B._pendingDirty=!0,"change"===B.updateOn&&Wt(B,O)})}(B,O),function xe(B,O){const M=(H,Fe)=>{O.valueAccessor.writeValue(H),Fe&&O.viewToModelUpdate(H)};B.registerOnChange(M),O._registerOnDestroy(()=>{B._unregisterOnChange(M)})}(B,O),function bt(B,O){O.valueAccessor.registerOnTouched(()=>{B._pendingTouched=!0,"blur"===B.updateOn&&B._pendingChange&&Wt(B,O),"submit"!==B.updateOn&&B.markAsTouched()})}(B,O),function te(B,O){if(O.valueAccessor.setDisabledState){const M=H=>{O.valueAccessor.setDisabledState(H)};B.registerOnDisabledChange(M),O._registerOnDestroy(()=>{B._unregisterOnDisabledChange(M)})}}(B,O)}function le(B,O){B.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(O)})}function _e(B,O){const M=function br(B){return B._rawValidators}(B);null!==O.validator?B.setValidators(Xr(M,O.validator)):"function"==typeof M&&B.setValidators([M]);const H=function Lr(B){return B._rawAsyncValidators}(B);null!==O.asyncValidator?B.setAsyncValidators(Xr(H,O.asyncValidator)):"function"==typeof H&&B.setAsyncValidators([H]);const Fe=()=>B.updateValueAndValidity();le(O._rawValidators,Fe),le(O._rawAsyncValidators,Fe)}function Wt(B,O){B._pendingDirty&&B.markAsDirty(),B.setValue(B._pendingValue,{emitModelToViewChange:!1}),O.viewToModelUpdate(B._pendingValue),B._pendingChange=!1}function on(B,O){const M=B.indexOf(O);M>-1&&B.splice(M,1)}const dn="VALID",zr="INVALID",ui="PENDING",tn="DISABLED";function Qn(B){return(Vr(B)?B.validators:B)||null}function Or(B){return Array.isArray(B)?_n(B):B||null}function Gn(B,O){return(Vr(O)?O.asyncValidators:B)||null}function Rn(B){return Array.isArray(B)?Fr(B):B||null}function Vr(B){return null!=B&&!Array.isArray(B)&&"object"==typeof B}const Zr=B=>B instanceof vs;function ko(B){return(B=>B instanceof Vi)(B)?B.value:B.getRawValue()}function _s(B,O){const M=Zr(B),H=B.controls;if(!(M?Object.keys(H):H).length)throw new b.vHH(1e3,"");if(!H[O])throw new b.vHH(1001,"")}function ys(B,O){Zr(B),B._forEachChild((H,Fe)=>{if(void 0===O[Fe])throw new b.vHH(1002,"")})}class qi{constructor(O,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=O,this._rawAsyncValidators=M,this._composedValidatorFn=Or(this._rawValidators),this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(O){this._rawValidators=this._composedValidatorFn=O}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(O){this._rawAsyncValidators=this._composedAsyncValidatorFn=O}get parent(){return this._parent}get valid(){return this.status===dn}get invalid(){return this.status===zr}get pending(){return this.status==ui}get disabled(){return this.status===tn}get enabled(){return this.status!==tn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(O){this._rawValidators=O,this._composedValidatorFn=Or(O)}setAsyncValidators(O){this._rawAsyncValidators=O,this._composedAsyncValidatorFn=Rn(O)}addValidators(O){this.setValidators(nr(O,this._rawValidators))}addAsyncValidators(O){this.setAsyncValidators(nr(O,this._rawAsyncValidators))}removeValidators(O){this.setValidators(Bt(O,this._rawValidators))}removeAsyncValidators(O){this.setAsyncValidators(Bt(O,this._rawAsyncValidators))}hasValidator(O){return wr(this._rawValidators,O)}hasAsyncValidator(O){return wr(this._rawAsyncValidators,O)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(O={}){this.touched=!0,this._parent&&!O.onlySelf&&this._parent.markAsTouched(O)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(O=>O.markAllAsTouched())}markAsUntouched(O={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}markAsDirty(O={}){this.pristine=!1,this._parent&&!O.onlySelf&&this._parent.markAsDirty(O)}markAsPristine(O={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}markAsPending(O={}){this.status=ui,!1!==O.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!O.onlySelf&&this._parent.markAsPending(O)}disable(O={}){const M=this._parentMarkedDirty(O.onlySelf);this.status=tn,this.errors=null,this._forEachChild(H=>{H.disable({...O,onlySelf:!0})}),this._updateValue(),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...O,skipPristineCheck:M}),this._onDisabledChange.forEach(H=>H(!0))}enable(O={}){const M=this._parentMarkedDirty(O.onlySelf);this.status=dn,this._forEachChild(H=>{H.enable({...O,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent}),this._updateAncestors({...O,skipPristineCheck:M}),this._onDisabledChange.forEach(H=>H(!1))}_updateAncestors(O){this._parent&&!O.onlySelf&&(this._parent.updateValueAndValidity(O),O.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(O){this._parent=O}updateValueAndValidity(O={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dn||this.status===ui)&&this._runAsyncValidator(O.emitEvent)),!1!==O.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!O.onlySelf&&this._parent.updateValueAndValidity(O)}_updateTreeValidity(O={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(O)),this.updateValueAndValidity({onlySelf:!0,emitEvent:O.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tn:dn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(O){if(this.asyncValidator){this.status=ui,this._hasOwnPendingAsyncValidator=!0;const M=Tn(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(H=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(H,{emitEvent:O})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(O,M={}){this.errors=O,this._updateControlsErrors(!1!==M.emitEvent)}get(O){return function qr(B,O,M){if(null==O||(Array.isArray(O)||(O=O.split(M)),Array.isArray(O)&&0===O.length))return null;let H=B;return O.forEach(Fe=>{H=Zr(H)?H.controls.hasOwnProperty(Fe)?H.controls[Fe]:null:(B=>B instanceof Zi)(H)&&H.at(Fe)||null}),H}(this,O,".")}getError(O,M){const H=M?this.get(M):this;return H&&H.errors?H.errors[O]:null}hasError(O,M){return!!this.getError(O,M)}get root(){let O=this;for(;O._parent;)O=O._parent;return O}_updateControlsErrors(O){this.status=this._calculateStatus(),O&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(O)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?tn:this.errors?zr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ui)?ui:this._anyControlsHaveStatus(zr)?zr:dn}_anyControlsHaveStatus(O){return this._anyControls(M=>M.status===O)}_anyControlsDirty(){return this._anyControls(O=>O.dirty)}_anyControlsTouched(){return this._anyControls(O=>O.touched)}_updatePristine(O={}){this.pristine=!this._anyControlsDirty(),this._parent&&!O.onlySelf&&this._parent._updatePristine(O)}_updateTouched(O={}){this.touched=this._anyControlsTouched(),this._parent&&!O.onlySelf&&this._parent._updateTouched(O)}_isBoxedValue(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}_registerOnCollectionChange(O){this._onCollectionChange=O}_setUpdateStrategy(O){Vr(O)&&null!=O.updateOn&&(this._updateOn=O.updateOn)}_parentMarkedDirty(O){return!O&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vi extends qi{constructor(O=null,M,H){super(Qn(M),Gn(H,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(O),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vr(M)&&M.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(O)?O.value:O)}setValue(O,M={}){this.value=this._pendingValue=O,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(H=>H(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(O,M={}){this.setValue(O,M)}reset(O=this.defaultValue,M={}){this._applyFormState(O),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(O){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(O){this._onChange.push(O)}_unregisterOnChange(O){on(this._onChange,O)}registerOnDisabledChange(O){this._onDisabledChange.push(O)}_unregisterOnDisabledChange(O){on(this._onDisabledChange,O)}_forEachChild(O){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(O){this._isBoxedValue(O)?(this.value=this._pendingValue=O.value,O.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=O}}class vs extends qi{constructor(O,M,H){super(Qn(M),Gn(H,M)),this.controls=O,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(O,M){return this.controls[O]?this.controls[O]:(this.controls[O]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(O,M,H={}){this.registerControl(O,M),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}removeControl(O,M={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(O,M,H={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),delete this.controls[O],M&&this.registerControl(O,M),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}contains(O){return this.controls.hasOwnProperty(O)&&this.controls[O].enabled}setValue(O,M={}){ys(this,O),Object.keys(O).forEach(H=>{_s(this,H),this.controls[H].setValue(O[H],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(O,M={}){null!=O&&(Object.keys(O).forEach(H=>{this.controls[H]&&this.controls[H].patchValue(O[H],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(O={},M={}){this._forEachChild((H,Fe)=>{H.reset(O[Fe],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(O,M,H)=>(O[H]=ko(M),O))}_syncPendingControls(){let O=this._reduceChildren(!1,(M,H)=>!!H._syncPendingControls()||M);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){Object.keys(this.controls).forEach(M=>{const H=this.controls[M];H&&O(H,M)})}_setUpControls(){this._forEachChild(O=>{O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(O){for(const M of Object.keys(this.controls)){const H=this.controls[M];if(this.contains(M)&&O(H))return!0}return!1}_reduceValue(){return this._reduceChildren({},(O,M,H)=>((M.enabled||this.disabled)&&(O[H]=M.value),O))}_reduceChildren(O,M){let H=O;return this._forEachChild((Fe,Vt)=>{H=M(H,Fe,Vt)}),H}_allControlsDisabled(){for(const O of Object.keys(this.controls))if(this.controls[O].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Zi extends qi{constructor(O,M,H){super(Qn(M),Gn(H,M)),this.controls=O,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(O){return this.controls[O]}push(O,M={}){this.controls.push(O),this._registerControl(O),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(O,M,H={}){this.controls.splice(O,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:H.emitEvent})}removeAt(O,M={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(O,M,H={}){this.controls[O]&&this.controls[O]._registerOnCollectionChange(()=>{}),this.controls.splice(O,1),M&&(this.controls.splice(O,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(O,M={}){ys(this,O),O.forEach((H,Fe)=>{_s(this,Fe),this.at(Fe).setValue(H,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(O,M={}){null!=O&&(O.forEach((H,Fe)=>{this.at(Fe)&&this.at(Fe).patchValue(H,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(O=[],M={}){this._forEachChild((H,Fe)=>{H.reset(O[Fe],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(O=>ko(O))}clear(O={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:O.emitEvent}))}_syncPendingControls(){let O=this.controls.reduce((M,H)=>!!H._syncPendingControls()||M,!1);return O&&this.updateValueAndValidity({onlySelf:!0}),O}_forEachChild(O){this.controls.forEach((M,H)=>{O(M,H)})}_updateValue(){this.value=this.controls.filter(O=>O.enabled||this.disabled).map(O=>O.value)}_anyControls(O){return this.controls.some(M=>M.enabled&&O(M))}_setUpControls(){this._forEachChild(O=>this._registerControl(O))}_allControlsDisabled(){for(const O of this.controls)if(O.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(O){O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange)}}const kr={provide:fn,useExisting:(0,b.Gpc)(()=>ti)},as=(()=>Promise.resolve(null))();let ti=(()=>{class B extends fn{constructor(M,H){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new b.vpe,this.form=new vs({},_n(M),Fr(H))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){as.then(()=>{const H=this._findContainer(M.path);M.control=H.registerControl(M.name,M.control),yn(M.control,M),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){as.then(()=>{const H=this._findContainer(M.path);H&&H.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){as.then(()=>{const H=this._findContainer(M.path),Fe=new vs({});(function Tr(B,O){_e(B,O)})(Fe,M),H.registerControl(M.name,Fe),Fe.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){as.then(()=>{const H=this._findContainer(M.path);H&&H.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,H){as.then(()=>{this.form.get(M.path).setValue(H)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,function ln(B,O){B._syncPendingControls(),O.forEach(M=>{const H=M.control;"submit"===H.updateOn&&H._pendingChange&&(M.viewToModelUpdate(H._pendingValue),H._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(M),!1}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(pt,10),b.Y36(ue,10))},B.\u0275dir=b.lG2({type:B,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(M,H){1&M&&b.NdJ("submit",function(Vt){return H.onSubmit(Vt)})("reset",function(){return H.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([kr]),b.qOj]}),B})();const Ns={provide:Rt,useExisting:(0,b.Gpc)(()=>_r)},Er=(()=>Promise.resolve(null))();let _r=(()=>{class B extends Rt{constructor(M,H,Fe,Vt,pn){super(),this._changeDetectorRef=pn,this.control=new Vi,this._registered=!1,this.update=new b.vpe,this._parent=M,this._setValidators(H),this._setAsyncValidators(Fe),this.valueAccessor=function Br(B,O){if(!O)return null;let M,H,Fe;return Array.isArray(O),O.forEach(Vt=>{Vt.constructor===Je?M=Vt:function sn(B){return Object.getPrototypeOf(B.constructor)===Ae}(Vt)?H=Vt:Fe=Vt}),Fe||H||M||null}(0,Vt)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const H=M.name.previousValue;this.formDirective.removeControl({name:H,path:this._getPath(H)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),function vt(B,O){if(!B.hasOwnProperty("model"))return!1;const M=B.model;return!!M.isFirstChange()||!Object.is(O,M.currentValue)}(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){yn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){Er.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const H=M.isDisabled.currentValue,Fe=""===H||H&&"false"!==H;Er.then(()=>{Fe&&!this.control.disabled?this.control.disable():!Fe&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?function Gt(B,O){return[...O.path,B]}(M,this._parent):[M]}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(fn,9),b.Y36(pt,10),b.Y36(ue,10),b.Y36(Ze,10),b.Y36(b.sBO,8))},B.\u0275dir=b.lG2({type:B,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[b._Bn([Ns]),b.qOj,b.TTD]}),B})(),Ui=(()=>{class B{}return B.\u0275fac=function(M){return new(M||B)},B.\u0275dir=b.lG2({type:B,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),B})(),Yi=(()=>{class B{}return B.\u0275fac=function(M){return new(M||B)},B.\u0275mod=b.oAB({type:B}),B.\u0275inj=b.cJS({}),B})();const ea={provide:Ze,useExisting:(0,b.Gpc)(()=>ji),multi:!0};function Ws(B,O){return null==B?`${O}`:(O&&"object"==typeof O&&(O="Object"),`${B}: ${O}`.slice(0,50))}let ji=(()=>{class B extends Ae{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const Fe=Ws(this._getOptionId(M),M);this.setProperty("value",Fe)}registerOnChange(M){this.onChange=H=>{this.value=this._getOptionValue(H),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const H of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(H),M))return H;return null}_getOptionValue(M){const H=function hi(B){return B.split(":")[0]}(M);return this._optionMap.has(H)?this._optionMap.get(H):M}}return B.\u0275fac=function(){let O;return function(H){return(O||(O=b.n5z(B)))(H||B)}}(),B.\u0275dir=b.lG2({type:B,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(M,H){1&M&&b.NdJ("change",function(Vt){return H.onChange(Vt.target.value)})("blur",function(){return H.onTouched()})},inputs:{compareWith:"compareWith"},features:[b._Bn([ea]),b.qOj]}),B})(),Sr=(()=>{class B{constructor(M,H,Fe){this._element=M,this._renderer=H,this._select=Fe,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(Ws(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(b.SBq),b.Y36(b.Qsj),b.Y36(ji,9))},B.\u0275dir=b.lG2({type:B,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),B})();const Si={provide:Ze,useExisting:(0,b.Gpc)(()=>Lo),multi:!0};function io(B,O){return null==B?`${O}`:("string"==typeof O&&(O=`'${O}'`),O&&"object"==typeof O&&(O="Object"),`${B}: ${O}`.slice(0,50))}let Lo=(()=>{class B extends Ae{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let H;if(this.value=M,Array.isArray(M)){const Fe=M.map(Vt=>this._getOptionId(Vt));H=(Vt,pn)=>{Vt._setSelected(Fe.indexOf(pn.toString())>-1)}}else H=(Fe,Vt)=>{Fe._setSelected(!1)};this._optionMap.forEach(H)}registerOnChange(M){this.onChange=H=>{const Fe=[],Vt=H.selectedOptions;if(void 0!==Vt){const pn=Vt;for(let si=0;si<pn.length;si++){const oi=this._getOptionValue(pn[si].value);Fe.push(oi)}}else{const pn=H.options;for(let si=0;si<pn.length;si++){const Ai=pn[si];if(Ai.selected){const oi=this._getOptionValue(Ai.value);Fe.push(oi)}}}this.value=Fe,M(Fe)}}_registerOption(M){const H=(this._idCounter++).toString();return this._optionMap.set(H,M),H}_getOptionId(M){for(const H of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(H)._value,M))return H;return null}_getOptionValue(M){const H=function ri(B){return B.split(":")[0]}(M);return this._optionMap.has(H)?this._optionMap.get(H)._value:M}}return B.\u0275fac=function(){let O;return function(H){return(O||(O=b.n5z(B)))(H||B)}}(),B.\u0275dir=b.lG2({type:B,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(M,H){1&M&&b.NdJ("change",function(Vt){return H.onChange(Vt.target)})("blur",function(){return H.onTouched()})},inputs:{compareWith:"compareWith"},features:[b._Bn([Si]),b.qOj]}),B})(),zs=(()=>{class B{constructor(M,H,Fe){this._element=M,this._renderer=H,this._select=Fe,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue(io(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue(io(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return B.\u0275fac=function(M){return new(M||B)(b.Y36(b.SBq),b.Y36(b.Qsj),b.Y36(Lo,9))},B.\u0275dir=b.lG2({type:B,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),B})(),Yr=(()=>{class B{}return B.\u0275fac=function(M){return new(M||B)},B.\u0275mod=b.oAB({type:B}),B.\u0275inj=b.cJS({imports:[[Yi]]}),B})(),zt=(()=>{class B{}return B.\u0275fac=function(M){return new(M||B)},B.\u0275mod=b.oAB({type:B}),B.\u0275inj=b.cJS({imports:[Yr]}),B})()},7261:(Nt,Ve,G)=>{"use strict";G.d(Ve,{F0:()=>pi,Bz:()=>bi,lC:()=>Si});var b=G(8692),h=G(4537),Y=G(818),ve=G(5975);function pe(A,E){const w=(0,ve.m)(A)?A:()=>A,k=V=>V.error(w());return new Y.y(E?V=>E.schedule(k,0,V):k)}var Te=G(5955);function ke(A){return new Y.y(E=>{(0,Te.Xf)(A()).subscribe(E)})}var Se=G(4813),Me=G(2085),se=G(8499);function ae(){return(0,Me.e)((A,E)=>{let w=null;A._refCount++;const k=(0,se.x)(E,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(w=null);const V=A._connection,K=w;w=null,V&&(!K||V===K)&&V.unsubscribe(),E.unsubscribe()});A.subscribe(k),k.closed||(w=A.connect())})}class we extends Y.y{constructor(E,w){super(),this.source=E,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,Me.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new Se.w0;const w=this.getSubject();E.add(this.source.subscribe((0,se.x)(w,void 0,()=>{this._teardown(),w.complete()},k=>{this._teardown(),w.error(k)},()=>this._teardown()))),E.closed&&(this._connection=null,E=Se.w0.EMPTY)}return E}refCount(){return ae()(this)}}var at=G(237),Ae=G(4945),Ze=G(4121),ut=G(5696),Be=G(7472),Qe=G(3729),It=G(9018),wt=G(8023);function Je(A){return(0,Me.e)((E,w)=>{let K,k=null,V=!1;k=E.subscribe((0,se.x)(w,void 0,void 0,re=>{K=(0,Te.Xf)(A(re,Je(A)(E))),k?(k.unsubscribe(),k=null,K.subscribe(w)):V=!0})),V&&(k.unsubscribe(),k=null,K.subscribe(w))})}var We=G(4970);function Xe(A){return A<=0?()=>It.E:(0,Me.e)((E,w)=>{let k=[];E.subscribe((0,se.x)(w,V=>{k.push(V),A<k.length&&k.shift()},()=>{for(const V of k)w.next(V);w.complete()},void 0,()=>{k=null}))})}var pt=G(8623),ue=G(2686),De=G(8330),Ne=G(7969),Ee=G(1528),lt=G(5598),He=G(1927),Jt=G(7479),In=G(4551),qn=G(9676),Dt=G(4882),Tt=G(8168),Tn=G(549);class xn{constructor(E,w){this.id=E,this.url=w}}class Ir extends xn{constructor(E,w,k="imperative",V=null){super(E,w),this.navigationTrigger=k,this.restoredState=V}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wn extends xn{constructor(E,w,k){super(E,w),this.urlAfterRedirects=k}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hr extends xn{constructor(E,w,k){super(E,w),this.reason=k}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fn extends xn{constructor(E,w,k){super(E,w),this.error=k}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _n extends xn{constructor(E,w,k,V){super(E,w),this.urlAfterRedirects=k,this.state=V}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vr extends xn{constructor(E,w,k,V){super(E,w),this.urlAfterRedirects=k,this.state=V}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr extends xn{constructor(E,w,k,V,K){super(E,w),this.urlAfterRedirects=k,this.state=V,this.shouldActivate=K}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xr extends xn{constructor(E,w,k,V){super(E,w),this.urlAfterRedirects=k,this.state=V}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class br extends xn{constructor(E,w,k,V){super(E,w),this.urlAfterRedirects=k,this.state=V}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lr{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Mr{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wr{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nr{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bt{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ci{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fn{constructor(E,w,k){this.routerEvent=E,this.position=w,this.anchor=k}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class ei{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const w=this.params[E];return Array.isArray(w)?w[0]:w}return null}getAll(E){if(this.has(E)){const w=this.params[E];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function yi(A){return new ei(A)}const Re="ngNavigationCancelingError";function ce(A){const E=Error("NavigationCancelingError: "+A);return E[Re]=!0,E}function ct(A,E,w){const k=w.path.split("/");if(k.length>A.length||"full"===w.pathMatch&&(E.hasChildren()||k.length<A.length))return null;const V={};for(let K=0;K<k.length;K++){const re=k[K],de=A[K];if(re.startsWith(":"))V[re.substring(1)]=de;else if(re!==de.path)return null}return{consumed:A.slice(0,k.length),posParams:V}}function Ye(A,E){const w=A?Object.keys(A):void 0,k=E?Object.keys(E):void 0;if(!w||!k||w.length!=k.length)return!1;let V;for(let K=0;K<w.length;K++)if(V=w[K],!Ct(A[V],E[V]))return!1;return!0}function Ct(A,E){if(Array.isArray(A)&&Array.isArray(E)){if(A.length!==E.length)return!1;const w=[...A].sort(),k=[...E].sort();return w.every((V,K)=>k[K]===V)}return A===E}function Cn(A){return Array.prototype.concat.apply([],A)}function $t(A){return A.length>0?A[A.length-1]:null}function Yn(A,E){for(const w in A)A.hasOwnProperty(w)&&E(A[w],w)}function Vn(A){return(0,h.CqO)(A)?A:(0,h.QGY)(A)?(0,at.D)(Promise.resolve(A)):(0,Ae.of)(A)}const St={exact:function et(A,E,w){if(!Ie(A.segments,E.segments)||!nn(A.segments,E.segments,w)||A.numberOfChildren!==E.numberOfChildren)return!1;for(const k in E.children)if(!A.children[k]||!et(A.children[k],E.children[k],w))return!1;return!0},subset:Gt},Mn={exact:function ot(A,E){return Ye(A,E)},subset:function kt(A,E){return Object.keys(E).length<=Object.keys(A).length&&Object.keys(E).every(w=>Ct(A[w],E[w]))},ignored:()=>!0};function un(A,E,w){return St[w.paths](A.root,E.root,w.matrixParams)&&Mn[w.queryParams](A.queryParams,E.queryParams)&&!("exact"===w.fragment&&A.fragment!==E.fragment)}function Gt(A,E,w){return yn(A,E,E.segments,w)}function yn(A,E,w,k){if(A.segments.length>w.length){const V=A.segments.slice(0,w.length);return!(!Ie(V,w)||E.hasChildren()||!nn(V,w,k))}if(A.segments.length===w.length){if(!Ie(A.segments,w)||!nn(A.segments,w,k))return!1;for(const V in E.children)if(!A.children[V]||!Gt(A.children[V],E.children[V],k))return!1;return!0}{const V=w.slice(0,A.segments.length),K=w.slice(A.segments.length);return!!(Ie(A.segments,V)&&nn(A.segments,V,k)&&A.children[Rt])&&yn(A.children[Rt],E,K,k)}}function nn(A,E,w){return E.every((k,V)=>Mn[w](A[V].parameters,k.parameters))}class le{constructor(E,w,k){this.root=E,this.queryParams=w,this.fragment=k}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yi(this.queryParams)),this._queryParamMap}toString(){return Tr.serialize(this)}}class te{constructor(E,w){this.segments=E,this.children=w,this.parent=null,Yn(w,(k,V)=>k.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return en(this)}}class _e{constructor(E,w){this.path=E,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=yi(this.parameters)),this._parameterMap}toString(){return Br(this)}}function Ie(A,E){return A.length===E.length&&A.every((w,k)=>w.path===E[k].path)}class Wt{}class xe{parse(E){const w=new Qn(E);return new le(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(E){const w=`/${Un(E.root,!0)}`,k=function Cr(A){const E=Object.keys(A).map(w=>{const k=A[w];return Array.isArray(k)?k.map(V=>`${kn(w)}=${kn(V)}`).join("&"):`${kn(w)}=${kn(k)}`}).filter(w=>!!w);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${w}${k}${"string"==typeof E.fragment?`#${function ir(A){return encodeURI(A)}(E.fragment)}`:""}`}}const Tr=new xe;function en(A){return A.segments.map(E=>Br(E)).join("/")}function Un(A,E){if(!A.hasChildren())return en(A);if(E){const w=A.children[Rt]?Un(A.children[Rt],!1):"",k=[];return Yn(A.children,(V,K)=>{K!==Rt&&k.push(`${K}:${Un(V,!1)}`)}),k.length>0?`${w}(${k.join("//")})`:w}{const w=function bt(A,E){let w=[];return Yn(A.children,(k,V)=>{V===Rt&&(w=w.concat(E(k,V)))}),Yn(A.children,(k,V)=>{V!==Rt&&(w=w.concat(E(k,V)))}),w}(A,(k,V)=>V===Rt?[Un(A.children[Rt],!1)]:[`${V}:${Un(k,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Rt]?`${en(A)}/${w[0]}`:`${en(A)}/(${w.join("//")})`}}function rn(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kn(A){return rn(A).replace(/%3B/gi,";")}function vt(A){return rn(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sn(A){return decodeURIComponent(A)}function ln(A){return sn(A.replace(/\+/g,"%20"))}function Br(A){return`${vt(A.path)}${function on(A){return Object.keys(A).map(E=>`;${vt(E)}=${vt(A[E])}`).join("")}(A.parameters)}`}const zi=/^[^\/()?;=#]+/;function dn(A){const E=A.match(zi);return E?E[0]:""}const zr=/^[^=?&#]+/,tn=/^[^&#]+/;class Qn{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let k={};return this.peekStartsWith("(")&&(k=this.parseParens(!1)),(E.length>0||Object.keys(w).length>0)&&(k[Rt]=new te(E,w)),k}parseSegment(){const E=dn(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new _e(sn(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const w=dn(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const V=dn(this.remaining);V&&(k=V,this.capture(k))}E[sn(w)]=sn(k)}parseQueryParam(E){const w=function ui(A){const E=A.match(zr);return E?E[0]:""}(this.remaining);if(!w)return;this.capture(w);let k="";if(this.consumeOptional("=")){const re=function qr(A){const E=A.match(tn);return E?E[0]:""}(this.remaining);re&&(k=re,this.capture(k))}const V=ln(w),K=ln(k);if(E.hasOwnProperty(V)){let re=E[V];Array.isArray(re)||(re=[re],E[V]=re),re.push(K)}else E[V]=K}parseParens(E){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const k=dn(this.remaining),V=this.remaining[k.length];if("/"!==V&&")"!==V&&";"!==V)throw new Error(`Cannot parse url '${this.url}'`);let K;k.indexOf(":")>-1?(K=k.substr(0,k.indexOf(":")),this.capture(K),this.capture(":")):E&&(K=Rt);const re=this.parseChildren();w[K]=1===Object.keys(re).length?re[Rt]:new te([],re),this.consumeOptional("//")}return w}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class Or{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const w=this.pathFromRoot(E);return w.length>1?w[w.length-2]:null}children(E){const w=Gn(E,this._root);return w?w.children.map(k=>k.value):[]}firstChild(E){const w=Gn(E,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(E){const w=Rn(E,this._root);return w.length<2?[]:w[w.length-2].children.map(V=>V.value).filter(V=>V!==E)}pathFromRoot(E){return Rn(E,this._root).map(w=>w.value)}}function Gn(A,E){if(A===E.value)return E;for(const w of E.children){const k=Gn(A,w);if(k)return k}return null}function Rn(A,E){if(A===E.value)return[E];for(const w of E.children){const k=Rn(A,w);if(k.length)return k.unshift(E),k}return[]}class Vr{constructor(E,w){this.value=E,this.children=w}toString(){return`TreeNode(${this.value})`}}function Bi(A){const E={};return A&&A.children.forEach(w=>E[w.value.outlet]=w),E}class Zr extends Or{constructor(E,w){super(E),this.snapshot=w,Zi(this,E)}toString(){return this.snapshot.toString()}}function jn(A,E){const w=function ko(A,E){const re=new Vi([],{},{},"",{},Rt,E,null,A.root,-1,{});return new vs("",new Vr(re,[]))}(A,E),k=new Ze.X([new _e("",{})]),V=new Ze.X({}),K=new Ze.X({}),re=new Ze.X({}),de=new Ze.X(""),nt=new _s(k,V,re,de,K,Rt,E,w.root);return nt.snapshot=w.root,new Zr(new Vr(nt,[]),w)}class _s{constructor(E,w,k,V,K,re,de,nt){this.url=E,this.params=w,this.queryParams=k,this.fragment=V,this.data=K,this.outlet=re,this.component=de,this._futureSnapshot=nt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ne.U)(E=>yi(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ne.U)(E=>yi(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ys(A,E="emptyOnly"){const w=A.pathFromRoot;let k=0;if("always"!==E)for(k=w.length-1;k>=1;){const V=w[k],K=w[k-1];if(V.routeConfig&&""===V.routeConfig.path)k--;else{if(K.component)break;k--}}return function qi(A){return A.reduce((E,w)=>({params:{...E.params,...w.params},data:{...E.data,...w.data},resolve:{...E.resolve,...w._resolvedData}}),{params:{},data:{},resolve:{}})}(w.slice(k))}class Vi{constructor(E,w,k,V,K,re,de,nt,Ft,Zn,Kt){this.url=E,this.params=w,this.queryParams=k,this.fragment=V,this.data=K,this.outlet=re,this.component=de,this.routeConfig=nt,this._urlSegment=Ft,this._lastPathIndex=Zn,this._resolve=Kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(k=>k.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vs extends Or{constructor(E,w){super(w),this.url=E,Zi(this,w)}toString(){return kr(this._root)}}function Zi(A,E){E.value._routerState=A,E.children.forEach(w=>Zi(A,w))}function kr(A){const E=A.children.length>0?` { ${A.children.map(kr).join(", ")} } `:"";return`${A.value}${E}`}function as(A){if(A.snapshot){const E=A.snapshot,w=A._futureSnapshot;A.snapshot=w,Ye(E.queryParams,w.queryParams)||A.queryParams.next(w.queryParams),E.fragment!==w.fragment&&A.fragment.next(w.fragment),Ye(E.params,w.params)||A.params.next(w.params),function Ue(A,E){if(A.length!==E.length)return!1;for(let w=0;w<A.length;++w)if(!Ye(A[w],E[w]))return!1;return!0}(E.url,w.url)||A.url.next(w.url),Ye(E.data,w.data)||A.data.next(w.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function ti(A,E){const w=Ye(A.params,E.params)&&function qe(A,E){return Ie(A,E)&&A.every((w,k)=>Ye(w.parameters,E[k].parameters))}(A.url,E.url);return w&&!(!A.parent!=!E.parent)&&(!A.parent||ti(A.parent,E.parent))}function vo(A,E,w){if(w&&A.shouldReuseRoute(E.value,w.value.snapshot)){const k=w.value;k._futureSnapshot=E.value;const V=function Rr(A,E,w){return E.children.map(k=>{for(const V of w.children)if(A.shouldReuseRoute(k.value,V.value.snapshot))return vo(A,k,V);return vo(A,k)})}(A,E,w);return new Vr(k,V)}{if(A.shouldAttach(E.value)){const K=A.retrieve(E.value);if(null!==K){const re=K.route;return re.value._futureSnapshot=E.value,re.children=E.children.map(de=>vo(A,de)),re}}const k=function bs(A){return new _s(new Ze.X(A.url),new Ze.X(A.params),new Ze.X(A.queryParams),new Ze.X(A.fragment),new Ze.X(A.data),A.outlet,A.component,A)}(E.value),V=E.children.map(K=>vo(A,K));return new Vr(k,V)}}function vi(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Ki(A){return"object"==typeof A&&null!=A&&A.outlets}function Ns(A,E,w,k,V){let K={};if(k&&Yn(k,(de,nt)=>{K[nt]=Array.isArray(de)?de.map(Ft=>`${Ft}`):`${de}`}),A===E)return new le(w,K,V);const re=Er(A,E,w);return new le(re,K,V)}function Er(A,E,w){const k={};return Yn(A.children,(V,K)=>{k[K]=V===E?w:Er(V,E,w)}),new te(A.segments,k)}class _r{constructor(E,w,k){if(this.isAbsolute=E,this.numberOfDoubleDots=w,this.commands=k,E&&k.length>0&&vi(k[0]))throw new Error("Root segment cannot have matrix parameters");const V=k.find(Ki);if(V&&V!==$t(k))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class di{constructor(E,w,k){this.segmentGroup=E,this.processChildren=w,this.index=k}}function Yi(A,E,w){if(A||(A=new te([],{})),0===A.segments.length&&A.hasChildren())return Ji(A,E,w);const k=function bo(A,E,w){let k=0,V=E;const K={match:!1,pathIndex:0,commandIndex:0};for(;V<A.segments.length;){if(k>=w.length)return K;const re=A.segments[V],de=w[k];if(Ki(de))break;const nt=`${de}`,Ft=k<w.length-1?w[k+1]:null;if(V>0&&void 0===nt)break;if(nt&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!Dr(nt,Ft,re))return K;k+=2}else{if(!Dr(nt,{},re))return K;k++}V++}return{match:!0,pathIndex:V,commandIndex:k}}(A,E,w),V=w.slice(k.commandIndex);if(k.match&&k.pathIndex<A.segments.length){const K=new te(A.segments.slice(0,k.pathIndex),{});return K.children[Rt]=new te(A.segments.slice(k.pathIndex),A.children),Ji(K,0,V)}return k.match&&0===V.length?new te(A.segments,{}):k.match&&!A.hasChildren()?Xo(A,E,w):k.match?Ji(A,0,V):Xo(A,E,w)}function Ji(A,E,w){if(0===w.length)return new te(A.segments,{});{const k=function Qo(A){return Ki(A[0])?A[0].outlets:{[Rt]:A}}(w),V={};return Yn(k,(K,re)=>{"string"==typeof K&&(K=[K]),null!==K&&(V[re]=Yi(A.children[re],E,K))}),Yn(A.children,(K,re)=>{void 0===k[re]&&(V[re]=K)}),new te(A.segments,V)}}function Xo(A,E,w){const k=A.segments.slice(0,E);let V=0;for(;V<w.length;){const K=w[V];if(Ki(K)){const nt=ga(K.outlets);return new te(k,nt)}if(0===V&&vi(w[0])){k.push(new _e(A.segments[E].path,wo(w[0]))),V++;continue}const re=Ki(K)?K.outlets[Rt]:`${K}`,de=V<w.length-1?w[V+1]:null;re&&de&&vi(de)?(k.push(new _e(re,wo(de))),V+=2):(k.push(new _e(re,{})),V++)}return new te(k,{})}function ga(A){const E={};return Yn(A,(w,k)=>{"string"==typeof w&&(w=[w]),null!==w&&(E[k]=Xo(new te([],{}),0,w))}),E}function wo(A){const E={};return Yn(A,(w,k)=>E[k]=`${w}`),E}function Dr(A,E,w){return A==w.path&&Ye(E,w.parameters)}class no{constructor(E,w,k,V){this.routeReuseStrategy=E,this.futureState=w,this.currState=k,this.forwardEvent=V}activate(E){const w=this.futureState._root,k=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,k,E),as(this.futureState.root),this.activateChildRoutes(w,k,E)}deactivateChildRoutes(E,w,k){const V=Bi(w);E.children.forEach(K=>{const re=K.value.outlet;this.deactivateRoutes(K,V[re],k),delete V[re]}),Yn(V,(K,re)=>{this.deactivateRouteAndItsChildren(K,k)})}deactivateRoutes(E,w,k){const V=E.value,K=w?w.value:null;if(V===K)if(V.component){const re=k.getContext(V.outlet);re&&this.deactivateChildRoutes(E,w,re.children)}else this.deactivateChildRoutes(E,w,k);else K&&this.deactivateRouteAndItsChildren(w,k)}deactivateRouteAndItsChildren(E,w){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,w):this.deactivateRouteAndOutlet(E,w)}detachAndStoreRouteSubtree(E,w){const k=w.getContext(E.value.outlet),V=k&&E.value.component?k.children:w,K=Bi(E);for(const re of Object.keys(K))this.deactivateRouteAndItsChildren(K[re],V);if(k&&k.outlet){const re=k.outlet.detach(),de=k.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:re,route:E,contexts:de})}}deactivateRouteAndOutlet(E,w){const k=w.getContext(E.value.outlet),V=k&&E.value.component?k.children:w,K=Bi(E);for(const re of Object.keys(K))this.deactivateRouteAndItsChildren(K[re],V);k&&k.outlet&&(k.outlet.deactivate(),k.children.onOutletDeactivated(),k.attachRef=null,k.resolver=null,k.route=null)}activateChildRoutes(E,w,k){const V=Bi(w);E.children.forEach(K=>{this.activateRoutes(K,V[K.value.outlet],k),this.forwardEvent(new ci(K.value.snapshot))}),E.children.length&&this.forwardEvent(new nr(E.value.snapshot))}activateRoutes(E,w,k){const V=E.value,K=w?w.value:null;if(as(V),V===K)if(V.component){const re=k.getOrCreateContext(V.outlet);this.activateChildRoutes(E,w,re.children)}else this.activateChildRoutes(E,w,k);else if(V.component){const re=k.getOrCreateContext(V.outlet);if(this.routeReuseStrategy.shouldAttach(V.snapshot)){const de=this.routeReuseStrategy.retrieve(V.snapshot);this.routeReuseStrategy.store(V.snapshot,null),re.children.onOutletReAttached(de.contexts),re.attachRef=de.componentRef,re.route=de.route.value,re.outlet&&re.outlet.attach(de.componentRef,de.route.value),as(de.route.value),this.activateChildRoutes(E,null,re.children)}else{const de=function ls(A){for(let E=A.parent;E;E=E.parent){const w=E.routeConfig;if(w&&w._loadedConfig)return w._loadedConfig;if(w&&w.component)return null}return null}(V.snapshot),nt=de?de.module.componentFactoryResolver:null;re.attachRef=null,re.route=V,re.resolver=nt,re.outlet&&re.outlet.activateWith(V,nt),this.activateChildRoutes(E,null,re.children)}}else this.activateChildRoutes(E,null,k)}}class ro{constructor(E,w){this.routes=E,this.module=w}}function ni(A){return"function"==typeof A}function pr(A){return A instanceof le}const Ws=Symbol("INITIAL_VALUE");function hi(){return(0,Ee.w)(A=>(0,ut.a)(A.map(E=>E.pipe((0,lt.q)(1),(0,He.O)(Ws)))).pipe((0,Jt.R)((E,w)=>{let k=!1;return w.reduce((V,K,re)=>V!==Ws?V:(K===Ws&&(k=!0),k||!1!==K&&re!==w.length-1&&!pr(K)?V:K),E)},Ws),(0,We.h)(E=>E!==Ws),(0,Ne.U)(E=>pr(E)?E:!0===E),(0,lt.q)(1)))}class ji{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Sr,this.attachRef=null}}class Sr{constructor(){this.contexts=new Map}onChildOutletCreated(E,w){const k=this.getOrCreateContext(E);k.outlet=w,this.contexts.set(E,k)}onChildOutletDestroyed(E){const w=this.getContext(E);w&&(w.outlet=null,w.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let w=this.getContext(E);return w||(w=new ji,this.contexts.set(E,w)),w}getContext(E){return this.contexts.get(E)||null}}let Si=(()=>{class A{constructor(w,k,V,K,re){this.parentContexts=w,this.location=k,this.resolver=V,this.changeDetector=re,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=K||Rt,w.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const w=this.parentContexts.getContext(this.name);w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,k){this.activated=w,this._activatedRoute=k,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,k){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=w;const re=(k=k||this.resolver).resolveComponentFactory(w._futureSnapshot.routeConfig.component),de=this.parentContexts.getOrCreateContext(this.name).children,nt=new io(w,de,this.location.injector);this.activated=this.location.createComponent(re,this.location.length,nt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(w){return new(w||A)(h.Y36(Sr),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},A.\u0275dir=h.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class io{constructor(E,w,k){this.route=E,this.childContexts=w,this.parent=k}get(E,w){return E===_s?this.route:E===Sr?this.childContexts:this.parent.get(E,w)}}let ri=(()=>{class A{}return A.\u0275fac=function(w){return new(w||A)},A.\u0275cmp=h.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(w,k){1&w&&h._UZ(0,"router-outlet")},directives:[Si],encapsulation:2}),A})();function ii(A,E=""){for(let w=0;w<A.length;w++){const k=A[w];Lo(k,zs(E,k))}}function Lo(A,E){A.children&&ii(A.children,E)}function zs(A,E){return E?A||E.path?A&&!E.path?`${A}/`:!A&&E.path?E.path:`${A}/${E.path}`:"":A}function ks(A){const E=A.children&&A.children.map(ks),w=E?{...A,children:E}:{...A};return!w.component&&(E||w.loadChildren)&&w.outlet&&w.outlet!==Rt&&(w.component=ri),w}function Kr(A){return A.outlet||Rt}function ws(A,E){const w=A.filter(k=>Kr(k)===E);return w.push(...A.filter(k=>Kr(k)!==E)),w}const Gr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fi(A,E,w){if(""===E.path)return"full"===E.pathMatch&&(A.hasChildren()||w.length>0)?{...Gr}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const V=(E.matcher||ct)(w,A,E);if(!V)return{...Gr};const K={};Yn(V.posParams,(de,nt)=>{K[nt]=de.path});const re=V.consumed.length>0?{...K,...V.consumed[V.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:V.consumed,remainingSegments:w.slice(V.consumed.length),parameters:re,positionalParamSegments:V.posParams??{}}}function Cs(A,E,w,k,V="corrected"){if(w.length>0&&function q(A,E,w){return w.some(k=>J(A,E,k)&&Kr(k)!==Rt)}(A,w,k)){const re=new te(E,function P(A,E,w,k){const V={};V[Rt]=k,k._sourceSegment=A,k._segmentIndexShift=E.length;for(const K of w)if(""===K.path&&Kr(K)!==Rt){const re=new te([],{});re._sourceSegment=A,re._segmentIndexShift=E.length,V[Kr(K)]=re}return V}(A,E,k,new te(w,A.children)));return re._sourceSegment=A,re._segmentIndexShift=E.length,{segmentGroup:re,slicedSegments:[]}}if(0===w.length&&function R(A,E,w){return w.some(k=>J(A,E,k))}(A,w,k)){const re=new te(A.segments,function Xn(A,E,w,k,V,K){const re={};for(const de of k)if(J(A,w,de)&&!V[Kr(de)]){const nt=new te([],{});nt._sourceSegment=A,nt._segmentIndexShift="legacy"===K?A.segments.length:E.length,re[Kr(de)]=nt}return{...V,...re}}(A,E,w,k,A.children,V));return re._sourceSegment=A,re._segmentIndexShift=E.length,{segmentGroup:re,slicedSegments:w}}const K=new te(A.segments,A.children);return K._sourceSegment=A,K._segmentIndexShift=E.length,{segmentGroup:K,slicedSegments:w}}function J(A,E,w){return(!(A.hasChildren()||E.length>0)||"full"!==w.pathMatch)&&""===w.path}function ge(A,E,w,k){return!!(Kr(A)===k||k!==Rt&&J(E,w,A))&&("**"===A.path||fi(E,A,w).matched)}function $e(A,E,w){return 0===E.length&&!A.children[w]}class it{constructor(E){this.segmentGroup=E||null}}class Et{constructor(E){this.urlTree=E}}function Ln(A){return pe(new it(A))}function Sn(A){return pe(new Et(A))}class cr{constructor(E,w,k,V,K){this.configLoader=w,this.urlSerializer=k,this.urlTree=V,this.config=K,this.allowRedirects=!0,this.ngModule=E.get(h.h0i)}apply(){const E=Cs(this.urlTree.root,[],[],this.config).segmentGroup,w=new te(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,w,Rt).pipe((0,Ne.U)(K=>this.createUrlTree(Xi(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Je(K=>{if(K instanceof Et)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof it?this.noMatchError(K):K}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,Rt).pipe((0,Ne.U)(V=>this.createUrlTree(Xi(V),E.queryParams,E.fragment))).pipe(Je(V=>{throw V instanceof it?this.noMatchError(V):V}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,w,k){const V=E.segments.length>0?new te([],{[Rt]:E}):E;return new le(V,w,k)}expandSegmentGroup(E,w,k,V){return 0===k.segments.length&&k.hasChildren()?this.expandChildren(E,w,k).pipe((0,Ne.U)(K=>new te([],K))):this.expandSegment(E,k,w,k.segments,V,!0)}expandChildren(E,w,k){const V=[];for(const K of Object.keys(k.children))"primary"===K?V.unshift(K):V.push(K);return(0,at.D)(V).pipe((0,In.b)(K=>{const re=k.children[K],de=ws(w,K);return this.expandSegmentGroup(E,de,re,K).pipe((0,Ne.U)(nt=>({segment:nt,outlet:K})))}),(0,Jt.R)((K,re)=>(K[re.outlet]=re.segment,K),{}),function ye(A,E){const w=arguments.length>=2;return k=>k.pipe(A?(0,We.h)((V,K)=>A(V,K,k)):De.y,Xe(1),w?(0,ue.d)(E):(0,pt.T)(()=>new Be.K))}())}expandSegment(E,w,k,V,K,re){return(0,at.D)(k).pipe((0,In.b)(de=>this.expandSegmentAgainstRoute(E,w,k,de,V,K,re).pipe(Je(Ft=>{if(Ft instanceof it)return(0,Ae.of)(null);throw Ft}))),(0,qn.P)(de=>!!de),Je((de,nt)=>{if(de instanceof Be.K||"EmptyError"===de.name)return $e(w,V,K)?(0,Ae.of)(new te([],{})):Ln(w);throw de}))}expandSegmentAgainstRoute(E,w,k,V,K,re,de){return ge(V,w,K,re)?void 0===V.redirectTo?this.matchSegmentAgainstRoute(E,w,V,K,re):de&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,w,k,V,K,re):Ln(w):Ln(w)}expandSegmentAgainstRouteUsingRedirect(E,w,k,V,K,re){return"**"===V.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,k,V,re):this.expandRegularSegmentAgainstRouteUsingRedirect(E,w,k,V,K,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,w,k,V){const K=this.applyRedirectCommands([],k.redirectTo,{});return k.redirectTo.startsWith("/")?Sn(K):this.lineralizeSegments(k,K).pipe((0,Dt.z)(re=>{const de=new te(re,{});return this.expandSegment(E,de,w,re,V,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,w,k,V,K,re){const{matched:de,consumedSegments:nt,remainingSegments:Ft,positionalParamSegments:Zn}=fi(w,V,K);if(!de)return Ln(w);const Kt=this.applyRedirectCommands(nt,V.redirectTo,Zn);return V.redirectTo.startsWith("/")?Sn(Kt):this.lineralizeSegments(V,Kt).pipe((0,Dt.z)($n=>this.expandSegment(E,w,k,$n.concat(Ft),re,!1)))}matchSegmentAgainstRoute(E,w,k,V,K){if("**"===k.path)return k.loadChildren?(k._loadedConfig?(0,Ae.of)(k._loadedConfig):this.configLoader.load(E.injector,k)).pipe((0,Ne.U)(Kt=>(k._loadedConfig=Kt,new te(V,{})))):(0,Ae.of)(new te(V,{}));const{matched:re,consumedSegments:de,remainingSegments:nt}=fi(w,k,V);return re?this.getChildConfig(E,k,V).pipe((0,Dt.z)(Zn=>{const Kt=Zn.module,$n=Zn.routes,{segmentGroup:gr,slicedSegments:xi}=Cs(w,de,nt,$n),jo=new te(gr.segments,gr.children);if(0===xi.length&&jo.hasChildren())return this.expandChildren(Kt,$n,jo).pipe((0,Ne.U)(Al=>new te(de,Al)));if(0===$n.length&&0===xi.length)return(0,Ae.of)(new te(de,{}));const Ar=Kr(k)===K;return this.expandSegment(Kt,jo,$n,xi,Ar?Rt:K,!0).pipe((0,Ne.U)(Ho=>new te(de.concat(Ho.segments),Ho.children)))})):Ln(w)}getChildConfig(E,w,k){return w.children?(0,Ae.of)(new ro(w.children,E)):w.loadChildren?void 0!==w._loadedConfig?(0,Ae.of)(w._loadedConfig):this.runCanLoadGuards(E.injector,w,k).pipe((0,Dt.z)(V=>V?this.configLoader.load(E.injector,w).pipe((0,Ne.U)(K=>(w._loadedConfig=K,K))):function An(A){return pe(ce(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))}(w))):(0,Ae.of)(new ro([],E))}runCanLoadGuards(E,w,k){const V=w.canLoad;if(!V||0===V.length)return(0,Ae.of)(!0);const K=V.map(re=>{const de=E.get(re);let nt;if(function xs(A){return A&&ni(A.canLoad)}(de))nt=de.canLoad(w,k);else{if(!ni(de))throw new Error("Invalid CanLoad guard");nt=de(w,k)}return Vn(nt)});return(0,Ae.of)(K).pipe(hi(),(0,Tt.b)(re=>{if(!pr(re))return;const de=ce(`Redirecting to "${this.urlSerializer.serialize(re)}"`);throw de.url=re,de}),(0,Ne.U)(re=>!0===re))}lineralizeSegments(E,w){let k=[],V=w.root;for(;;){if(k=k.concat(V.segments),0===V.numberOfChildren)return(0,Ae.of)(k);if(V.numberOfChildren>1||!V.children[Rt])return pe(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));V=V.children[Rt]}}applyRedirectCommands(E,w,k){return this.applyRedirectCreatreUrlTree(w,this.urlSerializer.parse(w),E,k)}applyRedirectCreatreUrlTree(E,w,k,V){const K=this.createSegmentGroup(E,w.root,k,V);return new le(K,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(E,w){const k={};return Yn(E,(V,K)=>{if("string"==typeof V&&V.startsWith(":")){const de=V.substring(1);k[K]=w[de]}else k[K]=V}),k}createSegmentGroup(E,w,k,V){const K=this.createSegments(E,w.segments,k,V);let re={};return Yn(w.children,(de,nt)=>{re[nt]=this.createSegmentGroup(E,de,k,V)}),new te(K,re)}createSegments(E,w,k,V){return w.map(K=>K.path.startsWith(":")?this.findPosParam(E,K,V):this.findOrReturn(K,k))}findPosParam(E,w,k){const V=k[w.path.substring(1)];if(!V)throw new Error(`Cannot redirect to '${E}'. Cannot find '${w.path}'.`);return V}findOrReturn(E,w){let k=0;for(const V of w){if(V.path===E.path)return w.splice(k),V;k++}return E}}function Xi(A){const E={};for(const k of Object.keys(A.children)){const K=Xi(A.children[k]);(K.segments.length>0||K.hasChildren())&&(E[k]=K)}return function ur(A){if(1===A.numberOfChildren&&A.children[Rt]){const E=A.children[Rt];return new te(A.segments.concat(E.segments),E.children)}return A}(new te(A.segments,E))}class zt{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class cs{constructor(E,w){this.component=E,this.route=w}}function Rs(A,E,w){const k=A._root;return O(k,E?E._root:null,w,[k.value])}function Ps(A,E,w){const k=function B(A){if(!A)return null;for(let E=A.parent;E;E=E.parent){const w=E.routeConfig;if(w&&w._loadedConfig)return w._loadedConfig}return null}(E);return(k?k.module.injector:w).get(A)}function O(A,E,w,k,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=Bi(E);return A.children.forEach(re=>{(function M(A,E,w,k,V={canDeactivateChecks:[],canActivateChecks:[]}){const K=A.value,re=E?E.value:null,de=w?w.getContext(A.value.outlet):null;if(re&&K.routeConfig===re.routeConfig){const nt=function H(A,E,w){if("function"==typeof w)return w(A,E);switch(w){case"pathParamsChange":return!Ie(A.url,E.url);case"pathParamsOrQueryParamsChange":return!Ie(A.url,E.url)||!Ye(A.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ti(A,E)||!Ye(A.queryParams,E.queryParams);default:return!ti(A,E)}}(re,K,K.routeConfig.runGuardsAndResolvers);nt?V.canActivateChecks.push(new zt(k)):(K.data=re.data,K._resolvedData=re._resolvedData),O(A,E,K.component?de?de.children:null:w,k,V),nt&&de&&de.outlet&&de.outlet.isActivated&&V.canDeactivateChecks.push(new cs(de.outlet.component,re))}else re&&Fe(E,de,V),V.canActivateChecks.push(new zt(k)),O(A,null,K.component?de?de.children:null:w,k,V)})(re,K[re.value.outlet],w,k.concat([re.value]),V),delete K[re.value.outlet]}),Yn(K,(re,de)=>Fe(re,w.getContext(de),V)),V}function Fe(A,E,w){const k=Bi(A),V=A.value;Yn(k,(K,re)=>{Fe(K,V.component?E?E.children.getContext(re):null:E,w)}),w.canDeactivateChecks.push(new cs(V.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,V))}class Xa{}function ta(A){return new Y.y(E=>E.error(A))}class Ni{constructor(E,w,k,V,K,re){this.rootComponentType=E,this.config=w,this.urlTree=k,this.url=V,this.paramsInheritanceStrategy=K,this.relativeLinkResolution=re}recognize(){const E=Cs(this.urlTree.root,[],[],this.config.filter(re=>void 0===re.redirectTo),this.relativeLinkResolution).segmentGroup,w=this.processSegmentGroup(this.config,E,Rt);if(null===w)return null;const k=new Vi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),V=new Vr(k,w),K=new vs(this.url,V);return this.inheritParamsAndData(K._root),K}inheritParamsAndData(E){const w=E.value,k=ys(w,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data),E.children.forEach(V=>this.inheritParamsAndData(V))}processSegmentGroup(E,w,k){return 0===w.segments.length&&w.hasChildren()?this.processChildren(E,w):this.processSegment(E,w,w.segments,k)}processChildren(E,w){const k=[];for(const K of Object.keys(w.children)){const re=w.children[K],de=ws(E,K),nt=this.processSegmentGroup(de,re,K);if(null===nt)return null;k.push(...nt)}const V=us(k);return function Fs(A){A.sort((E,w)=>E.value.outlet===Rt?-1:w.value.outlet===Rt?1:E.value.outlet.localeCompare(w.value.outlet))}(V),V}processSegment(E,w,k,V){for(const K of E){const re=this.processSegmentAgainstRoute(K,w,k,V);if(null!==re)return re}return $e(w,k,V)?[]:null}processSegmentAgainstRoute(E,w,k,V){if(E.redirectTo||!ge(E,w,k,V))return null;let K,re=[],de=[];if("**"===E.path){const gr=k.length>0?$t(k).parameters:{};K=new Vi(k,gr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(E),Kr(E),E.component,E,La(w),ya(w)+k.length,Vo(E))}else{const gr=fi(w,E,k);if(!gr.matched)return null;re=gr.consumedSegments,de=gr.remainingSegments,K=new Vi(re,gr.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,va(E),Kr(E),E.component,E,La(w),ya(w)+re.length,Vo(E))}const nt=function Fa(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(E),{segmentGroup:Ft,slicedSegments:Zn}=Cs(w,re,de,nt.filter(gr=>void 0===gr.redirectTo),this.relativeLinkResolution);if(0===Zn.length&&Ft.hasChildren()){const gr=this.processChildren(nt,Ft);return null===gr?null:[new Vr(K,gr)]}if(0===nt.length&&0===Zn.length)return[new Vr(K,[])];const Kt=Kr(E)===V,$n=this.processSegment(nt,Ft,Zn,Kt?Rt:V);return null===$n?null:[new Vr(K,$n)]}}function Do(A){const E=A.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function us(A){const E=[],w=new Set;for(const k of A){if(!Do(k)){E.push(k);continue}const V=E.find(K=>k.value.routeConfig===K.value.routeConfig);void 0!==V?(V.children.push(...k.children),w.add(V)):E.push(k)}for(const k of w){const V=us(k.children);E.push(new Vr(k.value,V))}return E.filter(k=>!w.has(k))}function La(A){let E=A;for(;E._sourceSegment;)E=E._sourceSegment;return E}function ya(A){let E=A,w=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,w+=E._segmentIndexShift?E._segmentIndexShift:0;return w-1}function va(A){return A.data||{}}function Vo(A){return A.resolve||{}}function oo(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function Ba(A){return(0,Ee.w)(E=>{const w=A(E);return w?(0,at.D)(w).pipe((0,Ne.U)(()=>E)):(0,Ae.of)(E)})}class tl extends class oa{shouldDetach(E){return!1}store(E,w){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,w){return E.routeConfig===w.routeConfig}}{}const Uo=new h.OlP("ROUTES");class Yl{constructor(E,w,k,V){this.injector=E,this.compiler=w,this.onLoadStartListener=k,this.onLoadEndListener=V}load(E,w){if(w._loader$)return w._loader$;this.onLoadStartListener&&this.onLoadStartListener(w);const V=this.loadModuleFactory(w.loadChildren).pipe((0,Ne.U)(K=>{this.onLoadEndListener&&this.onLoadEndListener(w);const re=K.create(E);return new ro(Cn(re.injector.get(Uo,void 0,h.XFs.Self|h.XFs.Optional)).map(ks),re)}),Je(K=>{throw w._loader$=void 0,K}));return w._loader$=new we(V,()=>new wt.x).pipe(ae()),w._loader$}loadModuleFactory(E){return Vn(E()).pipe((0,Dt.z)(w=>w instanceof h.YKP?(0,Ae.of)(w):(0,at.D)(this.compiler.compileModuleAsync(w))))}}class Hi{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,w){return E}}function ba(A){throw A}function ai(A,E,w){return E.parse("/")}function Sl(A,E){return(0,Ae.of)(null)}const Qd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class A{constructor(w,k,V,K,re,de,nt){this.rootComponentType=w,this.urlSerializer=k,this.rootContexts=V,this.location=K,this.config=nt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wt.x,this.errorHandler=ba,this.malformedUriErrorHandler=ai,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Sl,afterPreactivation:Sl},this.urlHandlingStrategy=new Hi,this.routeReuseStrategy=new tl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=re.get(h.h0i),this.console=re.get(h.c2e);const Kt=re.get(h.R0b);this.isNgZoneEnabled=Kt instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(nt),this.currentUrlTree=function Jn(){return new le(new te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Yl(re,de,$n=>this.triggerEvent(new Lr($n)),$n=>this.triggerEvent(new Mr($n))),this.routerState=jn(this.currentUrlTree,this.rootComponentType),this.transitions=new Ze.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(w){const k=this.events;return w.pipe((0,We.h)(V=>0!==V.id),(0,Ne.U)(V=>({...V,extractedUrl:this.urlHandlingStrategy.extract(V.rawUrl)})),(0,Ee.w)(V=>{let K=!1,re=!1;return(0,Ae.of)(V).pipe((0,Tt.b)(de=>{this.currentNavigation={id:de.id,initialUrl:de.currentRawUrl,extractedUrl:de.extractedUrl,trigger:de.source,extras:de.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ee.w)(de=>{const nt=this.browserUrlTree.toString(),Ft=!this.navigated||de.extractedUrl.toString()!==nt||nt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(de.rawUrl))return wa(de.source)&&(this.browserUrlTree=de.extractedUrl),(0,Ae.of)(de).pipe((0,Ee.w)(Kt=>{const $n=this.transitions.getValue();return k.next(new Ir(Kt.id,this.serializeUrl(Kt.extractedUrl),Kt.source,Kt.restoredState)),$n!==this.transitions.getValue()?It.E:Promise.resolve(Kt)}),function Yr(A,E,w,k){return(0,Ee.w)(V=>function dr(A,E,w,k,V){return new cr(A,E,w,k,V).apply()}(A,E,w,V.extractedUrl,k).pipe((0,Ne.U)(K=>({...V,urlAfterRedirects:K}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Tt.b)(Kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Kt.urlAfterRedirects}}),function na(A,E,w,k,V){return(0,Dt.z)(K=>function so(A,E,w,k,V="emptyOnly",K="legacy"){try{const re=new Ni(A,E,w,k,V,K).recognize();return null===re?ta(new Xa):(0,Ae.of)(re)}catch(re){return ta(re)}}(A,E,K.urlAfterRedirects,w(K.urlAfterRedirects),k,V).pipe((0,Ne.U)(re=>({...K,targetSnapshot:re}))))}(this.rootComponentType,this.config,Kt=>this.serializeUrl(Kt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Tt.b)(Kt=>{if("eager"===this.urlUpdateStrategy){if(!Kt.extras.skipLocationChange){const gr=this.urlHandlingStrategy.merge(Kt.urlAfterRedirects,Kt.rawUrl);this.setBrowserUrl(gr,Kt)}this.browserUrlTree=Kt.urlAfterRedirects}const $n=new _n(Kt.id,this.serializeUrl(Kt.extractedUrl),this.serializeUrl(Kt.urlAfterRedirects),Kt.targetSnapshot);k.next($n)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$n,extractedUrl:gr,source:xi,restoredState:jo,extras:Ar}=de,Xl=new Ir($n,this.serializeUrl(gr),xi,jo);k.next(Xl);const Ho=jn(gr,this.rootComponentType).snapshot;return(0,Ae.of)({...de,targetSnapshot:Ho,urlAfterRedirects:gr,extras:{...Ar,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=de.rawUrl,de.resolve(null),It.E}),Ba(de=>{const{targetSnapshot:nt,id:Ft,extractedUrl:Zn,rawUrl:Kt,extras:{skipLocationChange:$n,replaceUrl:gr}}=de;return this.hooks.beforePreactivation(nt,{navigationId:Ft,appliedUrlTree:Zn,rawUrlTree:Kt,skipLocationChange:!!$n,replaceUrl:!!gr})}),(0,Tt.b)(de=>{const nt=new vr(de.id,this.serializeUrl(de.extractedUrl),this.serializeUrl(de.urlAfterRedirects),de.targetSnapshot);this.triggerEvent(nt)}),(0,Ne.U)(de=>({...de,guards:Rs(de.targetSnapshot,de.currentSnapshot,this.rootContexts)})),function Vt(A,E){return(0,Dt.z)(w=>{const{targetSnapshot:k,currentSnapshot:V,guards:{canActivateChecks:K,canDeactivateChecks:re}}=w;return 0===re.length&&0===K.length?(0,Ae.of)({...w,guardsResult:!0}):function pn(A,E,w,k){return(0,at.D)(A).pipe((0,Dt.z)(V=>function ma(A,E,w,k,V){const K=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,Ae.of)(!0);const re=K.map(de=>{const nt=Ps(de,E,V);let Ft;if(function ea(A){return A&&ni(A.canDeactivate)}(nt))Ft=Vn(nt.canDeactivate(A,E,w,k));else{if(!ni(nt))throw new Error("Invalid CanDeactivate guard");Ft=Vn(nt(A,E,w,k))}return Ft.pipe((0,qn.P)())});return(0,Ae.of)(re).pipe(hi())}(V.component,V.route,w,E,k)),(0,qn.P)(V=>!0!==V,!0))}(re,k,V,A).pipe((0,Dt.z)(de=>de&&function Qi(A){return"boolean"==typeof A}(de)?function si(A,E,w,k){return(0,at.D)(E).pipe((0,In.b)(V=>(0,Qe.z)(function oi(A,E){return null!==A&&E&&E(new wr(A)),(0,Ae.of)(!0)}(V.route.parent,k),function Ai(A,E){return null!==A&&E&&E(new Bt(A)),(0,Ae.of)(!0)}(V.route,k),function Bo(A,E,w){const k=E[E.length-1],K=E.slice(0,E.length-1).reverse().map(re=>function Co(A){const E=A.routeConfig?A.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:A,guards:E}:null}(re)).filter(re=>null!==re).map(re=>ke(()=>{const de=re.guards.map(nt=>{const Ft=Ps(nt,re.node,w);let Zn;if(function Os(A){return A&&ni(A.canActivateChild)}(Ft))Zn=Vn(Ft.canActivateChild(k,A));else{if(!ni(Ft))throw new Error("Invalid CanActivateChild guard");Zn=Vn(Ft(k,A))}return Zn.pipe((0,qn.P)())});return(0,Ae.of)(de).pipe(hi())}));return(0,Ae.of)(K).pipe(hi())}(A,V.path,w),function Eo(A,E,w){const k=E.routeConfig?E.routeConfig.canActivate:null;if(!k||0===k.length)return(0,Ae.of)(!0);const V=k.map(K=>ke(()=>{const re=Ps(K,E,w);let de;if(function Ms(A){return A&&ni(A.canActivate)}(re))de=Vn(re.canActivate(E,A));else{if(!ni(re))throw new Error("Invalid CanActivate guard");de=Vn(re(E,A))}return de.pipe((0,qn.P)())}));return(0,Ae.of)(V).pipe(hi())}(A,V.route,w))),(0,qn.P)(V=>!0!==V,!0))}(k,K,A,E):(0,Ae.of)(de)),(0,Ne.U)(de=>({...w,guardsResult:de})))})}(this.ngModule.injector,de=>this.triggerEvent(de)),(0,Tt.b)(de=>{if(pr(de.guardsResult)){const Ft=ce(`Redirecting to "${this.serializeUrl(de.guardsResult)}"`);throw Ft.url=de.guardsResult,Ft}const nt=new Fr(de.id,this.serializeUrl(de.extractedUrl),this.serializeUrl(de.urlAfterRedirects),de.targetSnapshot,!!de.guardsResult);this.triggerEvent(nt)}),(0,We.h)(de=>!!de.guardsResult||(this.restoreHistory(de),this.cancelNavigationTransition(de,""),!1)),Ba(de=>{if(de.guards.canActivateChecks.length)return(0,Ae.of)(de).pipe((0,Tt.b)(nt=>{const Ft=new Xr(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(Ft)}),(0,Ee.w)(nt=>{let Ft=!1;return(0,Ae.of)(nt).pipe(function Io(A,E){return(0,Dt.z)(w=>{const{targetSnapshot:k,guards:{canActivateChecks:V}}=w;if(!V.length)return(0,Ae.of)(w);let K=0;return(0,at.D)(V).pipe((0,In.b)(re=>function ra(A,E,w,k){return function el(A,E,w,k){const V=oo(A);if(0===V.length)return(0,Ae.of)({});const K={};return(0,at.D)(V).pipe((0,Dt.z)(re=>function ia(A,E,w,k){const V=Ps(A,E,k);return Vn(V.resolve?V.resolve(E,w):V(E,w))}(A[re],E,w,k).pipe((0,Tt.b)(de=>{K[re]=de}))),Xe(1),(0,Dt.z)(()=>oo(K).length===V.length?(0,Ae.of)(K):It.E))}(A._resolve,A,E,k).pipe((0,Ne.U)(K=>(A._resolvedData=K,A.data={...A.data,...ys(A,w).resolve},null)))}(re.route,k,A,E)),(0,Tt.b)(()=>K++),Xe(1),(0,Dt.z)(re=>K===V.length?(0,Ae.of)(w):It.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Tt.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(nt),this.cancelNavigationTransition(nt,"At least one route resolver didn't emit any value."))}}))}),(0,Tt.b)(nt=>{const Ft=new br(nt.id,this.serializeUrl(nt.extractedUrl),this.serializeUrl(nt.urlAfterRedirects),nt.targetSnapshot);this.triggerEvent(Ft)}))}),Ba(de=>{const{targetSnapshot:nt,id:Ft,extractedUrl:Zn,rawUrl:Kt,extras:{skipLocationChange:$n,replaceUrl:gr}}=de;return this.hooks.afterPreactivation(nt,{navigationId:Ft,appliedUrlTree:Zn,rawUrlTree:Kt,skipLocationChange:!!$n,replaceUrl:!!gr})}),(0,Ne.U)(de=>{const nt=function Ti(A,E,w){const k=vo(A,E._root,w?w._root:void 0);return new Zr(k,E)}(this.routeReuseStrategy,de.targetSnapshot,de.currentRouterState);return{...de,targetRouterState:nt}}),(0,Tt.b)(de=>{this.currentUrlTree=de.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(de.urlAfterRedirects,de.rawUrl),this.routerState=de.targetRouterState,"deferred"===this.urlUpdateStrategy&&(de.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,de),this.browserUrlTree=de.urlAfterRedirects)}),((A,E,w)=>(0,Ne.U)(k=>(new no(E,k.targetRouterState,k.currentRouterState,w).activate(A),k)))(this.rootContexts,this.routeReuseStrategy,de=>this.triggerEvent(de)),(0,Tt.b)({next(){K=!0},complete(){K=!0}}),function Le(A){return(0,Me.e)((E,w)=>{try{E.subscribe(w)}finally{w.add(A)}})}(()=>{K||re||this.cancelNavigationTransition(V,`Navigation ID ${V.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===V.id&&(this.currentNavigation=null)}),Je(de=>{if(re=!0,function me(A){return A&&A[Re]}(de)){const nt=pr(de.url);nt||(this.navigated=!0,this.restoreHistory(V,!0));const Ft=new Hr(V.id,this.serializeUrl(V.extractedUrl),de.message);k.next(Ft),nt?setTimeout(()=>{const Zn=this.urlHandlingStrategy.merge(de.url,this.rawUrlTree),Kt={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wa(V.source)};this.scheduleNavigation(Zn,"imperative",null,Kt,{resolve:V.resolve,reject:V.reject,promise:V.promise})},0):V.resolve(!1)}else{this.restoreHistory(V,!0);const nt=new Fn(V.id,this.serializeUrl(V.extractedUrl),de);k.next(nt);try{V.resolve(this.errorHandler(de))}catch(Ft){V.reject(Ft)}}return It.E}))}))}resetRootComponentType(w){this.rootComponentType=w,this.routerState.root.component=this.rootComponentType}setTransition(w){this.transitions.next({...this.transitions.value,...w})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const k="popstate"===w.type?"popstate":"hashchange";"popstate"===k&&setTimeout(()=>{const V={replaceUrl:!0},K=w.state?.navigationId?w.state:null;if(K){const de={...K};delete de.navigationId,delete de.\u0275routerPageId,0!==Object.keys(de).length&&(V.state=de)}const re=this.parseUrl(w.url);this.scheduleNavigation(re,k,K,V)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(w){this.events.next(w)}resetConfig(w){ii(w),this.config=w.map(ks),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,k={}){const{relativeTo:V,queryParams:K,fragment:re,queryParamsHandling:de,preserveFragment:nt}=k,Ft=V||this.routerState.root,Zn=nt?this.currentUrlTree.fragment:re;let Kt=null;switch(de){case"merge":Kt={...this.currentUrlTree.queryParams,...K};break;case"preserve":Kt=this.currentUrlTree.queryParams;break;default:Kt=K||null}return null!==Kt&&(Kt=this.removeEmptyProps(Kt)),function he(A,E,w,k,V){if(0===w.length)return Ns(E.root,E.root,E.root,k,V);const K=function Ui(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new _r(!0,0,A);let E=0,w=!1;const k=A.reduce((V,K,re)=>{if("object"==typeof K&&null!=K){if(K.outlets){const de={};return Yn(K.outlets,(nt,Ft)=>{de[Ft]="string"==typeof nt?nt.split("/"):nt}),[...V,{outlets:de}]}if(K.segmentPath)return[...V,K.segmentPath]}return"string"!=typeof K?[...V,K]:0===re?(K.split("/").forEach((de,nt)=>{0==nt&&"."===de||(0==nt&&""===de?w=!0:".."===de?E++:""!=de&&V.push(de))}),V):[...V,K]},[]);return new _r(w,E,k)}(w);if(K.toRoot())return Ns(E.root,E.root,new te([],{}),k,V);const re=function Ro(A,E,w){if(A.isAbsolute)return new di(E.root,!0,0);if(-1===w.snapshot._lastPathIndex){const K=w.snapshot._urlSegment;return new di(K,K===E.root,0)}const k=vi(A.commands[0])?0:1;return function Po(A,E,w){let k=A,V=E,K=w;for(;K>V;){if(K-=V,k=k.parent,!k)throw new Error("Invalid number of '../'");V=k.segments.length}return new di(k,!1,V-K)}(w.snapshot._urlSegment,w.snapshot._lastPathIndex+k,A.numberOfDoubleDots)}(K,E,A),de=re.processChildren?Ji(re.segmentGroup,re.index,K.commands):Yi(re.segmentGroup,re.index,K.commands);return Ns(E.root,re.segmentGroup,de,k,V)}(Ft,this.currentUrlTree,w,Kt,Zn??null)}navigateByUrl(w,k={skipLocationChange:!1}){const V=pr(w)?w:this.parseUrl(w),K=this.urlHandlingStrategy.merge(V,this.rawUrlTree);return this.scheduleNavigation(K,"imperative",null,k)}navigate(w,k={skipLocationChange:!1}){return function Jl(A){for(let E=0;E<A.length;E++){const w=A[E];if(null==w)throw new Error(`The requested path contains ${w} segment at index ${E}`)}}(w),this.navigateByUrl(this.createUrlTree(w,k),k)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let k;try{k=this.urlSerializer.parse(w)}catch(V){k=this.malformedUriErrorHandler(V,this.urlSerializer,w)}return k}isActive(w,k){let V;if(V=!0===k?{...Qd}:!1===k?{...Pc}:k,pr(w))return un(this.currentUrlTree,w,V);const K=this.parseUrl(w);return un(this.currentUrlTree,K,V)}removeEmptyProps(w){return Object.keys(w).reduce((k,V)=>{const K=w[V];return null!=K&&(k[V]=K),k},{})}processNavigations(){this.navigations.subscribe(w=>{this.navigated=!0,this.lastSuccessfulId=w.id,this.currentPageId=w.targetPageId,this.events.next(new wn(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,w.resolve(!0)},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)})}scheduleNavigation(w,k,V,K,re){if(this.disposed)return Promise.resolve(!1);let de,nt,Ft;re?(de=re.resolve,nt=re.reject,Ft=re.promise):Ft=new Promise(($n,gr)=>{de=$n,nt=gr});const Zn=++this.navigationId;let Kt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(V=this.location.getState()),Kt=V&&V.\u0275routerPageId?V.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):Kt=0,this.setTransition({id:Zn,targetPageId:Kt,source:k,restoredState:V,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:w,extras:K,resolve:de,reject:nt,promise:Ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ft.catch($n=>Promise.reject($n))}setBrowserUrl(w,k){const V=this.urlSerializer.serialize(w),K={...k.extras.state,...this.generateNgRouterState(k.id,k.targetPageId)};this.location.isCurrentPathEqualTo(V)||k.extras.replaceUrl?this.location.replaceState(V,"",K):this.location.go(V,"",K)}restoreHistory(w,k=!1){if("computed"===this.canceledNavigationResolution){const V=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===V?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===V&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(V)}else"replace"===this.canceledNavigationResolution&&(k&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(w,k){const V=new Hr(w.id,this.serializeUrl(w.extractedUrl),k);this.triggerEvent(V),w.resolve(!1)}generateNgRouterState(w,k){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:k}:{navigationId:w}}}return A.\u0275fac=function(w){h.$Z()},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac}),A})();function wa(A){return"imperative"!==A}class Ql{}class gi{preload(E,w){return(0,Ae.of)(null)}}let To=(()=>{class A{constructor(w,k,V,K){this.router=w,this.injector=V,this.preloadingStrategy=K,this.loader=new Yl(V,k,nt=>w.triggerEvent(new Lr(nt)),nt=>w.triggerEvent(new Mr(nt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,We.h)(w=>w instanceof wn),(0,In.b)(()=>this.preload())).subscribe(()=>{})}preload(){const w=this.injector.get(h.h0i);return this.processRoutes(w,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,k){const V=[];for(const K of k)if(K.loadChildren&&!K.canLoad&&K._loadedConfig){const re=K._loadedConfig;V.push(this.processRoutes(re.module,re.routes))}else K.loadChildren&&!K.canLoad?V.push(this.preloadConfig(w,K)):K.children&&V.push(this.processRoutes(w,K.children));return(0,at.D)(V).pipe((0,Tn.J)(),(0,Ne.U)(K=>{}))}preloadConfig(w,k){return this.preloadingStrategy.preload(k,()=>(k._loadedConfig?(0,Ae.of)(k._loadedConfig):this.loader.load(w.injector,k)).pipe((0,Dt.z)(K=>(k._loadedConfig=K,this.processRoutes(K.module,K.routes)))))}}return A.\u0275fac=function(w){return new(w||A)(h.LFG(pi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Ql))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac}),A})(),fs=(()=>{class A{constructor(w,k,V={}){this.router=w,this.viewportScroller=k,this.options=V,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},V.scrollPositionRestoration=V.scrollPositionRestoration||"disabled",V.anchorScrolling=V.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(w=>{w instanceof Ir?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof wn&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.router.parseUrl(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(w=>{w instanceof fn&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,k){this.router.triggerEvent(new fn(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,k))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(w){h.$Z()},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac}),A})();const Ls=new h.OlP("ROUTER_CONFIGURATION"),rl=new h.OlP("ROUTER_FORROOT_GUARD"),Va=[b.Ye,{provide:Wt,useClass:xe},{provide:pi,useFactory:function st(A,E,w,k,V,K,re={},de,nt){const Ft=new pi(null,A,E,w,k,V,Cn(K));return de&&(Ft.urlHandlingStrategy=de),nt&&(Ft.routeReuseStrategy=nt),function ht(A,E){A.errorHandler&&(E.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(E.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(E.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(E.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(E.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(E.canceledNavigationResolution=A.canceledNavigationResolution)}(re,Ft),re.enableTracing&&Ft.events.subscribe(Zn=>{console.group?.(`Router Event: ${Zn.constructor.name}`),console.log(Zn.toString()),console.log(Zn),console.groupEnd?.()}),Ft},deps:[Wt,Sr,b.Ye,h.zs3,h.Sil,Uo,Ls,[class nl{},new h.FiY],[class sa{},new h.FiY]]},Sr,{provide:_s,useFactory:function hn(A){return A.routerState.root},deps:[pi]},To,gi,class es{preload(E,w){return w().pipe(Je(()=>(0,Ae.of)(null)))}},{provide:Ls,useValue:{enableTracing:!1}}];function xu(){return new h.PXZ("Router",pi)}let bi=(()=>{class A{constructor(w,k){}static forRoot(w,k){return{ngModule:A,providers:[Va,ee(w),{provide:rl,useFactory:W,deps:[[pi,new h.FiY,new h.tp0]]},{provide:Ls,useValue:k||{}},{provide:b.S$,useFactory:S,deps:[b.lw,[new h.tBr(b.mr),new h.FiY],Ls]},{provide:fs,useFactory:T,deps:[pi,b.EM,Ls]},{provide:Ql,useExisting:k&&k.preloadingStrategy?k.preloadingStrategy:gi},{provide:h.PXZ,multi:!0,useFactory:xu},[wi,{provide:h.ip1,multi:!0,useFactory:hr,deps:[wi]},{provide:ps,useFactory:lo,deps:[wi]},{provide:h.tb,multi:!0,useExisting:ps}]]}}static forChild(w){return{ngModule:A,providers:[ee(w)]}}}return A.\u0275fac=function(w){return new(w||A)(h.LFG(rl,8),h.LFG(pi,8))},A.\u0275mod=h.oAB({type:A}),A.\u0275inj=h.cJS({}),A})();function T(A,E,w){return w.scrollOffset&&E.setOffset(w.scrollOffset),new fs(A,E,w)}function S(A,E,w={}){return w.useHash?new b.Do(A,E):new b.b0(A,E)}function W(A){return"guarded"}function ee(A){return[{provide:h.deG,multi:!0,useValue:A},{provide:Uo,multi:!0,useValue:A}]}let wi=(()=>{class A{constructor(w){this.injector=w,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new wt.x}appInitializer(){return this.injector.get(b.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let k=null;const V=new Promise(de=>k=de),K=this.injector.get(pi),re=this.injector.get(Ls);return"disabled"===re.initialNavigation?(K.setUpLocationChangeListener(),k(!0)):"enabled"===re.initialNavigation||"enabledBlocking"===re.initialNavigation?(K.hooks.afterPreactivation=()=>this.initNavigation?(0,Ae.of)(null):(this.initNavigation=!0,k(!0),this.resultOfPreactivationDone),K.initialNavigation()):k(!0),V})}bootstrapListener(w){const k=this.injector.get(Ls),V=this.injector.get(To),K=this.injector.get(fs),re=this.injector.get(pi),de=this.injector.get(h.z2F);w===de.components[0]&&(("enabledNonBlocking"===k.initialNavigation||void 0===k.initialNavigation)&&re.initialNavigation(),V.setUpPreloading(),K.init(),re.resetRootComponentType(de.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(w){return new(w||A)(h.LFG(h.zs3))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac}),A})();function hr(A){return A.appInitializer.bind(A)}function lo(A){return A.bootstrapListener.bind(A)}const ps=new h.OlP("Router Initializer")},3394:(Nt,Ve,G)=>{"use strict";G.d(Ve,{Z:()=>Ze});var b=G(3854),h=G(3910),Y=G(8026),ve=G(5422);class pe{constructor(Be,Qe){this._delegate=Be,this.firebase=Qe,(0,Y._addComponent)(Be,new h.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Be,Qe=Y._DEFAULT_ENTRY_NAME){var It;this._delegate.checkDestroyed();const wt=this._delegate.container.getProvider(Be);return!wt.isInitialized()&&"EXPLICIT"===(null===(It=wt.getComponent())||void 0===It?void 0:It.instantiationMode)&&wt.initialize(),wt.getImmediate({identifier:Qe})}_removeServiceInstance(Be,Qe=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(Qe)}_addComponent(Be){(0,Y._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,Y._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ke=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),se=function Me(){const ut=function Se(ut){const Be={},Qe={__esModule:!0,initializeApp:function Je(ue,De={}){const ye=Y.initializeApp(ue,De);if((0,b.r3)(Be,ye.name))return Be[ye.name];const Le=new ut(ye,Qe);return Be[ye.name]=Le,Le},app:wt,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function Xe(ue){const De=ue.name,ye=De.replace("-compat","");if(Y._registerComponent(ue)&&"PUBLIC"===ue.type){const Le=(Ne=wt())=>{if("function"!=typeof Ne[ye])throw ke.create("invalid-app-argument",{appName:De});return Ne[ye]()};void 0!==ue.serviceProps&&(0,b.ZB)(Le,ue.serviceProps),Qe[ye]=Le,ut.prototype[ye]=function(...Ne){return this._getService.bind(this,De).apply(this,ue.multipleInstances?Ne:[])}}return"PUBLIC"===ue.type?Qe[ye]:null},removeApp:function It(ue){delete Be[ue]},useAsService:function pt(ue,De){return"serverAuth"===De?null:De},modularAPIs:Y}};function wt(ue){if(!(0,b.r3)(Be,ue=ue||Y._DEFAULT_ENTRY_NAME))throw ke.create("no-app",{appName:ue});return Be[ue]}return Qe.default=Qe,Object.defineProperty(Qe,"apps",{get:function We(){return Object.keys(Be).map(ue=>Be[ue])}}),wt.App=ut,Qe}(pe);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function Be(Qe){(0,b.ZB)(ut,Qe)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),ut}(),ae=new ve.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=se;!function Ae(ut){(0,Y.registerVersion)("@firebase/app-compat","0.1.21",ut)}()},8026:(Nt,Ve,G)=>{"use strict";G.r(Ve),G.d(Ve,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>br,_DEFAULT_ENTRY_NAME:()=>qn,_addComponent:()=>xn,_addOrOverwriteComponent:()=>Ir,_apps:()=>Tt,_clearComponents:()=>_n,_components:()=>Tn,_getProvider:()=>Hr,_registerComponent:()=>wn,_removeServiceInstance:()=>Fn,deleteApp:()=>nr,getApp:()=>Mr,getApps:()=>wr,initializeApp:()=>Lr,onLog:()=>fn,registerVersion:()=>ci,setLogLevel:()=>Rt});var b=G(8239),h=G(3910),Y=G(5422),ve=G(3854);class pe{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(kt=>{if(function Te(ot){const et=ot.getComponent();return"VERSION"===(null==et?void 0:et.type)}(kt)){const Gt=kt.getImmediate();return`${Gt.library}/${Gt.version}`}return null}).filter(kt=>kt).join(" ")}}const ke="@firebase/app",Me=new Y.Yd("@firebase/app"),qn="[DEFAULT]",Dt={[ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tt=new Map,Tn=new Map;function xn(ot,et){try{ot.container.addComponent(et)}catch(kt){Me.debug(`Component ${et.name} failed to register with FirebaseApp ${ot.name}`,kt)}}function Ir(ot,et){ot.container.addOrOverwriteComponent(et)}function wn(ot){const et=ot.name;if(Tn.has(et))return Me.debug(`There were multiple attempts to register component ${et}.`),!1;Tn.set(et,ot);for(const kt of Tt.values())xn(kt,ot);return!0}function Hr(ot,et){const kt=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return kt&&kt.triggerHeartbeat(),ot.container.getProvider(et)}function Fn(ot,et,kt=qn){Hr(ot,et).clearInstance(kt)}function _n(){Tn.clear()}const Fr=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Xr{constructor(et,kt,Gt){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},kt),this._name=kt.name,this._automaticDataCollectionEnabled=kt.automaticDataCollectionEnabled,this._container=Gt,this.container.addComponent(new h.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}const br="9.6.10";function Lr(ot,et={}){"object"!=typeof et&&(et={name:et});const kt=Object.assign({name:qn,automaticDataCollectionEnabled:!1},et),Gt=kt.name;if("string"!=typeof Gt||!Gt)throw Fr.create("bad-app-name",{appName:String(Gt)});const yn=Tt.get(Gt);if(yn){if((0,ve.vZ)(ot,yn.options)&&(0,ve.vZ)(kt,yn.config))return yn;throw Fr.create("duplicate-app",{appName:Gt})}const nn=new h.H0(Gt);for(const te of Tn.values())nn.addComponent(te);const le=new Xr(ot,kt,nn);return Tt.set(Gt,le),le}function Mr(ot=qn){const et=Tt.get(ot);if(!et)throw Fr.create("no-app",{appName:ot});return et}function wr(){return Array.from(Tt.values())}function nr(ot){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,b.Z)(function*(ot){const et=ot.name;Tt.has(et)&&(Tt.delete(et),yield Promise.all(ot.container.getProviders().map(kt=>kt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function ci(ot,et,kt){var Gt;let yn=null!==(Gt=Dt[ot])&&void 0!==Gt?Gt:ot;kt&&(yn+=`-${kt}`);const nn=yn.match(/\s|\//),le=et.match(/\s|\//);if(nn||le){const te=[`Unable to register library "${yn}" with version "${et}":`];return nn&&te.push(`library name "${yn}" contains illegal characters (whitespace or "/")`),nn&&le&&te.push("and"),le&&te.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void Me.warn(te.join(" "))}wn(new h.wA(`${yn}-version`,()=>({library:yn,version:et}),"VERSION"))}function fn(ot,et){if(null!==ot&&"function"!=typeof ot)throw Fr.create("invalid-log-argument");(0,Y.Am)(ot,et)}function Rt(ot){(0,Y.Ub)(ot)}const Re="firebase-heartbeat-store";let ce=null;function me(){return ce||(ce=(0,ve.X3)("firebase-heartbeat-database",1,(ot,et)=>{0===et&&ot.createObjectStore(Re)}).catch(ot=>{throw Fr.create("storage-open",{originalErrorMessage:ot.message})})),ce}function Ue(){return(Ue=(0,b.Z)(function*(ot){try{return(yield me()).transaction(Re).objectStore(Re).get(Cn(ot))}catch(et){throw Fr.create("storage-get",{originalErrorMessage:et.message})}})).apply(this,arguments)}function Ye(ot,et){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,b.Z)(function*(ot,et){try{const Gt=(yield me()).transaction(Re,"readwrite");return yield Gt.objectStore(Re).put(et,Cn(ot)),Gt.complete}catch(kt){throw Fr.create("storage-set",{originalErrorMessage:kt.message})}})).apply(this,arguments)}function Cn(ot){return`${ot.name}!${ot.options.appId}`}class Yn{constructor(et){this.container=et,this._heartbeatsCache=null;const kt=this.container.getProvider("app").getImmediate();this._storage=new St(kt),this._heartbeatsCachePromise=this._storage.read().then(Gt=>(this._heartbeatsCache=Gt,Gt))}triggerHeartbeat(){var et=this;return(0,b.Z)(function*(){const Gt=et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yn=Vn();if(null===et._heartbeatsCache&&(et._heartbeatsCache=yield et._heartbeatsCachePromise),et._heartbeatsCache.lastSentHeartbeatDate!==yn&&!et._heartbeatsCache.heartbeats.some(nn=>nn.date===yn))return et._heartbeatsCache.heartbeats.push({date:yn,agent:Gt}),et._heartbeatsCache.heartbeats=et._heartbeatsCache.heartbeats.filter(nn=>{const le=new Date(nn.date).valueOf();return Date.now()-le<=2592e6}),et._storage.overwrite(et._heartbeatsCache)})()}getHeartbeatsHeader(){var et=this;return(0,b.Z)(function*(){if(null===et._heartbeatsCache&&(yield et._heartbeatsCachePromise),null===et._heartbeatsCache||0===et._heartbeatsCache.heartbeats.length)return"";const kt=Vn(),{heartbeatsToSend:Gt,unsentEntries:yn}=function Jn(ot,et=1024){const kt=[];let Gt=ot.slice();for(const yn of ot){const nn=kt.find(le=>le.agent===yn.agent);if(nn){if(nn.dates.push(yn.date),Mn(kt)>et){nn.dates.pop();break}}else if(kt.push({agent:yn.agent,dates:[yn.date]}),Mn(kt)>et){kt.pop();break}Gt=Gt.slice(1)}return{heartbeatsToSend:kt,unsentEntries:Gt}}(et._heartbeatsCache.heartbeats),nn=(0,ve.L)(JSON.stringify({version:2,heartbeats:Gt}));return et._heartbeatsCache.lastSentHeartbeatDate=kt,yn.length>0?(et._heartbeatsCache.heartbeats=yn,yield et._storage.overwrite(et._heartbeatsCache)):(et._heartbeatsCache.heartbeats=[],et._storage.overwrite(et._heartbeatsCache)),nn})()}}function Vn(){return(new Date).toISOString().substring(0,10)}class St{constructor(et){this.app=et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var et=this;return(0,b.Z)(function*(){return(yield et._canUseIndexedDBPromise)&&(yield function ct(ot){return Ue.apply(this,arguments)}(et.app))||{heartbeats:[]}})()}overwrite(et){var kt=this;return(0,b.Z)(function*(){var Gt;if(yield kt._canUseIndexedDBPromise){const nn=yield kt.read();return Ye(kt.app,{lastSentHeartbeatDate:null!==(Gt=et.lastSentHeartbeatDate)&&void 0!==Gt?Gt:nn.lastSentHeartbeatDate,heartbeats:et.heartbeats})}})()}add(et){var kt=this;return(0,b.Z)(function*(){var Gt;if(yield kt._canUseIndexedDBPromise){const nn=yield kt.read();return Ye(kt.app,{lastSentHeartbeatDate:null!==(Gt=et.lastSentHeartbeatDate)&&void 0!==Gt?Gt:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...et.heartbeats]})}})()}}function Mn(ot){return(0,ve.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function un(ot){wn(new h.wA("platform-logger",et=>new pe(et),"PRIVATE")),wn(new h.wA("heartbeat",et=>new Yn(et),"PRIVATE")),ci(ke,"0.7.20",ot),ci(ke,"0.7.20","esm2017"),ci("fire-js","")}("")},3910:(Nt,Ve,G)=>{"use strict";G.d(Ve,{wA:()=>Y,H0:()=>Se});var b=G(8239),h=G(3854);class Y{constructor(se,ae,we){this.name=se,this.instanceFactory=ae,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(se){return this.instantiationMode=se,this}setMultipleInstances(se){return this.multipleInstances=se,this}setServiceProps(se){return this.serviceProps=se,this}setInstanceCreatedCallback(se){return this.onInstanceCreated=se,this}}const ve="[DEFAULT]";class pe{constructor(se,ae){this.name=se,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(se){const ae=this.normalizeInstanceIdentifier(se);if(!this.instancesDeferred.has(ae)){const we=new h.BH;if(this.instancesDeferred.set(ae,we),this.isInitialized(ae)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ae});at&&we.resolve(at)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(se){var ae;const we=this.normalizeInstanceIdentifier(null==se?void 0:se.identifier),at=null!==(ae=null==se?void 0:se.optional)&&void 0!==ae&&ae;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Ae){if(at)return null;throw Ae}}getComponent(){return this.component}setComponent(se){if(se.name!==this.name)throw Error(`Mismatching Component ${se.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=se,this.shouldAutoInitialize()){if(function ke(Me){return"EAGER"===Me.instantiationMode}(se))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[ae,we]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ae);try{const Ae=this.getOrInitializeService({instanceIdentifier:at});we.resolve(Ae)}catch{}}}}clearInstance(se=ve){this.instancesDeferred.delete(se),this.instancesOptions.delete(se),this.instances.delete(se)}delete(){var se=this;return(0,b.Z)(function*(){const ae=Array.from(se.instances.values());yield Promise.all([...ae.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...ae.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(se=ve){return this.instances.has(se)}getOptions(se=ve){return this.instancesOptions.get(se)||{}}initialize(se={}){const{options:ae={}}=se,we=this.normalizeInstanceIdentifier(se.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:we,options:ae});for(const[Ae,Ze]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Ae)&&Ze.resolve(at);return at}onInit(se,ae){var we;const at=this.normalizeInstanceIdentifier(ae),Ae=null!==(we=this.onInitCallbacks.get(at))&&void 0!==we?we:new Set;Ae.add(se),this.onInitCallbacks.set(at,Ae);const Ze=this.instances.get(at);return Ze&&se(Ze,at),()=>{Ae.delete(se)}}invokeOnInitCallbacks(se,ae){const we=this.onInitCallbacks.get(ae);if(we)for(const at of we)try{at(se,ae)}catch{}}getOrInitializeService({instanceIdentifier:se,options:ae={}}){let we=this.instances.get(se);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=se,Me===ve?void 0:Me),options:ae}),this.instances.set(se,we),this.instancesOptions.set(se,ae),this.invokeOnInitCallbacks(we,se),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,se,we)}catch{}var Me;return we||null}normalizeInstanceIdentifier(se=ve){return this.component?this.component.multipleInstances?se:ve:se}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Se{constructor(se){this.name=se,this.providers=new Map}addComponent(se){const ae=this.getProvider(se.name);if(ae.isComponentSet())throw new Error(`Component ${se.name} has already been registered with ${this.name}`);ae.setComponent(se)}addOrOverwriteComponent(se){this.getProvider(se.name).isComponentSet()&&this.providers.delete(se.name),this.addComponent(se)}getProvider(se){if(this.providers.has(se))return this.providers.get(se);const ae=new pe(se,this);return this.providers.set(se,ae),ae}getProviders(){return Array.from(this.providers.values())}}},5422:(Nt,Ve,G)=>{"use strict";G.d(Ve,{in:()=>h,Yd:()=>ke,Ub:()=>Se,Am:()=>Me});const b=[];var h=(()=>{return(se=h||(h={}))[se.DEBUG=0]="DEBUG",se[se.VERBOSE=1]="VERBOSE",se[se.INFO=2]="INFO",se[se.WARN=3]="WARN",se[se.ERROR=4]="ERROR",se[se.SILENT=5]="SILENT",h;var se})();const Y={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},ve=h.INFO,pe={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},Te=(se,ae,...we)=>{if(ae<se.logLevel)return;const at=(new Date).toISOString(),Ae=pe[ae];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[Ae](`[${at}]  ${se.name}:`,...we)};class ke{constructor(ae){this.name=ae,this._logLevel=ve,this._logHandler=Te,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in h))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?Y[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...ae),this._logHandler(this,h.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...ae),this._logHandler(this,h.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,h.INFO,...ae),this._logHandler(this,h.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,h.WARN,...ae),this._logHandler(this,h.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...ae),this._logHandler(this,h.ERROR,...ae)}}function Se(se){b.forEach(ae=>{ae.setLogLevel(se)})}function Me(se,ae){for(const we of b){let at=null;ae&&ae.level&&(at=Y[ae.level]),we.userLogHandler=null===se?null:(Ae,Ze,...ut)=>{const Be=ut.map(Qe=>{if(null==Qe)return null;if("string"==typeof Qe)return Qe;if("number"==typeof Qe||"boolean"==typeof Qe)return Qe.toString();if(Qe instanceof Error)return Qe.message;try{return JSON.stringify(Qe)}catch{return null}}).filter(Qe=>Qe).join(" ");Ze>=(at??Ae.logLevel)&&se({level:h[Ze].toLowerCase(),message:Be,args:ut,type:Ae.name})}}}},8239:(Nt,Ve,G)=>{"use strict";function b(Y,ve,pe,Te,ke,Se,Me){try{var se=Y[Se](Me),ae=se.value}catch(we){return void pe(we)}se.done?ve(ae):Promise.resolve(ae).then(Te,ke)}function h(Y){return function(){var ve=this,pe=arguments;return new Promise(function(Te,ke){var Se=Y.apply(ve,pe);function Me(ae){b(Se,Te,ke,Me,se,"next",ae)}function se(ae){b(Se,Te,ke,Me,se,"throw",ae)}Me(void 0)})}}G.d(Ve,{Z:()=>h})}},Nt=>{Nt(Nt.s=2401)}]);