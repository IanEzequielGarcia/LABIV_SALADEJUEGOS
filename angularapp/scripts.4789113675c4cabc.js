var suits=["Spades","Hearts","Diamonds","Clubs"],values=["1","2","3","4","5","6","7","8","9","10","11","12"],deck=new Array,players=new Array,currentPlayer=0,vidas=10,cartaAnterior=0;function createDeck(){deck=new Array;for(var e=0;e<values.length;e++)for(var n=0;n<suits.length;n++){var t=parseInt(values[e]);deck.push({Value:values[e],Suit:suits[n],Weight:t})}}function createPlayers(e){players=new Array;for(var n=1;n<=e;n++){var t=new Array;players.push({Name:"Player "+n,ID:n,Points:0,Hand:t})}}function createPlayersUI(){document.getElementById("players").innerHTML="";for(var e=0;e<players.length;e++){var n=document.createElement("div"),t=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div");r.className="points",r.id="points_"+e,n.id="player_"+e,n.className="player",a.id="hand_"+e,t.innerHTML="Player "+players[e].ID,n.appendChild(t),n.appendChild(a),n.appendChild(r),document.getElementById("players").appendChild(n)}}function shuffle(){for(var e=0;e<1e3;e++){var n=Math.floor(Math.random()*deck.length),t=Math.floor(Math.random()*deck.length),a=deck[n];deck[n]=deck[t],deck[t]=a}}function startblackjack(){document.getElementById("btnStart").value="Reiniciar",document.getElementById("status").style.display="none",vidas=10,cartaAnterior=0,currentPlayer=0,createDeck(),shuffle(),createPlayers(1),createPlayersUI(),dealHands(),document.getElementById("player_"+currentPlayer).classList.add("active")}function dealHands(){for(var e=0;e<players.length;e++){var n=deck.pop();players[e].Hand.push(n),renderCard(n,e),updatePoints()}updateDeck()}function renderCard(e,n){var t=document.getElementById("hand_"+n);t.childNodes.length>0&&t.removeChild(t.firstChild),t.appendChild(getCardUI(e))}function getCardUI(e){var t,n=document.createElement("div");return t="Hearts"==e.Suit?"&hearts;":"Spades"==e.Suit?"&spades;":"Diamonds"==e.Suit?"&diams;":"&clubs;",n.className="card",n.innerHTML=e.Value+"<br/>"+t,n}function getPoints(e){for(var n=0,t=0;t<players[e].Hand.length;t++)n=players[e].Hand[t].Weight;return players[e].Points=n,n}function updatePoints(){for(var e=0;e<players.length;e++)getPoints(e),document.getElementById("points_"+e).innerHTML=players[e].Points}function hitMe(){var e=deck.pop();players[currentPlayer].Hand.push(e),renderCard(e,currentPlayer),updatePoints(),console.log("CARTA ACTUAL "+players[currentPlayer].Points),console.log("CARTA ANTERIOR "+cartaAnterior),console.log("Cartas "+deck.length),vidas>1?players[currentPlayer].Points<cartaAnterior&&players[currentPlayer].Points!=cartaAnterior&&(vidas--,updateDeck()):(deck.length<1||(document.getElementById("status").innerHTML="Perdiste",document.getElementById("status").style.display="inline-block"),end()),cartaAnterior=players[currentPlayer].Points}function stay(){var e=deck.pop();players[currentPlayer].Hand.push(e),renderCard(e,currentPlayer),updatePoints(),console.log("CARTA ACTUAL "+players[currentPlayer].Points),console.log("CARTA ANTERIOR "+cartaAnterior),console.log("Cartas "+deck.length),vidas>1?players[currentPlayer].Points>cartaAnterior&&players[currentPlayer].Points!=cartaAnterior&&(vidas--,updateDeck()):(deck.length<1||(document.getElementById("status").innerHTML="Perdiste",document.getElementById("status").style.display="inline-block"),end()),cartaAnterior=players[currentPlayer].Points}function end(){deck.length<1&&(document.getElementById("status").innerHTML="Ganaste",document.getElementById("status").style.display="inline-block")}function updateDeck(){document.getElementById("deckcount").innerHTML=vidas}window.addEventListener("load",function(){createDeck(),shuffle(),createPlayers(1)});