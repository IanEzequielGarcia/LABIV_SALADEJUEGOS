(self.webpackChunkTPSALAJUEGOS=self.webpackChunkTPSALAJUEGOS||[]).push([[179],{8939:(bt,xe,j)=>{"use strict";j.d(xe,{hO:()=>Ve,xv:()=>Ce,Dh:()=>be,GT:()=>we,cc:()=>Be,on:()=>ne,pX:()=>ue});var I=j(9724),h=j(7841),Z=j(6586);bt=j.hmd(bt);const me=["ngOnDestroy"],ue=(Ue,_t,dt,He={})=>new Proxy(Ue,{get:(Ge,$e)=>dt.runOutsideAngular(()=>{var ht;if(Ue[$e])return(null===(ht=null==He?void 0:He.spy)||void 0===ht?void 0:ht.get)&&He.spy.get($e,Ue[$e]),Ue[$e];if(me.indexOf($e)>-1)return()=>{};const le=_t.toPromise().then(Te=>{const fe=Te&&Te[$e];return"function"==typeof fe?fe.bind(Te):fe&&fe.then?fe.then(Se=>dt.run(()=>Se)):dt.run(()=>fe)});return new Proxy(()=>{},{get:(Te,fe)=>le[fe],apply:(Te,fe,Se)=>le.then(ke=>{var pe;const et=ke&&ke(...Se);return(null===(pe=null==He?void 0:He.spy)||void 0===pe?void 0:pe.apply)&&He.spy.apply($e,Se,et),et})})})}),we=(Ue,_t)=>{_t.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(He=>{Object.defineProperty(Ue.prototype,He,Object.getOwnPropertyDescriptor(dt.prototype||dt,He))})})};class De{constructor(_t){return _t}}const be=new I.OlP("angularfire2.app.options"),Ce=new I.OlP("angularfire2.app.name");function ne(Ue,_t,dt){const Ge="object"==typeof dt&&dt||{};Ge.name=Ge.name||"string"==typeof dt&&dt||"[DEFAULT]";const ht=h.Z.apps.filter(le=>le&&le.name===Ge.name)[0]||_t.runOutsideAngular(()=>h.Z.initializeApp(Ue,Ge));try{JSON.stringify(Ue)!==JSON.stringify(ht.options)&&ie("error",`${ht.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(le){}return new De(ht)}const ie=(Ue,..._t)=>{(0,I.X6Q)()&&"undefined"!=typeof console&&console[Ue](..._t)},he={provide:De,useFactory:ne,deps:[be,I.R0b,[new I.FiY,Ce]]};let Ve=(()=>{class Ue{constructor(dt){h.Z.registerVersion("angularfire",Z.q4.full,"core"),h.Z.registerVersion("angularfire",Z.q4.full,"app-compat"),h.Z.registerVersion("angular",I.q4F.full,dt.toString())}static initializeApp(dt,He){return{ngModule:Ue,providers:[{provide:be,useValue:dt},{provide:Ce,useValue:He}]}}}return Ue.\u0275fac=function(dt){return new(dt||Ue)(I.LFG(I.Lbi))},Ue.\u0275mod=I.oAB({type:Ue}),Ue.\u0275inj=I.cJS({providers:[he]}),Ue})();function Be(Ue,_t,dt,He,Ge){const[,$e,ht]=globalThis.\u0275AngularfireInstanceCache.find(le=>le[0]===Ue)||[];if($e)return function Je(Ue,_t){try{return Ue.toString()===_t.toString()}catch(dt){return Ue===_t}}(Ge,ht)||(Re("error",`${_t} was already initialized on the ${dt} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:Ge,was:ht})),$e;{const le=He();return globalThis.\u0275AngularfireInstanceCache.push([Ue,le,Ge]),le}}const nt=!!bt.hot,Re=(Ue,..._t)=>{(0,I.X6Q)()&&"undefined"!=typeof console&&console[Ue](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6586:(bt,xe,j)=>{"use strict";j.d(xe,{q4:()=>Eh,iC:()=>Ir,HU:()=>Xc,vb:()=>Ch,JM:()=>hl});var I=j(9724),h=j(2329),Z=j(8239),me=j(8026),ue=j(3854),we=j(3910),De=j(5422);const be="@firebase/installations",ie="w:0.5.7",he="FIS_v2",Ue=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _t(x){return x instanceof ue.ZR&&x.code.includes("request-failed")}function dt({projectId:x}){return`https://firebaseinstallations.googleapis.com/v1/projects/${x}/installations`}function He(x){return{token:x.token,requestStatus:2,expiresIn:Se(x.expiresIn),creationTime:Date.now()}}function Ge(x,P){return $e.apply(this,arguments)}function $e(){return($e=(0,Z.Z)(function*(x,P){const X=(yield P.json()).error;return Ue.create("request-failed",{requestName:x,serverCode:X.code,serverMessage:X.message,serverStatus:X.status})})).apply(this,arguments)}function ht({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function le(x,{refreshToken:P}){const $=ht(x);return $.append("Authorization",function ke(x){return`${he} ${x}`}(P)),$}function Te(x){return fe.apply(this,arguments)}function fe(){return(fe=(0,Z.Z)(function*(x){const P=yield x();return P.status>=500&&P.status<600?x():P})).apply(this,arguments)}function Se(x){return Number(x.replace("s","000"))}function pe(x,P){return et.apply(this,arguments)}function et(){return(et=(0,Z.Z)(function*({appConfig:x,heartbeatServiceProvider:P},{fid:$}){const X=dt(x),ve=ht(x),Ae=P.getImmediate({optional:!0});if(Ae){const cn=yield Ae.getHeartbeatsHeader();cn&&ve.append("x-firebase-client",cn)}const St={method:"POST",headers:ve,body:JSON.stringify({fid:$,authVersion:he,appId:x.appId,sdkVersion:ie})},Bt=yield Te(()=>fetch(X,St));if(Bt.ok){const cn=yield Bt.json();return{fid:cn.fid||$,registrationStatus:2,refreshToken:cn.refreshToken,authToken:He(cn.authToken)}}throw yield Ge("Create Installation",Bt)})).apply(this,arguments)}function Me(x){return new Promise(P=>{setTimeout(P,x)})}const In=/^[cdef][\w-]{21}$/;function yt(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const $=function Tt(x){return function Kt(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return In.test($)?$:""}catch(x){return""}}function Qt(x){return`${x.appName}!${x.appId}`}const bn=new Map;function Ai(x,P){const $=Qt(x);Mn($,P),function pn(x,P){const $=function yr(){return!Ni&&"BroadcastChannel"in self&&(Ni=new BroadcastChannel("[Firebase] FID Change"),Ni.onmessage=x=>{Mn(x.data.key,x.data.fid)}),Ni}();$&&$.postMessage({key:x,fid:P}),function ss(){0===bn.size&&Ni&&(Ni.close(),Ni=null)}()}($,P)}function Mn(x,P){const $=bn.get(x);if($)for(const X of $)X(P)}let Ni=null;const Ki="firebase-installations-store";let ar=null;function ti(){return ar||(ar=(0,ue.X3)("firebase-installations-database",1,(x,P)=>{0===P&&x.createObjectStore(Ki)})),ar}function At(x,P){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,Z.Z)(function*(x,P){const $=Qt(x),ve=(yield ti()).transaction(Ki,"readwrite"),Ae=ve.objectStore(Ki),st=yield Ae.get($);return yield Ae.put(P,$),yield ve.complete,(!st||st.fid!==P.fid)&&Ai(x,P.fid),P})).apply(this,arguments)}function Vn(x){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,Z.Z)(function*(x){const P=Qt(x),X=(yield ti()).transaction(Ki,"readwrite");yield X.objectStore(Ki).delete(P),yield X.complete})).apply(this,arguments)}function vr(x,P){return br.apply(this,arguments)}function br(){return(br=(0,Z.Z)(function*(x,P){const $=Qt(x),ve=(yield ti()).transaction(Ki,"readwrite"),Ae=ve.objectStore(Ki),st=yield Ae.get($),St=P(st);return void 0===St?yield Ae.delete($):yield Ae.put(St,$),yield ve.complete,St&&(!st||st.fid!==St.fid)&&Ai(x,St.fid),St})).apply(this,arguments)}function Mt(x){return jn.apply(this,arguments)}function jn(){return(jn=(0,Z.Z)(function*(x){let P;const $=yield vr(x.appConfig,X=>{const ve=ji(X),Ae=Hi(x,ve);return P=Ae.registrationPromise,Ae.installationEntry});return""===$.fid?{installationEntry:yield P}:{installationEntry:$,registrationPromise:P}})).apply(this,arguments)}function ji(x){return Tn(x||{fid:yt(),registrationStatus:0})}function Hi(x,P){if(0===P.registrationStatus){if(!navigator.onLine)return{installationEntry:P,registrationPromise:Promise.reject(Ue.create("app-offline"))};const $={fid:P.fid,registrationStatus:1,registrationTime:Date.now()},X=function zt(x,P){return at.apply(this,arguments)}(x,$);return{installationEntry:$,registrationPromise:X}}return 1===P.registrationStatus?{installationEntry:P,registrationPromise:qt(x)}:{installationEntry:P}}function at(){return(at=(0,Z.Z)(function*(x,P){try{const $=yield pe(x,P);return At(x.appConfig,$)}catch($){throw _t($)&&409===$.customData.serverCode?yield Vn(x.appConfig):yield At(x.appConfig,{fid:P.fid,registrationStatus:0}),$}})).apply(this,arguments)}function qt(x){return ui.apply(this,arguments)}function ui(){return(ui=(0,Z.Z)(function*(x){let P=yield ci(x.appConfig);for(;1===P.registrationStatus;)yield Me(100),P=yield ci(x.appConfig);if(0===P.registrationStatus){const{installationEntry:$,registrationPromise:X}=yield Mt(x);return X||$}return P})).apply(this,arguments)}function ci(x){return vr(x,P=>{if(!P)throw Ue.create("installation-not-found");return Tn(P)})}function Tn(x){return function oi(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Kn(x,P){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,Z.Z)(function*({appConfig:x,heartbeatServiceProvider:P},$){const X=$t(x,$),ve=le(x,$),Ae=P.getImmediate({optional:!0});if(Ae){const cn=yield Ae.getHeartbeatsHeader();cn&&ve.append("x-firebase-client",cn)}const St={method:"POST",headers:ve,body:JSON.stringify({installation:{sdkVersion:ie,appId:x.appId}})},Bt=yield Te(()=>fetch(X,St));if(Bt.ok)return He(yield Bt.json());throw yield Ge("Generate Auth Token",Bt)})).apply(this,arguments)}function $t(x,{fid:P}){return`${dt(x)}/${P}/authTokens:generate`}function Gi(x){return gn.apply(this,arguments)}function gn(){return(gn=(0,Z.Z)(function*(x,P=!1){let $;const X=yield vr(x.appConfig,Ae=>{if(!Yt(Ae))throw Ue.create("not-registered");const st=Ae.authToken;if(!P&&re(st))return Ae;if(1===st.requestStatus)return $=Qe(x,P),Ae;{if(!navigator.onLine)throw Ue.create("app-offline");const St=ce(Ae);return $=Wt(x,St),St}});return $?yield $:X.authToken})).apply(this,arguments)}function Qe(x,P){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,Z.Z)(function*(x,P){let $=yield It(x.appConfig);for(;1===$.authToken.requestStatus;)yield Me(100),$=yield It(x.appConfig);const X=$.authToken;return 0===X.requestStatus?Gi(x,P):X})).apply(this,arguments)}function It(x){return vr(x,P=>{if(!Yt(P))throw Ue.create("not-registered");return function Le(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(P.authToken)?Object.assign(Object.assign({},P),{authToken:{requestStatus:0}}):P})}function Wt(x,P){return _n.apply(this,arguments)}function _n(){return(_n=(0,Z.Z)(function*(x,P){try{const $=yield Kn(x,P),X=Object.assign(Object.assign({},P),{authToken:$});return yield At(x.appConfig,X),$}catch($){if(!_t($)||401!==$.customData.serverCode&&404!==$.customData.serverCode){const X=Object.assign(Object.assign({},P),{authToken:{requestStatus:0}});yield At(x.appConfig,X)}else yield Vn(x.appConfig);throw $}})).apply(this,arguments)}function Yt(x){return void 0!==x&&2===x.registrationStatus}function re(x){return 2===x.requestStatus&&!function Y(x){const P=Date.now();return P<x.creationTime||x.creationTime+x.expiresIn<P+36e5}(x)}function ce(x){const P={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:P})}function ft(){return(ft=(0,Z.Z)(function*(x){const P=x,{installationEntry:$,registrationPromise:X}=yield Mt(P);return X?X.catch(console.error):Gi(P).catch(console.error),$.fid})).apply(this,arguments)}function Sn(){return(Sn=(0,Z.Z)(function*(x,P=!1){const $=x;return yield wi($),(yield Gi($,P)).token})).apply(this,arguments)}function wi(x){return mn.apply(this,arguments)}function mn(){return(mn=(0,Z.Z)(function*(x){const{registrationPromise:P}=yield Mt(x);P&&(yield P)})).apply(this,arguments)}function Vt(x){return Ue.create("missing-app-config-values",{valueName:x})}const xs="installations",qe=x=>{const P=x.getProvider("app").getImmediate(),$=function $i(x){if(!x||!x.options)throw Vt("App Configuration");if(!x.name)throw Vt("App Name");const P=["projectId","apiKey","appId"];for(const $ of P)if(!x.options[$])throw Vt($);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(P);return{app:P,appConfig:$,heartbeatServiceProvider:(0,me._getProvider)(P,"heartbeat"),_delete:()=>Promise.resolve()}},dn=x=>{const P=x.getProvider("app").getImmediate(),$=(0,me._getProvider)(P,xs).getImmediate();return{getId:()=>function ye(x){return ft.apply(this,arguments)}($),getToken:ve=>function Ut(x){return Sn.apply(this,arguments)}($,ve)}};(function zn(){(0,me._registerComponent)(new we.wA(xs,qe,"PUBLIC")),(0,me._registerComponent)(new we.wA("installations-internal",dn,"PRIVATE"))})(),(0,me.registerVersion)(be,"0.5.7"),(0,me.registerVersion)(be,"0.5.7","esm2017");const Wi="@firebase/remote-config",ni=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class sa{constructor(P,$,X,ve){this.client=P,this.storage=$,this.storageCache=X,this.logger=ve}isCachedDataFresh(P,$){if(!$)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const X=Date.now()-$,ve=X<=P;return this.logger.debug(`Config fetch cache check. Cache age millis: ${X}. Cache max age millis (minimumFetchIntervalMillis setting): ${P}. Is cache hit: ${ve}.`),ve}fetch(P){var $=this;return(0,Z.Z)(function*(){const[X,ve]=yield Promise.all([$.storage.getLastSuccessfulFetchTimestampMillis(),$.storage.getLastSuccessfulFetchResponse()]);if(ve&&$.isCachedDataFresh(P.cacheMaxAgeMillis,X))return ve;P.eTag=ve&&ve.eTag;const Ae=yield $.client.fetch(P),st=[$.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ae.status&&st.push($.storage.setLastSuccessfulFetchResponse(Ae)),yield Promise.all(st),Ae})()}}function Hs(x=navigator){return x.languages&&x.languages[0]||x.language}class Di{constructor(P,$,X,ve,Ae,st){this.firebaseInstallations=P,this.sdkVersion=$,this.namespace=X,this.projectId=ve,this.apiKey=Ae,this.appId=st}fetch(P){var $=this;return(0,Z.Z)(function*(){const[X,ve]=yield Promise.all([$.firebaseInstallations.getId(),$.firebaseInstallations.getToken()]),st=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${$.projectId}/namespaces/${$.namespace}:fetch?key=${$.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":P.eTag||"*"},Bt={sdk_version:$.sdkVersion,app_instance_id:X,app_instance_id_token:ve,app_id:$.appId,language_code:Hs()},cn={method:"POST",headers:St,body:JSON.stringify(Bt)},On=fetch(st,cn),un=new Promise((co,Ea)=>{P.signal.addEventListener(()=>{const Xo=new Error("The operation was aborted.");Xo.name="AbortError",Ea(Xo)})});let hr;try{yield Promise.race([On,un]),hr=yield On}catch(co){let Ea="fetch-client-network";throw"AbortError"===co.name&&(Ea="fetch-timeout"),ni.create(Ea,{originalErrorMessage:co.message})}let nr=hr.status;const Ul=hr.headers.get("ETag")||void 0;let Ga,Ro;if(200===hr.status){let co;try{co=yield hr.json()}catch(Ea){throw ni.create("fetch-client-parse",{originalErrorMessage:Ea.message})}Ga=co.entries,Ro=co.state}if("INSTANCE_STATE_UNSPECIFIED"===Ro?nr=500:"NO_CHANGE"===Ro?nr=304:("NO_TEMPLATE"===Ro||"EMPTY_CONFIG"===Ro)&&(Ga={}),304!==nr&&200!==nr)throw ni.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:Ul,config:Ga}})()}}class _s{constructor(P,$){this.client=P,this.storage=$}fetch(P){var $=this;return(0,Z.Z)(function*(){const X=(yield $.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return $.attemptFetch(P,X)})()}attemptFetch(P,{throttleEndTimeMillis:$,backoffCount:X}){var ve=this;return(0,Z.Z)(function*(){yield function ii(x,P){return new Promise(($,X)=>{const ve=Math.max(P-Date.now(),0),Ae=setTimeout($,ve);x.addEventListener(()=>{clearTimeout(Ae),X(ni.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}(P.signal,$);try{const Ae=yield ve.client.fetch(P);return yield ve.storage.deleteThrottleMetadata(),Ae}catch(Ae){if(!function de(x){if(!(x instanceof ue.ZR&&x.customData))return!1;const P=Number(x.customData.httpStatus);return 429===P||500===P||503===P||504===P}(Ae))throw Ae;const st={throttleEndTimeMillis:Date.now()+(0,ue.$s)(X),backoffCount:X+1};return yield ve.storage.setThrottleMetadata(st),ve.attemptFetch(P,st)}})()}}class oa{constructor(P,$,X,ve,Ae){this.app=P,this._client=$,this._storageCache=X,this._storage=ve,this._logger=Ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pi(x,P){const $=x.target.error||void 0;return ni.create(P,{originalErrorMessage:$&&$.message})}const Ii="app_namespace_store";class Pl{constructor(P,$,X,ve=function Ra(){return new Promise((x,P)=>{try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=X=>{P(pi(X,"storage-open"))},$.onsuccess=X=>{x(X.target.result)},$.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Ii,{keyPath:"compositeKey"})}}catch($){P(ni.create("storage-open",{originalErrorMessage:$}))}})}()){this.appId=P,this.appName=$,this.namespace=X,this.openDbPromise=ve}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(P){return this.set("last_fetch_status",P)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(P){return this.set("last_successful_fetch_timestamp_millis",P)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(P){return this.set("last_successful_fetch_response",P)}getActiveConfig(){return this.get("active_config")}setActiveConfig(P){return this.set("active_config",P)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(P){return this.set("active_config_etag",P)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(P){return this.set("throttle_metadata",P)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(P){var $=this;return(0,Z.Z)(function*(){const X=yield $.openDbPromise;return new Promise((ve,Ae)=>{const St=X.transaction([Ii],"readonly").objectStore(Ii),Bt=$.createCompositeKey(P);try{const cn=St.get(Bt);cn.onerror=On=>{Ae(pi(On,"storage-get"))},cn.onsuccess=On=>{const un=On.target.result;ve(un?un.value:void 0)}}catch(cn){Ae(ni.create("storage-get",{originalErrorMessage:cn&&cn.message}))}})})()}set(P,$){var X=this;return(0,Z.Z)(function*(){const ve=yield X.openDbPromise;return new Promise((Ae,st)=>{const Bt=ve.transaction([Ii],"readwrite").objectStore(Ii),cn=X.createCompositeKey(P);try{const On=Bt.put({compositeKey:cn,value:$});On.onerror=un=>{st(pi(un,"storage-set"))},On.onsuccess=()=>{Ae()}}catch(On){st(ni.create("storage-set",{originalErrorMessage:On&&On.message}))}})})()}delete(P){var $=this;return(0,Z.Z)(function*(){const X=yield $.openDbPromise;return new Promise((ve,Ae)=>{const St=X.transaction([Ii],"readwrite").objectStore(Ii),Bt=$.createCompositeKey(P);try{const cn=St.delete(Bt);cn.onerror=On=>{Ae(pi(On,"storage-delete"))},cn.onsuccess=()=>{ve()}}catch(cn){Ae(ni.create("storage-delete",{originalErrorMessage:cn&&cn.message}))}})})()}createCompositeKey(P){return[this.appId,this.appName,this.namespace,P].join()}}class aa{constructor(P){this.storage=P}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var P=this;return(0,Z.Z)(function*(){const $=P.storage.getLastFetchStatus(),X=P.storage.getLastSuccessfulFetchTimestampMillis(),ve=P.storage.getActiveConfig(),Ae=yield $;Ae&&(P.lastFetchStatus=Ae);const st=yield X;st&&(P.lastSuccessfulFetchTimestampMillis=st);const St=yield ve;St&&(P.activeConfig=St)})()}setLastFetchStatus(P){return this.lastFetchStatus=P,this.storage.setLastFetchStatus(P)}setLastSuccessfulFetchTimestampMillis(P){return this.lastSuccessfulFetchTimestampMillis=P,this.storage.setLastSuccessfulFetchTimestampMillis(P)}setActiveConfig(P){return this.activeConfig=P,this.storage.setActiveConfig(P)}}function Gs(){return la.apply(this,arguments)}function la(){return(la=(0,Z.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(x){return!1}})).apply(this,arguments)}!function Os(){(0,me._registerComponent)(new we.wA("remote-config",function x(P,{instanceIdentifier:$}){const X=P.getProvider("app").getImmediate(),ve=P.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ni.create("registration-window");if(!(0,ue.hl)())throw ni.create("indexed-db-unavailable");const{projectId:Ae,apiKey:st,appId:St}=X.options;if(!Ae)throw ni.create("registration-project-id");if(!st)throw ni.create("registration-api-key");if(!St)throw ni.create("registration-app-id");const Bt=new Pl(St,X.name,$=$||"firebase"),cn=new aa(Bt),On=new De.Yd(Wi);On.logLevel=De.in.ERROR;const un=new Di(ve,me.SDK_VERSION,$,Ae,st,St),hr=new _s(un,Bt),nr=new sa(hr,Bt,cn,On),Ul=new oa(X,nr,cn,Bt,On);return function Er(x){const P=(0,ue.m9)(x);P._initializePromise||(P._initializePromise=P._storageCache.loadFromStorage().then(()=>{P._isInitializationComplete=!0}))}(Ul),Ul},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(Wi,"0.3.6"),(0,me.registerVersion)(Wi,"0.3.6","esm2017")}();const ri="/firebase-messaging-sw.js",Zr="/firebase-cloud-messaging-push-scope",gi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ys="google.c.a.c_id",vs="google.c.a.c_l",Uo="google.c.a.ts",$s="google.c.a.e";var Rs=(()=>{return(x=Rs||(Rs={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Rs;var x})();function qi(x){const P=new Uint8Array(x);return btoa(String.fromCharCode(...P)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kr(x){const $=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),X=atob($),ve=new Uint8Array(X.length);for(let Ae=0;Ae<X.length;++Ae)ve[Ae]=X.charCodeAt(Ae);return ve}const jo="fcm_token_details_db",Fi="fcm_token_object_Store";function Ho(x){return Co.apply(this,arguments)}function Co(){return Co=(0,Z.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ae=>Ae.name).includes(jo))return null;let P=null;return(yield(0,ue.X3)(jo,5,function(){var X=(0,Z.Z)(function*(ve,Ae,st,St){var Bt;if(Ae<2||!ve.objectStoreNames.contains(Fi))return;const cn=St.objectStore(Fi),On=yield cn.index("fcmSenderId").get(x);if(yield cn.clear(),On)if(2===Ae){const un=On;if(!un.auth||!un.p256dh||!un.endpoint)return;P={token:un.fcmToken,createTime:null!==(Bt=un.createTime)&&void 0!==Bt?Bt:Date.now(),subscriptionOptions:{auth:un.auth,p256dh:un.p256dh,endpoint:un.endpoint,swScope:un.swScope,vapidKey:"string"==typeof un.vapidKey?un.vapidKey:qi(un.vapidKey)}}}else if(3===Ae){const un=On;P={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:qi(un.auth),p256dh:qi(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:qi(un.vapidKey)}}}else if(4===Ae){const un=On;P={token:un.fcmToken,createTime:un.createTime,subscriptionOptions:{auth:qi(un.auth),p256dh:qi(un.p256dh),endpoint:un.endpoint,swScope:un.swScope,vapidKey:qi(un.vapidKey)}}}});return function(ve,Ae,st,St){return X.apply(this,arguments)}}())).close(),yield(0,ue.Lj)(jo),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Go(P)?P:null}),Co.apply(this,arguments)}function Go(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:P}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof P.auth&&P.auth.length>0&&"string"==typeof P.p256dh&&P.p256dh.length>0&&"string"==typeof P.endpoint&&P.endpoint.length>0&&"string"==typeof P.swScope&&P.swScope.length>0&&"string"==typeof P.vapidKey&&P.vapidKey.length>0}const ls="firebase-messaging-store";let Yr=null;function bs(){return Yr||(Yr=(0,ue.X3)("firebase-messaging-database",1,(x,P)=>{0===P&&x.createObjectStore(ls)})),Yr}function Hn(x){return R.apply(this,arguments)}function R(){return(R=(0,Z.Z)(function*(x){const P=Pe(x),X=yield(yield bs()).transaction(ls).objectStore(ls).get(P);if(X)return X;{const ve=yield Ho(x.appConfig.senderId);if(ve)return yield G(x,ve),ve}})).apply(this,arguments)}function G(x,P){return O.apply(this,arguments)}function O(){return(O=(0,Z.Z)(function*(x,P){const $=Pe(x),ve=(yield bs()).transaction(ls,"readwrite");return yield ve.objectStore(ls).put(P,$),yield ve.complete,P})).apply(this,arguments)}function z(x){return oe.apply(this,arguments)}function oe(){return(oe=(0,Z.Z)(function*(x){const P=Pe(x),X=(yield bs()).transaction(ls,"readwrite");yield X.objectStore(ls).delete(P),yield X.complete})).apply(this,arguments)}function Pe({appConfig:x}){return x.appId}const lt=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function An(x,P){return yn.apply(this,arguments)}function yn(){return(yn=(0,Z.Z)(function*(x,P){const $=yield Or(x),X=Rt(P),ve={method:"POST",headers:$,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(Pn(x.appConfig),ve)).json()}catch(st){throw lt.create("token-subscribe-failed",{errorInfo:st})}if(Ae.error)throw lt.create("token-subscribe-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw lt.create("token-subscribe-no-token");return Ae.token})).apply(this,arguments)}function an(x,P){return vn.apply(this,arguments)}function vn(){return(vn=(0,Z.Z)(function*(x,P){const $=yield Or(x),X=Rt(P.subscriptionOptions),ve={method:"PATCH",headers:$,body:JSON.stringify(X)};let Ae;try{Ae=yield(yield fetch(`${Pn(x.appConfig)}/${P.token}`,ve)).json()}catch(st){throw lt.create("token-update-failed",{errorInfo:st})}if(Ae.error)throw lt.create("token-update-failed",{errorInfo:Ae.error.message});if(!Ae.token)throw lt.create("token-update-no-token");return Ae.token})).apply(this,arguments)}function hi(x,P){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,Z.Z)(function*(x,P){const X={method:"DELETE",headers:yield Or(x)};try{const Ae=yield(yield fetch(`${Pn(x.appConfig)}/${P}`,X)).json();if(Ae.error)throw lt.create("token-unsubscribe-failed",{errorInfo:Ae.error.message})}catch(ve){throw lt.create("token-unsubscribe-failed",{errorInfo:ve})}})).apply(this,arguments)}function Pn({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Or(x){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,Z.Z)(function*({appConfig:x,installations:P}){const $=yield P.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${$}`})})).apply(this,arguments)}function Rt({p256dh:x,auth:P,endpoint:$,vapidKey:X}){const ve={web:{endpoint:$,auth:P,p256dh:x}};return X!==gi&&(ve.web.applicationPubKey=X),ve}const Jr=6048e5;function ks(x){return no.apply(this,arguments)}function no(){return(no=(0,Z.Z)(function*(x){const P=yield ca(x.swRegistration,x.vapidKey),$={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:P.endpoint,auth:qi(P.getKey("auth")),p256dh:qi(P.getKey("p256dh"))},X=yield Hn(x.firebaseDependencies);if(X){if(ua(X.subscriptionOptions,$))return Date.now()>=X.createTime+Jr?ws(x,{token:X.token,createTime:Date.now(),subscriptionOptions:$}):X.token;try{yield hi(x.firebaseDependencies,X.token)}catch(ve){console.warn(ve)}return Xe(x.firebaseDependencies,$)}return Xe(x.firebaseDependencies,$)})).apply(this,arguments)}function Qr(x){return ka.apply(this,arguments)}function ka(){return(ka=(0,Z.Z)(function*(x){const P=yield Hn(x.firebaseDependencies);P&&(yield hi(x.firebaseDependencies,P.token),yield z(x.firebaseDependencies));const $=yield x.swRegistration.pushManager.getSubscription();return!$||$.unsubscribe()})).apply(this,arguments)}function ws(x,P){return nl.apply(this,arguments)}function nl(){return(nl=(0,Z.Z)(function*(x,P){try{const $=yield an(x.firebaseDependencies,P),X=Object.assign(Object.assign({},P),{token:$,createTime:Date.now()});return yield G(x.firebaseDependencies,X),$}catch($){throw yield Qr(x),$}})).apply(this,arguments)}function Xe(x,P){return hn.apply(this,arguments)}function hn(){return(hn=(0,Z.Z)(function*(x,P){const X={token:yield An(x,P),createTime:Date.now(),subscriptionOptions:P};return yield G(x,X),X.token})).apply(this,arguments)}function ca(x,P){return mi.apply(this,arguments)}function mi(){return(mi=(0,Z.Z)(function*(x,P){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kr(P)})})).apply(this,arguments)}function ua(x,P){return P.vapidKey===x.vapidKey&&P.endpoint===x.endpoint&&P.auth===x.auth&&P.p256dh===x.p256dh}function $o(x){const P={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function cs(x,P){if(!P.notification)return;x.notification={};const $=P.notification.title;$&&(x.notification.title=$);const X=P.notification.body;X&&(x.notification.body=X);const ve=P.notification.image;ve&&(x.notification.image=ve)}(P,x),function Wo(x,P){!P.data||(x.data=P.data)}(P,x),function Pa(x,P){if(!P.fcmOptions)return;x.fcmOptions={};const $=P.fcmOptions.link;$&&(x.fcmOptions.link=$);const X=P.fcmOptions.analytics_label;X&&(x.fcmOptions.analyticsLabel=X)}(P,x),P}function il(x){return"object"==typeof x&&!!x&&ys in x}function Fa(x,P){const $=[];for(let X=0;X<x.length;X++)$.push(x.charAt(X)),X<P.length&&$.push(P.charAt(X));return $.join("")}function io(x){return lt.create("missing-app-config-values",{valueName:x})}Fa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Cr{constructor(P,$,X){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ve=function da(x){if(!x||!x.options)throw io("App Configuration Object");if(!x.name)throw io("App Name");const P=["projectId","apiKey","appId","messagingSenderId"],{options:$}=x;for(const X of P)if(!$[X])throw io(X);return{appName:x.name,projectId:$.projectId,apiKey:$.apiKey,appId:$.appId,senderId:$.messagingSenderId}}(P);this.firebaseDependencies={app:P,appConfig:ve,installations:$,analyticsProvider:X}}_delete(){return Promise.resolve()}}function Xr(x){return ha.apply(this,arguments)}function ha(){return(ha=(0,Z.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(ri,{scope:Zr}),x.swRegistration.update().catch(()=>{})}catch(P){throw lt.create("failed-service-worker-registration",{browserErrorMessage:P.message})}})).apply(this,arguments)}function Ps(x,P){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,Z.Z)(function*(x,P){if(!P&&!x.swRegistration&&(yield Xr(x)),P||!x.swRegistration){if(!(P instanceof ServiceWorkerRegistration))throw lt.create("invalid-sw-registration");x.swRegistration=P}})).apply(this,arguments)}function La(x,P){return Va.apply(this,arguments)}function Va(){return(Va=(0,Z.Z)(function*(x,P){P?x.vapidKey=P:x.vapidKey||(x.vapidKey=gi)})).apply(this,arguments)}function rl(){return(rl=(0,Z.Z)(function*(x,P){if(!navigator)throw lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lt.create("permission-blocked");return yield La(x,null==P?void 0:P.vapidKey),yield Ps(x,null==P?void 0:P.serviceWorkerRegistration),ks(x)})).apply(this,arguments)}function zo(x,P,$){return Io.apply(this,arguments)}function Io(){return(Io=(0,Z.Z)(function*(x,P,$){const X=pa(P);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(X,{message_id:$[ys],message_name:$[vs],message_time:$[Uo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pa(x){switch(x){case Rs.NOTIFICATION_CLICKED:return"notification_open";case Rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ga(){return(ga=(0,Z.Z)(function*(x,P){const $=P.data;if(!$.isFirebaseMessaging)return;x.onMessageHandler&&$.messageType===Rs.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler($o($)):x.onMessageHandler.next($o($)));const X=$.data;il(X)&&"1"===X[$s]&&(yield zo(x,$.messageType,X))})).apply(this,arguments)}const To="@firebase/messaging",qo=x=>{const P=new Cr(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$=>function Ba(x,P){return ga.apply(this,arguments)}(P,$)),P},Ws=x=>{const P=x.getProvider("messaging").getImmediate();return{getToken:X=>function fa(x,P){return rl.apply(this,arguments)}(P,X)}};function _a(){return So.apply(this,arguments)}function So(){return(So=(0,Z.Z)(function*(){try{yield(0,ue.eu)()}catch(x){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ma(){(0,me._registerComponent)(new we.wA("messaging",qo,"PUBLIC")),(0,me._registerComponent)(new we.wA("messaging-internal",Ws,"PRIVATE")),(0,me.registerVersion)(To,"0.9.11"),(0,me.registerVersion)(To,"0.9.11","esm2017")}();const ur="analytics",Ju="firebase_id",zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",es="https://www.googletagmanager.com/gtag/js",xi=new De.Yd("@firebase/analytics");function Ua(x){return Promise.all(x.map(P=>P.catch($=>$)))}function al(x,P){const $=document.createElement("script");$.src=`${es}?l=${x}&id=${P}`,$.async=!0,document.head.appendChild($)}function Rr(x,P,$,X,ve,Ae){return ya.apply(this,arguments)}function ya(){return(ya=(0,Z.Z)(function*(x,P,$,X,ve,Ae){const st=X[ve];try{if(st)yield P[st];else{const Bt=(yield Ua($)).find(cn=>cn.measurementId===ve);Bt&&(yield P[Bt.appId])}}catch(St){xi.error(St)}x("config",ve,Ae)})).apply(this,arguments)}function qs(x,P,$,X,ve){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,Z.Z)(function*(x,P,$,X,ve){try{let Ae=[];if(ve&&ve.send_to){let st=ve.send_to;Array.isArray(st)||(st=[st]);const St=yield Ua($);for(const Bt of st){const cn=St.find(un=>un.measurementId===Bt),On=cn&&P[cn.appId];if(!On){Ae=[];break}Ae.push(On)}}0===Ae.length&&(Ae=Object.values(P)),yield Promise.all(Ae),x("event",X,ve||{})}catch(Ae){xi.error(Ae)}})).apply(this,arguments)}function va(){const x=window.document.getElementsByTagName("script");for(const P of Object.values(x))if(P.src&&P.src.includes(es))return P;return null}const Mi=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ee=new class U{constructor(P={},$=1e3){this.throttleMetadata=P,this.intervalMillis=$}getThrottleMetadata(P){return this.throttleMetadata[P]}setThrottleMetadata(P,$){this.throttleMetadata[P]=$}deleteThrottleMetadata(P){delete this.throttleMetadata[P]}};function Ke(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function kt(x){return en.apply(this,arguments)}function en(){return(en=(0,Z.Z)(function*(x){var P;const{appId:$,apiKey:X}=x,ve={method:"GET",headers:Ke(X)},Ae=zs.replace("{app-id}",$),st=yield fetch(Ae,ve);if(200!==st.status&&304!==st.status){let St="";try{const Bt=yield st.json();(null===(P=Bt.error)||void 0===P?void 0:P.message)&&(St=Bt.error.message)}catch(Bt){}throw Mi.create("config-fetch-failed",{httpStatus:st.status,responseMessage:St})}return st.json()})).apply(this,arguments)}function fi(x){return ot.apply(this,arguments)}function ot(){return(ot=(0,Z.Z)(function*(x,P=ee,$){const{appId:X,apiKey:ve,measurementId:Ae}=x.options;if(!X)throw Mi.create("no-app-id");if(!ve){if(Ae)return{measurementId:Ae,appId:X};throw Mi.create("no-api-key")}const st=P.getThrottleMetadata(X)||{backoffCount:0,throttleEndTimeMillis:Date.now()},St=new S;return setTimeout((0,Z.Z)(function*(){St.abort()}),void 0!==$?$:6e4),Ds({appId:X,apiKey:ve,measurementId:Ae},st,St,P)})).apply(this,arguments)}function Ds(x,P,$){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Z.Z)(function*(x,{throttleEndTimeMillis:P,backoffCount:$},X,ve=ee){const{appId:Ae,measurementId:st}=x;try{yield ac(X,P)}catch(St){if(st)return xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${St.message}]`),{appId:Ae,measurementId:st};throw St}try{const St=yield kt(x);return ve.deleteThrottleMetadata(Ae),St}catch(St){if(!lc(St)){if(ve.deleteThrottleMetadata(Ae),st)return xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${St.message}]`),{appId:Ae,measurementId:st};throw St}const Bt=503===Number(St.customData.httpStatus)?(0,ue.$s)($,ve.intervalMillis,30):(0,ue.$s)($,ve.intervalMillis),cn={throttleEndTimeMillis:Date.now()+Bt,backoffCount:$+1};return ve.setThrottleMetadata(Ae,cn),xi.debug(`Calling attemptFetch again in ${Bt} millis`),Ds(x,cn,X,ve)}})).apply(this,arguments)}function ac(x,P){return new Promise(($,X)=>{const ve=Math.max(P-Date.now(),0),Ae=setTimeout($,ve);x.addEventListener(()=>{clearTimeout(Ae),X(Mi.create("fetch-throttle",{throttleEndTimeMillis:P}))})})}function lc(x){if(!(x instanceof ue.ZR&&x.customData))return!1;const P=Number(x.customData.httpStatus);return 429===P||500===P||503===P||504===P}class S{constructor(){this.listeners=[]}addEventListener(P){this.listeners.push(P)}abort(){this.listeners.forEach(P=>P())}}function C(){return b.apply(this,arguments)}function b(){return(b=(0,Z.Z)(function*(){if(!(0,ue.hl)())return xi.warn(Mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(x){return xi.warn(Mi.create("indexeddb-unavailable",{errorInfo:x}).message),!1}return!0})).apply(this,arguments)}function F(){return(F=(0,Z.Z)(function*(x,P,$,X,ve,Ae,st){var St;const Bt=fi(x);Bt.then(nr=>{$[nr.measurementId]=nr.appId,x.options.measurementId&&nr.measurementId!==x.options.measurementId&&xi.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>xi.error(nr)),P.push(Bt);const cn=C().then(nr=>{if(nr)return X.getId()}),[On,un]=yield Promise.all([Bt,cn]);va()||al(Ae,On.measurementId),ve("js",new Date);const hr=null!==(St=null==st?void 0:st.config)&&void 0!==St?St:{};return hr.origin="firebase",hr.update=!0,null!=un&&(hr[Ju]=un),ve("config",On.measurementId,hr),On.measurementId})).apply(this,arguments)}class W{constructor(P){this.app=P}_delete(){return delete J[this.app.options.appId],Promise.resolve()}}let J={},se=[];const Oe={};let Pt,Nn,mt="dataLayer",Fn=!1;function us(x,P,$){!function so(){const x=[];if((0,ue.ru)()&&x.push("This is a browser extension environment."),(0,ue.zI)()||x.push("Cookies are not available."),x.length>0){const P=x.map((X,ve)=>`(${ve+1}) ${X}`).join(" "),$=Mi.create("invalid-analytics-context",{errorInfo:P});xi.warn($.message)}}();const X=x.options.appId;if(!X)throw Mi.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw Mi.create("no-api-key");xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=J[X])throw Mi.create("already-exists",{id:X});if(!Fn){!function ts(x){let P=[];Array.isArray(window[x])?P=window[x]:window[x]=P}(mt);const{wrappedGtag:Ae,gtagCore:st}=function Ao(x,P,$,X,ve){let Ae=function(...st){window[X].push(arguments)};return window[ve]&&"function"==typeof window[ve]&&(Ae=window[ve]),window[ve]=function Cs(x,P,$,X){function Ae(){return(Ae=(0,Z.Z)(function*(st,St,Bt){try{"event"===st?yield qs(x,P,$,St,Bt):"config"===st?yield Rr(x,P,$,X,St,Bt):x("set",St)}catch(cn){xi.error(cn)}})).apply(this,arguments)}return function ve(st,St,Bt){return Ae.apply(this,arguments)}}(Ae,x,P,$),{gtagCore:Ae,wrappedGtag:window[ve]}}(J,se,Oe,mt,"gtag");Nn=Ae,Pt=st,Fn=!0}return J[X]=function M(x,P,$,X,ve,Ae,st){return F.apply(this,arguments)}(x,se,Oe,P,Pt,mt,$),new W(x)}function Mo(){return(Mo=(0,Z.Z)(function*(x,P,$,X,ve){if(ve&&ve.global)x("event",$,X);else{const Ae=yield P;x("event",$,Object.assign(Object.assign({},X),{send_to:Ae}))}})).apply(this,arguments)}function Vl(){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,Z.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(x){return!1}})).apply(this,arguments)}const Qu="@firebase/analytics";!function bh(){(0,me._registerComponent)(new we.wA(ur,(P,{options:$})=>us(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),$),"PUBLIC")),(0,me._registerComponent)(new we.wA("analytics-internal",function x(P){try{const $=P.getProvider(ur).getImmediate();return{logEvent:(X,ve,Ae)=>function Fg(x,P,$,X){x=(0,ue.m9)(x),function ll(x,P,$,X,ve){return Mo.apply(this,arguments)}(Nn,J[x.app.options.appId],P,$,X).catch(ve=>xi.error(ve))}($,X,ve,Ae)}}catch($){throw Mi.create("interop-component-reg-failed",{reason:$})}},"PRIVATE")),(0,me.registerVersion)(Qu,"0.7.7"),(0,me.registerVersion)(Qu,"0.7.7","esm2017")}();var wh=j(3466),Lg=j(474);const hc=new class tr extends Lg.v{}(class ba extends wh.o{constructor(P,$){super(P,$),this.scheduler=P,this.work=$}schedule(P,$=0){return $>0?super.schedule(P,$):(this.delay=$,this.state=P,this.scheduler.flush(this),this)}execute(P,$){return $>0||this.closed?super.execute(P,$):this._execute(P,$)}requestAsyncId(P,$,X=0){return null!=X&&X>0||null==X&&this.delay>0?super.requestAsyncId(P,$,X):P.flush(this)}});var Vg=j(6523),Xu=j(8168),si=j(4119),hs=j(7513);const Eh=new I.GfV("7.3.0"),lo="__angularfire_symbol__analyticsIsSupportedValue",Oo="__angularfire_symbol__analyticsIsSupported",Jo="__angularfire_symbol__remoteConfigIsSupportedValue",ja="__angularfire_symbol__remoteConfigIsSupported",Bl="__angularfire_symbol__messagingIsSupportedValue",Jc="__angularfire_symbol__messagingIsSupported";function hl(x,P,$){if(P){if(1===P.length)return P[0];const Ae=P.filter(st=>st.app===$);if(1===Ae.length)return Ae[0]}return $.container.getProvider(x).getImmediate({optional:!0})}globalThis[Oo]||(globalThis[Oo]=Vl().then(x=>globalThis[lo]=x).catch(()=>globalThis[lo]=!1)),globalThis[Jc]||(globalThis[Jc]=_a().then(x=>globalThis[Bl]=x).catch(()=>globalThis[Bl]=!1)),globalThis[ja]||(globalThis[ja]=Gs().then(x=>globalThis[Jo]=x).catch(()=>globalThis[Jo]=!1));const Ch=(x,P)=>{const $=P?[P]:(0,h.C6)(),X=[];return $.forEach(ve=>{ve.container.getProvider(x).instances.forEach(st=>{X.includes(st)||X.push(st)})}),X};function Ha(){}class pc{constructor(P,$=hc){this.zone=P,this.delegate=$}now(){return this.delegate.now()}schedule(P,$,X){const ve=this.zone;return this.delegate.schedule(function(st){ve.runGuarded(()=>{P.apply(this,[st])})},$,X)}}class td{constructor(P){this.zone=P,this.task=null}call(P,$){const X=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ha,{},Ha,Ha)),$.pipe((0,Xu.b)({next:X,complete:X,error:X})).subscribe(P).add(X)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xc=(()=>{class x{constructor($){this.ngZone=$,this.outsideAngular=$.runOutsideAngular(()=>new pc(Zone.current)),this.insideAngular=$.run(()=>new pc(Zone.current,Vg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function($){return new($||x)(I.LFG(I.R0b))},x.\u0275prov=I.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function wa(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function Ir(x){return wa(),function Qo(x){return function($){return($=$.lift(new td(x.ngZone))).pipe((0,si.R)(x.outsideAngular),(0,hs.Q)(x.insideAngular))}}(wa())(x)}},3854:(bt,xe,j)=>{"use strict";j.d(xe,{BH:()=>Be,LL:()=>Kt,ZR:()=>Me,gQ:()=>ti,zI:()=>ke,hu:()=>Z,g5:()=>me,US:()=>De,tV:()=>ne,h$:()=>be,L:()=>Ce,$s:()=>oi,r3:()=>Mn,Sg:()=>Je,ne:()=>At,p$:()=>ie,vZ:()=>ss,ZB:()=>he,Lj:()=>_n,gK:()=>Mt,pd:()=>ar,m9:()=>$t,z$:()=>nt,GJ:()=>Zi,jU:()=>_t,ru:()=>dt,d:()=>Ge,xb:()=>Ni,w1:()=>$e,hl:()=>fe,uI:()=>Re,UG:()=>Ue,Yr:()=>le,b$:()=>He,G6:()=>Te,Mn:()=>ht,w9:()=>ln,cI:()=>yt,UI:()=>yr,X3:()=>Wt,xO:()=>or,zd:()=>Ki,DV:()=>pn,ug:()=>at,dS:()=>zt,Pz:()=>Tt,eu:()=>Se});var I=j(8239);const Z=function(re,Y){if(!re)throw me(Y)},me=function(re){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+re)},ue=function(re){const Y=[];let ce=0;for(let Le=0;Le<re.length;Le++){let ye=re.charCodeAt(Le);ye<128?Y[ce++]=ye:ye<2048?(Y[ce++]=ye>>6|192,Y[ce++]=63&ye|128):55296==(64512&ye)&&Le+1<re.length&&56320==(64512&re.charCodeAt(Le+1))?(ye=65536+((1023&ye)<<10)+(1023&re.charCodeAt(++Le)),Y[ce++]=ye>>18|240,Y[ce++]=ye>>12&63|128,Y[ce++]=ye>>6&63|128,Y[ce++]=63&ye|128):(Y[ce++]=ye>>12|224,Y[ce++]=ye>>6&63|128,Y[ce++]=63&ye|128)}return Y},De={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,Y){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ce=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let ye=0;ye<re.length;ye+=3){const ft=re[ye],Ut=ye+1<re.length,Sn=Ut?re[ye+1]:0,wi=ye+2<re.length,mn=wi?re[ye+2]:0;let En=(15&Sn)<<2|mn>>6,Ei=63&mn;wi||(Ei=64,Ut||(En=64)),Le.push(ce[ft>>2],ce[(3&ft)<<4|Sn>>4],ce[En],ce[Ei])}return Le.join("")},encodeString(re,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(re):this.encodeByteArray(ue(re),Y)},decodeString(re,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(re):function(re){const Y=[];let ce=0,Le=0;for(;ce<re.length;){const ye=re[ce++];if(ye<128)Y[Le++]=String.fromCharCode(ye);else if(ye>191&&ye<224){const ft=re[ce++];Y[Le++]=String.fromCharCode((31&ye)<<6|63&ft)}else if(ye>239&&ye<365){const wi=((7&ye)<<18|(63&re[ce++])<<12|(63&re[ce++])<<6|63&re[ce++])-65536;Y[Le++]=String.fromCharCode(55296+(wi>>10)),Y[Le++]=String.fromCharCode(56320+(1023&wi))}else{const ft=re[ce++],Ut=re[ce++];Y[Le++]=String.fromCharCode((15&ye)<<12|(63&ft)<<6|63&Ut)}}return Y.join("")}(this.decodeStringToByteArray(re,Y))},decodeStringToByteArray(re,Y){this.init_();const ce=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let ye=0;ye<re.length;){const ft=ce[re.charAt(ye++)],Sn=ye<re.length?ce[re.charAt(ye)]:0;++ye;const mn=ye<re.length?ce[re.charAt(ye)]:64;++ye;const on=ye<re.length?ce[re.charAt(ye)]:64;if(++ye,null==ft||null==Sn||null==mn||null==on)throw Error();Le.push(ft<<2|Sn>>4),64!==mn&&(Le.push(Sn<<4&240|mn>>2),64!==on&&Le.push(mn<<6&192|on))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}},be=function(re){const Y=ue(re);return De.encodeByteArray(Y,!0)},Ce=function(re){return be(re).replace(/\./g,"")},ne=function(re){try{return De.decodeString(re,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function ie(re){return he(void 0,re)}function he(re,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return Y}for(const ce in Y)!Y.hasOwnProperty(ce)||!Ve(ce)||(re[ce]=he(re[ce],Y[ce]));return re}function Ve(re){return"__proto__"!==re}class Be{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,ce)=>{this.resolve=Y,this.reject=ce})}wrapCallback(Y){return(ce,Le)=>{ce?this.reject(ce):this.resolve(Le),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(ce):Y(ce,Le))}}}function Je(re,Y){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=Y||"demo-project",ye=re.iat||0,ft=re.sub||re.user_id;if(!ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ut=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:ye,exp:ye+3600,auth_time:ye,sub:ft,user_id:ft,firebase:{sign_in_provider:"custom",identities:{}}},re);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(Ut)),""].join(".")}function nt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(re){return!1}}function _t(){return"object"==typeof self&&self.self===self}function dt(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ge(){return nt().indexOf("Electron/")>=0}function $e(){const re=nt();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function ht(){return nt().indexOf("MSAppHost/")>=0}function le(){return!1}function Te(){return!Ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function Se(){return new Promise((re,Y)=>{try{let ce=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",ye=self.indexedDB.open(Le);ye.onsuccess=()=>{ye.result.close(),ce||self.indexedDB.deleteDatabase(Le),re(!0)},ye.onupgradeneeded=()=>{ce=!1},ye.onerror=()=>{var ft;Y((null===(ft=ye.error)||void 0===ft?void 0:ft.message)||"")}}catch(ce){Y(ce)}})}function ke(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Me extends Error{constructor(Y,ce,Le){super(ce),this.code=Y,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(Y,ce,Le){this.service=Y,this.serviceName=ce,this.errors=Le}create(Y,...ce){const Le=ce[0]||{},ye=`${this.service}/${Y}`,ft=this.errors[Y],Ut=ft?function In(re,Y){return re.replace(Wn,(ce,Le)=>{const ye=Y[Le];return null!=ye?String(ye):`<${Le}?>`})}(ft,Le):"Error";return new Me(ye,`${this.serviceName}: ${Ut} (${ye}).`,Le)}}const Wn=/\{\$([^}]+)}/g;function yt(re){return JSON.parse(re)}function Tt(re){return JSON.stringify(re)}const Qt=function(re){let Y={},ce={},Le={},ye="";try{const ft=re.split(".");Y=yt(ne(ft[0])||""),ce=yt(ne(ft[1])||""),ye=ft[2],Le=ce.d||{},delete ce.d}catch(ft){}return{header:Y,claims:ce,data:Le,signature:ye}},ln=function(re){const ce=Qt(re).claims;return!!ce&&"object"==typeof ce&&ce.hasOwnProperty("iat")},Zi=function(re){const Y=Qt(re).claims;return"object"==typeof Y&&!0===Y.admin};function Mn(re,Y){return Object.prototype.hasOwnProperty.call(re,Y)}function pn(re,Y){if(Object.prototype.hasOwnProperty.call(re,Y))return re[Y]}function Ni(re){for(const Y in re)if(Object.prototype.hasOwnProperty.call(re,Y))return!1;return!0}function yr(re,Y,ce){const Le={};for(const ye in re)Object.prototype.hasOwnProperty.call(re,ye)&&(Le[ye]=Y.call(ce,re[ye],ye,re));return Le}function ss(re,Y){if(re===Y)return!0;const ce=Object.keys(re),Le=Object.keys(Y);for(const ye of ce){if(!Le.includes(ye))return!1;const ft=re[ye],Ut=Y[ye];if(Ui(ft)&&Ui(Ut)){if(!ss(ft,Ut))return!1}else if(ft!==Ut)return!1}for(const ye of Le)if(!ce.includes(ye))return!1;return!0}function Ui(re){return null!==re&&"object"==typeof re}function or(re){const Y=[];for(const[ce,Le]of Object.entries(re))Array.isArray(Le)?Le.forEach(ye=>{Y.push(encodeURIComponent(ce)+"="+encodeURIComponent(ye))}):Y.push(encodeURIComponent(ce)+"="+encodeURIComponent(Le));return Y.length?"&"+Y.join("&"):""}function Ki(re){const Y={};return re.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[ye,ft]=Le.split("=");Y[decodeURIComponent(ye)]=decodeURIComponent(ft)}}),Y}function ar(re){const Y=re.indexOf("?");if(!Y)return"";const ce=re.indexOf("#",Y);return re.substring(Y,ce>0?ce:void 0)}class ti{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,ce){ce||(ce=0);const Le=this.W_;if("string"==typeof Y)for(let on=0;on<16;on++)Le[on]=Y.charCodeAt(ce)<<24|Y.charCodeAt(ce+1)<<16|Y.charCodeAt(ce+2)<<8|Y.charCodeAt(ce+3),ce+=4;else for(let on=0;on<16;on++)Le[on]=Y[ce]<<24|Y[ce+1]<<16|Y[ce+2]<<8|Y[ce+3],ce+=4;for(let on=16;on<80;on++){const En=Le[on-3]^Le[on-8]^Le[on-14]^Le[on-16];Le[on]=4294967295&(En<<1|En>>>31)}let mn,Ie,ye=this.chain_[0],ft=this.chain_[1],Ut=this.chain_[2],Sn=this.chain_[3],wi=this.chain_[4];for(let on=0;on<80;on++){on<40?on<20?(mn=Sn^ft&(Ut^Sn),Ie=1518500249):(mn=ft^Ut^Sn,Ie=1859775393):on<60?(mn=ft&Ut|Sn&(ft|Ut),Ie=2400959708):(mn=ft^Ut^Sn,Ie=3395469782);const En=(ye<<5|ye>>>27)+mn+wi+Ie+Le[on]&4294967295;wi=Sn,Sn=Ut,Ut=4294967295&(ft<<30|ft>>>2),ft=ye,ye=En}this.chain_[0]=this.chain_[0]+ye&4294967295,this.chain_[1]=this.chain_[1]+ft&4294967295,this.chain_[2]=this.chain_[2]+Ut&4294967295,this.chain_[3]=this.chain_[3]+Sn&4294967295,this.chain_[4]=this.chain_[4]+wi&4294967295}update(Y,ce){if(null==Y)return;void 0===ce&&(ce=Y.length);const Le=ce-this.blockSize;let ye=0;const ft=this.buf_;let Ut=this.inbuf_;for(;ye<ce;){if(0===Ut)for(;ye<=Le;)this.compress_(Y,ye),ye+=this.blockSize;if("string"==typeof Y){for(;ye<ce;)if(ft[Ut]=Y.charCodeAt(ye),++Ut,++ye,Ut===this.blockSize){this.compress_(ft),Ut=0;break}}else for(;ye<ce;)if(ft[Ut]=Y[ye],++Ut,++ye,Ut===this.blockSize){this.compress_(ft),Ut=0;break}}this.inbuf_=Ut,this.total_+=ce}digest(){const Y=[];let ce=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ye=this.blockSize-1;ye>=56;ye--)this.buf_[ye]=255&ce,ce/=256;this.compress_(this.buf_);let Le=0;for(let ye=0;ye<5;ye++)for(let ft=24;ft>=0;ft-=8)Y[Le]=this.chain_[ye]>>ft&255,++Le;return Y}}function At(re,Y){const ce=new Ar(re,Y);return ce.subscribe.bind(ce)}class Ar{constructor(Y,ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ce,this.task.then(()=>{Y(this)}).catch(Le=>{this.error(Le)})}next(Y){this.forEachObserver(ce=>{ce.next(Y)})}error(Y){this.forEachObserver(ce=>{ce.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,ce,Le){let ye;if(void 0===Y&&void 0===ce&&void 0===Le)throw new Error("Missing Observer.");ye=function Ot(re,Y){if("object"!=typeof re||null===re)return!1;for(const ce of Y)if(ce in re&&"function"==typeof re[ce])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:ce,complete:Le},void 0===ye.next&&(ye.next=vr),void 0===ye.error&&(ye.error=vr),void 0===ye.complete&&(ye.complete=vr);const ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ye.error(this.finalError):ye.complete()}catch(Ut){}}),this.observers.push(ye),ft}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let ce=0;ce<this.observers.length;ce++)this.sendOne(ce,Y)}sendOne(Y,ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{ce(this.observers[Y])}catch(Le){"undefined"!=typeof console&&console.error&&console.error(Le)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vr(){}function Mt(re,Y){return`${re} failed: ${Y} argument `}const zt=function(re){const Y=[];let ce=0;for(let Le=0;Le<re.length;Le++){let ye=re.charCodeAt(Le);if(ye>=55296&&ye<=56319){const ft=ye-55296;Le++,Z(Le<re.length,"Surrogate pair missing trail surrogate."),ye=65536+(ft<<10)+(re.charCodeAt(Le)-56320)}ye<128?Y[ce++]=ye:ye<2048?(Y[ce++]=ye>>6|192,Y[ce++]=63&ye|128):ye<65536?(Y[ce++]=ye>>12|224,Y[ce++]=ye>>6&63|128,Y[ce++]=63&ye|128):(Y[ce++]=ye>>18|240,Y[ce++]=ye>>12&63|128,Y[ce++]=ye>>6&63|128,Y[ce++]=63&ye|128)}return Y},at=function(re){let Y=0;for(let ce=0;ce<re.length;ce++){const Le=re.charCodeAt(ce);Le<128?Y++:Le<2048?Y+=2:Le>=55296&&Le<=56319?(Y+=4,ce++):Y+=3}return Y};function oi(re,Y=1e3,ce=2){const Le=Y*Math.pow(ce,re),ye=Math.round(.5*Le*(Math.random()-.5)*2);return Math.min(144e5,Le+ye)}function $t(re){return re&&re._delegate?re._delegate:re}function Gi(re,Y){return new Promise((ce,Le)=>{re.onsuccess=ye=>{ce(ye.target.result)},re.onerror=ye=>{var ft;Le(`${Y}: ${null===(ft=ye.target.error)||void 0===ft?void 0:ft.message}`)}})}class gn{constructor(Y){this._db=Y,this.objectStoreNames=this._db.objectStoreNames}transaction(Y,ce){return new Qe(this._db.transaction.call(this._db,Y,ce))}createObjectStore(Y,ce){return new Ye(this._db.createObjectStore(Y,ce))}close(){this._db.close()}}class Qe{constructor(Y){this._transaction=Y,this.complete=new Promise((ce,Le)=>{this._transaction.oncomplete=function(){ce()},this._transaction.onerror=()=>{Le(this._transaction.error)},this._transaction.onabort=()=>{Le(this._transaction.error)}})}objectStore(Y){return new Ye(this._transaction.objectStore(Y))}}class Ye{constructor(Y){this._store=Y}index(Y){return new It(this._store.index(Y))}createIndex(Y,ce,Le){return new It(this._store.createIndex(Y,ce,Le))}get(Y){return Gi(this._store.get(Y),"Error reading from IndexedDB")}put(Y,ce){return Gi(this._store.put(Y,ce),"Error writing to IndexedDB")}delete(Y){return Gi(this._store.delete(Y),"Error deleting from IndexedDB")}clear(){return Gi(this._store.clear(),"Error clearing IndexedDB object store")}}class It{constructor(Y){this._index=Y}get(Y){return Gi(this._index.get(Y),"Error reading from IndexedDB")}}function Wt(re,Y,ce){return new Promise((Le,ye)=>{try{const ft=indexedDB.open(re,Y);ft.onsuccess=Ut=>{Le(new gn(Ut.target.result))},ft.onerror=Ut=>{var Sn;ye(`Error opening indexedDB: ${null===(Sn=Ut.target.error)||void 0===Sn?void 0:Sn.message}`)},ft.onupgradeneeded=Ut=>{ce(new gn(ft.result),Ut.oldVersion,Ut.newVersion,new Qe(ft.transaction))}}catch(ft){ye(`Error opening indexedDB: ${ft.message}`)}})}function _n(re){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,I.Z)(function*(re){return new Promise((Y,ce)=>{try{const Le=indexedDB.deleteDatabase(re);Le.onsuccess=()=>{Y()},Le.onerror=ye=>{var ft;ce(`Error deleting indexedDB database "${re}": ${null===(ft=ye.target.error)||void 0===ft?void 0:ft.message}`)}}catch(Le){ce(`Error deleting indexedDB database "${re}": ${Le.message}`)}})})).apply(this,arguments)}},2329:(bt,xe,j)=>{"use strict";j.d(xe,{Mq:()=>I.getApp,C6:()=>I.getApps});var I=j(8026);(0,I.registerVersion)("firebase","9.6.10","app")},7841:(bt,xe,j)=>{"use strict";j.d(xe,{Z:()=>I.Z});var I=j(3394);I.Z.registerVersion("firebase","9.6.10","app-compat")},5850:(bt,xe,j)=>{"use strict";j.r(xe);var I=j(8239),h=j(3394),Z=j(3854),me=j(8026),ue=j(4762),we=j(5422),De=j(3910);const Je=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_t=new we.Yd("@firebase/auth");function dt(y,...f){_t.logLevel<=we.in.ERROR&&_t.error(`Auth (${me.SDK_VERSION}): ${y}`,...f)}function He(y,...f){throw le(y,...f)}function Ge(y,...f){return le(y,...f)}function $e(y,f,m){const w=Object.assign(Object.assign({},nt()),{[f]:m});return new Z.LL("auth","Firebase",w).create(f,{appName:y.name})}function ht(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&He(y,"argument-error"),$e(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function le(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return Re.create(y,...f)}function Te(y,f,...m){if(!y)throw le(f,...m)}function fe(y){const f="INTERNAL ASSERTION FAILED: "+y;throw dt(f),new Error(f)}function Se(y,f){y||fe(f)}const ke=new Map;function pe(y){Se(y instanceof Function,"Expected a class definition");let f=ke.get(y);return f?(Se(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ke.set(y,f),f)}function Kt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function In(){return"http:"===Wn()||"https:"===Wn()}function Wn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Qt{constructor(f,m){this.shortDelay=f,this.longDelay=m,Se(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function yt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(In()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(y,f){Se(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ai{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ln={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Zi=new Qt(3e4,6e4);function Mn(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function pn(y,f,m,w){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,I.Z)(function*(y,f,m,w,L={}){return yr(y,L,(0,I.Z)(function*(){let K={},_e={};w&&("GET"===f?_e=w:K={body:JSON.stringify(w)});const Fe=(0,Z.xO)(Object.assign({key:y.config.apiKey},_e)).slice(1),pt=yield y._getAdditionalHeaders();return pt["Content-Type"]="application/json",y.languageCode&&(pt["X-Firebase-Locale"]=y.languageCode),Ai.fetch()(Ki(y,y.config.apiHost,m,Fe),Object.assign({method:f,headers:pt,referrerPolicy:"no-referrer"},K))}))})).apply(this,arguments)}function yr(y,f,m){return ss.apply(this,arguments)}function ss(){return(ss=(0,I.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},ln),f);try{const L=new ar(y),K=yield Promise.race([m(),L.promise]);L.clearNetworkTimeout();const _e=yield K.json();if("needConfirmation"in _e)throw ti(y,"account-exists-with-different-credential",_e);if(K.ok&&!("errorMessage"in _e))return _e;{const Fe=K.ok?_e.errorMessage:_e.error.message,[pt,Et]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw ti(y,"credential-already-in-use",_e);if("EMAIL_EXISTS"===pt)throw ti(y,"email-already-in-use",_e);const tn=w[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw $e(y,tn,Et);He(y,tn)}}catch(L){if(L instanceof Z.ZR)throw L;He(y,"network-request-failed")}})).apply(this,arguments)}function Ui(y,f,m,w){return or.apply(this,arguments)}function or(){return(or=(0,I.Z)(function*(y,f,m,w,L={}){const K=yield pn(y,f,m,w,L);return"mfaPendingCredential"in K&&He(y,"multi-factor-auth-required",{_serverResponse:K}),K})).apply(this,arguments)}function Ki(y,f,m,w){const L=`${f}${m}?${w}`;return y.config.emulator?bn(y.config,L):`${y.config.apiScheme}://${L}`}class ar{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Ge(this.auth,"network-request-failed")),Zi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ti(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const L=Ge(y,f,w);return L.customData._tokenResponse=m,L}function Ar(){return(Ar=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Vn(y,f){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function vr(y,f){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Mt(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Hi(){return(Hi=(0,I.Z)(function*(y,f=!1){const m=(0,Z.m9)(y),w=yield m.getIdToken(f),L=at(w);Te(L&&L.exp&&L.auth_time&&L.iat,m.auth,"internal-error");const K="object"==typeof L.firebase?L.firebase:void 0,_e=null==K?void 0:K.sign_in_provider;return{claims:L,token:w,authTime:Mt(zt(L.auth_time)),issuedAtTime:Mt(zt(L.iat)),expirationTime:Mt(zt(L.exp)),signInProvider:_e||null,signInSecondFactor:(null==K?void 0:K.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(y){return 1e3*Number(y)}function at(y){const[f,m,w]=y.split(".");if(void 0===f||void 0===m||void 0===w)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,Z.tV)(m);return L?JSON.parse(L):(dt("Failed to decode base64 JWT payload"),null)}catch(L){return dt("Caught error parsing JWT payload as JSON",L),null}}function ui(y,f){return ci.apply(this,arguments)}function ci(){return(ci=(0,I.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof Z.ZR&&Tn(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Tn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class oi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const L=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,I.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,I.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Kn{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mt(this.lastLoginAt),this.creationTime=Mt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ri(y){return $t.apply(this,arguments)}function $t(){return($t=(0,I.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),L=yield ui(y,vr(m,{idToken:w}));Te(null==L?void 0:L.users.length,m,"internal-error");const K=L.users[0];y._notifyReloadListener(K);const _e=(null===(f=K.providerUserInfo)||void 0===f?void 0:f.length)?Ye(K.providerUserInfo):[],Fe=Qe(y.providerData,_e),tn=!!y.isAnonymous&&!(y.email&&K.passwordHash||(null==Fe?void 0:Fe.length)),Zt={uid:K.localId,displayName:K.displayName||null,photoURL:K.photoUrl||null,email:K.email||null,emailVerified:K.emailVerified||!1,phoneNumber:K.phoneNumber||null,tenantId:K.tenantId||null,providerData:Fe,metadata:new Kn(K.createdAt,K.lastLoginAt),isAnonymous:tn};Object.assign(y,Zt)})).apply(this,arguments)}function gn(){return(gn=(0,I.Z)(function*(y){const f=(0,Z.m9)(y);yield Ri(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Qe(y,f){return[...y.filter(w=>!f.some(L=>L.providerId===w.providerId)),...f]}function Ye(y){return y.map(f=>{var{providerId:m}=f,w=(0,ue._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Wt(){return(Wt=(0,I.Z)(function*(y,f){const m=yield yr(y,{},(0,I.Z)(function*(){const w=(0,Z.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:L,apiKey:K}=y.config,_e=Ki(y,L,"/v1/token",`key=${K}`),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",Ai.fetch()(_e,{method:"POST",headers:Fe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class _n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Te(f.idToken,"internal-error"),Te(void 0!==f.idToken,"internal-error"),Te(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function qt(y){const f=at(y);return Te(f,"internal-error"),Te(void 0!==f.exp,"internal-error"),Te(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,I.Z)(function*(){return Te(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,I.Z)(function*(){const{accessToken:L,refreshToken:K,expiresIn:_e}=yield function It(y,f){return Wt.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(L,K,Number(_e))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:L,expirationTime:K}=m,_e=new _n;return w&&(Te("string"==typeof w,"internal-error",{appName:f}),_e.refreshToken=w),L&&(Te("string"==typeof L,"internal-error",{appName:f}),_e.accessToken=L),K&&(Te("number"==typeof K,"internal-error",{appName:f}),_e.expirationTime=K),_e}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new _n,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Yt(y,f){Te("string"==typeof y||void 0===y,"internal-error",{appName:f})}class re{constructor(f){var{uid:m,auth:w,stsTokenManager:L}=f,K=(0,ue._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=K.displayName||null,this.email=K.email||null,this.emailVerified=K.emailVerified||!1,this.phoneNumber=K.phoneNumber||null,this.photoURL=K.photoURL||null,this.isAnonymous=K.isAnonymous||!1,this.tenantId=K.tenantId||null,this.providerData=K.providerData?[...K.providerData]:[],this.metadata=new Kn(K.createdAt||void 0,K.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,I.Z)(function*(){const w=yield ui(m,m.stsTokenManager.getToken(m.auth,f));return Te(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function ji(y){return Hi.apply(this,arguments)}(this,f)}reload(){return function Gi(y){return gn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Te(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new re(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,I.Z)(function*(){let L=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),L=!0),m&&(yield Ri(w)),yield w.auth._persistUserIfCurrent(w),L&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,I.Z)(function*(){const m=yield f.getIdToken();return yield ui(f,function At(y,f){return Ar.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,L,K,_e,Fe,pt,Et,tn;const Zt=null!==(w=m.displayName)&&void 0!==w?w:void 0,_i=null!==(L=m.email)&&void 0!==L?L:void 0,ea=null!==(K=m.phoneNumber)&&void 0!==K?K:void 0,vd=null!==(_e=m.photoURL)&&void 0!==_e?_e:void 0,cu=null!==(Fe=m.tenantId)&&void 0!==Fe?Fe:void 0,bd=null!==(pt=m._redirectEventId)&&void 0!==pt?pt:void 0,dp=null!==(Et=m.createdAt)&&void 0!==Et?Et:void 0,sm=null!==(tn=m.lastLoginAt)&&void 0!==tn?tn:void 0,{uid:$l,emailVerified:Ic,isAnonymous:hp,providerData:Uh,stsTokenManager:Lr}=m;Te($l&&Lr,f,"internal-error");const uu=_n.fromJSON(this.name,Lr);Te("string"==typeof $l,f,"internal-error"),Yt(Zt,f.name),Yt(_i,f.name),Te("boolean"==typeof Ic,f,"internal-error"),Te("boolean"==typeof hp,f,"internal-error"),Yt(ea,f.name),Yt(vd,f.name),Yt(cu,f.name),Yt(bd,f.name),Yt(dp,f.name),Yt(sm,f.name);const za=new re({uid:$l,auth:f,email:_i,emailVerified:Ic,displayName:Zt,isAnonymous:hp,photoURL:vd,phoneNumber:ea,tenantId:cu,stsTokenManager:uu,createdAt:dp,lastLoginAt:sm});return Uh&&Array.isArray(Uh)&&(za.providerData=Uh.map(fp=>Object.assign({},fp))),bd&&(za._redirectEventId=bd),za}static _fromIdTokenResponse(f,m,w=!1){return(0,I.Z)(function*(){const L=new _n;L.updateFromServerResponse(m);const K=new re({uid:m.localId,auth:f,stsTokenManager:L,isAnonymous:w});return yield Ri(K),K})()}}const ce=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(m,w){var L=this;return(0,I.Z)(function*(){L.storage[m]=w})()}_get(m){var w=this;return(0,I.Z)(function*(){const L=w.storage[m];return void 0===L?null:L})()}_remove(m){var w=this;return(0,I.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function Le(y,f,m){return`firebase:${y}:${f}:${m}`}class ye{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:L,name:K}=this.auth;this.fullUserKey=Le(this.userKey,L.apiKey,K),this.fullPersistenceKey=Le("persistence",L.apiKey,K),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,I.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?re._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,I.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,I.Z)(function*(){if(!m.length)return new ye(pe(ce),f,w);const L=(yield Promise.all(m.map(function(){var Et=(0,I.Z)(function*(tn){if(yield tn._isAvailable())return tn});return function(tn){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let K=L[0]||pe(ce);const _e=Le(w,f.config.apiKey,f.name);let Fe=null;for(const Et of m)try{const tn=yield Et._get(_e);if(tn){const Zt=re._fromJSON(f,tn);Et!==K&&(Fe=Zt),K=Et;break}}catch(tn){}const pt=L.filter(Et=>Et._shouldAllowMigration);return K._shouldAllowMigration&&pt.length?(K=pt[0],Fe&&(yield K._set(_e,Fe.toJSON())),yield Promise.all(m.map(function(){var Et=(0,I.Z)(function*(tn){if(tn!==K)try{yield tn._remove(_e)}catch(Zt){}});return function(tn){return Et.apply(this,arguments)}}())),new ye(K,f,w)):new ye(K,f,w)})()}}function ft(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(mn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ut(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(on(f))return"Blackberry";if(En(f))return"Webos";if(Sn(f))return"Safari";if((f.includes("chrome/")||wi(f))&&!f.includes("edge/"))return"Chrome";if(Ie(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Ut(y=(0,Z.z$)()){return/firefox\//i.test(y)}function Sn(y=(0,Z.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function wi(y=(0,Z.z$)()){return/crios\//i.test(y)}function mn(y=(0,Z.z$)()){return/iemobile/i.test(y)}function Ie(y=(0,Z.z$)()){return/android/i.test(y)}function on(y=(0,Z.z$)()){return/blackberry/i.test(y)}function En(y=(0,Z.z$)()){return/webos/i.test(y)}function Ei(y=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(y)}function $i(y=(0,Z.z$)()){return Ei(y)||Ie(y)||En(y)||on(y)||/windows phone/i.test(y)||mn(y)}function xs(y,f=[]){let m;switch(y){case"Browser":m=ft((0,Z.z$)());break;case"Worker":m=`${ft((0,Z.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${me.SDK_VERSION}/${w}`}class di{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dn(this),this.idTokenSubscription=new dn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=pe(m)),this._initializationPromise=this.queue((0,I.Z)(function*(){var L,K;if(!w._deleted&&(w.persistenceManager=yield ye.create(w,f),!w._deleted)){if(null===(L=w._popupRedirectResolver)||void 0===L?void 0:L._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(_e){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(K=w.currentUser)||void 0===K?void 0:K.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,I.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,I.Z)(function*(){var w;let L=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const K=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,_e=null==L?void 0:L._redirectEventId,Fe=yield m.tryRedirectSignIn(f);(!K||K===_e)&&(null==Fe?void 0:Fe.user)&&(L=Fe.user)}return L?L._redirectEventId?(Te(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===L._redirectEventId?m.directlySetCurrentUser(L):m.reloadAndSetCurrentUserOrClear(L)):m.reloadAndSetCurrentUserOrClear(L):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,I.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(L){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,I.Z)(function*(){try{yield Ri(f)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Tt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,I.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,I.Z)(function*(){const w=f?(0,Z.m9)(f):null;return w&&Te(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,I.Z)(function*(){if(!m._deleted)return f&&Te(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,I.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,I.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,I.Z)(function*(){yield m.assertedPersistence.setPersistence(pe(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new Z.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,I.Z)(function*(){const L=yield w.getOrInitRedirectPersistenceManager(m);return null===f?L.removeCurrentUser():L.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,I.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&pe(f)||m._popupRedirectResolver;Te(w,m,"argument-error"),m.redirectPersistenceManager=yield ye.create(m,[pe(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,I.Z)(function*(){var w,L;return m._isInitialized&&(yield m.queue((0,I.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(L=m.redirectUser)||void 0===L?void 0:L._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,I.Z)(function*(){if(f===m.currentUser)return m.queue((0,I.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,L){if(this._deleted)return()=>{};const K="function"==typeof m?m:m.next.bind(m),_e=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(_e,this,"internal-error"),_e.then(()=>K(this.currentUser)),"function"==typeof m?f.addObserver(m,w,L):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,I.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=xs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,I.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const L=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return L&&(w["X-Firebase-Client"]=L),w})()}}function qe(y){return(0,Z.m9)(y)}class dn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,Z.ne)(m=>this.observer=m)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function li(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Xt{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return fe("not implemented")}_getIdTokenResponse(f){return fe("not implemented")}_linkToIdToken(f,m){return fe("not implemented")}_getReauthenticationResolver(f){return fe("not implemented")}}function ni(y,f){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:resetPassword",Mn(y,f))})).apply(this,arguments)}function Nt(y,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function zr(y,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:update",Mn(y,f))})).apply(this,arguments)}function zi(){return(zi=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithPassword",Mn(y,f))})).apply(this,arguments)}function os(y,f){return lr.apply(this,arguments)}function lr(){return(lr=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:sendOobCode",Mn(y,f))})).apply(this,arguments)}function Er(y,f){return kn.apply(this,arguments)}function kn(){return(kn=(0,I.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function bo(y,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,I.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function Nr(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,I.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function wo(y,f){return js.apply(this,arguments)}function js(){return(js=(0,I.Z)(function*(y,f){return os(y,f)})).apply(this,arguments)}function Pi(){return(Pi=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithEmailLink",Mn(y,f))})).apply(this,arguments)}function Hs(){return(Hs=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithEmailLink",Mn(y,f))})).apply(this,arguments)}class Di extends Xt{constructor(f,m,w,L=null){super("password",w),this._email=f,this._password=m,this._tenantId=L}static _fromEmailAndPassword(f,m){return new Di(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Di(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,I.Z)(function*(){switch(m.signInMethod){case"password":return function wr(y,f){return zi.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Vo(y,f){return Pi.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:He(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,I.Z)(function*(){switch(w.signInMethod){case"password":return Nt(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function sa(y,f){return Hs.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:He(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ii(y,f){return de.apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithIdp",Mn(y,f))})).apply(this,arguments)}class xr extends Xt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new xr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):He("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:L}=m,K=(0,ue._T)(m,["providerId","signInMethod"]);if(!w||!L)return null;const _e=new xr(w,L);return _e.idToken=K.idToken||void 0,_e.accessToken=K.accessToken||void 0,_e.secret=K.secret,_e.nonce=K.nonce,_e.pendingToken=K.pendingToken||null,_e}_getIdTokenResponse(f){return ii(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ii(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ii(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,Z.xO)(m)}return f}}function kl(y,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:sendVerificationCode",Mn(y,f))})).apply(this,arguments)}function Ii(){return(Ii=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithPhoneNumber",Mn(y,f))})).apply(this,arguments)}function Eo(){return(Eo=(0,I.Z)(function*(y,f){const m=yield Ui(y,"POST","/v1/accounts:signInWithPhoneNumber",Mn(y,f));if(m.temporaryProof)throw ti(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ra={USER_NOT_FOUND:"user-not-found"};function aa(){return(aa=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithPhoneNumber",Mn(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ra)})).apply(this,arguments)}class Os extends Xt{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Os({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Os({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function pi(y,f){return Ii.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Mr(y,f){return Eo.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Pl(y,f){return aa.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:L}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:L}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:L,temporaryProof:K}=f;return w||m||L||K?new Os({verificationId:m,verificationCode:w,phoneNumber:L,temporaryProof:K}):null}}class Gs{constructor(f){var m,w,L,K,_e,Fe;const pt=(0,Z.zd)((0,Z.pd)(f)),Et=null!==(m=pt.apiKey)&&void 0!==m?m:null,tn=null!==(w=pt.oobCode)&&void 0!==w?w:null,Zt=function oc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=pt.mode)&&void 0!==L?L:null);Te(Et&&tn&&Zt,"argument-error"),this.apiKey=Et,this.operation=Zt,this.code=tn,this.continueUrl=null!==(K=pt.continueUrl)&&void 0!==K?K:null,this.languageCode=null!==(_e=pt.languageCode)&&void 0!==_e?_e:null,this.tenantId=null!==(Fe=pt.tenantId)&&void 0!==Fe?Fe:null}static parseLink(f){const m=function Bo(y){const f=(0,Z.zd)((0,Z.pd)(y)).link,m=f?(0,Z.zd)((0,Z.pd)(f)).deep_link_id:null,w=(0,Z.zd)((0,Z.pd)(y)).deep_link_id;return(w?(0,Z.zd)((0,Z.pd)(w)).link:null)||w||m||f||y}(f);try{return new Gs(m)}catch(w){return null}}}let ri=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Di._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const L=Gs.parseLink(w);return Te(L,"argument-error"),Di._fromEmailAndCode(m,L.code,L.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Zr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class gi extends Zr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class to extends gi{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Te("providerId"in m&&"signInMethod"in m,"argument-error"),xr._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Te(f.idToken||f.accessToken,"argument-error"),xr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return to.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return to.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:L,pendingToken:K,nonce:_e,providerId:Fe}=f;if(!w&&!L&&!m&&!K||!Fe)return null;try{return new to(Fe)._credential({idToken:m,accessToken:w,nonce:_e,pendingToken:K})}catch(pt){return null}}}let ys=(()=>{class y extends gi{constructor(){super("facebook.com")}static credential(m){return xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),vs=(()=>{class y extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:L}=m;if(!w&&!L)return null;try{return y.credential(w,L)}catch(K){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Uo=(()=>{class y extends gi{constructor(){super("github.com")}static credential(m){return xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class as extends Xt{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ii(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ii(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ii(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:L,pendingToken:K}=m;return w&&L&&K&&w===L?new as(w,K):null}static _create(f,m){return new as(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class qi extends Zr{constructor(f){Te(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return qi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return qi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=as.fromJSON(f);return Te(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return as._create(w,m)}catch(L){return null}}}let Kr=(()=>{class y extends gi{constructor(){super("twitter.com")}static credential(m,w){return xr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:L}=m;if(!w||!L)return null;try{return y.credential(w,L)}catch(K){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function jo(y,f){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signUp",Mn(y,f))})).apply(this,arguments)}class Fi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,L=!1){return(0,I.Z)(function*(){const K=yield re._fromIdTokenResponse(f,w,L),_e=Ho(w);return new Fi({user:K,providerId:_e,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,I.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const L=Ho(w);return new Fi({user:f,providerId:L,_tokenResponse:w,operationType:m})})()}}function Ho(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Go(){return(Go=(0,I.Z)(function*(y){var f;const m=qe(y);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new Fi({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield jo(m,{returnSecureToken:!0}),L=yield Fi._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(L.user),L})).apply(this,arguments)}class Qi extends Z.ZR{constructor(f,m,w,L){var K;super(m.code,m.message),this.operationType=w,this.user=L,Object.setPrototypeOf(this,Qi.prototype),this.customData={appName:f.name,tenantId:null!==(K=f.tenantId)&&void 0!==K?K:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,L){return new Qi(f,m,w,L)}}function Do(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(K=>{throw"auth/multi-factor-auth-required"===K.code?Qi._fromErrorAndOperation(y,K,f,w):K})}function ls(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function bs(){return(bs=(0,I.Z)(function*(y,f){const m=(0,Z.m9)(y);yield G(!0,m,f);const{providerUserInfo:w}=yield Vn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),L=ls(w||[]);return m.providerData=m.providerData.filter(K=>L.has(K.providerId)),L.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Hn(y,f){return R.apply(this,arguments)}function R(){return(R=(0,I.Z)(function*(y,f,m=!1){const w=yield ui(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return Fi._forOperation(y,"link",w)})).apply(this,arguments)}function G(y,f,m){return O.apply(this,arguments)}function O(){return(O=(0,I.Z)(function*(y,f,m){yield Ri(f);const L=!1===y?"provider-already-linked":"no-such-provider";Te(ls(f.providerData).has(m)===y,f.auth,L)})).apply(this,arguments)}function z(y,f){return oe.apply(this,arguments)}function oe(){return(oe=(0,I.Z)(function*(y,f,m=!1){const{auth:w}=y,L="reauthenticate";try{const K=yield ui(y,Do(w,L,f,y),m);Te(K.idToken,w,"internal-error");const _e=at(K.idToken);Te(_e,w,"internal-error");const{sub:Fe}=_e;return Te(y.uid===Fe,w,"user-mismatch"),Fi._forOperation(y,L,K)}catch(K){throw"auth/user-not-found"===(null==K?void 0:K.code)&&He(w,"user-mismatch"),K}})).apply(this,arguments)}function Pe(y,f){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,I.Z)(function*(y,f,m=!1){const w="signIn",L=yield Do(y,w,f),K=yield Fi._fromIdTokenResponse(y,w,L);return m||(yield y._updateCurrentUser(K.user)),K})).apply(this,arguments)}function lt(y,f){return An.apply(this,arguments)}function An(){return(An=(0,I.Z)(function*(y,f){return Pe(qe(y),f)})).apply(this,arguments)}function yn(y,f){return an.apply(this,arguments)}function an(){return(an=(0,I.Z)(function*(y,f){const m=(0,Z.m9)(y);return yield G(!1,m,f.providerId),Hn(m,f)})).apply(this,arguments)}function vn(y,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,I.Z)(function*(y,f){return z((0,Z.m9)(y),f)})).apply(this,arguments)}function Jn(y,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,I.Z)(function*(y,f){return Ui(y,"POST","/v1/accounts:signInWithCustomToken",Mn(y,f))})).apply(this,arguments)}function Xi(){return(Xi=(0,I.Z)(function*(y,f){const m=qe(y),w=yield Jn(m,{token:f,returnSecureToken:!0}),L=yield Fi._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(L.user),L})).apply(this,arguments)}class Rt{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Jr._fromServerResponse(f,m):He(f,"internal-error")}}class Jr extends Rt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Jr(m)}}function ks(y,f,m){var w;Te((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Te(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Te(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Te(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Qr(){return(Qr=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y),L={requestType:"PASSWORD_RESET",email:f};m&&ks(w,L,m),yield bo(w,L)})).apply(this,arguments)}function ws(){return(ws=(0,I.Z)(function*(y,f,m){yield ni((0,Z.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Xe(){return(Xe=(0,I.Z)(function*(y,f){yield zr((0,Z.m9)(y),{oobCode:f})})).apply(this,arguments)}function hn(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,I.Z)(function*(y,f){const m=(0,Z.m9)(y),w=yield ni(m,{oobCode:f}),L=w.requestType;switch(Te(L,m,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(w.mfaInfo,m,"internal-error");default:Te(w.email,m,"internal-error")}let K=null;return w.mfaInfo&&(K=Rt._fromServerResponse(qe(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:K},operation:L}})).apply(this,arguments)}function ua(){return(ua=(0,I.Z)(function*(y,f){const{data:m}=yield hn((0,Z.m9)(y),f);return m.email})).apply(this,arguments)}function cs(){return(cs=(0,I.Z)(function*(y,f,m){const w=qe(y),L=yield jo(w,{returnSecureToken:!0,email:f,password:m}),K=yield Fi._fromIdTokenResponse(w,"signIn",L);return yield w._updateCurrentUser(K.user),K})).apply(this,arguments)}function il(){return(il=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y),L={requestType:"EMAIL_SIGNIN",email:f};Te(m.handleCodeInApp,w,"argument-error"),m&&ks(w,L,m),yield Nr(w,L)})).apply(this,arguments)}function io(){return(io=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y),L=ri.credentialWithLink(f,m||Kt());return Te(L._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),lt(w,L)})).apply(this,arguments)}function Cr(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:createAuthUri",Mn(y,f))})).apply(this,arguments)}function Ps(){return(Ps=(0,I.Z)(function*(y,f){const w={identifier:f,continueUri:In()?Kt():"http://localhost"},{signinMethods:L}=yield Cr((0,Z.m9)(y),w);return L||[]})).apply(this,arguments)}function La(){return(La=(0,I.Z)(function*(y,f){const m=(0,Z.m9)(y),L={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ks(m.auth,L,f);const{email:K}=yield Er(m.auth,L);K!==y.email&&(yield y.reload())})).apply(this,arguments)}function fa(){return(fa=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y),K={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&ks(w.auth,K,m);const{email:_e}=yield wo(w.auth,K);_e!==y.email&&(yield y.reload())})).apply(this,arguments)}function rl(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,I.Z)(function*(y,f){return pn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function pa(){return(pa=(0,I.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,Z.m9)(y),K={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},_e=yield ui(w,rl(w.auth,K));w.displayName=_e.displayName||null,w.photoURL=_e.photoUrl||null;const Fe=w.providerData.find(({providerId:pt})=>"password"===pt);Fe&&(Fe.displayName=w.displayName,Fe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(_e)})).apply(this,arguments)}function To(y,f,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,I.Z)(function*(y,f,m){const{auth:w}=y,K={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(K.email=f),m&&(K.password=m);const _e=yield ui(y,Nt(w,K));yield y._updateTokensIfNecessary(_e,!0)})).apply(this,arguments)}class Ws{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class ma extends Ws{constructor(f,m,w,L){super(f,m,w),this.username=L}}class _a extends Ws{constructor(f,m){super(f,"facebook.com",m)}}class So extends ma{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Fl extends Ws{constructor(f,m){super(f,"google.com",m)}}class Ll extends ma{constructor(f,m,w){super(f,"twitter.com",m,w)}}function cr(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function qo(y){var f,m;if(!y)return null;const{providerId:w}=y,L=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},K=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const _e=null===(m=null===(f=at(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(_e)return new Ws(K,"anonymous"!==_e&&"custom"!==_e?_e:null)}if(!w)return null;switch(w){case"facebook.com":return new _a(K,L);case"github.com":return new So(K,L);case"google.com":return new Fl(K,L);case"twitter.com":return new Ll(K,L,y.screenName||null);case"custom":case"anonymous":return new Ws(K,null);default:return new Ws(K,w,L)}}(m)}class Es{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new Es("enroll",f)}static _fromMfaPendingCredential(f){return new Es("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Es._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return Es._fromIdtoken(f.multiFactorSession.idToken)}return null}}class zs{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=qe(f),L=m.customData._serverResponse,K=(L.mfaInfo||[]).map(Fe=>Rt._fromServerResponse(w,Fe));Te(L.mfaPendingCredential,w,"internal-error");const _e=Es._fromMfaPendingCredential(L.mfaPendingCredential);return new zs(_e,K,function(){var Fe=(0,I.Z)(function*(pt){const Et=yield pt._process(w,_e);delete L.mfaInfo,delete L.mfaPendingCredential;const tn=Object.assign(Object.assign({},L),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(m.operationType){case"signIn":const Zt=yield Fi._fromIdTokenResponse(w,m.operationType,tn);return yield w._updateCurrentUser(Zt.user),Zt;case"reauthenticate":return Te(m.user,w,"internal-error"),Fi._forOperation(m.user,m.operationType,tn);default:He(w,"internal-error")}});return function(pt){return Fe.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,I.Z)(function*(){return m.signInResolver(f)})()}}function xi(y,f){return pn(y,"POST","/v2/accounts/mfaEnrollment:start",Mn(y,f))}class ts{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Rt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new ts(f)}getSession(){var f=this;return(0,I.Z)(function*(){return Es._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,I.Z)(function*(){const L=f,K=yield w.getSession(),_e=yield ui(w.user,L._process(w.user.auth,K,m));return yield w.user._updateTokensIfNecessary(_e),w.user.reload()})()}unenroll(f){var m=this;return(0,I.Z)(function*(){const w="string"==typeof f?f:f.uid,L=yield m.user.getIdToken(),K=yield ui(m.user,function al(y,f){return pn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Mn(y,f))}(m.user.auth,{idToken:L,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:_e})=>_e!==w),yield m.user._updateTokensIfNecessary(K);try{yield m.user.reload()}catch(_e){if("auth/user-token-expired"!==_e.code)throw _e}})()}}const Rr=new WeakMap,qs="__sak";class Ko{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(qs,"1"),this.storage.removeItem(qs),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mi=(()=>{class y extends Ko{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cs(){const y=(0,Z.z$)();return Sn(y)||Ei(y)}()&&function Vt(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=$i(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const L=this.storage.getItem(w),K=this.localCache[w];L!==K&&m(w,K,L)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Fe,pt,Et)=>{this.notifyListeners(Fe,Et)});const L=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(L);if(m.newValue!==Fe)null!==m.newValue?this.storage.setItem(L,m.newValue):this.storage.removeItem(L);else if(this.localCache[L]===m.newValue&&!w)return}const K=()=>{const Fe=this.storage.getItem(L);!w&&this.localCache[L]===Fe||this.notifyListeners(L,Fe)},_e=this.storage.getItem(L);!function Ji(){return(0,Z.w1)()&&10===document.documentMode}()||_e===m.newValue||m.newValue===m.oldValue?K():setTimeout(K,10)}notifyListeners(m,w){this.localCache[m]=w;const L=this.listeners[m];if(L)for(const K of Array.from(L))K(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var L=()=>super._set,K=this;return(0,I.Z)(function*(){yield L().call(K,m,w),K.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,L=this;return(0,I.Z)(function*(){const K=yield w().call(L,m);return L.localCache[m]=JSON.stringify(K),K})()}_remove(m){var w=()=>super._remove,L=this;return(0,I.Z)(function*(){yield w().call(L,m),delete L.localCache[m]})()}}return y.type="LOCAL",y})(),A=(()=>{class y extends Ko{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let ee=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(K=>K.isListeningto(m));if(w)return w;const L=new y(m);return this.receivers.push(L),L}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,I.Z)(function*(){const L=m,{eventId:K,eventType:_e,data:Fe}=L.data,pt=w.handlersMap[_e];if(!(null==pt?void 0:pt.size))return;L.ports[0].postMessage({status:"ack",eventId:K,eventType:_e});const Et=Array.from(pt).map(function(){var Zt=(0,I.Z)(function*(_i){return _i(L.origin,Fe)});return function(_i){return Zt.apply(this,arguments)}}()),tn=yield function U(y){return Promise.all(y.map(function(){var f=(0,I.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Et);L.ports[0].postMessage({status:"done",eventId:K,eventType:_e,response:tn})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ke(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class kt{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var L=this;return(0,I.Z)(function*(){const K="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!K)throw new Error("connection_unavailable");let _e,Fe;return new Promise((pt,Et)=>{const tn=Ke("",20);K.port1.start();const Zt=setTimeout(()=>{Et(new Error("unsupported_event"))},w);Fe={messageChannel:K,onMessage(_i){const ea=_i;if(ea.data.eventId===tn)switch(ea.data.status){case"ack":clearTimeout(Zt),_e=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(_e),pt(ea.data.response);break;default:clearTimeout(Zt),clearTimeout(_e),Et(new Error("invalid_response"))}}},L.handlers.add(Fe),K.port1.addEventListener("message",Fe.onMessage),L.target.postMessage({eventType:f,eventId:tn,data:m},[K.port2])}).finally(()=>{Fe&&L.removeMessageHandler(Fe)})})()}}function en(){return window}function ot(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}function Gt(){return(Gt=(0,I.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const S="firebaseLocalStorageDb",b="firebaseLocalStorage",M="fbase_key";class F{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function W(y,f){return y.transaction([b],f?"readwrite":"readonly").objectStore(b)}function se(){const y=indexedDB.open(S,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(b,{keyPath:M})}catch(L){m(L)}}),y.addEventListener("success",(0,I.Z)(function*(){const w=y.result;w.objectStoreNames.contains(b)?f(w):(w.close(),yield function J(){const y=indexedDB.deleteDatabase(S);return new F(y).toPromise()}(),f(yield se()))}))})}function Oe(y,f,m){return mt.apply(this,arguments)}function mt(){return(mt=(0,I.Z)(function*(y,f,m){const w=W(y,!0).put({[M]:f,value:m});return new F(w).toPromise()})).apply(this,arguments)}function Pt(){return(Pt=(0,I.Z)(function*(y,f){const m=W(y,!1).get(f),w=yield new F(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Nn(y,f){const m=W(y,!0).delete(f);return new F(m).toPromise()}const us=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,I.Z)(function*(){return m.db||(m.db=yield se()),m.db})()}_withRetries(m){var w=this;return(0,I.Z)(function*(){let L=0;for(;;)try{const K=yield w._openDb();return yield m(K)}catch(K){if(L++>3)throw K;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,I.Z)(function*(){return ot()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,I.Z)(function*(){m.receiver=ee._getInstance(function lc(){return ot()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,I.Z)(function*(L,K){return{keyProcessed:(yield m._poll()).includes(K.key)}});return function(L,K){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,I.Z)(function*(L,K){return["keyChanged"]});return function(L,K){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,I.Z)(function*(){var w,L;if(m.activeServiceWorker=yield function Ds(){return Gt.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new kt(m.activeServiceWorker);const K=yield m.sender._send("ping",{},800);!K||(null===(w=K[0])||void 0===w?void 0:w.fulfilled)&&(null===(L=K[0])||void 0===L?void 0:L.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,I.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ac(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(L){}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const m=yield se();return yield Oe(m,qs,"1"),yield Nn(m,qs),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,I.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var L=this;return(0,I.Z)(function*(){return L._withPendingWrite((0,I.Z)(function*(){return yield L._withRetries(K=>Oe(K,m,w)),L.localCache[m]=w,L.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,I.Z)(function*(){const L=yield w._withRetries(K=>function Cn(y,f){return Pt.apply(this,arguments)}(K,m));return w.localCache[m]=L,L})()}_remove(m){var w=this;return(0,I.Z)(function*(){return w._withPendingWrite((0,I.Z)(function*(){return yield w._withRetries(L=>Nn(L,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,I.Z)(function*(){const w=yield m._withRetries(_e=>{const Fe=W(_e,!1).getAll();return new F(Fe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const L=[],K=new Set;for(const{fbase_key:_e,value:Fe}of w)K.add(_e),JSON.stringify(m.localCache[_e])!==JSON.stringify(Fe)&&(m.notifyListeners(_e,Fe),L.push(_e));for(const _e of Object.keys(m.localCache))m.localCache[_e]&&!K.has(_e)&&(m.notifyListeners(_e,null),L.push(_e));return L})()}notifyListeners(m,w){this.localCache[m]=w;const L=this.listeners[m];if(L)for(const K of Array.from(L))K(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ll(y,f){return pn(y,"POST","/v2/accounts/mfaSignIn:start",Mn(y,f))}function oo(){return(oo=(0,I.Z)(function*(y){return(yield pn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function cl(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=L=>{const K=Ge("internal-error");K.customData=L,m(K)},w.type="text/javascript",w.charset="UTF-8",function ds(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function cc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ao=1e12;class yh{constructor(f){this.auth=f,this.counter=ao,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new uc(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||ao;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||ao))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,I.Z)(function*(){var w;return null===(w=m._widgets.get(f||ao))||void 0===w||w.execute(),""})()}}class uc{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof f?document.getElementById(f):f;Te(L,"argument-error",{appName:m}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vl(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Kc=cc("rcb"),dc=new Qt(3e4,6e4);class vh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!en().grecaptcha}load(f,m=""){return Te(function Pg(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(en().grecaptcha):new Promise((w,L)=>{const K=en().setTimeout(()=>{L(Ge(f,"network-request-failed"))},dc.get());en()[Kc]=()=>{en().clearTimeout(K),delete en()[Kc];const Fe=en().grecaptcha;if(!Fe)return void L(Ge(f,"internal-error"));const pt=Fe.render;Fe.render=(Et,tn)=>{const Zt=pt(Et,tn);return this.counter++,Zt},this.hostLanguage=m,w(Fe)},cl(`https://www.google.com/recaptcha/api.js??${(0,Z.xO)({onload:Kc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(K),L(Ge(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!en().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fg{load(f){return(0,I.Z)(function*(){return new yh(f)})()}clearedOneInstance(){}}const Qu="recaptcha",Yc={theme:"light",type:"image"};class bh{constructor(f,m=Object.assign({},Yc),w){this.parameters=m,this.type=Qu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qe(w),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof f?document.getElementById(f):f;Te(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fg:new vh,this.validateStartingState()}verify(){var f=this;return(0,I.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(K=>{const _e=Fe=>{!Fe||(f.tokenChangeListeners.delete(_e),K(Fe))};f.tokenChangeListeners.add(_e),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=en()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,I.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,I.Z)(function*(){Te(In()&&!ot(),f.auth,"internal-error"),yield function wh(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function kr(y){return oo.apply(this,arguments)}(f.auth);Te(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ba{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Os._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function tr(){return(tr=(0,I.Z)(function*(y,f,m){const w=qe(y),L=yield si(w,f,(0,Z.m9)(m));return new ba(L,K=>lt(w,K))})).apply(this,arguments)}function dl(){return(dl=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y);yield G(!1,w,"phone");const L=yield si(w.auth,f,(0,Z.m9)(m));return new ba(L,K=>yn(w,K))})).apply(this,arguments)}function Xu(){return(Xu=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y),L=yield si(w.auth,f,(0,Z.m9)(m));return new ba(L,K=>vn(w,K))})).apply(this,arguments)}function si(y,f,m){return hs.apply(this,arguments)}function hs(){return(hs=(0,I.Z)(function*(y,f,m){var w;const L=yield m.verify();try{let K;if(Te("string"==typeof L,y,"argument-error"),Te(m.type===Qu,y,"argument-error"),K="string"==typeof f?{phoneNumber:f}:f,"session"in K){const _e=K.session;if("phoneNumber"in K)return Te("enroll"===_e.type,y,"internal-error"),(yield xi(y,{idToken:_e.credential,phoneEnrollmentInfo:{phoneNumber:K.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{Te("signin"===_e.type,y,"internal-error");const Fe=(null===(w=K.multiFactorHint)||void 0===w?void 0:w.uid)||K.multiFactorUid;return Te(Fe,y,"missing-multi-factor-info"),(yield ll(y,{mfaPendingCredential:_e.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:_e}=yield kl(y,{phoneNumber:K.phoneNumber,recaptchaToken:L});return _e}}finally{m._reset()}})).apply(this,arguments)}function lo(){return(lo=(0,I.Z)(function*(y,f){yield Hn((0,Z.m9)(y),f)})).apply(this,arguments)}let Oo=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=qe(m)}verifyPhoneNumber(m,w){return si(this.auth,m,(0,Z.m9)(w))}static credential(m,w){return Os._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:L}=m;return w&&L?Os._fromTokenResponse(w,L):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Jo(y,f){return f?pe(f):(Te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ja extends Xt{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ii(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ii(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ii(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Bl(y){return Pe(y.auth,new ja(y),y.bypassAuthState)}function Jc(y){const{auth:f,user:m}=y;return Te(m,f,"internal-error"),z(m,new ja(y),y.bypassAuthState)}function Qc(y){return fc.apply(this,arguments)}function fc(){return(fc=(0,I.Z)(function*(y){const{auth:f,user:m}=y;return Te(m,f,"internal-error"),Hn(m,new ja(y),y.bypassAuthState)})).apply(this,arguments)}class Is{constructor(f,m,w,L,K=!1){this.auth=f,this.resolver=w,this.user=L,this.bypassAuthState=K,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,I.Z)(function*(w,L){f.pendingPromise={resolve:w,reject:L};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(K){f.reject(K)}});return function(w,L){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,I.Z)(function*(){const{urlResponse:w,sessionId:L,postBody:K,tenantId:_e,error:Fe,type:pt}=f;if(Fe)return void m.reject(Fe);const Et={auth:m.auth,requestUri:w,sessionId:L,tenantId:_e||void 0,postBody:K||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(pt)(Et))}catch(tn){m.reject(tn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Bl;case"linkViaPopup":case"linkViaRedirect":return Qc;case"reauthViaPopup":case"reauthViaRedirect":return Jc;default:He(this.auth,"internal-error")}}resolve(f){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ed=new Qt(2e3,1e4);function Ch(){return(Ch=(0,I.Z)(function*(y,f,m){const w=qe(y);ht(y,f,Zr);const L=Jo(w,m);return new wa(w,"signInViaPopup",f,L).executeNotNull()})).apply(this,arguments)}function pc(){return(pc=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y);ht(w.auth,f,Zr);const L=Jo(w.auth,m);return new wa(w.auth,"reauthViaPopup",f,L,w).executeNotNull()})).apply(this,arguments)}function Xc(){return(Xc=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y);ht(w.auth,f,Zr);const L=Jo(w.auth,m);return new wa(w.auth,"linkViaPopup",f,L,w).executeNotNull()})).apply(this,arguments)}let wa=(()=>{class y extends Is{constructor(m,w,L,K,_e){super(m,w,K,_e),this.provider=L,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,I.Z)(function*(){const w=yield m.execute();return Te(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,I.Z)(function*(){Se(1===m.filter.length,"Popup operations only handle one event");const w=Ke();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(L=>{m.reject(L)}),m.resolver._isIframeWebStorageSupported(m.auth,L=>{L||m.reject(Ge(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ge(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,L;this.pollId=(null===(L=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===L?void 0:L.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ge(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ed.get())};m()}}return y.currentPopupAction=null,y})();const Zs=new Map;class eu extends Is{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,I.Z)(function*(){let w=Zs.get(m.auth._key());if(!w){try{const K=(yield function dr(y,f){return Ir.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(K)}catch(L){w=()=>Promise.reject(L)}Zs.set(m.auth._key(),w)}return m.bypassAuthState||Zs.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,I.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const L=yield w.auth._redirectUserForId(f.eventId);if(L)return w.user=L,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Ir(){return(Ir=(0,I.Z)(function*(y,f){const m=P(f),w=x(y);if(!(yield w._isAvailable()))return!1;const L="true"===(yield w._get(m));return yield w._remove(m),L})).apply(this,arguments)}function Qo(y,f){return fl.apply(this,arguments)}function fl(){return(fl=(0,I.Z)(function*(y,f){return x(y)._set(P(f),"true")})).apply(this,arguments)}function x(y){return pe(y._redirectPersistence)}function P(y){return Le("pendingRedirect",y.config.apiKey,y.name)}function ve(){return(ve=(0,I.Z)(function*(y,f,m){const w=qe(y);ht(y,f,Zr);const L=Jo(w,m);return yield Qo(L,w),L._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function St(){return(St=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y);ht(w.auth,f,Zr);const L=Jo(w.auth,m);yield Qo(L,w.auth);const K=yield Ga(w);return L._openRedirect(w.auth,f,"reauthViaRedirect",K)})).apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(y,f,m){const w=(0,Z.m9)(y);ht(w.auth,f,Zr);const L=Jo(w.auth,m);yield G(!1,w,f.providerId),yield Qo(L,w.auth);const K=yield Ga(w);return L._openRedirect(w.auth,f,"linkViaRedirect",K)})).apply(this,arguments)}function hr(){return(hr=(0,I.Z)(function*(y,f){return yield qe(y)._initializationPromise,nr(y,f,!1)})).apply(this,arguments)}function nr(y,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,I.Z)(function*(y,f,m=!1){const w=qe(y),L=Jo(w,f),_e=yield new eu(w,L,m).execute();return _e&&!m&&(delete _e.user._redirectEventId,yield w._persistUserIfCurrent(_e.user),yield w._setRedirectUser(null,f)),_e})).apply(this,arguments)}function Ga(y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,I.Z)(function*(y){const f=Ke(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Ea{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ug(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bg(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!Bg(f)){const L=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Ge(this.auth,L))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xo(f))}saveEventToCache(f){this.cachedEventUids.add(Xo(f)),this.lastProcessedEventTime=Date.now()}}function Xo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Bg({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function pl(y){return tu.apply(this,arguments)}function tu(){return(tu=(0,I.Z)(function*(y,f={}){return pn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const jg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gc=/^https?/;function Ca(){return(Ca=(0,I.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield pl(y);for(const m of f)try{if(nu(m))return}catch(w){}He(y,"unauthorized-domain")})).apply(this,arguments)}function nu(y){const f=Kt(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const _e=new URL(y);return""===_e.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&_e.hostname===w}if(!gc.test(m))return!1;if(jg.test(y))return w===y;const L=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(w)}const rd=new Qt(3e4,6e4);function Gg(){const y=en().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let sd=null;function Dh(y){return sd=sd||function Fs(y){return new Promise((f,m)=>{var w,L,K;function _e(){Gg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Gg(),m(Ge(y,"network-request-failed"))},timeout:rd.get()})}if(null===(L=null===(w=en().gapi)||void 0===w?void 0:w.iframes)||void 0===L?void 0:L.Iframe)f(gapi.iframes.getContext());else{if(!(null===(K=en().gapi)||void 0===K?void 0:K.load)){const Fe=cc("iframefcb");return en()[Fe]=()=>{gapi.load?_e():m(Ge(y,"network-request-failed"))},cl(`https://apis.google.com/js/api.js?onload=${Fe}`).catch(pt=>m(pt))}_e()}}).catch(f=>{throw sd=null,f})}(y),sd}const Ih=new Qt(5e3,15e3),od={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Th=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $a(y){const f=y.config;Te(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?bn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:me.SDK_VERSION},L=Th.get(y.config.apiHost);L&&(w.eid=L);const K=y._getFrameworks();return K.length&&(w.fw=K.join(",")),`${m}?${(0,Z.xO)(w).slice(1)}`}function ad(){return ad=(0,I.Z)(function*(y){const f=yield Dh(y),m=en().gapi;return Te(m,y,"internal-error"),f.open({where:document.body,url:$a(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:od,dontclear:!0},w=>new Promise(function(){var L=(0,I.Z)(function*(K,_e){yield w.restyle({setHideOnLeave:!1});const Fe=Ge(y,"network-request-failed"),pt=en().setTimeout(()=>{_e(Fe)},Ih.get());function Et(){en().clearTimeout(pt),K(w)}w.ping(Et).then(Et,()=>{_e(Fe)})});return function(K,_e){return L.apply(this,arguments)}}()))}),ad.apply(this,arguments)}const Wg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ld{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Sh(y,f,m,w,L,K){Te(y.config.authDomain,y,"auth-domain-config-required"),Te(y.config.apiKey,y,"invalid-api-key");const _e={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:me.SDK_VERSION,eventId:L};if(f instanceof Zr){f.setDefaultLanguage(y.languageCode),_e.providerId=f.providerId||"",(0,Z.xb)(f.getCustomParameters())||(_e.customParameters=JSON.stringify(f.getCustomParameters()));for(const[pt,Et]of Object.entries(K||{}))_e[pt]=Et}if(f instanceof gi){const pt=f.getScopes().filter(Et=>""!==Et);pt.length>0&&(_e.scopes=pt.join(","))}y.tenantId&&(_e.tid=y.tenantId);const Fe=_e;for(const pt of Object.keys(Fe))void 0===Fe[pt]&&delete Fe[pt];return`${function wy({config:y}){return y.emulator?bn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,Z.xO)(Fe).slice(1)}`}const uo="webStorageSupport";class jl extends class Ah{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new jl(f)}_finalizeEnroll(f,m,w){return function Ua(y,f){return pn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Mn(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Mo(y,f){return pn(y,"POST","/v2/accounts/mfaSignIn:finalize",Mn(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kg=(()=>{class y{constructor(){}static assertion(m){return jl._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Ey="@firebase/auth",qf="0.19.11";class yc{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,I.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var L;f((null===(L=w)||void 0===L?void 0:L.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bc(){return window}function ml(){return(ml=(0,I.Z)(function*(y,f,m){var w;const{BuildInfo:L}=bc();Se(f.sessionId,"AuthEvent did not contain a session ID");const K=yield lw(f.sessionId),_e={};return Ei()?_e.ibi=L.packageName:Ie()?_e.apn=L.packageName:He(y,"operation-not-supported-in-this-environment"),L.displayName&&(_e.appDisplayName=L.displayName),_e.sessionId=K,Sh(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,_e)})).apply(this,arguments)}function Ks(){return(Ks=(0,I.Z)(function*(y){const{BuildInfo:f}=bc(),m={};Ei()?m.iosBundleId=f.packageName:Ie()?m.androidPackageName=f.packageName:He(y,"operation-not-supported-in-this-environment"),yield pl(y,m)})).apply(this,arguments)}function wc(){return(wc=(0,I.Z)(function*(y,f,m){const{cordova:w}=bc();let L=()=>{};try{yield new Promise((K,_e)=>{let Fe=null;function pt(){var Zt;K();const _i=null===(Zt=w.plugins.browsertab)||void 0===Zt?void 0:Zt.close;"function"==typeof _i&&_i(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Et(){Fe||(Fe=window.setTimeout(()=>{_e(Ge(y,"redirect-cancelled-by-user"))},2e3))}function tn(){"visible"===(null==document?void 0:document.visibilityState)&&Et()}f.addPassiveListener(pt),document.addEventListener("resume",Et,!1),Ie()&&document.addEventListener("visibilitychange",tn,!1),L=()=>{f.removePassiveListener(pt),document.removeEventListener("resume",Et,!1),document.removeEventListener("visibilitychange",tn,!1),Fe&&window.clearTimeout(Fe)}})}finally{L()}})).apply(this,arguments)}function lw(y){return ou.apply(this,arguments)}function ou(){return(ou=(0,I.Z)(function*(y){const f=Nh(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(L=>L.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Nh(y){if(Se(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}!function vc(y){(0,me._registerComponent)(new De.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),L=f.getProvider("heartbeat"),{apiKey:K,authDomain:_e}=w.options;return((Fe,pt)=>{Te(K&&!K.includes(":"),"invalid-api-key",{appName:Fe.name}),Te(!(null==_e?void 0:_e.includes(":")),"argument-error",{appName:Fe.name});const Et={apiKey:K,authDomain:_e,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xs(y)},tn=new di(Fe,pt,Et);return function Me(y,f){const m=(null==f?void 0:f.persistence)||[],w=(Array.isArray(m)?m:[m]).map(pe);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(tn,m),tn})(w,L)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new De.wA("auth-internal",f=>{const m=qe(f.getProvider("auth").getImmediate());return new yc(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(Ey,qf,function Zf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,me.registerVersion)(Ey,qf,"esm2017")}("Browser");class xh extends Ea{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,I.Z)(function*(){yield f.initPromise})()}}function Dy(y){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,I.Z)(function*(y){const f=yield Oh()._get(Rh(y));return f&&(yield Oh()._remove(Rh(y))),f})).apply(this,arguments)}function Hl(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function Oh(){return pe(Mi)}function Rh(y){return Le("authEvent",y.config.apiKey,y.name)}function kh(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...m]=y.split("?");return(0,Z.zd)(m.join("?"))}function Xf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ge("no-auth-event")}}function pd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function em(y=(0,Z.z$)()){return!("file:"!==pd()&&"ionic:"!==pd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ns(){try{const y=self.localStorage,f=Ke();if(y)return y.setItem(f,"1"),y.removeItem(f),!function yl(y=(0,Z.z$)()){return function uw(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function tp(y=(0,Z.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,Z.hl)()}catch(y){return Ec()&&(0,Z.hl)()}return!1}function Ec(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function gd(){return(function ep(){return"http:"===pd()||"https:"===pd()}()||(0,Z.ru)()||em())&&!function Iy(){return(0,Z.b$)()||(0,Z.UG)()}()&&ns()&&!Ec()}function Cc(){return em()&&"undefined"!=typeof document}function Dc(){return(Dc=(0,I.Z)(function*(){return!!Cc()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const ho={LOCAL:"local",NONE:"none",SESSION:"session"},md=Te,np="persistence";function Fh(y){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,I.Z)(function*(y){yield y._initializationPromise;const f=rp(),m=Le(np,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function rp(){var y;try{return(null===(y=function fr(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Vh=Te;class Da{constructor(){this.browserResolver=pe(class iu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A,this._completeRedirectFn=nr}_openPopup(f,m,w,L){var K=this;return(0,I.Z)(function*(){var _e;Se(null===(_e=K.eventManagers[f._key()])||void 0===_e?void 0:_e.manager,"_initialize() not called before _openPopup()");const Fe=Sh(f,m,w,Kt(),L);return function cd(y,f,m,w=500,L=600){const K=Math.max((window.screen.availHeight-L)/2,0).toString(),_e=Math.max((window.screen.availWidth-w)/2,0).toString();let Fe="";const pt=Object.assign(Object.assign({},Wg),{width:w.toString(),height:L.toString(),top:K,left:_e}),Et=(0,Z.z$)().toLowerCase();m&&(Fe=wi(Et)?"_blank":m),Ut(Et)&&(f=f||"http://localhost",pt.scrollbars="yes");const tn=Object.entries(pt).reduce((_i,[ea,vd])=>`${_i}${ea}=${vd},`,"");if(function Yi(y=(0,Z.z$)()){var f;return Ei(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Et)&&"_self"!==Fe)return function zf(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",Fe),new ld(null);const Zt=window.open(f||"",Fe,tn);Te(Zt,y,"popup-blocked");try{Zt.focus()}catch(_i){}return new ld(Zt)}(f,Fe,Ke())})()}_openRedirect(f,m,w,L){var K=this;return(0,I.Z)(function*(){return yield K._originValidation(f),function fi(y){en().location.href=y}(Sh(f,m,w,Kt(),L)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:L,promise:K}=this.eventManagers[m];return L?Promise.resolve(L):(Se(K,"If manager is not set, promise should be"),K)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,I.Z)(function*(){const w=yield function $f(y){return ad.apply(this,arguments)}(f),L=new Ea(f);return w.register("authEvent",K=>(Te(null==K?void 0:K.authEvent,f,"invalid-auth-event"),{status:L.onEvent(K.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:L},m.iframes[f._key()]=w,L})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(uo,{type:uo},L=>{var K;const _e=null===(K=null==L?void 0:L[0])||void 0===K?void 0:K[uo];void 0!==_e&&m(!!_e),He(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Hg(y){return Ca.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return $i()||Sn()||Ei()}}),this.cordovaResolver=pe(class Jg{constructor(){this._redirectPersistence=A,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nr}_initialize(f){var m=this;return(0,I.Z)(function*(){const w=f._key();let L=m.eventManagers.get(w);return L||(L=new xh(f),m.eventManagers.set(w,L),m.attachCallbackListeners(f,L)),L})()}_openPopup(f){He(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,L){var K=this;return(0,I.Z)(function*(){!function Yg(y){var f,m,w,L,K,_e,Fe,pt,Et,tn;const Zt=bc();Te("function"==typeof(null===(f=null==Zt?void 0:Zt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(m=null==Zt?void 0:Zt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(K=null===(L=null===(w=null==Zt?void 0:Zt.cordova)||void 0===w?void 0:w.plugins)||void 0===L?void 0:L.browsertab)||void 0===K?void 0:K.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(pt=null===(Fe=null===(_e=null==Zt?void 0:Zt.cordova)||void 0===_e?void 0:_e.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===pt?void 0:pt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(tn=null===(Et=null==Zt?void 0:Zt.cordova)||void 0===Et?void 0:Et.InAppBrowser)||void 0===tn?void 0:tn.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const _e=yield K._initialize(f);yield _e.initialized(),_e.resetRedirect(),function id(){Zs.clear()}(),yield K._originValidation(f);const Fe=function Yf(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Hl(),postBody:null,tenantId:y.tenantId,error:Ge(y,"no-auth-event")}}(f,w,L);yield function cw(y,f){return Oh()._set(Rh(y),f)}(f,Fe);const pt=yield function gl(y,f,m){return ml.apply(this,arguments)}(f,Fe,m),Et=yield function su(y){const{cordova:f}=bc();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let L=null;w?f.plugins.browsertab.openUrl(y):L=f.InAppBrowser.open(y,function ai(y=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(L)})})}(pt);return function Vi(y,f,m){return wc.apply(this,arguments)}(f,_e,Et)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dd(y){return Ks.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:L,BuildInfo:K}=bc(),_e=setTimeout((0,I.Z)(function*(){yield Dy(f),m.onEvent(Xf())}),500),Fe=function(){var tn=(0,I.Z)(function*(Zt){clearTimeout(_e);const _i=yield Dy(f);let ea=null;_i&&(null==Zt?void 0:Zt.url)&&(ea=function hd(y,f){var m,w;const L=function _l(y){const f=kh(y),m=f.link?decodeURIComponent(f.link):void 0,w=kh(m).link,L=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return kh(L).link||L||w||m||y}(f);if(L.includes("/__/auth/callback")){const K=kh(L),_e=K.firebaseError?function Jf(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(K.firebaseError)):null,Fe=null===(w=null===(m=null==_e?void 0:_e.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],pt=Fe?Ge(Fe):null;return pt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:L,postBody:null}}return null}(_i,Zt.url)),m.onEvent(ea||Xf())});return function(_i){return tn.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,Fe);const pt=L,Et=`${K.packageName.toLowerCase()}://`;bc().handleOpenURL=function(){var tn=(0,I.Z)(function*(Zt){if(Zt.toLowerCase().startsWith(Et)&&Fe({url:Zt}),"function"==typeof pt)try{pt(Zt)}catch(_i){console.error(_i)}});return function(Zt){return tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=A,this._completeRedirectFn=nr}_initialize(f){var m=this;return(0,I.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,L){var K=this;return(0,I.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openPopup(f,m,w,L)})()}_openRedirect(f,m,w,L){var K=this;return(0,I.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._openRedirect(f,m,w,L)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Cc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,I.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Fr(){return Dc.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Wa(y){return y.unwrap()}function sp(y){return au(y)}function au(y){const{_tokenResponse:f}=y instanceof Z.ZR?y.customData:y;if(!f)return null;if(!(y instanceof Z.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Oo.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=vs;break;case"facebook.com":w=ys;break;case"github.com":w=Uo;break;case"twitter.com":w=Kr;break;default:const{oauthIdToken:L,oauthAccessToken:K,oauthTokenSecret:_e,pendingToken:Fe,nonce:pt}=f;return K||_e||L||Fe?Fe?m.startsWith("saml.")?as._create(m,Fe):xr._fromParams({providerId:m,signInMethod:m,pendingToken:Fe,idToken:L,accessToken:K}):new to(m).credential({idToken:L,accessToken:K,rawNonce:pt}):null}return y instanceof Z.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function fs(y,f){return f.catch(m=>{throw m instanceof Z.ZR&&function op(y,f){var m;const w=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new nm(y,function es(y,f){var m;const w=(0,Z.m9)(y),L=f;return Te(f.customData.operationType,w,"argument-error"),Te(null===(m=L.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),zs._fromError(w,L)}(y,f));else if(w){const L=au(f),K=f;L&&(K.credential=L,K.tenantId=w.tenantId||void 0,K.email=w.email||void 0,K.phoneNumber=w.phoneNumber||void 0)}}(y,m),m}).then(m=>{const L=m.user;return{operationType:m.operationType,credential:sp(m),additionalUserInfo:cr(m),user:Ia.getOrCreate(L)}})}function _d(y,f){return lu.apply(this,arguments)}function lu(){return(lu=(0,I.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>fs(y,m.confirm(w))}})).apply(this,arguments)}class nm{constructor(f,m){this.resolver=m,this.auth=function tm(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return fs(Wa(this.auth),this.resolver.resolveSignIn(f))}}class Ia{constructor(f){this._delegate=f,this.multiFactor=function ya(y){const f=(0,Z.m9)(y);return Rr.has(f)||Rr.set(f,ts._fromUser(f)),Rr.get(f)}(f)}static getOrCreate(f){return Ia.USER_MAP.has(f)||Ia.USER_MAP.set(f,new Ia(f)),Ia.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,I.Z)(function*(){return fs(m.auth,yn(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,I.Z)(function*(){return _d(w.auth,function hc(y,f,m){return dl.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,I.Z)(function*(){return fs(m.auth,function td(y,f,m){return Xc.apply(this,arguments)}(m._delegate,f,Da))})()}linkWithRedirect(f){var m=this;return(0,I.Z)(function*(){return yield Fh(qe(m.auth)),function Bt(y,f,m){return function cn(y,f,m){return On.apply(this,arguments)}(y,f,m)}(m._delegate,f,Da)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,I.Z)(function*(){return fs(m.auth,vn(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return _d(this.auth,function Vg(y,f,m){return Xu.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return fs(this.auth,function Ha(y,f,m){return pc.apply(this,arguments)}(this._delegate,f,Da))}reauthenticateWithRedirect(f){var m=this;return(0,I.Z)(function*(){return yield Fh(qe(m.auth)),function Ae(y,f,m){return function st(y,f,m){return St.apply(this,arguments)}(y,f,m)}(m._delegate,f,Da)})()}sendEmailVerification(f){return function Dr(y,f){return La.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,I.Z)(function*(){return yield function Yr(y,f){return bs.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Ba(y,f){return To((0,Z.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function ga(y,f){return To((0,Z.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Eh(y,f){return lo.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Io(y,f){return pa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Va(y,f,m){return fa.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ia.USER_MAP=new WeakMap;const Gl=Te;let ap=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:L}=m.options;Gl(L,"invalid-api-key",{appName:m.name}),Gl(L,"invalid-api-key",{appName:m.name});const K="undefined"!=typeof window?Da:void 0;this._delegate=w.initialize({options:{persistence:yd(L,m.name),popupRedirectResolver:K}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ia.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function zn(y,f,m){const w=qe(y);Te(w._canInitEmulator,w,"emulator-config-failed"),Te(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const L=!!(null==m?void 0:m.disableWarnings),K=Wi(f),{host:_e,port:Fe}=function Wr(y){const f=Wi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(w);if(L){const K=L[1];return{host:K,port:li(w.substr(K.length+1))}}{const[K,_e]=w.split(":");return{host:K,port:li(_e)}}}(f);w.config.emulator={url:`${K}//${_e}${null===Fe?"":`:${Fe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:_e,port:Fe,protocol:K.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Ci(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function nl(y,f){return Xe.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return hn(this._delegate,m)}confirmPasswordReset(m,w){return function ka(y,f,m){return ws.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var L=this;return(0,I.Z)(function*(){return fs(L._delegate,function $o(y,f,m){return cs.apply(this,arguments)}(L._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function ha(y,f){return Ps.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Fa(y,f){const m=Gs.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,I.Z)(function*(){Gl(gd(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function un(y,f){return hr.apply(this,arguments)}(m._delegate,Da);return w?fs(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Qg(y,f){qe(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,L){const{next:K,error:_e,complete:Fe}=lp(m,w,L);return this._delegate.onAuthStateChanged(K,_e,Fe)}onIdTokenChanged(m,w,L){const{next:K,error:_e,complete:Fe}=lp(m,w,L);return this._delegate.onIdTokenChanged(K,_e,Fe)}sendSignInLinkToEmail(m,w){return function Pa(y,f,m){return il.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function no(y,f,m){return Qr.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,I.Z)(function*(){let L;switch(function Ty(y,f){md(Object.values(ho).includes(f),y,"invalid-persistence-type"),(0,Z.b$)()?md(f!==ho.SESSION,y,"unsupported-persistence-type"):(0,Z.UG)()?md(f===ho.NONE,y,"unsupported-persistence-type"):Ec()?md(f===ho.NONE||f===ho.LOCAL&&(0,Z.hl)(),y,"unsupported-persistence-type"):md(f===ho.NONE||ns(),y,"unsupported-persistence-type")}(w._delegate,m),m){case ho.SESSION:L=A;break;case ho.LOCAL:L=(yield pe(us)._isAvailable())?us:Mi;break;case ho.NONE:L=ce;break;default:return He("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(L)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return fs(this._delegate,function Co(y){return Go.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return fs(this._delegate,lt(this._delegate,m))}signInWithCustomToken(m){return fs(this._delegate,function Or(y,f){return Xi.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return fs(this._delegate,function Wo(y,f,m){return lt((0,Z.m9)(y),ri.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return fs(this._delegate,function da(y,f,m){return io.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return _d(this._delegate,function Lg(y,f,m){return tr.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,I.Z)(function*(){return Gl(gd(),w._delegate,"operation-not-supported-in-this-environment"),fs(w._delegate,function hl(y,f,m){return Ch.apply(this,arguments)}(w._delegate,m,Da))})()}signInWithRedirect(m){var w=this;return(0,I.Z)(function*(){return Gl(gd(),w._delegate,"operation-not-supported-in-this-environment"),yield Fh(w._delegate),function $(y,f,m){return function X(y,f,m){return ve.apply(this,arguments)}(y,f,m)}(w._delegate,m,Da)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function mi(y,f){return ua.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ho,y})();function lp(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const L=w;return{next:_e=>L(_e&&Ia.getOrCreate(_e)),error:f,complete:m}}function yd(y,f){const m=function ip(y,f){const m=rp();if(!m)return[];const w=Le(np,y,f);switch(m.getItem(w)){case ho.NONE:return[ce];case ho.LOCAL:return[us,A];case ho.SESSION:return[A];default:return[]}}(y,f);if("undefined"!=typeof self&&!m.includes(us)&&m.push(us),"undefined"!=typeof window)for(const w of[Mi,A])m.includes(w)||m.push(w);return m.includes(ce)||m.push(ce),m}class Bh{constructor(){this.providerId="phone",this._delegate=new Oo(Wa(h.Z.auth()))}static credential(f,m){return Oo.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Bh.PHONE_SIGN_IN_METHOD=Oo.PHONE_SIGN_IN_METHOD,Bh.PROVIDER_ID=Oo.PROVIDER_ID;const im=Te;class cp{constructor(f,m,w=h.Z.app()){var L;im(null===(L=w.options)||void 0===L?void 0:L.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new bh(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rm(y){y.INTERNAL.registerComponent(new De.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new ap(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ri,FacebookAuthProvider:ys,GithubAuthProvider:Uo,GoogleAuthProvider:vs,OAuthProvider:to,SAMLAuthProvider:qi,PhoneAuthProvider:Bh,PhoneMultiFactorGenerator:Kg,RecaptchaVerifier:cp,TwitterAuthProvider:Kr,Auth:ap,AuthCredential:Xt,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(h.Z)},4121:(bt,xe,j)=>{"use strict";j.d(xe,{X:()=>h});var I=j(8023);class h extends I.x{constructor(me){super(),this._value=me}get value(){return this.getValue()}_subscribe(me){const ue=super._subscribe(me);return!ue.closed&&me.next(this._value),ue}getValue(){const{hasError:me,thrownError:ue,_value:we}=this;if(me)throw ue;return this._throwIfClosed(),we}next(me){super.next(this._value=me)}}},818:(bt,xe,j)=>{"use strict";j.d(xe,{y:()=>ne});var I=j(4021),h=j(4813),Z=j(3122),me=j(8330);var De=j(2046),be=j(5975),Ce=j(1519);let ne=(()=>{class Be{constructor(nt){nt&&(this._subscribe=nt)}lift(nt){const Re=new Be;return Re.source=this,Re.operator=nt,Re}subscribe(nt,Re,Ue){const _t=function Ve(Be){return Be&&Be instanceof I.Lv||function he(Be){return Be&&(0,be.m)(Be.next)&&(0,be.m)(Be.error)&&(0,be.m)(Be.complete)}(Be)&&(0,h.Nn)(Be)}(nt)?nt:new I.Hp(nt,Re,Ue);return(0,Ce.x)(()=>{const{operator:dt,source:He}=this;_t.add(dt?dt.call(_t,He):He?this._subscribe(_t):this._trySubscribe(_t))}),_t}_trySubscribe(nt){try{return this._subscribe(nt)}catch(Re){nt.error(Re)}}forEach(nt,Re){return new(Re=ie(Re))((Ue,_t)=>{const dt=new I.Hp({next:He=>{try{nt(He)}catch(Ge){_t(Ge),dt.unsubscribe()}},error:_t,complete:Ue});this.subscribe(dt)})}_subscribe(nt){var Re;return null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(nt)}[Z.L](){return this}pipe(...nt){return function we(Be){return 0===Be.length?me.y:1===Be.length?Be[0]:function(nt){return Be.reduce((Re,Ue)=>Ue(Re),nt)}}(nt)(this)}toPromise(nt){return new(nt=ie(nt))((Re,Ue)=>{let _t;this.subscribe(dt=>_t=dt,dt=>Ue(dt),()=>Re(_t))})}}return Be.create=Je=>new Be(Je),Be})();function ie(Be){var Je;return null!==(Je=null!=Be?Be:De.v.Promise)&&void 0!==Je?Je:Promise}},8023:(bt,xe,j)=>{"use strict";j.d(xe,{x:()=>De});var I=j(818),h=j(4813);const me=(0,j(5776).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=j(8308),we=j(1519);let De=(()=>{class Ce extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const he=new be(this,this);return he.operator=ie,he}_throwIfClosed(){if(this.closed)throw new me}next(ie){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const he of this.currentObservers)he.next(ie)}})}error(ie){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:he}=this;for(;he.length;)he.shift().error(ie)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:he,isStopped:Ve,observers:Be}=this;return he||Ve?h.Lc:(this.currentObservers=null,Be.push(ie),new h.w0(()=>{this.currentObservers=null,(0,ue.P)(Be,ie)}))}_checkFinalizedStatuses(ie){const{hasError:he,thrownError:Ve,isStopped:Be}=this;he?ie.error(Ve):Be&&ie.complete()}asObservable(){const ie=new I.y;return ie.source=this,ie}}return Ce.create=(ne,ie)=>new be(ne,ie),Ce})();class be extends De{constructor(ne,ie){super(),this.destination=ne,this.source=ie}next(ne){var ie,he;null===(he=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===he||he.call(ie,ne)}error(ne){var ie,he;null===(he=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===he||he.call(ie,ne)}complete(){var ne,ie;null===(ie=null===(ne=this.destination)||void 0===ne?void 0:ne.complete)||void 0===ie||ie.call(ne)}_subscribe(ne){var ie,he;return null!==(he=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(ne))&&void 0!==he?he:h.Lc}}},4021:(bt,xe,j)=>{"use strict";j.d(xe,{Hp:()=>nt,Lv:()=>he});var I=j(5975),h=j(4813),Z=j(2046),me=j(4922),ue=j(408);const we=Ce("C",void 0,void 0);function Ce(He,Ge,$e){return{kind:He,value:Ge,error:$e}}var ne=j(4146),ie=j(1519);class he extends h.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,h.Nn)(Ge)&&Ge.add(this)):this.destination=dt}static create(Ge,$e,ht){return new nt(Ge,$e,ht)}next(Ge){this.isStopped?_t(function be(He){return Ce("N",He,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?_t(function De(He){return Ce("E",void 0,He)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?_t(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Be(He,Ge){return Ve.call(He,Ge)}class Je{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:$e}=this;if($e.next)try{$e.next(Ge)}catch(ht){Re(ht)}}error(Ge){const{partialObserver:$e}=this;if($e.error)try{$e.error(Ge)}catch(ht){Re(ht)}else Re(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch($e){Re($e)}}}class nt extends he{constructor(Ge,$e,ht){let le;if(super(),(0,I.m)(Ge)||!Ge)le={next:null!=Ge?Ge:void 0,error:null!=$e?$e:void 0,complete:null!=ht?ht:void 0};else{let Te;this&&Z.v.useDeprecatedNextContext?(Te=Object.create(Ge),Te.unsubscribe=()=>this.unsubscribe(),le={next:Ge.next&&Be(Ge.next,Te),error:Ge.error&&Be(Ge.error,Te),complete:Ge.complete&&Be(Ge.complete,Te)}):le=Ge}this.destination=new Je(le)}}function Re(He){Z.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(He):(0,me.h)(He)}function _t(He,Ge){const{onStoppedNotification:$e}=Z.v;$e&&ne.z.setTimeout(()=>$e(He,Ge))}const dt={closed:!0,next:ue.Z,error:function Ue(He){throw He},complete:ue.Z}},4813:(bt,xe,j)=>{"use strict";j.d(xe,{Lc:()=>we,w0:()=>ue,Nn:()=>De});var I=j(5975);const Z=(0,j(5776).d)(Ce=>function(ie){Ce(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((he,Ve)=>`${Ve+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var me=j(8308);class ue{constructor(ne){this.initialTeardown=ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ne;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Be of ie)Be.remove(this);else ie.remove(this);const{initialTeardown:he}=this;if((0,I.m)(he))try{he()}catch(Be){ne=Be instanceof Z?Be.errors:[Be]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Be of Ve)try{be(Be)}catch(Je){ne=null!=ne?ne:[],Je instanceof Z?ne=[...ne,...Je.errors]:ne.push(Je)}}if(ne)throw new Z(ne)}}add(ne){var ie;if(ne&&ne!==this)if(this.closed)be(ne);else{if(ne instanceof ue){if(ne.closed||ne._hasParent(this))return;ne._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(ne)}}_hasParent(ne){const{_parentage:ie}=this;return ie===ne||Array.isArray(ie)&&ie.includes(ne)}_addParent(ne){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(ne),ie):ie?[ie,ne]:ne}_removeParent(ne){const{_parentage:ie}=this;ie===ne?this._parentage=null:Array.isArray(ie)&&(0,me.P)(ie,ne)}remove(ne){const{_finalizers:ie}=this;ie&&(0,me.P)(ie,ne),ne instanceof ue&&ne._removeParent(this)}}ue.EMPTY=(()=>{const Ce=new ue;return Ce.closed=!0,Ce})();const we=ue.EMPTY;function De(Ce){return Ce instanceof ue||Ce&&"closed"in Ce&&(0,I.m)(Ce.remove)&&(0,I.m)(Ce.add)&&(0,I.m)(Ce.unsubscribe)}function be(Ce){(0,I.m)(Ce)?Ce():Ce.unsubscribe()}},2046:(bt,xe,j)=>{"use strict";j.d(xe,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5696:(bt,xe,j)=>{"use strict";j.d(xe,{a:()=>ne});var I=j(818),h=j(447),Z=j(237),me=j(8330),ue=j(2692),we=j(6651),De=j(9299),be=j(8499),Ce=j(6903);function ne(...Ve){const Be=(0,we.yG)(Ve),Je=(0,we.jO)(Ve),{args:nt,keys:Re}=(0,h.D)(Ve);if(0===nt.length)return(0,Z.D)([],Be);const Ue=new I.y(function ie(Ve,Be,Je=me.y){return nt=>{he(Be,()=>{const{length:Re}=Ve,Ue=new Array(Re);let _t=Re,dt=Re;for(let He=0;He<Re;He++)he(Be,()=>{const Ge=(0,Z.D)(Ve[He],Be);let $e=!1;Ge.subscribe((0,be.x)(nt,ht=>{Ue[He]=ht,$e||($e=!0,dt--),dt||nt.next(Je(Ue.slice()))},()=>{--_t||nt.complete()}))},nt)},nt)}}(nt,Be,Re?_t=>(0,De.n)(Re,_t):me.y));return Je?Ue.pipe((0,ue.Z)(Je)):Ue}function he(Ve,Be,Je){Ve?(0,Ce.f)(Je,Ve,Be):Be()}},3729:(bt,xe,j)=>{"use strict";j.d(xe,{z:()=>ue});var I=j(549),Z=j(6651),me=j(237);function ue(...we){return function h(){return(0,I.J)(1)}()((0,me.D)(we,(0,Z.yG)(we)))}},9018:(bt,xe,j)=>{"use strict";j.d(xe,{E:()=>h});const h=new(j(818).y)(ue=>ue.complete())},237:(bt,xe,j)=>{"use strict";j.d(xe,{D:()=>Ge});var I=j(5955),h=j(7513),Z=j(4119),we=j(818),be=j(4565),Ce=j(5975),ne=j(6903);function he($e,ht){if(!$e)throw new Error("Iterable cannot be null");return new we.y(le=>{(0,ne.f)(le,ht,()=>{const Te=$e[Symbol.asyncIterator]();(0,ne.f)(le,ht,()=>{Te.next().then(fe=>{fe.done?le.complete():le.next(fe.value)})},0,!0)})})}var Ve=j(2021),Be=j(9450),Je=j(6602),nt=j(6920),Re=j(2604),Ue=j(5626),_t=j(1559);function Ge($e,ht){return ht?function He($e,ht){if(null!=$e){if((0,Ve.c)($e))return function me($e,ht){return(0,I.Xf)($e).pipe((0,Z.R)(ht),(0,h.Q)(ht))}($e,ht);if((0,Je.z)($e))return function De($e,ht){return new we.y(le=>{let Te=0;return ht.schedule(function(){Te===$e.length?le.complete():(le.next($e[Te++]),le.closed||this.schedule())})})}($e,ht);if((0,Be.t)($e))return function ue($e,ht){return(0,I.Xf)($e).pipe((0,Z.R)(ht),(0,h.Q)(ht))}($e,ht);if((0,Re.D)($e))return he($e,ht);if((0,nt.T)($e))return function ie($e,ht){return new we.y(le=>{let Te;return(0,ne.f)(le,ht,()=>{Te=$e[be.h](),(0,ne.f)(le,ht,()=>{let fe,Se;try{({value:fe,done:Se}=Te.next())}catch(ke){return void le.error(ke)}Se?le.complete():le.next(fe)},0,!0)}),()=>(0,Ce.m)(null==Te?void 0:Te.return)&&Te.return()})}($e,ht);if((0,_t.L)($e))return function dt($e,ht){return he((0,_t.Q)($e),ht)}($e,ht)}throw(0,Ue.z)($e)}($e,ht):(0,I.Xf)($e)}},5955:(bt,xe,j)=>{"use strict";j.d(xe,{Xf:()=>Ve});var I=j(4762),h=j(6602),Z=j(9450),me=j(818),ue=j(2021),we=j(2604),De=j(5626),be=j(6920),Ce=j(1559),ne=j(5975),ie=j(4922),he=j(3122);function Ve(He){if(He instanceof me.y)return He;if(null!=He){if((0,ue.c)(He))return function Be(He){return new me.y(Ge=>{const $e=He[he.L]();if((0,ne.m)($e.subscribe))return $e.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(He);if((0,h.z)(He))return function Je(He){return new me.y(Ge=>{for(let $e=0;$e<He.length&&!Ge.closed;$e++)Ge.next(He[$e]);Ge.complete()})}(He);if((0,Z.t)(He))return function nt(He){return new me.y(Ge=>{He.then($e=>{Ge.closed||(Ge.next($e),Ge.complete())},$e=>Ge.error($e)).then(null,ie.h)})}(He);if((0,we.D)(He))return Ue(He);if((0,be.T)(He))return function Re(He){return new me.y(Ge=>{for(const $e of He)if(Ge.next($e),Ge.closed)return;Ge.complete()})}(He);if((0,Ce.L)(He))return function _t(He){return Ue((0,Ce.Q)(He))}(He)}throw(0,De.z)(He)}function Ue(He){return new me.y(Ge=>{(function dt(He,Ge){var $e,ht,le,Te;return(0,I.mG)(this,void 0,void 0,function*(){try{for($e=(0,I.KL)(He);!(ht=yield $e.next()).done;)if(Ge.next(ht.value),Ge.closed)return}catch(fe){le={error:fe}}finally{try{ht&&!ht.done&&(Te=$e.return)&&(yield Te.call($e))}finally{if(le)throw le.error}}Ge.complete()})})(He,Ge).catch($e=>Ge.error($e))})}},1860:(bt,xe,j)=>{"use strict";j.d(xe,{T:()=>we});var I=j(549),h=j(5955),Z=j(9018),me=j(6651),ue=j(237);function we(...De){const be=(0,me.yG)(De),Ce=(0,me._6)(De,1/0),ne=De;return ne.length?1===ne.length?(0,h.Xf)(ne[0]):(0,I.J)(Ce)((0,ue.D)(ne,be)):Z.E}},4945:(bt,xe,j)=>{"use strict";j.d(xe,{of:()=>Z});var I=j(6651),h=j(237);function Z(...me){const ue=(0,I.yG)(me);return(0,h.D)(me,ue)}},8499:(bt,xe,j)=>{"use strict";j.d(xe,{x:()=>h});var I=j(4021);function h(me,ue,we,De,be){return new Z(me,ue,we,De,be)}class Z extends I.Lv{constructor(ue,we,De,be,Ce,ne){super(ue),this.onFinalize=Ce,this.shouldUnsubscribe=ne,this._next=we?function(ie){try{we(ie)}catch(he){ue.error(he)}}:super._next,this._error=be?function(ie){try{be(ie)}catch(he){ue.error(he)}finally{this.unsubscribe()}}:super._error,this._complete=De?function(){try{De()}catch(ie){ue.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},2686:(bt,xe,j)=>{"use strict";j.d(xe,{d:()=>Z});var I=j(2085),h=j(8499);function Z(me){return(0,I.e)((ue,we)=>{let De=!1;ue.subscribe((0,h.x)(we,be=>{De=!0,we.next(be)},()=>{De||we.next(me),we.complete()}))})}},4970:(bt,xe,j)=>{"use strict";j.d(xe,{h:()=>Z});var I=j(2085),h=j(8499);function Z(me,ue){return(0,I.e)((we,De)=>{let be=0;we.subscribe((0,h.x)(De,Ce=>me.call(ue,Ce,be++)&&De.next(Ce)))})}},9676:(bt,xe,j)=>{"use strict";j.d(xe,{P:()=>De});var I=j(7472),h=j(4970),Z=j(5598),me=j(2686),ue=j(8623),we=j(8330);function De(be,Ce){const ne=arguments.length>=2;return ie=>ie.pipe(be?(0,h.h)((he,Ve)=>be(he,Ve,ie)):we.y,(0,Z.q)(1),ne?(0,me.d)(Ce):(0,ue.T)(()=>new I.K))}},7969:(bt,xe,j)=>{"use strict";j.d(xe,{U:()=>Z});var I=j(2085),h=j(8499);function Z(me,ue){return(0,I.e)((we,De)=>{let be=0;we.subscribe((0,h.x)(De,Ce=>{De.next(me.call(ue,Ce,be++))}))})}},549:(bt,xe,j)=>{"use strict";j.d(xe,{J:()=>Z});var I=j(4882),h=j(8330);function Z(me=1/0){return(0,I.z)(h.y,me)}},4882:(bt,xe,j)=>{"use strict";j.d(xe,{z:()=>be});var I=j(7969),h=j(5955),Z=j(2085),me=j(6903),ue=j(8499),De=j(5975);function be(Ce,ne,ie=1/0){return(0,De.m)(ne)?be((he,Ve)=>(0,I.U)((Be,Je)=>ne(he,Be,Ve,Je))((0,h.Xf)(Ce(he,Ve))),ie):("number"==typeof ne&&(ie=ne),(0,Z.e)((he,Ve)=>function we(Ce,ne,ie,he,Ve,Be,Je,nt){const Re=[];let Ue=0,_t=0,dt=!1;const He=()=>{dt&&!Re.length&&!Ue&&ne.complete()},Ge=ht=>Ue<he?$e(ht):Re.push(ht),$e=ht=>{Be&&ne.next(ht),Ue++;let le=!1;(0,h.Xf)(ie(ht,_t++)).subscribe((0,ue.x)(ne,Te=>{null==Ve||Ve(Te),Be?Ge(Te):ne.next(Te)},()=>{le=!0},void 0,()=>{if(le)try{for(Ue--;Re.length&&Ue<he;){const Te=Re.shift();Je?(0,me.f)(ne,Je,()=>$e(Te)):$e(Te)}He()}catch(Te){ne.error(Te)}}))};return Ce.subscribe((0,ue.x)(ne,Ge,()=>{dt=!0,He()})),()=>{null==nt||nt()}}(he,Ve,Ce,ie)))}},7513:(bt,xe,j)=>{"use strict";j.d(xe,{Q:()=>me});var I=j(6903),h=j(2085),Z=j(8499);function me(ue,we=0){return(0,h.e)((De,be)=>{De.subscribe((0,Z.x)(be,Ce=>(0,I.f)(be,ue,()=>be.next(Ce),we),()=>(0,I.f)(be,ue,()=>be.complete(),we),Ce=>(0,I.f)(be,ue,()=>be.error(Ce),we)))})}},7479:(bt,xe,j)=>{"use strict";j.d(xe,{R:()=>me});var I=j(2085),h=j(8499);function Z(ue,we,De,be,Ce){return(ne,ie)=>{let he=De,Ve=we,Be=0;ne.subscribe((0,h.x)(ie,Je=>{const nt=Be++;Ve=he?ue(Ve,Je,nt):(he=!0,Je),be&&ie.next(Ve)},Ce&&(()=>{he&&ie.next(Ve),ie.complete()})))}}function me(ue,we){return(0,I.e)(Z(ue,we,arguments.length>=2,!0))}},815:(bt,xe,j)=>{"use strict";j.d(xe,{B:()=>we});var I=j(237),h=j(5598),Z=j(8023),me=j(4021),ue=j(2085);function we(be={}){const{connector:Ce=(()=>new Z.x),resetOnError:ne=!0,resetOnComplete:ie=!0,resetOnRefCountZero:he=!0}=be;return Ve=>{let Be=null,Je=null,nt=null,Re=0,Ue=!1,_t=!1;const dt=()=>{null==Je||Je.unsubscribe(),Je=null},He=()=>{dt(),Be=nt=null,Ue=_t=!1},Ge=()=>{const $e=Be;He(),null==$e||$e.unsubscribe()};return(0,ue.e)(($e,ht)=>{Re++,!_t&&!Ue&&dt();const le=nt=null!=nt?nt:Ce();ht.add(()=>{Re--,0===Re&&!_t&&!Ue&&(Je=De(Ge,he))}),le.subscribe(ht),Be||(Be=new me.Hp({next:Te=>le.next(Te),error:Te=>{_t=!0,dt(),Je=De(He,ne,Te),le.error(Te)},complete:()=>{Ue=!0,dt(),Je=De(He,ie),le.complete()}}),(0,I.D)($e).subscribe(Be))})(Ve)}}function De(be,Ce,...ne){return!0===Ce?(be(),null):!1===Ce?null:Ce(...ne).pipe((0,h.q)(1)).subscribe(()=>be())}},1927:(bt,xe,j)=>{"use strict";j.d(xe,{O:()=>me});var I=j(3729),h=j(6651),Z=j(2085);function me(...ue){const we=(0,h.yG)(ue);return(0,Z.e)((De,be)=>{(we?(0,I.z)(ue,De,we):(0,I.z)(ue,De)).subscribe(be)})}},4119:(bt,xe,j)=>{"use strict";j.d(xe,{R:()=>h});var I=j(2085);function h(Z,me=0){return(0,I.e)((ue,we)=>{we.add(Z.schedule(()=>ue.subscribe(we),me))})}},1528:(bt,xe,j)=>{"use strict";j.d(xe,{w:()=>me});var I=j(5955),h=j(2085),Z=j(8499);function me(ue,we){return(0,h.e)((De,be)=>{let Ce=null,ne=0,ie=!1;const he=()=>ie&&!Ce&&be.complete();De.subscribe((0,Z.x)(be,Ve=>{null==Ce||Ce.unsubscribe();let Be=0;const Je=ne++;(0,I.Xf)(ue(Ve,Je)).subscribe(Ce=(0,Z.x)(be,nt=>be.next(we?we(Ve,nt,Je,Be++):nt),()=>{Ce=null,he()}))},()=>{ie=!0,he()}))})}},5598:(bt,xe,j)=>{"use strict";j.d(xe,{q:()=>me});var I=j(9018),h=j(2085),Z=j(8499);function me(ue){return ue<=0?()=>I.E:(0,h.e)((we,De)=>{let be=0;we.subscribe((0,Z.x)(De,Ce=>{++be<=ue&&(De.next(Ce),ue<=be&&De.complete())}))})}},8168:(bt,xe,j)=>{"use strict";j.d(xe,{b:()=>ue});var I=j(5975),h=j(2085),Z=j(8499),me=j(8330);function ue(we,De,be){const Ce=(0,I.m)(we)||De||be?{next:we,error:De,complete:be}:we;return Ce?(0,h.e)((ne,ie)=>{var he;null===(he=Ce.subscribe)||void 0===he||he.call(Ce);let Ve=!0;ne.subscribe((0,Z.x)(ie,Be=>{var Je;null===(Je=Ce.next)||void 0===Je||Je.call(Ce,Be),ie.next(Be)},()=>{var Be;Ve=!1,null===(Be=Ce.complete)||void 0===Be||Be.call(Ce),ie.complete()},Be=>{var Je;Ve=!1,null===(Je=Ce.error)||void 0===Je||Je.call(Ce,Be),ie.error(Be)},()=>{var Be,Je;Ve&&(null===(Be=Ce.unsubscribe)||void 0===Be||Be.call(Ce)),null===(Je=Ce.finalize)||void 0===Je||Je.call(Ce)}))}):me.y}},8623:(bt,xe,j)=>{"use strict";j.d(xe,{T:()=>me});var I=j(7472),h=j(2085),Z=j(8499);function me(we=ue){return(0,h.e)((De,be)=>{let Ce=!1;De.subscribe((0,Z.x)(be,ne=>{Ce=!0,be.next(ne)},()=>Ce?be.complete():be.error(we())))})}function ue(){return new I.K}},3466:(bt,xe,j)=>{"use strict";j.d(xe,{o:()=>ue});var I=j(4813);class h extends I.w0{constructor(De,be){super()}schedule(De,be=0){return this}}const Z={setInterval(we,De,...be){const{delegate:Ce}=Z;return(null==Ce?void 0:Ce.setInterval)?Ce.setInterval(we,De,...be):setInterval(we,De,...be)},clearInterval(we){const{delegate:De}=Z;return((null==De?void 0:De.clearInterval)||clearInterval)(we)},delegate:void 0};var me=j(8308);class ue extends h{constructor(De,be){super(De,be),this.scheduler=De,this.work=be,this.pending=!1}schedule(De,be=0){if(this.closed)return this;this.state=De;const Ce=this.id,ne=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(ne,Ce,be)),this.pending=!0,this.delay=be,this.id=this.id||this.requestAsyncId(ne,this.id,be),this}requestAsyncId(De,be,Ce=0){return Z.setInterval(De.flush.bind(De,this),Ce)}recycleAsyncId(De,be,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return be;Z.clearInterval(be)}execute(De,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(De,be);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(De,be){let ne,Ce=!1;try{this.work(De)}catch(ie){Ce=!0,ne=ie||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),ne}unsubscribe(){if(!this.closed){const{id:De,scheduler:be}=this,{actions:Ce}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(Ce,this),null!=De&&(this.id=this.recycleAsyncId(be,De,null)),this.delay=null,super.unsubscribe()}}}},474:(bt,xe,j)=>{"use strict";j.d(xe,{v:()=>Z});var I=j(2069);class h{constructor(ue,we=h.now){this.schedulerActionCtor=ue,this.now=we}schedule(ue,we=0,De){return new this.schedulerActionCtor(this,ue).schedule(De,we)}}h.now=I.l.now;class Z extends h{constructor(ue,we=h.now){super(ue,we),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:we}=this;if(this._active)return void we.push(ue);let De;this._active=!0;do{if(De=ue.execute(ue.state,ue.delay))break}while(ue=we.shift());if(this._active=!1,De){for(;ue=we.shift();)ue.unsubscribe();throw De}}}},6523:(bt,xe,j)=>{"use strict";j.d(xe,{z:()=>Z,P:()=>me});var I=j(3466);const Z=new(j(474).v)(I.o),me=Z},2069:(bt,xe,j)=>{"use strict";j.d(xe,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},4146:(bt,xe,j)=>{"use strict";j.d(xe,{z:()=>I});const I={setTimeout(h,Z,...me){const{delegate:ue}=I;return(null==ue?void 0:ue.setTimeout)?ue.setTimeout(h,Z,...me):setTimeout(h,Z,...me)},clearTimeout(h){const{delegate:Z}=I;return((null==Z?void 0:Z.clearTimeout)||clearTimeout)(h)},delegate:void 0}},4565:(bt,xe,j)=>{"use strict";j.d(xe,{h:()=>h});const h=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3122:(bt,xe,j)=>{"use strict";j.d(xe,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7472:(bt,xe,j)=>{"use strict";j.d(xe,{K:()=>h});const h=(0,j(5776).d)(Z=>function(){Z(this),this.name="EmptyError",this.message="no elements in sequence"})},6651:(bt,xe,j)=>{"use strict";j.d(xe,{jO:()=>me,yG:()=>ue,_6:()=>we});var I=j(5975),h=j(1830);function Z(De){return De[De.length-1]}function me(De){return(0,I.m)(Z(De))?De.pop():void 0}function ue(De){return(0,h.K)(Z(De))?De.pop():void 0}function we(De,be){return"number"==typeof Z(De)?De.pop():be}},447:(bt,xe,j)=>{"use strict";j.d(xe,{D:()=>ue});const{isArray:I}=Array,{getPrototypeOf:h,prototype:Z,keys:me}=Object;function ue(De){if(1===De.length){const be=De[0];if(I(be))return{args:be,keys:null};if(function we(De){return De&&"object"==typeof De&&h(De)===Z}(be)){const Ce=me(be);return{args:Ce.map(ne=>be[ne]),keys:Ce}}}return{args:De,keys:null}}},8308:(bt,xe,j)=>{"use strict";function I(h,Z){if(h){const me=h.indexOf(Z);0<=me&&h.splice(me,1)}}j.d(xe,{P:()=>I})},5776:(bt,xe,j)=>{"use strict";function I(h){const me=h(ue=>{Error.call(ue),ue.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}j.d(xe,{d:()=>I})},9299:(bt,xe,j)=>{"use strict";function I(h,Z){return h.reduce((me,ue,we)=>(me[ue]=Z[we],me),{})}j.d(xe,{n:()=>I})},1519:(bt,xe,j)=>{"use strict";j.d(xe,{x:()=>Z,O:()=>me});var I=j(2046);let h=null;function Z(ue){if(I.v.useDeprecatedSynchronousErrorHandling){const we=!h;if(we&&(h={errorThrown:!1,error:null}),ue(),we){const{errorThrown:De,error:be}=h;if(h=null,De)throw be}}else ue()}function me(ue){I.v.useDeprecatedSynchronousErrorHandling&&h&&(h.errorThrown=!0,h.error=ue)}},6903:(bt,xe,j)=>{"use strict";function I(h,Z,me,ue=0,we=!1){const De=Z.schedule(function(){me(),we?h.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(h.add(De),!we)return De}j.d(xe,{f:()=>I})},8330:(bt,xe,j)=>{"use strict";function I(h){return h}j.d(xe,{y:()=>I})},6602:(bt,xe,j)=>{"use strict";j.d(xe,{z:()=>I});const I=h=>h&&"number"==typeof h.length&&"function"!=typeof h},2604:(bt,xe,j)=>{"use strict";j.d(xe,{D:()=>h});var I=j(5975);function h(Z){return Symbol.asyncIterator&&(0,I.m)(null==Z?void 0:Z[Symbol.asyncIterator])}},5975:(bt,xe,j)=>{"use strict";function I(h){return"function"==typeof h}j.d(xe,{m:()=>I})},2021:(bt,xe,j)=>{"use strict";j.d(xe,{c:()=>Z});var I=j(3122),h=j(5975);function Z(me){return(0,h.m)(me[I.L])}},6920:(bt,xe,j)=>{"use strict";j.d(xe,{T:()=>Z});var I=j(4565),h=j(5975);function Z(me){return(0,h.m)(null==me?void 0:me[I.h])}},9450:(bt,xe,j)=>{"use strict";j.d(xe,{t:()=>h});var I=j(5975);function h(Z){return(0,I.m)(null==Z?void 0:Z.then)}},1559:(bt,xe,j)=>{"use strict";j.d(xe,{Q:()=>Z,L:()=>me});var I=j(4762),h=j(5975);function Z(ue){return(0,I.FC)(this,arguments,function*(){const De=ue.getReader();try{for(;;){const{value:be,done:Ce}=yield(0,I.qq)(De.read());if(Ce)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(be)}}finally{De.releaseLock()}})}function me(ue){return(0,h.m)(null==ue?void 0:ue.getReader)}},1830:(bt,xe,j)=>{"use strict";j.d(xe,{K:()=>h});var I=j(5975);function h(Z){return Z&&(0,I.m)(Z.schedule)}},2085:(bt,xe,j)=>{"use strict";j.d(xe,{A:()=>h,e:()=>Z});var I=j(5975);function h(me){return(0,I.m)(null==me?void 0:me.lift)}function Z(me){return ue=>{if(h(ue))return ue.lift(function(we){try{return me(we,this)}catch(De){this.error(De)}});throw new TypeError("Unable to lift unknown Observable type")}}},2692:(bt,xe,j)=>{"use strict";j.d(xe,{Z:()=>me});var I=j(7969);const{isArray:h}=Array;function me(ue){return(0,I.U)(we=>function Z(ue,we){return h(we)?ue(...we):ue(we)}(ue,we))}},408:(bt,xe,j)=>{"use strict";function I(){}j.d(xe,{Z:()=>I})},4922:(bt,xe,j)=>{"use strict";j.d(xe,{h:()=>Z});var I=j(2046),h=j(4146);function Z(me){h.z.setTimeout(()=>{const{onUnhandledError:ue}=I.v;if(!ue)throw me;ue(me)})}},5626:(bt,xe,j)=>{"use strict";function I(h){return new TypeError(`You provided ${null!==h&&"object"==typeof h?"an invalid object":`'${h}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(xe,{z:()=>I})},8259:function(bt){bt.exports=function(){"use strict";const xe="SweetAlert2:",I=T=>T.charAt(0).toUpperCase()+T.slice(1),h=T=>Array.prototype.slice.call(T),Z=T=>{console.warn("".concat(xe," ").concat("object"==typeof T?T.join(" "):T))},me=T=>{console.error("".concat(xe," ").concat(T))},ue=[],De=(T,A)=>{(T=>{ue.includes(T)||(ue.push(T),Z(T))})('"'.concat(T,'" is deprecated and will be removed in the next major release. Please use "').concat(A,'" instead.'))},be=T=>"function"==typeof T?T():T,Ce=T=>T&&"function"==typeof T.toPromise,ne=T=>Ce(T)?T.toPromise():Promise.resolve(T),ie=T=>T&&Promise.resolve(T)===T,he={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ve=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Be={},Je=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],nt=T=>Object.prototype.hasOwnProperty.call(he,T),Re=T=>-1!==Ve.indexOf(T),Ue=T=>Be[T],_t=T=>{nt(T)||Z('Unknown parameter "'.concat(T,'"'))},dt=T=>{Je.includes(T)&&Z('The parameter "'.concat(T,'" is incompatible with toasts'))},He=T=>{Ue(T)&&De(T,Ue(T))},ht=T=>{const A={};for(const U in T)A[T[U]]="swal2-"+T[U];return A},le=ht(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Te=ht(["success","warning","info","question","error"]),fe=()=>document.body.querySelector(".".concat(le.container)),Se=T=>{const A=fe();return A?A.querySelector(T):null},ke=T=>Se(".".concat(T)),pe=()=>ke(le.popup),et=()=>ke(le.icon),Me=()=>ke(le.title),Kt=()=>ke(le["html-container"]),In=()=>ke(le.image),Wn=()=>ke(le["progress-steps"]),yt=()=>ke(le["validation-message"]),Tt=()=>Se(".".concat(le.actions," .").concat(le.confirm)),Qt=()=>Se(".".concat(le.actions," .").concat(le.deny)),Ai=()=>Se(".".concat(le.loader)),ln=()=>Se(".".concat(le.actions," .").concat(le.cancel)),Zi=()=>ke(le.actions),Mn=()=>ke(le.footer),pn=()=>ke(le["timer-progress-bar"]),Ni=()=>ke(le.close),ss=()=>{const T=h(pe().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((U,ee)=>{const Ke=parseInt(U.getAttribute("tabindex")),kt=parseInt(ee.getAttribute("tabindex"));return Ke>kt?1:Ke<kt?-1:0}),A=h(pe().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(U=>"-1"!==U.getAttribute("tabindex"));return(T=>{const A=[];for(let U=0;U<T.length;U++)-1===A.indexOf(T[U])&&A.push(T[U]);return A})(T.concat(A)).filter(U=>ci(U))},Ui=()=>At(document.body,le.shown)&&!At(document.body,le["toast-shown"])&&!At(document.body,le["no-backdrop"]),or=()=>pe()&&At(pe(),le.toast),ar={previousBodyPadding:null},ti=(T,A)=>{if(T.textContent="",A){const ee=(new DOMParser).parseFromString(A,"text/html");h(ee.querySelector("head").childNodes).forEach(Ke=>{T.appendChild(Ke)}),h(ee.querySelector("body").childNodes).forEach(Ke=>{T.appendChild(Ke)})}},At=(T,A)=>{if(!A)return!1;const U=A.split(/\s+/);for(let ee=0;ee<U.length;ee++)if(!T.classList.contains(U[ee]))return!1;return!0},Vn=(T,A,U)=>{if(((T,A)=>{h(T.classList).forEach(U=>{!Object.values(le).includes(U)&&!Object.values(Te).includes(U)&&!Object.values(A.showClass).includes(U)&&T.classList.remove(U)})})(T,A),A.customClass&&A.customClass[U]){if("string"!=typeof A.customClass[U]&&!A.customClass[U].forEach)return Z("Invalid type of customClass.".concat(U,'! Expected string or iterable object, got "').concat(typeof A.customClass[U],'"'));Mt(T,A.customClass[U])}},Ot=(T,A)=>{if(!A)return null;switch(A){case"select":case"textarea":case"file":return T.querySelector(".".concat(le.popup," > .").concat(le[A]));case"checkbox":return T.querySelector(".".concat(le.popup," > .").concat(le.checkbox," input"));case"radio":return T.querySelector(".".concat(le.popup," > .").concat(le.radio," input:checked"))||T.querySelector(".".concat(le.popup," > .").concat(le.radio," input:first-child"));case"range":return T.querySelector(".".concat(le.popup," > .").concat(le.range," input"));default:return T.querySelector(".".concat(le.popup," > .").concat(le.input))}},vr=T=>{if(T.focus(),"file"!==T.type){const A=T.value;T.value="",T.value=A}},br=(T,A,U)=>{!T||!A||("string"==typeof A&&(A=A.split(/\s+/).filter(Boolean)),A.forEach(ee=>{Array.isArray(T)?T.forEach(Ke=>{U?Ke.classList.add(ee):Ke.classList.remove(ee)}):U?T.classList.add(ee):T.classList.remove(ee)}))},Mt=(T,A)=>{br(T,A,!0)},jn=(T,A)=>{br(T,A,!1)},ji=(T,A)=>{const U=h(T.childNodes);for(let ee=0;ee<U.length;ee++)if(At(U[ee],A))return U[ee]},Hi=(T,A,U)=>{U==="".concat(parseInt(U))&&(U=parseInt(U)),U||0===parseInt(U)?T.style[A]="number"==typeof U?"".concat(U,"px"):U:T.style.removeProperty(A)},zt=function(T){T.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},at=T=>{T.style.display="none"},qt=(T,A,U,ee)=>{const Ke=T.querySelector(A);Ke&&(Ke.style[U]=ee)},ui=(T,A,U)=>{A?zt(T,U):at(T)},ci=T=>!(!T||!(T.offsetWidth||T.offsetHeight||T.getClientRects().length)),oi=T=>T.scrollHeight>T.clientHeight,Kn=T=>{const A=window.getComputedStyle(T),U=parseFloat(A.getPropertyValue("animation-duration")||"0"),ee=parseFloat(A.getPropertyValue("transition-duration")||"0");return U>0||ee>0},Ri=function(T){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const U=pn();ci(U)&&(A&&(U.style.transition="none",U.style.width="100%"),setTimeout(()=>{U.style.transition="width ".concat(T/1e3,"s linear"),U.style.width="0%"},10))},Gi=()=>"undefined"==typeof window||"undefined"==typeof document,Qe={},It=T=>new Promise(A=>{if(!T)return A();const U=window.scrollX,ee=window.scrollY;Qe.restoreFocusTimeout=setTimeout(()=>{Qe.previousActiveElement&&Qe.previousActiveElement.focus?(Qe.previousActiveElement.focus(),Qe.previousActiveElement=null):document.body&&document.body.focus(),A()},100),window.scrollTo(U,ee)}),Wt='\n <div aria-labelledby="'.concat(le.title,'" aria-describedby="').concat(le["html-container"],'" class="').concat(le.popup,'" tabindex="-1">\n   <button type="button" class="').concat(le.close,'"></button>\n   <ul class="').concat(le["progress-steps"],'"></ul>\n   <div class="').concat(le.icon,'"></div>\n   <img class="').concat(le.image,'" />\n   <h2 class="').concat(le.title,'" id="').concat(le.title,'"></h2>\n   <div class="').concat(le["html-container"],'" id="').concat(le["html-container"],'"></div>\n   <input class="').concat(le.input,'" />\n   <input type="file" class="').concat(le.file,'" />\n   <div class="').concat(le.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(le.select,'"></select>\n   <div class="').concat(le.radio,'"></div>\n   <label for="').concat(le.checkbox,'" class="').concat(le.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(le.label,'"></span>\n   </label>\n   <textarea class="').concat(le.textarea,'"></textarea>\n   <div class="').concat(le["validation-message"],'" id="').concat(le["validation-message"],'"></div>\n   <div class="').concat(le.actions,'">\n     <div class="').concat(le.loader,'"></div>\n     <button type="button" class="').concat(le.confirm,'"></button>\n     <button type="button" class="').concat(le.deny,'"></button>\n     <button type="button" class="').concat(le.cancel,'"></button>\n   </div>\n   <div class="').concat(le.footer,'"></div>\n   <div class="').concat(le["timer-progress-bar-container"],'">\n     <div class="').concat(le["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Yt=()=>{Qe.currentInstance.resetValidationMessage()},ye=T=>{const A=(()=>{const T=fe();return!!T&&(T.remove(),jn([document.documentElement,document.body],[le["no-backdrop"],le["toast-shown"],le["has-column"]]),!0)})();if(Gi())return void me("SweetAlert2 requires document to initialize");const U=document.createElement("div");U.className=le.container,A&&Mt(U,le["no-transition"]),ti(U,Wt);const ee=(T=>"string"==typeof T?document.querySelector(T):T)(T.target);ee.appendChild(U),(T=>{const A=pe();A.setAttribute("role",T.toast?"alert":"dialog"),A.setAttribute("aria-live",T.toast?"polite":"assertive"),T.toast||A.setAttribute("aria-modal","true")})(T),(T=>{"rtl"===window.getComputedStyle(T).direction&&Mt(fe(),le.rtl)})(ee),(()=>{const T=pe(),A=ji(T,le.input),U=ji(T,le.file),ee=T.querySelector(".".concat(le.range," input")),Ke=T.querySelector(".".concat(le.range," output")),kt=ji(T,le.select),en=T.querySelector(".".concat(le.checkbox," input")),fi=ji(T,le.textarea);A.oninput=Yt,U.onchange=Yt,kt.onchange=Yt,en.onchange=Yt,fi.oninput=Yt,ee.oninput=()=>{Yt(),Ke.value=ee.value},ee.onchange=()=>{Yt(),ee.nextSibling.value=ee.value}})()},ft=(T,A)=>{T instanceof HTMLElement?A.appendChild(T):"object"==typeof T?Ut(T,A):T&&ti(A,T)},Ut=(T,A)=>{T.jquery?Sn(A,T):ti(A,T.toString())},Sn=(T,A)=>{if(T.textContent="",0 in A)for(let U=0;U in A;U++)T.appendChild(A[U].cloneNode(!0));else T.appendChild(A.cloneNode(!0))},wi=(()=>{if(Gi())return!1;const T=document.createElement("div"),A={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const U in A)if(Object.prototype.hasOwnProperty.call(A,U)&&void 0!==T.style[U])return A[U];return!1})(),Ie=(T,A)=>{const U=Zi(),ee=Ai();A.showConfirmButton||A.showDenyButton||A.showCancelButton?zt(U):at(U),Vn(U,A,"actions"),function on(T,A,U){const ee=Tt(),Ke=Qt(),kt=ln();Ei(ee,"confirm",U),Ei(Ke,"deny",U),Ei(kt,"cancel",U),function En(T,A,U,ee){if(!ee.buttonsStyling)return jn([T,A,U],le.styled);Mt([T,A,U],le.styled),ee.confirmButtonColor&&(T.style.backgroundColor=ee.confirmButtonColor,Mt(T,le["default-outline"])),ee.denyButtonColor&&(A.style.backgroundColor=ee.denyButtonColor,Mt(A,le["default-outline"])),ee.cancelButtonColor&&(U.style.backgroundColor=ee.cancelButtonColor,Mt(U,le["default-outline"]))}(ee,Ke,kt,U),U.reverseButtons&&(U.toast?(T.insertBefore(kt,ee),T.insertBefore(Ke,ee)):(T.insertBefore(kt,A),T.insertBefore(Ke,A),T.insertBefore(ee,A)))}(U,ee,A),ti(ee,A.loaderHtml),Vn(ee,A,"loader")};function Ei(T,A,U){ui(T,U["show".concat(I(A),"Button")],"inline-block"),ti(T,U["".concat(A,"ButtonText")]),T.setAttribute("aria-label",U["".concat(A,"ButtonAriaLabel")]),T.className=le[A],Vn(T,U,"".concat(A,"Button")),Mt(T,U["".concat(A,"ButtonClass")])}const $i=(T,A)=>{const U=fe();!U||(function ai(T,A){"string"==typeof A?T.style.background=A:A||Mt([document.documentElement,document.body],le["no-backdrop"])}(U,A.backdrop),function Yi(T,A){A in le?Mt(T,le[A]):(Z('The "position" parameter is not valid, defaulting to "center"'),Mt(T,le.center))}(U,A.position),function Ji(T,A){if(A&&"string"==typeof A){const U="grow-".concat(A);U in le&&Mt(T,le[U])}}(U,A.grow),Vn(U,A,"container"))};var Vt={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const xs=["input","file","range","select","radio","checkbox","textarea"],qe=T=>{if(!Xt[T.input])return me('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(T.input,'"'));const A=Ci(T.input),U=Xt[T.input](A,T);zt(U),setTimeout(()=>{vr(U)})},zn=(T,A)=>{const U=Ot(pe(),T);if(U){(T=>{for(let A=0;A<T.attributes.length;A++){const U=T.attributes[A].name;["type","value","style"].includes(U)||T.removeAttribute(U)}})(U);for(const ee in A)U.setAttribute(ee,A[ee])}},Wi=T=>{const A=Ci(T.input);T.customClass&&Mt(A,T.customClass.input)},Wr=(T,A)=>{(!T.placeholder||A.inputPlaceholder)&&(T.placeholder=A.inputPlaceholder)},li=(T,A,U)=>{if(U.inputLabel){T.id=le.input;const ee=document.createElement("label"),Ke=le["input-label"];ee.setAttribute("for",T.id),ee.className=Ke,Mt(ee,U.customClass.inputLabel),ee.innerText=U.inputLabel,A.insertAdjacentElement("beforebegin",ee)}},Ci=T=>{const A=le[T]?le[T]:le.input;return ji(pe(),A)},Xt={};Xt.text=Xt.email=Xt.password=Xt.number=Xt.tel=Xt.url=(T,A)=>("string"==typeof A.inputValue||"number"==typeof A.inputValue?T.value=A.inputValue:ie(A.inputValue)||Z('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof A.inputValue,'"')),li(T,T,A),Wr(T,A),T.type=A.input,T),Xt.file=(T,A)=>(li(T,T,A),Wr(T,A),T),Xt.range=(T,A)=>{const U=T.querySelector("input"),ee=T.querySelector("output");return U.value=A.inputValue,U.type=A.input,ee.value=A.inputValue,li(U,T,A),T},Xt.select=(T,A)=>{if(T.textContent="",A.inputPlaceholder){const U=document.createElement("option");ti(U,A.inputPlaceholder),U.value="",U.disabled=!0,U.selected=!0,T.appendChild(U)}return li(T,T,A),T},Xt.radio=T=>(T.textContent="",T),Xt.checkbox=(T,A)=>{const U=Ot(pe(),"checkbox");U.value="1",U.id=le.checkbox,U.checked=Boolean(A.inputValue);const ee=T.querySelector("span");return ti(ee,A.inputPlaceholder),T},Xt.textarea=(T,A)=>{T.value=A.inputValue,Wr(T,A),li(T,T,A);return setTimeout(()=>{if("MutationObserver"in window){const ee=parseInt(window.getComputedStyle(pe()).width);new MutationObserver(()=>{const kt=T.offsetWidth+(ee=>parseInt(window.getComputedStyle(ee).marginLeft)+parseInt(window.getComputedStyle(ee).marginRight))(T);pe().style.width=kt>ee?"".concat(kt,"px"):null}).observe(T,{attributes:!0,attributeFilter:["style"]})}}),T};const ni=(T,A)=>{const U=Kt();Vn(U,A,"htmlContainer"),A.html?(ft(A.html,U),zt(U,"block")):A.text?(U.textContent=A.text,zt(U,"block")):at(U),((T,A)=>{const U=pe(),ee=Vt.innerParams.get(T),Ke=!ee||A.input!==ee.input;xs.forEach(kt=>{const en=le[kt],fi=ji(U,en);zn(kt,A.inputAttributes),fi.className=en,Ke&&at(fi)}),A.input&&(Ke&&qe(A),Wi(A))})(T,A)},zr=(T,A)=>{for(const U in Te)A.icon!==U&&jn(T,Te[U]);Mt(T,Te[A.icon]),lr(T,A),Ms(),Vn(T,A,"icon")},Ms=()=>{const T=pe(),A=window.getComputedStyle(T).getPropertyValue("background-color"),U=T.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ee=0;ee<U.length;ee++)U[ee].style.backgroundColor=A},os=(T,A)=>{T.textContent="",ti(T,A.iconHtml?Er(A.iconHtml):"success"===A.icon?'\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n':"error"===A.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Er({question:"?",warning:"!",info:"i"}[A.icon]))},lr=(T,A)=>{if(A.iconColor){T.style.color=A.iconColor,T.style.borderColor=A.iconColor;for(const U of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])qt(T,U,"backgroundColor",A.iconColor);qt(T,".swal2-success-ring","borderColor",A.iconColor)}},Er=T=>'<div class="'.concat(le["icon-content"],'">').concat(T,"</div>"),Nr=(T,A)=>{const U=Wn();if(!A.progressSteps||0===A.progressSteps.length)return at(U);zt(U),U.textContent="",A.currentProgressStep>=A.progressSteps.length&&Z("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),A.progressSteps.forEach((ee,Ke)=>{const kt=(T=>{const A=document.createElement("li");return Mt(A,le["progress-step"]),ti(A,T),A})(ee);if(U.appendChild(kt),Ke===A.currentProgressStep&&Mt(kt,le["active-progress-step"]),Ke!==A.progressSteps.length-1){const en=(T=>{const A=document.createElement("li");return Mt(A,le["progress-step-line"]),T.progressStepsDistance&&(A.style.width=T.progressStepsDistance),A})(A);U.appendChild(en)}})},js=(T,A)=>{T.className="".concat(le.popup," ").concat(ci(T)?A.showClass.popup:""),A.toast?(Mt([document.documentElement,document.body],le["toast-shown"]),Mt(T,le.toast)):Mt(T,le.modal),Vn(T,A,"popup"),"string"==typeof A.customClass&&Mt(T,A.customClass),A.icon&&Mt(T,le["icon-".concat(A.icon)])},Vo=(T,A)=>{((T,A)=>{const U=fe(),ee=pe();A.toast?(Hi(U,"width",A.width),ee.style.width="100%",ee.insertBefore(Ai(),et())):Hi(ee,"width",A.width),Hi(ee,"padding",A.padding),A.color&&(ee.style.color=A.color),A.background&&(ee.style.background=A.background),at(yt()),js(ee,A)})(0,A),$i(0,A),Nr(0,A),((T,A)=>{const U=Vt.innerParams.get(T),ee=et();U&&A.icon===U.icon?(os(ee,A),zr(ee,A)):A.icon||A.iconHtml?A.icon&&-1===Object.keys(Te).indexOf(A.icon)?(me('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(A.icon,'"')),at(ee)):(zt(ee),os(ee,A),zr(ee,A),Mt(ee,A.showClass.icon)):at(ee)})(T,A),((T,A)=>{const U=In();if(!A.imageUrl)return at(U);zt(U,""),U.setAttribute("src",A.imageUrl),U.setAttribute("alt",A.imageAlt),Hi(U,"width",A.imageWidth),Hi(U,"height",A.imageHeight),U.className=le.image,Vn(U,A,"image")})(0,A),((T,A)=>{const U=Me();ui(U,A.title||A.titleText,"block"),A.title&&ft(A.title,U),A.titleText&&(U.innerText=A.titleText),Vn(U,A,"title")})(0,A),((T,A)=>{const U=Ni();ti(U,A.closeButtonHtml),Vn(U,A,"closeButton"),ui(U,A.showCloseButton),U.setAttribute("aria-label",A.closeButtonAriaLabel)})(0,A),ni(T,A),Ie(0,A),((T,A)=>{const U=Mn();ui(U,A.footer),A.footer&&ft(A.footer,U),Vn(U,A,"footer")})(0,A),"function"==typeof A.didRender&&A.didRender(pe())},Pi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Hs=()=>{h(document.body.children).forEach(A=>{A.hasAttribute("data-previous-aria-hidden")?(A.setAttribute("aria-hidden",A.getAttribute("data-previous-aria-hidden")),A.removeAttribute("data-previous-aria-hidden")):A.removeAttribute("aria-hidden")})},Di=["swal-title","swal-html","swal-footer"],de=T=>{const A={};return h(T.querySelectorAll("swal-param")).forEach(U=>{Mr(U,["name","value"]);const ee=U.getAttribute("name"),Ke=U.getAttribute("value");"boolean"==typeof he[ee]&&"false"===Ke&&(A[ee]=!1),"object"==typeof he[ee]&&(A[ee]=JSON.parse(Ke))}),A},_s=T=>{const A={};return h(T.querySelectorAll("swal-button")).forEach(U=>{Mr(U,["type","color","aria-label"]);const ee=U.getAttribute("type");A["".concat(ee,"ButtonText")]=U.innerHTML,A["show".concat(I(ee),"Button")]=!0,U.hasAttribute("color")&&(A["".concat(ee,"ButtonColor")]=U.getAttribute("color")),U.hasAttribute("aria-label")&&(A["".concat(ee,"ButtonAriaLabel")]=U.getAttribute("aria-label"))}),A},xr=T=>{const A={},U=T.querySelector("swal-image");return U&&(Mr(U,["src","width","height","alt"]),U.hasAttribute("src")&&(A.imageUrl=U.getAttribute("src")),U.hasAttribute("width")&&(A.imageWidth=U.getAttribute("width")),U.hasAttribute("height")&&(A.imageHeight=U.getAttribute("height")),U.hasAttribute("alt")&&(A.imageAlt=U.getAttribute("alt"))),A},kl=T=>{const A={},U=T.querySelector("swal-icon");return U&&(Mr(U,["type","color"]),U.hasAttribute("type")&&(A.icon=U.getAttribute("type")),U.hasAttribute("color")&&(A.iconColor=U.getAttribute("color")),A.iconHtml=U.innerHTML),A},oa=T=>{const A={},U=T.querySelector("swal-input");U&&(Mr(U,["type","label","placeholder","value"]),A.input=U.getAttribute("type")||"text",U.hasAttribute("label")&&(A.inputLabel=U.getAttribute("label")),U.hasAttribute("placeholder")&&(A.inputPlaceholder=U.getAttribute("placeholder")),U.hasAttribute("value")&&(A.inputValue=U.getAttribute("value")));const ee=T.querySelectorAll("swal-input-option");return ee.length&&(A.inputOptions={},h(ee).forEach(Ke=>{Mr(Ke,["value"]);const kt=Ke.getAttribute("value");A.inputOptions[kt]=Ke.innerHTML})),A},pi=(T,A)=>{const U={};for(const ee in A){const Ke=A[ee],kt=T.querySelector(Ke);kt&&(Mr(kt,[]),U[Ke.replace(/^swal-/,"")]=kt.innerHTML.trim())}return U},Ii=T=>{const A=Di.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);h(T.children).forEach(U=>{const ee=U.tagName.toLowerCase();-1===A.indexOf(ee)&&Z("Unrecognized element <".concat(ee,">"))})},Mr=(T,A)=>{h(T.attributes).forEach(U=>{-1===A.indexOf(U.name)&&Z(['Unrecognized attribute "'.concat(U.name,'" on <').concat(T.tagName.toLowerCase(),">."),"".concat(A.length?"Allowed attributes are: ".concat(A.join(", ")):"To set the value, use HTML within the element.")])})};var Eo={email:(T,A)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(T)?Promise.resolve():Promise.resolve(A||"Invalid email address"),url:(T,A)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(T)?Promise.resolve():Promise.resolve(A||"Invalid URL")};function aa(T){(function Ra(T){T.inputValidator||Object.keys(Eo).forEach(A=>{T.input===A&&(T.inputValidator=Eo[A])})})(T),T.showLoaderOnConfirm&&!T.preConfirm&&Z("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Pl(T){(!T.target||"string"==typeof T.target&&!document.querySelector(T.target)||"string"!=typeof T.target&&!T.target.appendChild)&&(Z('Target parameter is not valid, defaulting to "body"'),T.target="body")}(T),"string"==typeof T.title&&(T.title=T.title.split("\n").join("<br />")),ye(T)}class Os{constructor(A,U){this.callback=A,this.remaining=U,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(A){const U=this.running;return U&&this.stop(),this.remaining+=A,U&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const oc=()=>{null===ar.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(ar.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(ar.previousBodyPadding+(()=>{const T=document.createElement("div");T.className=le["scrollbar-measure"],document.body.appendChild(T);const A=T.getBoundingClientRect().width-T.clientWidth;return document.body.removeChild(T),A})(),"px"))},la=()=>{const T=navigator.userAgent,A=!!T.match(/iPad/i)||!!T.match(/iPhone/i),U=!!T.match(/WebKit/i);A&&U&&!T.match(/CriOS/i)&&pe().scrollHeight>window.innerHeight-44&&(fe().style.paddingBottom="".concat(44,"px"))},ri=()=>{const T=fe();let A;T.ontouchstart=U=>{A=Zr(U)},T.ontouchmove=U=>{A&&(U.preventDefault(),U.stopPropagation())}},Zr=T=>{const A=T.target,U=fe();return!(gi(T)||to(T)||A!==U&&(oi(U)||"INPUT"===A.tagName||"TEXTAREA"===A.tagName||oi(Kt())&&Kt().contains(A)))},gi=T=>T.touches&&T.touches.length&&"stylus"===T.touches[0].touchType,to=T=>T.touches&&T.touches.length>1,Uo=T=>{const A=fe(),U=pe();"function"==typeof T.willOpen&&T.willOpen(U);const Ke=window.getComputedStyle(document.body).overflowY;qi(A,U,T),setTimeout(()=>{as(A,U)},10),Ui()&&(Rs(A,T.scrollbarPadding,Ke),h(document.body.children).forEach(A=>{A===fe()||A.contains(fe())||(A.hasAttribute("aria-hidden")&&A.setAttribute("data-previous-aria-hidden",A.getAttribute("aria-hidden")),A.setAttribute("aria-hidden","true"))})),!or()&&!Qe.previousActiveElement&&(Qe.previousActiveElement=document.activeElement),"function"==typeof T.didOpen&&setTimeout(()=>T.didOpen(U)),jn(A,le["no-transition"])},$s=T=>{const A=pe();if(T.target!==A)return;const U=fe();A.removeEventListener(wi,$s),U.style.overflowY="auto"},as=(T,A)=>{wi&&Kn(A)?(T.style.overflowY="hidden",A.addEventListener(wi,$s)):T.style.overflowY="auto"},Rs=(T,A,U)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!At(document.body,le.iosfix)){const A=document.body.scrollTop;document.body.style.top="".concat(-1*A,"px"),Mt(document.body,le.iosfix),ri(),la()}})(),A&&"hidden"!==U&&oc(),setTimeout(()=>{T.scrollTop=0})},qi=(T,A,U)=>{Mt(T,U.showClass.backdrop),A.style.setProperty("opacity","0","important"),zt(A,"grid"),setTimeout(()=>{Mt(A,U.showClass.popup),A.style.removeProperty("opacity")},10),Mt([document.documentElement,document.body],le.shown),U.heightAuto&&U.backdrop&&!U.toast&&Mt([document.documentElement,document.body],le["height-auto"])},Kr=T=>{let A=pe();A||new Mi,A=pe();const U=Ai();or()?at(et()):jo(A,T),zt(U),A.setAttribute("data-loading",!0),A.setAttribute("aria-busy",!0),A.focus()},jo=(T,A)=>{const U=Zi(),ee=Ai();!A&&ci(Tt())&&(A=Tt()),zt(U),A&&(at(A),ee.setAttribute("data-button-to-replace",A.className)),ee.parentNode.insertBefore(ee,A),Mt([T,U],le.loading)},Ho=T=>T.checked?1:0,Co=T=>T.checked?T.value:null,Go=T=>T.files.length?null!==T.getAttribute("multiple")?T.files:T.files[0]:null,Qi=(T,A)=>{const U=pe(),ee=Ke=>ls[A.input](U,Yr(Ke),A);Ce(A.inputOptions)||ie(A.inputOptions)?(Kr(Tt()),ne(A.inputOptions).then(Ke=>{T.hideLoading(),ee(Ke)})):"object"==typeof A.inputOptions?ee(A.inputOptions):me("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof A.inputOptions))},Do=(T,A)=>{const U=T.getInput();at(U),ne(A.inputValue).then(ee=>{U.value="number"===A.input?parseFloat(ee)||0:"".concat(ee),zt(U),U.focus(),T.hideLoading()}).catch(ee=>{me("Error in inputValue promise: ".concat(ee)),U.value="",zt(U),U.focus(),T.hideLoading()})},ls={select:(T,A,U)=>{const ee=ji(T,le.select),Ke=(kt,en,fi)=>{const ot=document.createElement("option");ot.value=fi,ti(ot,en),ot.selected=bs(fi,U.inputValue),kt.appendChild(ot)};A.forEach(kt=>{const en=kt[0],fi=kt[1];if(Array.isArray(fi)){const ot=document.createElement("optgroup");ot.label=en,ot.disabled=!1,ee.appendChild(ot),fi.forEach(Ds=>Ke(ot,Ds[1],Ds[0]))}else Ke(ee,fi,en)}),ee.focus()},radio:(T,A,U)=>{const ee=ji(T,le.radio);A.forEach(kt=>{const en=kt[0],fi=kt[1],ot=document.createElement("input"),Ds=document.createElement("label");ot.type="radio",ot.name=le.radio,ot.value=en,bs(en,U.inputValue)&&(ot.checked=!0);const Gt=document.createElement("span");ti(Gt,fi),Gt.className=le.label,Ds.appendChild(ot),Ds.appendChild(Gt),ee.appendChild(Ds)});const Ke=ee.querySelectorAll("input");Ke.length&&Ke[0].focus()}},Yr=T=>{const A=[];return"undefined"!=typeof Map&&T instanceof Map?T.forEach((U,ee)=>{let Ke=U;"object"==typeof Ke&&(Ke=Yr(Ke)),A.push([ee,Ke])}):Object.keys(T).forEach(U=>{let ee=T[U];"object"==typeof ee&&(ee=Yr(ee)),A.push([U,ee])}),A},bs=(T,A)=>A&&A.toString()===T.toString();function Hn(){const T=Vt.innerParams.get(this);if(!T)return;const A=Vt.domCache.get(this);at(A.loader),or()?T.icon&&zt(et()):R(A),jn([A.popup,A.actions],le.loading),A.popup.removeAttribute("aria-busy"),A.popup.removeAttribute("data-loading"),A.confirmButton.disabled=!1,A.denyButton.disabled=!1,A.cancelButton.disabled=!1}const R=T=>{const A=T.popup.getElementsByClassName(T.loader.getAttribute("data-button-to-replace"));A.length?zt(A[0],"inline-block"):!ci(Tt())&&!ci(Qt())&&!ci(ln())&&at(T.actions)};var O={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const oe=()=>Tt()&&Tt().click(),lt=T=>{T.keydownTarget&&T.keydownHandlerAdded&&(T.keydownTarget.removeEventListener("keydown",T.keydownHandler,{capture:T.keydownListenerCapture}),T.keydownHandlerAdded=!1)},yn=(T,A,U)=>{const ee=ss();if(ee.length)return(A+=U)===ee.length?A=0:-1===A&&(A=ee.length-1),ee[A].focus();pe().focus()},an=["ArrowRight","ArrowDown"],vn=["ArrowLeft","ArrowUp"],hi=(T,A,U)=>{const ee=Vt.innerParams.get(T);!ee||A.isComposing||229===A.keyCode||(ee.stopKeydownPropagation&&A.stopPropagation(),"Enter"===A.key?Jn(T,A,ee):"Tab"===A.key?Pn(A,ee):[...an,...vn].includes(A.key)?Or(A.key):"Escape"===A.key&&Xi(A,ee,U))},Jn=(T,A,U)=>{if(be(U.allowEnterKey)&&A.target&&T.getInput()&&A.target.outerHTML===T.getInput().outerHTML){if(["textarea","file"].includes(U.input))return;oe(),A.preventDefault()}},Pn=(T,A)=>{const U=T.target,ee=ss();let Ke=-1;for(let kt=0;kt<ee.length;kt++)if(U===ee[kt]){Ke=kt;break}yn(0,Ke,T.shiftKey?-1:1),T.stopPropagation(),T.preventDefault()},Or=T=>{if(![Tt(),Qt(),ln()].includes(document.activeElement))return;const Ke=an.includes(T)?"nextElementSibling":"previousElementSibling";let kt=document.activeElement;for(let en=0;en<Zi().children.length;en++){if(kt=kt[Ke],!kt)return;if(ci(kt)&&kt instanceof HTMLButtonElement)break}kt instanceof HTMLButtonElement&&kt.focus()},Xi=(T,A,U)=>{be(A.allowEscapeKey)&&(T.preventDefault(),U(Pi.esc))};function Rt(T,A,U,ee){or()?ca(T,ee):(It(U).then(()=>ca(T,ee)),lt(Qe)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(A.setAttribute("style","display:none !important"),A.removeAttribute("class"),A.innerHTML=""):A.remove(),Ui()&&(null!==ar.previousBodyPadding&&(document.body.style.paddingRight="".concat(ar.previousBodyPadding,"px"),ar.previousBodyPadding=null),(()=>{if(At(document.body,le.iosfix)){const T=parseInt(document.body.style.top,10);jn(document.body,le.iosfix),document.body.style.top="",document.body.scrollTop=-1*T}})(),Hs()),function Jr(){jn([document.documentElement,document.body],[le.shown,le["height-auto"],le["no-backdrop"],le["toast-shown"]])}()}function ks(T){T=nl(T);const A=O.swalPromiseResolve.get(this),U=Qr(this);this.isAwaitingPromise()?T.isDismissed||(ws(this),A(T)):U&&A(T)}const Qr=T=>{const A=pe();if(!A)return!1;const U=Vt.innerParams.get(T);if(!U||At(A,U.hideClass.popup))return!1;jn(A,U.showClass.popup),Mt(A,U.hideClass.popup);const ee=fe();return jn(ee,U.showClass.backdrop),Mt(ee,U.hideClass.backdrop),Xe(T,A,U),!0};const ws=T=>{T.isAwaitingPromise()&&(Vt.awaitingPromise.delete(T),Vt.innerParams.get(T)||T._destroy())},nl=T=>void 0===T?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},T),Xe=(T,A,U)=>{const ee=fe(),Ke=wi&&Kn(A);"function"==typeof U.willClose&&U.willClose(A),Ke?hn(T,A,ee,U.returnFocus,U.didClose):Rt(T,ee,U.returnFocus,U.didClose)},hn=(T,A,U,ee,Ke)=>{Qe.swalCloseEventFinishedCallback=Rt.bind(null,T,U,ee,Ke),A.addEventListener(wi,function(kt){kt.target===A&&(Qe.swalCloseEventFinishedCallback(),delete Qe.swalCloseEventFinishedCallback)})},ca=(T,A)=>{setTimeout(()=>{"function"==typeof A&&A.bind(T.params)(),T._destroy()})};function mi(T,A,U){const ee=Vt.domCache.get(T);A.forEach(Ke=>{ee[Ke].disabled=U})}function ua(T,A){if(!T)return!1;if("radio"===T.type){const ee=T.parentNode.parentNode.querySelectorAll("input");for(let Ke=0;Ke<ee.length;Ke++)ee[Ke].disabled=A}else T.disabled=A}const Cr=T=>{const A={};return Object.keys(T).forEach(U=>{Re(U)?A[U]=T[U]:Z('Invalid parameter to update: "'.concat(U,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))}),A};const ha=T=>{Ps(T),delete T.params,delete Qe.keydownHandler,delete Qe.keydownTarget,delete Qe.currentInstance},Ps=T=>{T.isAwaitingPromise()?(Dr(Vt,T),Vt.awaitingPromise.set(T,!0)):(Dr(O,T),Dr(Vt,T))},Dr=(T,A)=>{for(const U in T)T[U].delete(A)};var La=Object.freeze({hideLoading:Hn,disableLoading:Hn,getInput:function G(T){const A=Vt.innerParams.get(T||this),U=Vt.domCache.get(T||this);return U?Ot(U.popup,A.input):null},close:ks,isAwaitingPromise:function no(){return!!Vt.awaitingPromise.get(this)},rejectPromise:function ka(T){const A=O.swalPromiseReject.get(this);ws(this),A&&A(T)},handleAwaitingPromise:ws,closePopup:ks,closeModal:ks,closeToast:ks,enableButtons:function $o(){mi(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function cs(){mi(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Wo(){return ua(this.getInput(),!1)},disableInput:function Pa(){return ua(this.getInput(),!0)},showValidationMessage:function il(T){const A=Vt.domCache.get(this),U=Vt.innerParams.get(this);ti(A.validationMessage,T),A.validationMessage.className=le["validation-message"],U.customClass&&U.customClass.validationMessage&&Mt(A.validationMessage,U.customClass.validationMessage),zt(A.validationMessage);const ee=this.getInput();ee&&(ee.setAttribute("aria-invalid",!0),ee.setAttribute("aria-describedby",le["validation-message"]),vr(ee),Mt(ee,le.inputerror))},resetValidationMessage:function Fa(){const T=Vt.domCache.get(this);T.validationMessage&&at(T.validationMessage);const A=this.getInput();A&&(A.removeAttribute("aria-invalid"),A.removeAttribute("aria-describedby"),jn(A,le.inputerror))},getProgressSteps:function da(){return Vt.domCache.get(this).progressSteps},update:function io(T){const A=pe(),U=Vt.innerParams.get(this);if(!A||At(A,U.hideClass.popup))return Z("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ee=Cr(T),Ke=Object.assign({},U,ee);Vo(this,Ke),Vt.innerParams.set(this,Ke),Object.defineProperties(this,{params:{value:Object.assign({},this.params,T),writable:!1,enumerable:!0}})},_destroy:function Xr(){const T=Vt.domCache.get(this),A=Vt.innerParams.get(this);A?(T.popup&&Qe.swalCloseEventFinishedCallback&&(Qe.swalCloseEventFinishedCallback(),delete Qe.swalCloseEventFinishedCallback),Qe.deferDisposalTimer&&(clearTimeout(Qe.deferDisposalTimer),delete Qe.deferDisposalTimer),"function"==typeof A.didDestroy&&A.didDestroy(),ha(this)):Ps(this)}});const zo=(T,A)=>{const U=Vt.innerParams.get(T);if(!U.input)return me('The "input" parameter is needed to be set when using returnInputValueOn'.concat(I(A)));const ee=((T,A)=>{const U=T.getInput();if(!U)return null;switch(A.input){case"checkbox":return Ho(U);case"radio":return Co(U);case"file":return Go(U);default:return A.inputAutoTrim?U.value.trim():U.value}})(T,U);U.inputValidator?Io(T,ee,A):T.getInput().checkValidity()?"deny"===A?pa(T,ee):To(T,ee):(T.enableButtons(),T.showValidationMessage(U.validationMessage))},Io=(T,A,U)=>{const ee=Vt.innerParams.get(T);T.disableInput(),Promise.resolve().then(()=>ne(ee.inputValidator(A,ee.validationMessage))).then(kt=>{T.enableButtons(),T.enableInput(),kt?T.showValidationMessage(kt):"deny"===U?pa(T,A):To(T,A)})},pa=(T,A)=>{const U=Vt.innerParams.get(T||void 0);U.showLoaderOnDeny&&Kr(Qt()),U.preDeny?(Vt.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>ne(U.preDeny(A,U.validationMessage))).then(Ke=>{!1===Ke?(T.hideLoading(),ws(T)):T.closePopup({isDenied:!0,value:void 0===Ke?A:Ke})}).catch(Ke=>ga(T||void 0,Ke))):T.closePopup({isDenied:!0,value:A})},Ba=(T,A)=>{T.closePopup({isConfirmed:!0,value:A})},ga=(T,A)=>{T.rejectPromise(A)},To=(T,A)=>{const U=Vt.innerParams.get(T||void 0);U.showLoaderOnConfirm&&Kr(),U.preConfirm?(T.resetValidationMessage(),Vt.awaitingPromise.set(T||void 0,!0),Promise.resolve().then(()=>ne(U.preConfirm(A,U.validationMessage))).then(Ke=>{ci(yt())||!1===Ke?(T.hideLoading(),ws(T)):Ba(T,void 0===Ke?A:Ke)}).catch(Ke=>ga(T||void 0,Ke))):Ba(T,A)},qo=(T,A,U)=>{A.popup.onclick=()=>{const ee=Vt.innerParams.get(T);ee&&(Ws(ee)||ee.timer||ee.input)||U(Pi.close)}},Ws=T=>T.showConfirmButton||T.showDenyButton||T.showCancelButton||T.showCloseButton;let ma=!1;const _a=T=>{T.popup.onmousedown=()=>{T.container.onmouseup=function(A){T.container.onmouseup=void 0,A.target===T.container&&(ma=!0)}}},So=T=>{T.container.onmousedown=()=>{T.popup.onmouseup=function(A){T.popup.onmouseup=void 0,(A.target===T.popup||T.popup.contains(A.target))&&(ma=!0)}}},Fl=(T,A,U)=>{A.container.onclick=ee=>{const Ke=Vt.innerParams.get(T);ma?ma=!1:ee.target===A.container&&be(Ke.allowOutsideClick)&&U(Pi.backdrop)}},cr=T=>T instanceof Element||(T=>"object"==typeof T&&T.jquery)(T);const Zc=()=>{if(Qe.timeout)return(()=>{const T=pn(),A=parseInt(window.getComputedStyle(T).width);T.style.removeProperty("transition"),T.style.width="100%";const ee=A/parseInt(window.getComputedStyle(T).width)*100;T.style.removeProperty("transition"),T.style.width="".concat(ee,"%")})(),Qe.timeout.stop()},ur=()=>{if(Qe.timeout){const T=Qe.timeout.start();return Ri(T),T}};let zs=!1;const es={};const Ua=T=>{for(let A=T.target;A&&A!==document;A=A.parentNode)for(const U in es){const ee=A.getAttribute(U);if(ee)return void es[U].fire({template:ee})}};var al=Object.freeze({isValidParameter:nt,isUpdatableParameter:Re,isDeprecatedParameter:Ue,argsToParams:T=>{const A={};return"object"!=typeof T[0]||cr(T[0])?["title","html","icon"].forEach((U,ee)=>{const Ke=T[ee];"string"==typeof Ke||cr(Ke)?A[U]=Ke:void 0!==Ke&&me("Unexpected type of ".concat(U,'! Expected "string" or "Element", got ').concat(typeof Ke))}):Object.assign(A,T[0]),A},isVisible:()=>ci(pe()),clickConfirm:oe,clickDeny:()=>Qt()&&Qt().click(),clickCancel:()=>ln()&&ln().click(),getContainer:fe,getPopup:pe,getTitle:Me,getHtmlContainer:Kt,getImage:In,getIcon:et,getInputLabel:()=>ke(le["input-label"]),getCloseButton:Ni,getActions:Zi,getConfirmButton:Tt,getDenyButton:Qt,getCancelButton:ln,getLoader:Ai,getFooter:Mn,getTimerProgressBar:pn,getFocusableElements:ss,getValidationMessage:yt,isLoading:()=>pe().hasAttribute("data-loading"),fire:function Li(){const T=this;for(var A=arguments.length,U=new Array(A),ee=0;ee<A;ee++)U[ee]=arguments[ee];return new T(...U)},mixin:function sl(T){return class A extends(this){_main(ee,Ke){return super._main(ee,Object.assign({},T,Ke))}}},showLoading:Kr,enableLoading:Kr,getTimerLeft:()=>Qe.timeout&&Qe.timeout.getTimerLeft(),stopTimer:Zc,resumeTimer:ur,toggleTimer:()=>{const T=Qe.timeout;return T&&(T.running?Zc():ur())},increaseTimer:T=>{if(Qe.timeout){const A=Qe.timeout.increase(T);return Ri(A,!0),A}},isTimerRunning:()=>Qe.timeout&&Qe.timeout.isRunning(),bindClickHandler:function xi(){es[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,zs||(document.body.addEventListener("click",Ua),zs=!0)}});let ts;class Rr{constructor(){if("undefined"==typeof window)return;ts=this;for(var A=arguments.length,U=new Array(A),ee=0;ee<A;ee++)U[ee]=arguments[ee];const Ke=Object.freeze(this.constructor.argsToParams(U));Object.defineProperties(this,{params:{value:Ke,writable:!1,enumerable:!0,configurable:!0}});const kt=this._main(this.params);Vt.promise.set(this,kt)}_main(A){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(T=>{!T.backdrop&&T.allowOutsideClick&&Z('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const A in T)_t(A),T.toast&&dt(A),He(A)})(Object.assign({},U,A)),Qe.currentInstance&&(Qe.currentInstance._destroy(),Ui()&&Hs()),Qe.currentInstance=this;const ee=qs(A,U);aa(ee),Object.freeze(ee),Qe.timeout&&(Qe.timeout.stop(),delete Qe.timeout),clearTimeout(Qe.restoreFocusTimeout);const Ke=Ko(this);return Vo(this,ee),Vt.innerParams.set(this,ee),ya(this,Ke,ee)}then(A){return Vt.promise.get(this).then(A)}finally(A){return Vt.promise.get(this).finally(A)}}const ya=(T,A,U)=>new Promise((ee,Ke)=>{const kt=en=>{T.closePopup({isDismissed:!0,dismiss:en})};O.swalPromiseResolve.set(T,ee),O.swalPromiseReject.set(T,Ke),A.confirmButton.onclick=()=>(T=>{const A=Vt.innerParams.get(T);T.disableButtons(),A.input?zo(T,"confirm"):To(T,!0)})(T),A.denyButton.onclick=()=>(T=>{const A=Vt.innerParams.get(T);T.disableButtons(),A.returnInputValueOnDeny?zo(T,"deny"):pa(T,!1)})(T),A.cancelButton.onclick=()=>((T,A)=>{T.disableButtons(),A(Pi.cancel)})(T,kt),A.closeButton.onclick=()=>kt(Pi.close),((T,A,U)=>{Vt.innerParams.get(T).toast?qo(T,A,U):(_a(A),So(A),Fl(T,A,U))})(T,A,kt),((T,A,U,ee)=>{lt(A),U.toast||(A.keydownHandler=Ke=>hi(T,Ke,ee),A.keydownTarget=U.keydownListenerCapture?window:pe(),A.keydownListenerCapture=U.keydownListenerCapture,A.keydownTarget.addEventListener("keydown",A.keydownHandler,{capture:A.keydownListenerCapture}),A.keydownHandlerAdded=!0)})(T,Qe,U,kt),((T,A)=>{"select"===A.input||"radio"===A.input?Qi(T,A):["text","email","number","tel","textarea"].includes(A.input)&&(Ce(A.inputValue)||ie(A.inputValue))&&(Kr(Tt()),Do(T,A))})(T,U),Uo(U),Cs(Qe,U,kt),Ao(A,U),setTimeout(()=>{A.container.scrollTop=0})}),qs=(T,A)=>{const U=(T=>{const A="string"==typeof T.template?document.querySelector(T.template):T.template;if(!A)return{};const U=A.content;return Ii(U),Object.assign(de(U),_s(U),xr(U),kl(U),oa(U),pi(U,Di))})(T),ee=Object.assign({},he,A,U,T);return ee.showClass=Object.assign({},he.showClass,ee.showClass),ee.hideClass=Object.assign({},he.hideClass,ee.hideClass),ee},Ko=T=>{const A={popup:pe(),container:fe(),actions:Zi(),confirmButton:Tt(),denyButton:Qt(),cancelButton:ln(),loader:Ai(),closeButton:Ni(),validationMessage:yt(),progressSteps:Wn()};return Vt.domCache.set(T,A),A},Cs=(T,A,U)=>{const ee=pn();at(ee),A.timer&&(T.timeout=new Os(()=>{U("timer"),delete T.timeout},A.timer),A.timerProgressBar&&(zt(ee),Vn(ee,A,"timerProgressBar"),setTimeout(()=>{T.timeout&&T.timeout.running&&Ri(A.timer)})))},Ao=(T,A)=>{if(!A.toast){if(!be(A.allowEnterKey))return No();va(T,A)||yn(0,-1,1)}},va=(T,A)=>A.focusDeny&&ci(T.denyButton)?(T.denyButton.focus(),!0):A.focusCancel&&ci(T.cancelButton)?(T.cancelButton.focus(),!0):!(!A.focusConfirm||!ci(T.confirmButton)||(T.confirmButton.focus(),0)),No=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Rr.prototype,La),Object.assign(Rr,al),Object.keys(La).forEach(T=>{Rr[T]=function(){if(ts)return ts[T](...arguments)}}),Rr.DismissReason=Pi,Rr.version="11.4.8";const Mi=Rr;return Mi.default=Mi,Mi}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(xe,j){var I=xe.createElement("style");if(xe.getElementsByTagName("head")[0].appendChild(I),I.styleSheet)I.styleSheet.disabled||(I.styleSheet.cssText=j);else try{I.innerHTML=j}catch(h){I.innerText=j}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},1407:(bt,xe,j)=>{"use strict";var I=j(1048),h=j(9724);class Z extends I.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends Z{static makeCurrent(){(0,I.HT)(new me)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function we(){return ue=ue||document.querySelector("base"),ue?ue.getAttribute("href"):null}();return null==t?null:function be(n){De=De||document.createElement("a"),De.setAttribute("href",n);const e=De.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ue=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,I.Mx)(document.cookie,e)}}let De,ue=null;const Ce=new h.OlP("TRANSITION_ID"),ie=[{provide:h.ip1,useFactory:function ne(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const i=(0,I.q)(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<r.length;l++)i.remove(r[l])})}},deps:[Ce,I.K0,h.zs3],multi:!0}];class he{static init(){(0,h.VLi)(new he)}addToWindow(e){h.dqk.getAngularTestability=(i,r=!0)=>{const l=e.findTestabilityInTree(i,r);if(null==l)throw new Error("Could not find testability for element.");return l},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(i=>{const r=h.dqk.getAllAngularTestabilities();let l=r.length,u=!1;const g=function(_){u=u||_,l--,0==l&&i(u)};r.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?(0,I.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ve=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Be=new h.OlP("EventManagerPlugins");let Je=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let l=0;l<r.length;l++){const u=r[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Be),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class nt{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=(0,I.q)().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Re=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n extends Re{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,r.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(_t),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _t(n){(0,I.q)().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},He=/%COMP%/g;function Se(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Se(n,r,t):(r=r.replace(He,n),t.push(r))}return t}function ke(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Me(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case h.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Wn(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case h.ifc.ShadowDom:return new yt(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Se(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Je),h.LFG(Ue),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Me{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const l=dt[r];l?e.setAttributeNS(l,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=dt[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,i,r&h.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ke(i)):this.eventManager.addEventListener(e,t,ke(i))}}class Wn extends Me{constructor(e,t,i,r){super(e),this.component=i;const l=Se(r+"-"+i.id,i.styles,[]);t.addStyles(l),this.contentAttr=function Te(n){return"_ngcontent-%COMP%".replace(He,n)}(r+"-"+i.id),this.hostAttr=function fe(n){return"_nghost-%COMP%".replace(He,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class yt extends Me{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Se(r.id,r.styles,[]);for(let u=0;u<l.length;u++){const g=document.createElement("style");g.textContent=l[u],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tt=(()=>{class n extends nt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Qt=["alt","control","meta","shift"],Ai={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ln={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Zi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mn=(()=>{class n extends nt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const l=n.parseEventName(i),u=n.eventCallback(l.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,I.q)().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const l=n._normalizeKey(i.pop());let u="";if(Qt.forEach(_=>{const E=i.indexOf(_);E>-1&&(i.splice(E,1),u+=_+".")}),u+=l,0!=i.length||0===l.length)return null;const g={};return g.domEventName=r,g.fullKey=u,g}static getEventFullKey(t){let i="",r=function pn(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ln.hasOwnProperty(e)&&(e=ln[e]))}return Ai[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Qt.forEach(l=>{l!=r&&Zi[l](t)&&(i+=l+".")}),i+=r,i}static eventCallback(t,i,r){return l=>{n.getEventFullKey(l)===t&&r.runGuarded(()=>i(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const or=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:I.bD},{provide:h.g9A,useValue:function Ni(){me.makeCurrent(),he.init()},multi:!0},{provide:I.K0,useFactory:function ss(){return(0,h.RDi)(document),document},deps:[]}]),Ki=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function yr(){return new h.qLn},deps:[]},{provide:Be,useClass:Tt,multi:!0,deps:[I.K0,h.R0b,h.Lbi]},{provide:Be,useClass:Mn,multi:!0,deps:[I.K0]},{provide:et,useClass:et,deps:[Je,Ue,h.AFp]},{provide:h.FYo,useExisting:et},{provide:Re,useExisting:Ue},{provide:Ue,useClass:Ue,deps:[I.K0]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Je,useClass:Je,deps:[Be,h.R0b]},{provide:I.JF,useClass:Ve,deps:[]}];let ar=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Ce,useExisting:h.AFp},ie]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Ki,imports:[I.ez,h.hGG]}),n})();"undefined"!=typeof window&&window;var Ut=j(4892);let Sn=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:39,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"card-group"],[1,"card"],["src","...","alt","Card image cap",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-muted"]],template:function(t,i){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3),h.TgZ(5,"title"),h._uU(6,"Document"),h.qZA()(),h.TgZ(7,"body")(8,"div",4)(9,"div",5),h._UZ(10,"img",6),h.TgZ(11,"div",7)(12,"h5",8),h._uU(13,"Card title"),h.qZA(),h.TgZ(14,"p",9),h._uU(15,"This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."),h.qZA(),h.TgZ(16,"p",9)(17,"small",10),h._uU(18,"Last updated 3 mins ago"),h.qZA()()()(),h.TgZ(19,"div",5),h._UZ(20,"img",6),h.TgZ(21,"div",7)(22,"h5",8),h._uU(23,"Card title"),h.qZA(),h.TgZ(24,"p",9),h._uU(25,"This card has supporting text below as a natural lead-in to additional content."),h.qZA(),h.TgZ(26,"p",9)(27,"small",10),h._uU(28,"Last updated 3 mins ago"),h.qZA()()()(),h.TgZ(29,"div",5),h._UZ(30,"img",6),h.TgZ(31,"div",7)(32,"h5",8),h._uU(33,"Card title"),h.qZA(),h.TgZ(34,"p",9),h._uU(35,"This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action."),h.qZA(),h.TgZ(36,"p",9)(37,"small",10),h._uU(38,"Last updated 3 mins ago"),h.qZA()()()()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}div[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:70em;max-width:max-content;max-height:max-content;left:0;right:0;bottom:0;margin:auto}"]}),n})(),wi=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-not-found"]],decls:2,vars:0,consts:[[1,"container","col-12"],["src","https://www.tec.ac.cr/sites/all/themes/tec/img/404.png"]],template:function(t,i){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"img",1),h.qZA())},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100vw;height:90vh}"]}),n})(),mn=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-quien-soy"]],decls:17,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3","crossorigin","anonymous"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],["src","https://firebasestorage.googleapis.com/v0/b/pruebaapp-d5f1d.appspot.com/o/yo.png?alt=media&token=8d44c79d-03cb-4d03-abeb-a70e27f49e24","alt","Card image cap",1,"card-img-top",2,"max-width","100px","max-height","100px;"],[1,"card-title"],[1,"card-text"]],template:function(t,i){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4)(6,"link",5),h.qZA(),h.TgZ(7,"body")(8,"div",6)(9,"div",7),h._uU(10," Quien Soy "),h.qZA(),h.TgZ(11,"div",8),h._UZ(12,"img",9),h.TgZ(13,"h5",10),h._uU(14,"Ian Garcia"),h.qZA(),h.TgZ(15,"p",11),h._uU(16,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Possimus porro necessitatibus sint ipsam, libero, dolor a maiores iure, impedit aspernatur odit nam temporibus quam dolorem? Tenetur esse saepe provident excepturi."),h.qZA()()()()())},styles:[""]}),n})();var Ie=j(8239),on=j(8259),En=j.n(on),Ei=j(7841),ai=j(8023),Yi=j(4945),Ji=j(818),$i=j(237),Vt=j(1860),xs=j(7513),di=j(1528),qe=j(7969),dn=j(2069);class zn extends ai.x{constructor(e=1/0,t=1/0,i=dn.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:l,_windowTime:u}=this;t||(i.push(e),!r&&i.push(l.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,l=r.slice();for(let u=0;u<l.length&&!e.closed;u+=i?1:2)e.next(l[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,l=(r?1:2)*e;if(e<1/0&&l<i.length&&i.splice(0,i.length-l),!r){const u=t.now();let g=0;for(let _=1;_<i.length&&i[_]<=u;_+=2)g=_;g&&i.splice(0,g+1)}}}var Wi=j(815);function Wr(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,Wi.B)({connector:()=>new zn(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var li=j(9676),Ci=j(5975);function Xt(n,e){return(0,Ci.m)(e)?(0,di.w)(()=>n,e):(0,di.w)(()=>n)}var ni=j(4119),Yn=j(4970),Nt=j(6586),ki=j(8939);j(2329);var Di=j(8026),ii=j(3910),de=j(3854),_s=j(5422);const xr=new Map,kl={activated:!1,tokenObservers:[]},oa={initialized:!1,enabled:!1};function pi(n){return xr.get(n)||kl}function Ii(n,e){xr.set(n,e)}function Mr(){return oa}class Bo{constructor(e,t,i,r,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=r,r>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new de.BH,yield function Gs(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new de.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ri=new de.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gi(n){if(!pi(n).activated)throw ri.create("use-before-activation",{appName:n.name})}function Uo(n,e){return $s.apply(this,arguments)}function $s(){return($s=(0,Ie.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const B=yield r.getHeartbeatsHeader();B&&(i["X-Firebase-Client"]=B)}const l={method:"POST",body:JSON.stringify(e),headers:i};let u,g;try{u=yield fetch(n,l)}catch(B){throw ri.create("fetch-network-error",{originalErrorMessage:B.message})}if(200!==u.status)throw ri.create("fetch-status-error",{httpStatus:u.status});try{g=yield u.json()}catch(B){throw ri.create("fetch-parse-error",{originalErrorMessage:B.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ri.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const E=1e3*Number(_[1]),k=Date.now();return{token:g.attestationToken,expireTimeMillis:k+E,issuedAtTimeMillis:k}})).apply(this,arguments)}function qi(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Ti="firebase-app-check-store";let Ho=null;function Co(){return Ho||(Ho=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(ri.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Ti,{keyPath:"compositeKey"})}}catch(t){e(ri.create("storage-open",{originalErrorMessage:t.message}))}}),Ho)}function bs(){return(bs=(0,Ie.Z)(function*(n,e){const i=(yield Co()).transaction(Ti,"readwrite"),l=i.objectStore(Ti).put({compositeKey:n,value:e});return new Promise((u,g)=>{l.onsuccess=_=>{u()},i.onerror=_=>{var E;g(ri.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const O=new _s.Yd("@firebase/app-check");function Pe(n,e){return(0,de.hl)()?function Qi(n,e){return function Yr(n,e){return bs.apply(this,arguments)}(function G(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{O.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function An(){return Mr().enabled}function yn(){return an.apply(this,arguments)}function an(){return(an=(0,Ie.Z)(function*(){const n=Mr();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hi={error:"UNKNOWN_ERROR"};function Jn(n){return de.US.encodeString(JSON.stringify(n),!1)}function Pn(n){return Or.apply(this,arguments)}function Or(){return(Or=(0,Ie.Z)(function*(n,e=!1){const t=n.app;gi(t);const i=pi(t);let l,r=i.token;if(!r){const _=yield i.cachedTokenPromise;_&&Qr(_)&&(r=_)}if(!e&&r&&Qr(r))return{token:r.token};let g,u=!1;if(An()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Uo(qi(t,yield yn()),n.heartbeatServiceProvider).then(E=>(i.exchangeTokenPromise=void 0,E)),u=!0);const _=yield i.exchangeTokenPromise;return yield Pe(t,_),Ii(t,Object.assign(Object.assign({},i),{token:_})),{token:_.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(_=>(i.exchangeTokenPromise=void 0,_)),u=!0),r=yield i.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?O.warn(_.message):O.error(_),l=_}return r?(g={token:r.token},Ii(t,Object.assign(Object.assign({},i),{token:r})),yield Pe(t,r)):g=ka(l),u&&no(t,g),g})).apply(this,arguments)}function Rt(n,e){const t=pi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ii(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function Jr(n){const{app:e}=n,t=pi(e);let i=t.tokenRefresher;i||(i=function ks(n){const{app:e}=n;return new Bo((0,Ie.Z)(function*(){let i;if(i=pi(e).token?yield Pn(n,!0):yield Pn(n),i.error)throw i.error}),()=>!0,()=>{const t=pi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Ii(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function no(n,e){const t=pi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function Qr(n){return n.expireTimeMillis-Date.now()>0}function ka(n){return{token:Jn(hi),error:n}}class ws{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pi(this.app);for(const t of e)Rt(this.app,t.next);return Promise.resolve()}}const ga="app-check-internal";!function To(){(0,Di._registerComponent)(new ii.wA("app-check",n=>function nl(n,e){return new ws(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ga).initialize()})),(0,Di._registerComponent)(new ii.wA(ga,n=>function Xe(n){return{getToken:e=>Pn(n,e),addTokenListener:e=>function Xi(n,e,t,i){const{app:r}=n,l=pi(r),u={next:t,error:i,type:e};if(Ii(r,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,u]})),l.token&&Qr(l.token)){const g=l.token;Promise.resolve().then(()=>{t({token:g.token}),Jr(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Jr(n))}(n,"INTERNAL",e),removeTokenListener:e=>Rt(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Di.registerVersion)("@firebase/app-check","0.5.5")}();class Ws{constructor(){return(0,Nt.vb)("app-check")}}"undefined"!=typeof window&&window;const es=new h.OlP("angularfire2.auth.use-emulator"),xi=new h.OlP("angularfire2.auth.settings"),Ua=new h.OlP("angularfire2.auth.tenant-id"),al=new h.OlP("angularfire2.auth.langugage-code"),ts=new h.OlP("angularfire2.auth.use-device-language"),Rr=new h.OlP("angularfire.auth.persistence"),ya=(n,e,t,i,r,l,u,g)=>(0,ki.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),i&&(_.tenantId=i),_.languageCode=r,l&&_.useDeviceLanguage(),u)for(const[E,k]of Object.entries(u))_.settings[E]=k;return g&&_.setPersistence(g),_},[t,i,r,l,u,g]);let qs=(()=>{class n{constructor(t,i,r,l,u,g,_,E,k,B,q,te){const ge=new ai.x,Ne=(0,Yi.of)(void 0).pipe((0,xs.Q)(u.outsideAngular),(0,di.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,5850)))),(0,qe.U)(()=>(0,ki.on)(t,l,i)),(0,qe.U)(it=>ya(it,l,g,E,k,B,_,q)),Wr({bufferSize:1,refCount:!1}));if((0,I.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Yi.of)(null);else{Ne.pipe((0,li.P)()).subscribe();const Ht=Ne.pipe((0,di.w)(Ct=>Ct.getRedirectResult().then(Lt=>Lt,()=>null)),Nt.iC,Wr({bufferSize:1,refCount:!1})),gt=Ne.pipe((0,di.w)(Ct=>new Ji.y(Lt=>({unsubscribe:l.runOutsideAngular(()=>Ct.onAuthStateChanged(xt=>Lt.next(xt),xt=>Lt.error(xt),()=>Lt.complete()))})))),rn=Ne.pipe((0,di.w)(Ct=>new Ji.y(Lt=>({unsubscribe:l.runOutsideAngular(()=>Ct.onIdTokenChanged(xt=>Lt.next(xt),xt=>Lt.error(xt),()=>Lt.complete()))}))));this.authState=Ht.pipe(Xt(gt),(0,ni.R)(u.outsideAngular),(0,xs.Q)(u.insideAngular)),this.user=Ht.pipe(Xt(rn),(0,ni.R)(u.outsideAngular),(0,xs.Q)(u.insideAngular)),this.idToken=this.user.pipe((0,di.w)(Ct=>Ct?(0,$i.D)(Ct.getIdToken()):(0,Yi.of)(null))),this.idTokenResult=this.user.pipe((0,di.w)(Ct=>Ct?(0,$i.D)(Ct.getIdTokenResult()):(0,Yi.of)(null))),this.credential=(0,Vt.T)(Ht,ge,this.authState.pipe((0,Yn.h)(Ct=>!Ct))).pipe((0,qe.U)(Ct=>(null==Ct?void 0:Ct.user)?Ct:null),(0,ni.R)(u.outsideAngular),(0,xs.Q)(u.insideAngular))}return(0,ki.pX)(this,Ne,l,{spy:{apply:(it,Ht,gt)=>{(it.startsWith("signIn")||it.startsWith("createUser"))&&gt.then(rn=>ge.next(rn))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ki.Dh),h.LFG(ki.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Nt.HU),h.LFG(es,8),h.LFG(xi,8),h.LFG(Ua,8),h.LFG(al,8),h.LFG(ts,8),h.LFG(Rr,8),h.LFG(Ws,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Cs=j(6523),Ao=j(1927),va=j(2085),No=j(8499);function Mi(){return(0,va.e)((n,e)=>{let t,i=!1;n.subscribe((0,No.x)(e,r=>{const l=t;t=r,i&&e.next([l,r]),i=!0}))})}var T=j(7479),A=j(8330);function ee(n,e){return n===e}j(5850);var ot,kt=j(3394),en="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fi={},Ds=Ds||{},Gt=en||self;function ac(){}function lc(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function S(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var b="closure_uid_"+(1e9*Math.random()>>>0),M=0;function F(n,e,t){return n.call.apply(n.bind,arguments)}function W(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function J(n,e,t){return(J=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?F:W).apply(null,arguments)}function se(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Oe(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,l){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return e.prototype[r].apply(i,u)}}function mt(){this.s=this.s,this.o=this.o}var Pt={};mt.prototype.s=!1,mt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function C(n){return Object.prototype.hasOwnProperty.call(n,b)&&n[b]||(n[b]=++M)}(this);delete Pt[n]}},mt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nn=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Fn=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let l=0;l<i;l++)l in r&&e.call(t,r[l],l,n)};function so(n){return Array.prototype.concat.apply([],arguments)}function us(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function ll(n){return/^[\s\xa0]*$/.test(n)}var ds,Mo=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function kr(n,e){return-1!=n.indexOf(e)}function oo(n,e){return n<e?-1:n>e?1:0}e:{var cl=Gt.navigator;if(cl){var cc=cl.userAgent;if(cc){ds=cc;break e}}ds=""}function Yo(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function ul(n){const e={};for(const t in n)e[t]=n[t];return e}var ao="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yh(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let l=0;l<ao.length;l++)t=ao[l],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function uc(n){return uc[" "](n),n}uc[" "]=ac;var Yc,n,Kc=kr(ds,"Opera"),dc=kr(ds,"Trident")||kr(ds,"MSIE"),er=kr(ds,"Edge"),vh=er||dc,Pg=kr(ds,"Gecko")&&!(kr(ds.toLowerCase(),"webkit")&&!kr(ds,"Edge"))&&!(kr(ds,"Trident")||kr(ds,"MSIE"))&&!kr(ds,"Edge"),Fg=kr(ds.toLowerCase(),"webkit")&&!kr(ds,"Edge");function Qu(){var n=Gt.document;return n?n.documentMode:void 0}e:{var bh="",wh=(n=ds,Pg?/rv:([^\);]+)(\)|;)/.exec(n):er?/Edge\/([\d\.]+)/.exec(n):dc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Fg?/WebKit\/(\S+)/.exec(n):Kc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wh&&(bh=wh?wh[1]:""),dc){var ba=Qu();if(null!=ba&&ba>parseFloat(bh)){Yc=String(ba);break e}}Yc=bh}var Lg={};var Vg=Gt.document&&dc&&(Qu()||parseInt(Yc,10))||void 0,Xu=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",ac,e),Gt.removeEventListener("test",ac,e)}catch(t){}return n}();function si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function hs(n,e){if(si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Pg){e:{try{uc(e.nodeName);var r=!0;break e}catch(l){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Eh[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hs.Z.h.call(this)}}si.prototype.h=function(){this.defaultPrevented=!0},Oe(hs,si);var Eh={2:"touch",3:"pen",4:"mouse"};hs.prototype.h=function(){hs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var lo="closure_listenable_"+(1e6*Math.random()|0),Oo=0;function Jo(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++Oo,this.ca=this.fa=!1}function ja(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Bl(n){this.src=n,this.g={},this.h=0}function Jc(n,e){var t=e.type;if(t in n.g){var l,i=n.g[t],r=Nn(i,e);(l=0<=r)&&Array.prototype.splice.call(i,r,1),l&&(ja(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qc(n,e,t,i){for(var r=0;r<n.length;++r){var l=n[r];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==i)return r}return-1}Bl.prototype.add=function(n,e,t,i,r){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=Qc(n,e,i,r);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new Jo(e,this.src,l,!!i,r)).fa=t,n.push(e)),e};var fc="closure_lm_"+(1e6*Math.random()|0),Is={};function ed(n,e,t,i,r){if(i&&i.once)return Ha(n,e,t,i,r);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ed(n,e[l],t,i,r);return null}return t=eu(t),n&&n[lo]?n.N(e,t,S(i)?!!i.capture:!!i,r):hl(n,e,t,!1,i,r)}function hl(n,e,t,i,r,l){if(!e)throw Error("Invalid event type");var u=S(r)?!!r.capture:!!r,g=nd(n);if(g||(n[fc]=g=new Bl(n)),(t=g.add(e,t,i,u,l)).proxy)return t;if(i=function Ch(){var e=wa;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Xu||(r=u),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(Xc(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Ha(n,e,t,i,r){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ha(n,e[l],t,i,r);return null}return t=eu(t),n&&n[lo]?n.O(e,t,S(i)?!!i.capture:!!i,r):hl(n,e,t,!0,i,r)}function pc(n,e,t,i,r){if(Array.isArray(e))for(var l=0;l<e.length;l++)pc(n,e[l],t,i,r);else i=S(i)?!!i.capture:!!i,t=eu(t),n&&n[lo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qc(l=n.g[e],t,i,r))&&(ja(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=nd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qc(e,t,i,r)),(t=-1<n?e[n]:null)&&td(t))}function td(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[lo])Jc(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Xc(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=nd(e))?(Jc(t,n),0==t.h&&(t.src=null,e[fc]=null)):ja(n)}}}function Xc(n){return n in Is?Is[n]:Is[n]="on"+n}function wa(n,e){if(n.ca)n=!0;else{e=new hs(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&td(n),n=t.call(i,e)}return n}function nd(n){return(n=n[fc])instanceof Bl?n:null}var Zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function eu(n){return"function"==typeof n?n:(n[Zs]||(n[Zs]=function(e){return n.handleEvent(e)}),n[Zs])}function dr(){mt.call(this),this.i=new Bl(this),this.P=this,this.I=null}function Ir(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new si(e,n);else if(e instanceof si)e.target=e.target||n;else{var r=e;yh(e=new si(i,n),r)}if(r=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];r=Qo(u,i,!0,e)&&r}if(r=Qo(u=e.g=n,i,!0,e)&&r,r=Qo(u,i,!1,e)&&r,t)for(l=0;l<t.length;l++)r=Qo(u=e.g=t[l],i,!1,e)&&r}function Qo(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.ca&&u.capture==t){var g=u.listener,_=u.ia||u.src;u.fa&&Jc(n.i,u),r=!1!==g.call(_,i)&&r}}return r&&!i.defaultPrevented}Oe(dr,mt),dr.prototype[lo]=!0,dr.prototype.removeEventListener=function(n,e,t,i){pc(this,n,e,t,i)},dr.prototype.M=function(){if(dr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)ja(t[i]);delete n.g[e],n.h--}}this.I=null},dr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},dr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var fl=Gt.JSON.stringify;function id(){var n=Bt;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ae,P=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new $,n=>n.reset());class ${constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function X(n){Gt.setTimeout(()=>{throw n},0)}function ve(n,e){Ae||function st(){var n=Gt.Promise.resolve(void 0);Ae=function(){n.then(cn)}}(),St||(Ae(),St=!0),Bt.add(n,e)}var St=!1,Bt=new class x{constructor(){this.h=this.g=null}add(e,t){const i=P.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function cn(){for(var n;n=id();){try{n.h.call(n.g)}catch(t){X(t)}var e=P;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}St=!1}function On(n,e){dr.call(this),this.h=n||1,this.g=e||Gt,this.j=J(this.kb,this),this.l=Date.now()}function un(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function hr(n,e,t){if("function"==typeof n)t&&(n=J(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=J(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function nr(n){n.g=hr(()=>{n.g=null,n.i&&(n.i=!1,nr(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Oe(On,dr),(ot=On.prototype).da=!1,ot.S=null,ot.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ir(this,"tick"),this.da&&(un(this),this.start()))}},ot.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){On.Z.M.call(this),un(this),delete this.g};class Ul extends mt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nr(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ga(n){mt.call(this),this.h=n,this.g={}}Oe(Ga,mt);var Ro=[];function co(n,e,t,i){Array.isArray(t)||(t&&(Ro[0]=t.toString()),t=Ro);for(var r=0;r<t.length;r++){var l=ed(e,t[r],i||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Ea(n){Yo(n.g,function(e,t){this.g.hasOwnProperty(t)&&td(e)},n),n.g={}}function Xo(){this.g=!0}function pl(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var l=r[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<r.length;u++)r[u]=""}}}return fl(t)}catch(g){return e}}(n,t)+(i?" "+i:"")})}Ga.prototype.M=function(){Ga.Z.M.call(this),Ea(this)},Ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xo.prototype.Aa=function(){this.g=!1},Xo.prototype.info=function(){};var gc={},Hg=null;function Ca(){return Hg=Hg||new dr}function nu(n){si.call(this,gc.Ma,n)}function rd(n){const e=Ca();Ir(e,new nu(e,n))}function Gg(n,e){si.call(this,gc.STAT_EVENT,n),this.stat=e}function Fs(n){const e=Ca();Ir(e,new Gg(e,n))}function sd(n,e){si.call(this,gc.Na,n),this.size=e}function Dh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}gc.Ma="serverreachability",Oe(nu,si),gc.STAT_EVENT="statevent",Oe(Gg,si),gc.Na="timingevent",Oe(sd,si);var Ih={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$g={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Gf(){}function Th(){}Gf.prototype.h=null;var Wg,$a={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $f(){si.call(this,"d")}function ad(){si.call(this,"c")}function mc(){}function _c(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new Ga(this),this.P=zg,this.W=new On(n=vh?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Wf}function Wf(){this.i=null,this.g="",this.h=!1}Oe($f,si),Oe(ad,si),Oe(mc,Gf),mc.prototype.g=function(){return new XMLHttpRequest},mc.prototype.i=function(){return{}},Wg=new mc;var zg=45e3,ld={},cd={};function zf(n,e,t){n.K=1,n.v=wc(gl(e)),n.s=t,n.U=!0,qg(n,null)}function qg(n,e){n.F=Date.now(),uo(n),n.A=gl(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),Jf(t.h,"t",i),n.C=0,t=n.l.H,n.h=new Wf,n.g=_e(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ul(J(n.Ia,n,n.g),n.O)),co(n.V,n.g,"readystatechange",n.gb),e=n.H?ul(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),rd(1),function Bg(n,e,t,i,r,l){n.info(function(){if(n.g)if(l)for(var u="",g=l.split("&"),_=0;_<g.length;_++){var E=g[_].split("=");if(1<E.length){var k=E[0];E=E[1];var B=k.split("_");u=2<=B.length&&"type"==B[1]?u+(k+"=")+E+"&":u+(k+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Zg(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Sh(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=wy(n,t),r==cd){4==e&&(n.o=4,Fs(14),i=!1),pl(n.j,n.m,null,"[Incomplete Response]");break}if(r==ld){n.o=4,Fs(15),pl(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}pl(n.j,n.m,r,null),Kg(n,r)}Zg(n)&&r!=cd&&r!=ld&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),up(e),e.L=!0,Fs(11))):(pl(n.j,n.m,t,"[Invalid Chunked Response]"),jl(n),Ah(n))}function wy(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?cd:(t=Number(e.substring(t,i)),isNaN(t)?ld:(i+=1)+t>e.length?cd:(e=e.substr(i,t),n.C=i+t,e))}function uo(n){n.Y=Date.now()+n.P,iu(n,n.P)}function iu(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Dh(J(n.eb,n),e)}function ud(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Ah(n){0==n.l.G||n.I||f(n.l,n)}function jl(n){ud(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,un(n.W),Ea(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Kg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||fd(t.i,n)))if(t.I=n.N,!n.J&&fd(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(E){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=Dh(J(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;y(t),lu(t)}cp(t),Fs(18)}if(1>=Qg(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else w(t,11)}else if((n.J||t.g==n)&&y(t),!ll(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let E=r[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const k=E[3];null!=k&&(t.ma=k,t.h.info("VER="+t.ma));const B=E[4];null!=B&&(t.za=B,t.h.info("SVER="+t.za));const q=E[5];null!=q&&"number"==typeof q&&0<q&&(t.K=i=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const te=n.g;if(te){const ge=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var l=i.i;!l.g&&(kr(ge,"spdy")||kr(ge,"quic")||kr(ge,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Ph(l,l.h),l.h=null))}if(i.D){const Ne=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(i.sa=Ne,Vi(i.F,i.D,Ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((i=t).oa=K(i,i.H?i.la:null,i.W),u.J){Xg(i.i,u);var g=u,_=i.K;_&&g.setTimeout(_),g.B&&(ud(g),uo(g)),i.g=u}else im(i);0<t.l.length&&Gl(t)}else"stop"!=E[0]&&"close"!=E[0]||w(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?w(t,7):_d(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}rd(4)}catch(E){}}function qf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(lc(n)||"string"==typeof n)Fn(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(lc(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function Ey(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(lc(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var l=0;l<r;l++)e.call(void 0,i[l],t&&t[l],n)}}function yc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof yc)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function Zf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];vc(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)vc(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function vc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ot=_c.prototype).setTimeout=function(n){this.P=n},ot.gb=function(n){n=n.target;const e=this.L;e&&3==Wa(n)?e.l():this.Ia(n)},ot.Ia=function(n){try{if(n==this.g)e:{const k=Wa(this.g);var e=this.g.Da();const B=this.g.ba();if(!(3>k)&&(3!=k||vh||this.g&&(this.h.h||this.g.ga()||tm(this.g)))){this.I||4!=k||7==e||rd(8==e||0>=B?3:2),ud(this);var t=this.g.ba();this.N=t;t:if(Zg(this)){var i=tm(this.g);n="";var r=i.length,l=4==Wa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){jl(this),Ah(this);var u="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:l&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function Ug(n,e,t,i,r,l,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.X,k,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ll(g)){var E=g;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Fs(12),jl(this),Ah(this);break e}pl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Kg(this,t)}this.U?(Sh(this,k,u),vh&&this.i&&3==k&&(co(this.V,this.W,"tick",this.fb),this.W.start())):(pl(this.j,this.m,u,null),Kg(this,u)),4==k&&jl(this),this.i&&!this.I&&(4==k?f(this.l,this):(this.i=!1,uo(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Fs(12)):(this.o=0,Fs(13)),jl(this),Ah(this)}}}catch(k){}},ot.fb=function(){if(this.g){var n=Wa(this.g),e=this.g.ga();this.C<e.length&&(ud(this),Sh(this,n,e),this.i&&4!=n&&uo(this))}},ot.cancel=function(){this.I=!0,jl(this)},ot.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function tu(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rd(3),Fs(17)),jl(this),this.o=2,Ah(this)):iu(this,this.Y-n)},(ot=yc.prototype).R=function(){Zf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ot.T=function(){return Zf(this),this.g.concat()},ot.get=function(n,e){return vc(this.h,n)?this.h[n]:e},ot.set=function(n,e){vc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ot.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],l=this.get(r);n.call(e,l,r,this)}};var Cy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ru(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ru){this.g=void 0!==e?e:n.g,ml(this,n.j),this.s=n.s,dd(this,n.i),Ks(this,n.m),this.l=n.l,e=n.h;var t=new hd;t.i=e.i,e.g&&(t.g=new yc(e.g),t.h=e.h),su(this,t),this.o=n.o}else n&&(t=String(n).match(Cy))?(this.g=!!e,ml(this,t[1]||"",!0),this.s=ou(t[2]||""),dd(this,t[3]||"",!0),Ks(this,t[4]),this.l=ou(t[5]||"",!0),su(this,t[6]||"",!0),this.o=ou(t[7]||"")):(this.g=!!e,this.h=new hd(null,this.g))}function gl(n){return new ru(n)}function ml(n,e,t){n.j=t?ou(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dd(n,e,t){n.i=t?ou(e,!0):e}function Ks(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function su(n,e,t){e instanceof hd?(n.h=e,function kh(n,e){e&&!n.j&&(Hl(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(Oh(this,i),Jf(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Nh(e,Dy)),n.h=new hd(e,n.g))}function Vi(n,e,t){n.h.set(e,t)}function wc(n){return Vi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ou(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Kf),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Kf(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ru.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Nh(e,xh,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Nh(e,xh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Nh(t,"/"==t.charAt(0)?cw:Yf,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Nh(t,Mh)),n.join("")};var xh=/[#\/\?@]/g,Yf=/[#\?:]/g,cw=/[#\?]/g,Dy=/[#\?@]/g,Mh=/#/g;function hd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hl(n){n.g||(n.g=new yc,n.h=0,n.i&&function bc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var l=n[t].substring(0,i);r=n[t].substring(i+1)}else l=n[t];e(l,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Oh(n,e){Hl(n),e=_l(n,e),vc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,vc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Zf(n)))}function Rh(n,e){return Hl(n),e=_l(n,e),vc(n.g.h,e)}function Jf(n,e,t){Oh(n,e),0<t.length&&(n.i=null,n.g.set(_l(n,e),us(t)),n.h+=t.length)}function _l(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jg(n){this.l=n||Pr,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ea&&Gt.g.Ea()&&Gt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=hd.prototype).add=function(n,e){Hl(this),this.i=null,n=_l(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Hl(this),this.g.forEach(function(t,i){Fn(t,function(r){n.call(e,r,i,this)},this)},this)},ot.T=function(){Hl(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],l=0;l<r.length;l++)t.push(e[i]);return t},ot.R=function(n){Hl(this);var e=[];if("string"==typeof n)Rh(this,n)&&(e=so(e,this.g.get(_l(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=so(e,n[t])}return e},ot.set=function(n,e){return Hl(this),this.i=null,Rh(this,n=_l(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var l=0;l<i.length;l++){var u=r;""!==i[l]&&(u+="="+encodeURIComponent(String(i[l]))),n.push(u)}}return this.i=n.join("&")};var Pr=10;function Xf(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Qg(n){return n.h?1:n.g?n.g.size:0}function fd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ph(n,e){n.g?n.g.add(e):n.h=e}function Xg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pd(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return us(n.i)}function ep(){}function em(){this.g=new ep}function Iy(n,e,t){const i=t||"";try{qf(n,function(r,l){let u=r;S(r)&&(u=fl(r)),e.push(i+l+"="+encodeURIComponent(u))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function tp(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(l){}}function yl(n){this.l=n.$b||null,this.j=n.ib||!1}function ns(n,e){dr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ec,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jg.prototype.cancel=function(){if(this.i=pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ep.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},ep.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},Oe(yl,Gf),yl.prototype.g=function(){return new ns(this.l,this.j)},yl.prototype.i=function(n){return function(){return n}}({}),Oe(ns,dr);var Ec=0;function gd(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Cc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Fr(n)}function Fr(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=ns.prototype).open=function(n,e){if(this.readyState!=Ec)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Fr(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cc(this)),this.readyState=Ec},ot.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Gt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gd(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ot.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cc(this):Fr(this),3==this.readyState&&gd(this)}},ot.Ua=function(n){this.g&&(this.response=this.responseText=n,Cc(this))},ot.Ta=function(n){this.g&&(this.response=n,Cc(this))},ot.ha=function(){this.g&&Cc(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Dc=Gt.JSON.parse;function fr(n){dr.call(this),this.headers=new yc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ho,this.K=this.L=!1}Oe(fr,dr);var ho="",md=/^https?$/i,np=["POST","PUT"];function Fh(n){return"content-type"==n.toLowerCase()}function Lh(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ip(n),Vh(n)}function ip(n){n.D||(n.D=!0,Ir(n,"complete"),Ir(n,"error"))}function rp(n){if(n.h&&void 0!==Ds&&(!n.C[1]||4!=Wa(n)||2!=n.ba()))if(n.v&&4==Wa(n))hr(n.Fa,0,n);else if(Ir(n,"readystatechange"),4==Wa(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===g){var r=String(n.H).match(Cy)[1]||null;if(!r&&Gt.self&&Gt.self.location){var l=Gt.self.location.protocol;r=l.substr(0,l.length-1)}i=!md.test(r?r.toLowerCase():"")}t=i}if(t)Ir(n,"complete"),Ir(n,"success");else{n.m=6;try{var u=2<Wa(n)?n.g.statusText:""}catch(_){u=""}n.j=u+" ["+n.ba()+"]",ip(n)}}finally{Vh(n)}}}function Vh(n,e){if(n.g){Da(n);const t=n.g,i=n.C[0]?ac:null;n.g=null,n.C=null,e||Ir(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function Da(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function Wa(n){return n.g?n.g.readyState:0}function tm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ho:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function op(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function sp(n){let e="";return Yo(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vi(n,e,t))}function au(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fs(n){this.za=0,this.l=[],this.h=new Xo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=au("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=au("baseRetryDelayMs",5e3,n),this.$a=au("retryDelaySeedMs",1e4,n),this.Ya=au("forwardChannelMaxRetries",2,n),this.ra=au("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Jg(n&&n.concurrentRequestLimit),this.Ca=new em,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function _d(n){if(nm(n),3==n.G){var e=n.V++,t=gl(n.F);Vi(t,"SID",n.J),Vi(t,"RID",e),Vi(t,"TYPE","terminate"),yd(n,t),(e=new _c(n,n.h,e,void 0)).K=2,e.v=wc(gl(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_e(e.l,null),e.g.ea(e.v)),e.F=Date.now(),uo(e)}L(n)}function lu(n){n.g&&(up(n),n.g.cancel(),n.g=null)}function nm(n){lu(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),y(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function Ia(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Gl(n)}function Gl(n){Xf(n.i)||n.m||(n.m=!0,ve(n.Ha,n),n.C=0)}function lp(n,e){var t;t=e?e.m:n.V++;const i=gl(n.F);Vi(i,"SID",n.J),Vi(i,"RID",t),Vi(i,"AID",n.U),yd(n,i),n.o&&n.s&&op(i,n.o,n.s),t=new _c(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Bh(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ph(n.i,t),zf(t,i,e)}function yd(n,e){n.j&&qf({},function(t,i){Vi(e,i,t)})}function Bh(n,e,t){t=Math.min(n.l.length,t);var i=n.j?J(n.j.Oa,n.j,n):null;e:{var r=n.l;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=r[0].h,u.push("ofs="+l)):l=0:u.push("ofs="+l);let g=!0;for(let _=0;_<t;_++){let E=r[_].h;const k=r[_].g;if(E-=l,0>E)l=Math.max(0,r[_].h-100),g=!1;else try{Iy(k,u,"req"+E+"_")}catch(B){i&&i(k)}}if(g){i=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function im(n){n.g||n.u||(n.Y=1,ve(n.Ga,n),n.A=0)}function cp(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Dh(J(n.Ga,n),m(n,n.A)),n.A++,0))}function up(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function rm(n){n.g=new _c(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=gl(n.oa);Vi(e,"RID","rpc"),Vi(e,"SID",n.J),Vi(e,"CI",n.N?"0":"1"),Vi(e,"AID",n.U),yd(n,e),Vi(e,"TYPE","xmlhttp"),n.o&&n.s&&op(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=wc(gl(e)),t.s=null,t.U=!0,qg(t,n)}function y(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function f(n,e){var t=null;if(n.g==e){y(n),up(n),n.g=null;var i=2}else{if(!fd(n.i,e))return;t=e.D,Xg(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;Ir(i=Ca(),new sd(i,t,e,r)),Gl(n)}else im(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function ap(n,e){return!(Qg(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Dh(J(n.Ha,n,e),m(n,n.C)),n.C++,0)))}(n,e)||2==i&&cp(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:w(n,5);break;case 4:w(n,10);break;case 3:w(n,6);break;default:w(n,2)}}function m(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function w(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=J(n.jb,n);t||(t=new ru("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||ml(t,"https"),wc(t)),function uw(n,e){const t=new Xo;if(Gt.Image){const i=new Image;i.onload=se(tp,t,i,"TestLoadImage: loaded",!0,e),i.onerror=se(tp,t,i,"TestLoadImage: error",!1,e),i.onabort=se(tp,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=se(tp,t,i,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Fs(2);n.G=0,n.j&&n.j.va(e),L(n),nm(n)}function L(n){n.G=0,n.I=-1,n.j&&((0!=pd(n.i).length||0!=n.l.length)&&(n.i.i.length=0,us(n.l),n.l.length=0),n.j.ua())}function K(n,e,t){let i=function Yg(n){return n instanceof ru?gl(n):new ru(n,void 0)}(t);if(""!=i.i)e&&dd(i,e+"."+i.i),Ks(i,i.m);else{const r=Gt.location;i=function lw(n,e,t,i){var r=new ru(null,void 0);return n&&ml(r,n),e&&dd(r,e),t&&Ks(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&Yo(n.aa,function(r,l){Vi(i,l,r)}),t=n.sa,(e=n.D)&&t&&Vi(i,e,t),Vi(i,"VER",n.ma),yd(n,i),i}function _e(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Ba&&!n.qa?new yl({ib:!0}):n.qa)).L=n.H,e}function Fe(){}function pt(){if(dc&&!(10<=Number(Vg)))throw Error("Environmental error: no available transport.")}function Et(n,e){dr.call(this),this.g=new fs(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!ll(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ll(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _i(this)}function tn(n){$f.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Zt(){ad.call(this),this.status=1}function _i(n){this.g=n}(ot=fr.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wg.g(),this.C=function od(n){return n.h||(n.h=n.i())}(this.u?this.u:Wg),this.g.onreadystatechange=J(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Lh(this,l)}n=t||"";const r=new yc(this.headers);i&&qf(i,function(l,u){r.set(u,l)}),i=function xo(n){e:{var e=Fh;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Gt.FormData&&n instanceof Gt.FormData,!(0<=Nn(np,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(l,u){this.g.setRequestHeader(u,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Da(this),0<this.B&&((this.K=function Ty(n){return dc&&function tr(){return function Vl(n){var e=Lg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Mo(String(Yc)).split("."),t=Mo("9").split("."),i=Math.max(e.length,t.length);for(let u=0;0==n&&u<i;u++){var r=e[u]||"",l=t[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==r[0].length&&0==l[0].length)break;n=oo(0==r[1].length?0:parseInt(r[1],10),0==l[1].length?0:parseInt(l[1],10))||oo(0==r[2].length,0==l[2].length)||oo(r[2],l[2]),r=r[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=J(this.pa,this)):this.A=hr(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Lh(this,l)}},ot.pa=function(){void 0!==Ds&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ir(this,"complete"),Ir(this,"abort"),Vh(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vh(this,!0)),fr.Z.M.call(this)},ot.Fa=function(){this.s||(this.F||this.v||this.l?rp(this):this.cb())},ot.cb=function(){rp(this)},ot.ba=function(){try{return 2<Wa(this)?this.g.status:-1}catch(n){return-1}},ot.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ot.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Dc(e)}},ot.Da=function(){return this.m},ot.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=fs.prototype).ma=8,ot.G=1,ot.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ot.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new _c(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=ul(l),yh(l,this.P)):l=this.P),null===this.o&&(r.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Bh(this,r,e),Vi(t=gl(this.F),"RID",n),Vi(t,"CVER",22),this.D&&Vi(t,"X-HTTP-Session-Id",this.D),yd(this,t),this.o&&l&&op(t,this.o,l),Ph(this.i,r),this.Ra&&Vi(t,"TYPE","init"),this.ja?(Vi(t,"$req",e),Vi(t,"SID","null"),r.$=!0,zf(r,t,null)):zf(r,t,e),this.G=2}}else 3==this.G&&(n?lp(this,n):0==this.l.length||Xf(this.i)||lp(this))},ot.Ga=function(){if(this.u=null,rm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Dh(J(this.bb,this),n)}},ot.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fs(10),lu(this),rm(this))},ot.ab=function(){null!=this.v&&(this.v=null,lu(this),cp(this),Fs(19))},ot.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Fs(2)):(this.h.info("Failed to ping google.com"),Fs(1))},(ot=Fe.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Oa=function(){},pt.prototype.g=function(n,e){return new Et(n,e)},Oe(Et,dr),Et.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ve(J(n.hb,n,e))),Fs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=K(n,null,n.W),Gl(n)},Et.prototype.close=function(){_d(this.g)},Et.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Ia(this.g,e)}else this.v?((e={}).__data__=fl(n),Ia(this.g,e)):Ia(this.g,n)},Et.prototype.M=function(){this.g.j=null,delete this.j,_d(this.g),delete this.g,Et.Z.M.call(this)},Oe(tn,$f),Oe(Zt,ad),Oe(_i,Fe),_i.prototype.xa=function(){Ir(this.g,"a")},_i.prototype.wa=function(n){Ir(this.g,new tn(n))},_i.prototype.va=function(n){Ir(this.g,new Zt(n))},_i.prototype.ua=function(){Ir(this.g,"b")},pt.prototype.createWebChannel=pt.prototype.g,Et.prototype.send=Et.prototype.u,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,Ih.NO_ERROR=0,Ih.TIMEOUT=8,Ih.HTTP_ERROR=6,$g.COMPLETE="complete",Th.EventType=$a,$a.OPEN="a",$a.CLOSE="b",$a.ERROR="c",$a.MESSAGE="d",dr.prototype.listen=dr.prototype.N,fr.prototype.listenOnce=fr.prototype.O,fr.prototype.getLastError=fr.prototype.La,fr.prototype.getLastErrorCode=fr.prototype.Da,fr.prototype.getStatus=fr.prototype.ba,fr.prototype.getResponseJson=fr.prototype.Qa,fr.prototype.getResponseText=fr.prototype.ga,fr.prototype.send=fr.prototype.ea;var ea=fi.createWebChannelTransport=function(){return new pt},vd=fi.getStatEventTarget=function(){return Ca()},cu=fi.ErrorCode=Ih,bd=fi.EventType=$g,dp=fi.Event=gc,sm=fi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},$l=fi.FetchXmlHttpFactory=yl,Ic=fi.WebChannel=Th,hp=fi.XhrIo=fr;const Uh="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let uu="9.6.10";const za=new _s.Yd("@firebase/firestore");function fp(){return za.logLevel}function ct(n,...e){if(za.logLevel<=_s.in.DEBUG){const t=e.map(pp);za.debug(`Firestore (${uu}): ${n}`,...t)}}function ps(n,...e){if(za.logLevel<=_s.in.ERROR){const t=e.map(pp);za.error(`Firestore (${uu}): ${n}`,...t)}}function jh(n,...e){if(za.logLevel<=_s.in.WARN){const t=e.map(pp);za.warn(`Firestore (${uu}): ${n}`,...t)}}function pp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function jt(n="Unexpected state"){const e=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: `+n;throw ps(e),new Error(e)}function fn(n,e){n||jt()}function Dt(n,e){return n}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rt extends de.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class y1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class om{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const l=E=>this.i!==r?(r=this.i,t(E)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable(()=>l(this.currentUser))};const g=()=>{const E=u;e.enqueueRetryable((0,Ie.Z)(function*(){yield E.promise,yield l(i.currentUser)}))},_=E=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fn("string"==typeof i.accessToken),new Sy(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(null===e||"string"==typeof e),new Lr(e)}}class v1{constructor(e,t,i){this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class hw{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new v1(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ay{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=l=>{null!=l.error&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.p;return this.p=l.token,ct("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const r=l=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>r(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?r(l):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fn("string"==typeof t.token),this.p=t.token,new Ay(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function am(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}ta.A=-1;class gp{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=am(40);for(let l=0;l<r.length;++l)i.length<20&&r[l]<t&&(i+=e.charAt(r[l]%e.length))}return i}}function Ln(n,e){return n<e?-1:n>e?1:0}function du(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function Ny(n){return n+"\0"}class Tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new rt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new rt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new rt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tr.fromMillis(Date.now())}static fromDate(e){return Tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Tr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ln(this.nanoseconds,e.nanoseconds):Ln(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nn(e)}static min(){return new nn(new Tr(0,0))}static max(){return new nn(new Tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function gw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mp{constructor(e,t,i){void 0===t?t=0:t>e.length&&jt(),void 0===i?i=e.length-t:i>e.length-t&&jt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===mp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mp?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const l=e.get(r),u=t.get(r);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qn extends mp{construct(e,t,i){return new Qn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new rt(je.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Qn(t)}static emptyPath(){return new Qn([])}}const xy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ts extends mp{construct(e,t,i){return new Ts(e,t,i)}static isValidIdentifier(e){return xy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ts(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const l=()=>{if(0===i.length)throw new rt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const g=e[r];if("\\"===g){if(r+1===e.length)throw new rt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[r+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new rt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=_,r+=2}else"`"===g?(u=!u,r++):"."!==g||u?(i+=g,r++):(l(),r++)}if(l(),u)throw new rt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ts(t)}static emptyPath(){return new Ts([])}}class _p{constructor(e){this.fields=e,e.sort(Ts.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Ss{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ss(t)}static fromUint8Array(e){const t=function(i){let r="";for(let l=0;l<i.length;++l)r+=String.fromCharCode(i[l]);return r}(e);return new Ss(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ln(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ss.EMPTY_BYTE_STRING=new Ss("");const yw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(n){if(fn(!!n),"string"==typeof n){let e=0;const t=yw.exec(n);if(fn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vr(n.seconds),nanos:Vr(n.nanos)}}function Vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ys(n){return"string"==typeof n?Ss.fromBase64String(n):Ss.fromUint8Array(n)}function My(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Oy(n){const e=n.mapValue.fields.__previous_value__;return My(e)?Oy(e):e}function yp(n){const e=fu(n.mapValue.fields.__local_write_time__.timestampValue);return new Tr(e.seconds,e.nanos)}class b1{constructor(e,t,i,r,l,u,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Tc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}function wd(n){return null==n}function Hh(n){return 0===n&&1/n==-1/0}function vw(n){return"number"==typeof n&&Number.isInteger(n)&&!Hh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class vt{constructor(e){this.path=e}static fromPath(e){return new vt(Qn.fromString(e))}static fromName(e){return new vt(Qn.fromString(e).popFirst(5))}static empty(){return new vt(Qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new Qn(e.slice()))}}const bw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wn={nullValue:"NULL_VALUE"};function pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?My(n)?4:w1(n)?9:10:jt()}function vl(n,e){if(n===e)return!0;const t=pu(n);if(t!==pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yp(n).isEqual(yp(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const l=fu(i.timestampValue),u=fu(r.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,Ys(n.bytesValue).isEqual(Ys(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Vr(i.geoPointValue.latitude)===Vr(r.geoPointValue.latitude)&&Vr(i.geoPointValue.longitude)===Vr(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Vr(i.integerValue)===Vr(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const l=Vr(i.doubleValue),u=Vr(r.doubleValue);return l===u?Hh(l)===Hh(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return du(n.arrayValue.values||[],e.arrayValue.values||[],vl);case 10:return function(i,r){const l=i.mapValue.fields||{},u=r.mapValue.fields||{};if(gw(l)!==gw(u))return!1;for(const g in l)if(l.hasOwnProperty(g)&&(void 0===u[g]||!vl(l[g],u[g])))return!1;return!0}(n,e);default:return jt()}var r}function Gh(n,e){return void 0!==(n.values||[]).find(t=>vl(t,e))}function bl(n,e){if(n===e)return 0;const t=pu(n),i=pu(e);if(t!==i)return Ln(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ln(n.booleanValue,e.booleanValue);case 2:return function(r,l){const u=Vr(r.integerValue||r.doubleValue),g=Vr(l.integerValue||l.doubleValue);return u<g?-1:u>g?1:u===g?0:isNaN(u)?isNaN(g)?0:-1:1}(n,e);case 3:return qa(n.timestampValue,e.timestampValue);case 4:return qa(yp(n),yp(e));case 5:return Ln(n.stringValue,e.stringValue);case 6:return function(r,l){const u=Ys(r),g=Ys(l);return u.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(r,l){const u=r.split("/"),g=l.split("/");for(let _=0;_<u.length&&_<g.length;_++){const E=Ln(u[_],g[_]);if(0!==E)return E}return Ln(u.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,l){const u=Ln(Vr(r.latitude),Vr(l.latitude));return 0!==u?u:Ln(Vr(r.longitude),Vr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,l){const u=r.values||[],g=l.values||[];for(let _=0;_<u.length&&_<g.length;++_){const E=bl(u[_],g[_]);if(E)return E}return Ln(u.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,l){const u=r.fields||{},g=Object.keys(u),_=l.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let k=0;k<g.length&&k<E.length;++k){const B=Ln(g[k],E[k]);if(0!==B)return B;const q=bl(u[g[k]],_[E[k]]);if(0!==q)return q}return Ln(g.length,E.length)}(n.mapValue,e.mapValue);default:throw jt()}}function qa(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ln(n,e);const t=fu(n),i=fu(e),r=Ln(t.seconds,i.seconds);return 0!==r?r:Ln(t.nanos,i.nanos)}function Ed(n){return Ry(n)}function Ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=fu(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ys(n.bytesValue).toBase64():"referenceValue"in n?vt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",l=!0;for(const u of i.values||[])l?l=!1:r+=",",r+=Ry(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let l="{",u=!0;for(const g of r)u?u=!1:l+=",",l+=`${g}:${Ry(i.fields[g])}`;return l+"}"}(n.mapValue):jt();var e}function gu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wl(n){return!!n&&"integerValue"in n}function Cd(n){return!!n&&"arrayValue"in n}function ky(n){return!!n&&"nullValue"in n}function lm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Py(n){return!!n&&"mapValue"in n}function $h(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hu(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=$h(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$h(n.arrayValue.values[t]);return e}return Object.assign({},n)}function w1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vp(n,e){return void 0===n?e:void 0===e||bl(n,e)>0?n:e}function bp(n,e){return void 0===n?e:void 0===e||bl(n,e)<0?n:e}class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Py(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(t)}setAll(e){let t=Ts.emptyPath(),i={},r=[];e.forEach((u,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,i,r),i={},r=[],t=g.popLast()}u?i[g.lastSegment()]=$h(u):r.push(g.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,r)}delete(e){const t=this.field(e.popLast());Py(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Py(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){hu(t,(r,l)=>e[r]=l);for(const r of i)delete e[r]}clone(){return new Ls($h(this.value))}}function cm(n){const e=[];return hu(n.fields,(t,i)=>{const r=new Ts([t]);if(Py(i)){const l=cm(i.mapValue).fields;if(0===l.length)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)}),new _p(e)}class Bi{constructor(e,t,i,r,l,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Bi(e,0,nn.min(),nn.min(),Ls.empty(),0)}static newFoundDocument(e,t,i){return new Bi(e,1,t,nn.min(),i,0)}static newNoDocument(e,t){return new Bi(e,2,t,nn.min(),Ls.empty(),0)}static newUnknownDocument(e,t){return new Bi(e,3,t,nn.min(),Ls.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fy{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Ly(n){return n.fields.find(e=>2===e.kind)}function Wh(n){return n.fields.filter(e=>2!==e.kind)}Fy.UNKNOWN_ID=-1;class um{constructor(e,t){this.fieldPath=e,this.kind=t}}class wp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wp(0,Sc.min())}}function Vy(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=nn.fromTimestamp(1e9===i?new Tr(t+1,0):new Tr(t,i));return new Sc(r,vt.empty(),e)}function lA(n){return new Sc(n.readTime,n.key,-1)}class Sc{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Sc(nn.min(),vt.empty(),-1)}static max(){return new Sc(nn.max(),vt.empty(),-1)}}function cA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=vt.comparator(n.documentKey,e.documentKey),0!==t?t:Ln(n.largestBatchId,e.largestBatchId))}class ww{constructor(e,t=null,i=[],r=[],l=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=l,this.startAt=u,this.endAt=g,this.P=null}}function By(n,e=null,t=[],i=[],r=null,l=null,u=null){return new ww(n,e,t,i,r,l,u)}function Dd(n){const e=Dt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Ed(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ed(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ed(i)).join(",")),e.P=t}return e.P}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!$y(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!vl(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hm(n.startAt,e.startAt)&&hm(n.endAt,e.endAt)}function jy(n){return vt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Hy(n,e){return n.filters.filter(t=>t instanceof fo&&t.field.isEqual(e))}class fo extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,i):new uA(e,t,i):"array-contains"===t?new fA(e,i):"in"===t?new pA(e,i):"not-in"===t?new mu(e,i):"array-contains-any"===t?new Gy(e,i):new fo(e,t,i)}static V(e,t,i){return"in"===t?new dA(e,i):new hA(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(bl(t,this.value)):null!==t&&pu(this.value)===pu(t)&&this.v(bl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return jt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class uA extends fo{constructor(e,t,i){super(e,t,i),this.key=vt.fromName(i.referenceValue)}matches(e){const t=vt.comparator(e.key,this.key);return this.v(t)}}class dA extends fo{constructor(e,t){super(e,"in",t),this.keys=E1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hA extends fo{constructor(e,t){super(e,"not-in",t),this.keys=E1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function E1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>vt.fromName(i.referenceValue))}class fA extends fo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cd(t)&&Gh(t.arrayValue,this.value)}}class pA extends fo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gh(this.value.arrayValue,t)}}class mu extends fo{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gh(this.value.arrayValue,t)}}class Gy extends fo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Gh(this.value.arrayValue,i))}}class _u{constructor(e,t){this.position=e,this.inclusive=t}}class Id{constructor(e,t="asc"){this.field=e,this.dir=t}}function $y(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Wy(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(i=l.field.isKeyField()?vt.comparator(vt.fromName(u.referenceValue),t.key):bl(u,t.data.field(l.field)),"desc"===l.dir&&(i*=-1),0!==i)break}return i}function hm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vl(n.position[t],e.position[t]))return!1;return!0}class Ac{constructor(e,t=null,i=[],r=[],l=null,u="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=l,this.limitType=u,this.startAt=g,this.endAt=_,this.D=null,this.C=null}}function Nc(n,e,t,i,r,l,u,g){return new Ac(n,e,t,i,r,l,u,g)}function Td(n){return new Ac(n)}function fm(n){return!wd(n.limit)&&"F"===n.limitType}function zh(n){return!wd(n.limit)&&"L"===n.limitType}function zy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function pm(n){for(const e of n.filters)if(e.S())return e.field;return null}function qy(n){return null!==n.collectionGroup}function qh(n){const e=Dt(n);if(null===e.D){e.D=[];const t=pm(e),i=zy(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new Id(t)),e.D.push(new Id(Ts.keyField(),"asc"));else{let r=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(r=!0);if(!r){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Id(Ts.keyField(),l))}}}return e.D}function po(n){const e=Dt(n);if(!e.C)if("F"===e.limitType)e.C=By(e.path,e.collectionGroup,qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of qh(e))t.push(new Id(l.field,"desc"===l.dir?"asc":"desc"));const i=e.endAt?new _u(e.endAt.position,!e.endAt.inclusive):null,r=e.startAt?new _u(e.startAt.position,!e.startAt.inclusive):null;e.C=By(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function Sd(n,e,t){return new Ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ad(n,e){return dm(po(n),po(e))&&n.limitType===e.limitType}function Nd(n){return`${Dd(po(n))}|lt:${n.limitType}`}function xd(n){return`Query(target=${function Uy(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Ed(i.value)}`;var i}).join(", ")}]`),wd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ed(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ed(t)).join(",")),`Target(${e})`}(po(n))}; limitType=${n.limitType})`}function yu(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):vt.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,l,u){const g=Wy(r,l,u);return r.inclusive?g<=0:g<0}(t.startAt,qh(t),i)||t.endAt&&!function(r,l,u){const g=Wy(r,l,u);return r.inclusive?g>=0:g>0}(t.endAt,qh(t),i)));var t,i}function Ew(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zy(n){return(e,t)=>{let i=!1;for(const r of qh(n)){const l=Cw(r,e,t);if(0!==l)return l;i=i||r.field.isKeyField()}return 0}}function Cw(n,e,t){const i=n.field.isKeyField()?vt.comparator(e.key,t.key):function(r,l,u){const g=l.data.field(r),_=u.data.field(r);return null!==g&&null!==_?bl(g,_):jt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return jt()}}function gm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hh(e)?"-0":e}}function mm(n){return{integerValue:""+n}}function Ky(n,e){return vw(e)?mm(e):gm(n,e)}class Md{constructor(){this._=void 0}}function C1(n,e,t){return n instanceof Od?function(i,r){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(l.fields.__previous_value__=r),{mapValue:l}}(t,e):n instanceof vu?Iw(n,e):n instanceof bu?Tw(n,e):function(i,r){const l=D1(i,r),u=na(l)+na(i.k);return wl(l)&&wl(i.k)?mm(u):gm(i.M,u)}(n,e)}function Dw(n,e,t){return n instanceof vu?Iw(n,e):n instanceof bu?Tw(n,e):t}function D1(n,e){return n instanceof Zh?wl(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Od extends Md{}class vu extends Md{constructor(e){super(),this.elements=e}}function Iw(n,e){const t=Sw(e);for(const i of n.elements)t.some(r=>vl(r,i))||t.push(i);return{arrayValue:{values:t}}}class bu extends Md{constructor(e){super(),this.elements=e}}function Tw(n,e){let t=Sw(e);for(const i of n.elements)t=t.filter(r=>!vl(r,i));return{arrayValue:{values:t}}}class Zh extends Md{constructor(e,t){super(),this.M=e,this.k=t}}function na(n){return Vr(n.integerValue||n.doubleValue)}function Sw(n){return Cd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ep{constructor(e,t){this.field=e,this.transform=t}}class mA{constructor(e,t){this.version=e,this.transformResults=t}}class is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _m{}function Jy(n,e,t){n instanceof Kh?function(i,r,l){const u=i.value.clone(),g=xw(i.fieldTransforms,r,l.transformResults);u.setAll(g),r.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Rd?function(i,r,l){if(!Yy(i.precondition,r))return void r.convertToUnknownDocument(l.version);const u=xw(i.fieldTransforms,r,l.transformResults),g=r.data;g.setAll(Qy(i)),g.setAll(u),r.convertToFoundDocument(l.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ym(n,e,t){var r;n instanceof Kh?function(i,r,l){if(!Yy(i.precondition,r))return;const u=i.value.clone(),g=Mw(i.fieldTransforms,l,r);u.setAll(g),r.convertToFoundDocument(Nw(r),u).setHasLocalMutations()}(n,e,t):n instanceof Rd?function(i,r,l){if(!Yy(i.precondition,r))return;const u=Mw(i.fieldTransforms,l,r),g=r.data;g.setAll(Qy(i)),g.setAll(u),r.convertToFoundDocument(Nw(r),g).setHasLocalMutations()}(n,e,t):Yy(n.precondition,r=e)&&r.convertToNoDocument(nn.min())}function I1(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),l=D1(i.transform,r||null);null!=l&&(null==t&&(t=Ls.empty()),t.set(i.field,l))}return t||null}function Aw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&du(t,i,(r,l)=>function gA(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof vu&&i instanceof vu||t instanceof bu&&i instanceof bu?du(t.elements,i.elements,vl):t instanceof Zh&&i instanceof Zh?vl(t.k,i.k):t instanceof Od&&i instanceof Od);var t,i}(r,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function Nw(n){return n.isFoundDocument()?n.version:nn.min()}class Kh extends _m{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class Rd extends _m{constructor(e,t,i,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=l,this.type=1}}function Qy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function xw(n,e,t){const i=new Map;fn(n.length===t.length);for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,g=e.data.field(l.field);i.set(l.field,Dw(u,g,t[r]))}return i}function Mw(n,e,t){const i=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);i.set(r.field,C1(l,u,e))}return i}class Yh extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class vm extends _m{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class T1{constructor(e){this.count=e}}var Si,qn;function Ow(n){switch(n){default:return jt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function Rw(n){if(void 0===n)return ps("GRPC error has no .code"),je.UNKNOWN;switch(n){case Si.OK:return je.OK;case Si.CANCELLED:return je.CANCELLED;case Si.UNKNOWN:return je.UNKNOWN;case Si.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Si.INTERNAL:return je.INTERNAL;case Si.UNAVAILABLE:return je.UNAVAILABLE;case Si.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Si.NOT_FOUND:return je.NOT_FOUND;case Si.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Si.ABORTED:return je.ABORTED;case Si.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Si.DATA_LOSS:return je.DATA_LOSS;default:return jt()}}(qn=Si||(Si={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";class kd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,l]of i)if(this.equalsFn(r,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,(t,i)=>{for(const[r,l]of i)e(r,l)})}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}class Br{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bm(this.root,e,this.comparator,!1)}getReverseIterator(){return new bm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bm(this.root,e,this.comparator,!0)}}class bm{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,i,r,l){this.key=e,this.value=t,this.color=null!=i?i:Js.RED,this.left=null!=r?r:Js.EMPTY,this.right=null!=l?l:Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,l){return new Js(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const l=i(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===l?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Js.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new Js(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wm(this.data.getIterator())}getIteratorFrom(e){return new wm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(0!==this.comparator(r,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ir(this.comparator);return t.data=e,t}}class wm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jh(n){return n.hasNext()?n.getNext():void 0}const S1=new Br(vt.comparator);function ko(){return S1}const Xy=new Br(vt.comparator);function ev(){return Xy}function Pd(){return new kd(n=>n.toString(),(n,e)=>n.isEqual(e))}const tv=new Br(vt.comparator),kw=new ir(vt.comparator);function yi(...n){let e=kw;for(const t of n)e=e.add(t);return e}const A1=new ir(Ln);function Qh(){return A1}class Em{constructor(e,t,i,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Em(nn.min(),i,Qh(),ko(),yi())}}class Cp{constructor(e,t,i,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cp(Ss.EMPTY_BYTE_STRING,t,yi(),yi(),yi())}}class Dp{constructor(e,t,i,r){this.O=e,this.removedTargetIds=t,this.key=i,this.F=r}}class nv{constructor(e,t){this.targetId=e,this.$=t}}class iv{constructor(e,t,i=Ss.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class rv{constructor(){this.B=0,this.L=Ip(),this.U=Ss.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=yi(),t=yi(),i=yi();return this.L.forEach((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:jt()}}),new Cp(this.U,this.q,e,t,i)}J(){this.G=!1,this.L=Ip()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Pw{constructor(e){this.nt=e,this.st=new Map,this.it=ko(),this.rt=Wl(),this.ot=new ir(Ln)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.K||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.K||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.$.count,r=this.wt(t);if(r){const l=r.target;if(jy(l))if(0===i){const u=new vt(l.path);this.ct(t,u,Bi.newNoDocument(u,nn.min()))}else fn(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,u)=>{const g=this.wt(u);if(g){if(l.current&&jy(g.target)){const _=new vt(g.target.path);null!==this.it.get(_)||this.It(u,_)||this.ct(u,_,Bi.newNoDocument(_,e))}l.j&&(t.set(u,l.H()),l.J())}});let i=yi();this.rt.forEach((l,u)=>{let g=!0;u.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(g=!1,!1)}),g&&(i=i.add(l))}),this.it.forEach((l,u)=>u.setReadTime(e));const r=new Em(e,t,this.ot,this.it,i);return this.it=ko(),this.rt=Wl(),this.ot=new ir(Ln),r}at(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new rv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ir(Ln),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ct("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new rv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Wl(){return new Br(vt.comparator)}function Ip(){return new Br(vt.comparator)}const N1={asc:"ASCENDING",desc:"DESCENDING"},x1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class _A{constructor(e,t){this.databaseId=e,this.N=t}}function Fd(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sv(n,e){return n.N?e.toBase64():e.toUint8Array()}function ov(n,e){return Fd(n,e.toTimestamp())}function Ur(n){return fn(!!n),nn.fromTimestamp(function(e){const t=fu(e);return new Tr(t.seconds,t.nanos)}(n))}function av(n,e){return(t=n,new Qn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Cm(n){const e=Qn.fromString(n);return fn(Ww(e)),e}function Xh(n,e){return av(n.databaseId,e.path)}function El(n,e){const t=Cm(e);if(t.get(1)!==n.databaseId.projectId)throw new rt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new rt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new vt(Lw(t))}function Dm(n,e){return av(n.databaseId,e)}function Fw(n){const e=Cm(n);return 4===e.length?Qn.emptyPath():Lw(e)}function Ld(n){return new Qn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Lw(n){return fn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Vw(n,e,t){return{name:Xh(n,e),fields:t.value.mapValue.fields}}function lv(n,e,t){const i=El(n,e.name),r=Ur(e.updateTime),l=new Ls({mapValue:{fields:e.fields}}),u=Bi.newFoundDocument(i,r,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Tp(n,e){let t;if(e instanceof Kh)t={update:Vw(n,e.key,e.value)};else if(e instanceof Yh)t={delete:Xh(n,e.key)};else if(e instanceof Rd)t={update:Vw(n,e.key,e.data),updateMask:R1(e.fieldMask)};else{if(!(e instanceof vm))return jt();t={verify:Xh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,l){const u=l.transform;if(u instanceof Od)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof vu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zh)return{fieldPath:l.field.canonicalString(),increment:u.k};throw jt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:ov(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:jt()),t;var r}function cv(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?is.updateTime(Ur(r.updateTime)):void 0!==r.exists?is.exists(r.exists):is.none():is.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(l,u){let g=null;"setToServerValue"in u?(fn("REQUEST_TIME"===u.setToServerValue),g=new Od):"appendMissingElements"in u?g=new vu(u.appendMissingElements.values||[]):"removeAllFromArray"in u?g=new bu(u.removeAllFromArray.values||[]):"increment"in u?g=new Zh(l,u.increment):jt();const _=Ts.fromServerFormat(u.fieldPath);return new Ep(_,g)}(n,r)):[];var r;if(e.update){const r=El(n,e.update.name),l=new Ls({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new _p((e.updateMask.fieldPaths||[]).map(E=>Ts.fromServerFormat(E)));return new Rd(r,l,u,t,i)}return new Kh(r,l,t,i)}if(e.delete){const r=El(n,e.delete);return new Yh(r,t)}if(e.verify){const r=El(n,e.verify);return new vm(r,t)}return jt()}function Uw(n,e){return{documents:[Dm(n,e.path)]}}function jw(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Dm(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dm(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(_){if(0===_.length)return;const E=_.map(k=>function(B){if("=="===B.op){if(lm(B.value))return{unaryFilter:{field:Vd(B.field),op:"IS_NAN"}};if(ky(B.value))return{unaryFilter:{field:Vd(B.field),op:"IS_NULL"}}}else if("!="===B.op){if(lm(B.value))return{unaryFilter:{field:Vd(B.field),op:"IS_NOT_NAN"}};if(ky(B.value))return{unaryFilter:{field:Vd(B.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(B.field),op:Gw(B.op),value:B.value}}}(k));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);r&&(t.structuredQuery.where=r);const l=function(_){if(0!==_.length)return _.map(E=>{return{field:Vd((k=E).field),direction:uv(k.dir)};var k})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=(E=e.limit,n.N||wd(E)?E:{value:E});var E,g,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Hw(n){let e=Fw(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){fn(1===i);const k=t.from[0];k.allDescendants?r=k.collectionId:e=e.child(k.collectionId)}let l=[];t.where&&(l=Za(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(k=>{return new Id(Bd((B=k).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction));var B}));let g=null;t.limit&&(g=function(k){let B;return B="object"==typeof k?k.value:k,wd(B)?null:B}(t.limit));let _=null;var k;t.startAt&&(_=new _u((k=t.startAt).values||[],!!k.before));let E=null;return t.endAt&&(E=function(k){return new _u(k.values||[],!k.before)}(t.endAt)),Nc(e,r,u,l,g,"F",_,E)}function Za(n){return n?void 0!==n.unaryFilter?[O1(n)]:void 0!==n.fieldFilter?[$w(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Za(e)).reduce((e,t)=>e.concat(t)):jt():[]}function uv(n){return N1[n]}function Gw(n){return x1[n]}function Vd(n){return{fieldPath:n.canonicalString()}}function Bd(n){return Ts.fromServerFormat(n.fieldPath)}function $w(n){return fo.create(Bd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}}(n.fieldFilter.op),n.fieldFilter.value)}function O1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Bd(n.unaryFilter.field);return fo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Bd(n.unaryFilter.field);return fo.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bd(n.unaryFilter.field);return fo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Bd(n.unaryFilter.field);return fo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return jt()}}function R1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ww(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k1(e)),e=zw(n.get(t),e);return k1(e)}function zw(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const l=n.charAt(r);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function k1(n){return n+"\x01\x01"}function Ka(n){const e=n.length;if(fn(e>=2),2===e)return fn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qn.emptyPath();const t=e-2,i=[];let r="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&jt(),n.charAt(u+1)){case"\x01":const g=n.substring(l,u);let _;0===r.length?_=g:(r+=g,_=r,r=""),i.push(_);break;case"\x10":r+=n.substring(l,u),r+="\0";break;case"\x11":r+=n.substring(l,u+1);break;default:jt()}l=u+2}return new Qn(i)}const qw=["userId","batchId"];function Im(n,e){return[n,Vs(e)]}function P1(n,e,t){return[n,Vs(e),t]}const yA={},dv=["prefixPath","collectionGroup","readTime","documentId"],F1=["prefixPath","collectionGroup","documentId"],Zw=["collectionGroup","readTime","prefixPath","documentId"],Kw=["canonicalId","targetId"],vA=["targetId","path"],Cl=["path","targetId"],bA=["collectionId","parent"],wA=["indexId","uid"],Yw=["uid","sequenceNumber"],Jw=["indexId","uid","arrayValue","directionalValue","documentKey"],Qw=["indexId","uid","documentKey"],L1=["userId","collectionPath","documentId"],EA=["userId","collectionPath","largestBatchId"],Xw=["userId","collectionGroup","largestBatchId"],Tm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V1=[...Tm,"documentOverlays"],Sm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],B1=[...Sm,"indexConfiguration","indexState","indexEntries"],eE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class We{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new We((i,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof We?t:We.resolve(t)}catch(t){return We.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):We.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):We.reject(t)}static resolve(e){return new We((t,i)=>{t(e)})}static reject(e){return new We((t,i)=>{i(e)})}static waitFor(e){return new We((t,i)=>{let r=0,l=0,u=!1;e.forEach(g=>{++r,g.next(()=>{++l,u&&l===r&&t()},_=>i(_))}),u=!0,l===r&&t()})}static or(e){let t=We.resolve(!1);for(const i of e)t=t.next(r=>r?We.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,l)=>{i.push(t.call(this,r,l))}),this.waitFor(i)}}class Am{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new pr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new zl(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=Ap(i.target.error);this.At.reject(new zl(e,r))}}static open(e,t,i,r){try{return new Am(t,e.transaction(r,i))}catch(l){throw new zl(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sp(t)}}class Dl{constructor(e,t,i){this.name=e,this.version=t,this.Pt=i,12.2===Dl.Vt((0,de.z$)())&&ps("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),jd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,de.hl)())return!1;if(Dl.St())return!0;const e=(0,de.z$)(),t=Dl.Vt(e),i=0<t&&t<10,r=Dl.Dt(e),l=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{i(u.target.result)},l.onblocked=()=>{r(new zl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const g=u.target.error;r("VersionError"===g.name?new rt(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new rt(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new zl(e,g))},l.onupgradeneeded=u=>{ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=i=>t.Mt(i)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var l=this;return(0,Ie.Z)(function*(){const u="readonly"===t;let g=0;for(;;){++g;try{l.db=yield l.Nt(e);const _=Am.open(l.db,e,u?"readonly":"readwrite",i),E=r(_).next(k=>(_.bt(),k)).catch(k=>(_.abort(k),We.reject(k))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&g<3;if(ct("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),l.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Nm{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return jd(this.Ft.delete())}}class zl extends rt{constructor(e,t){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ud(n){return"IndexedDbTransactionError"===n.name}class Sp{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(ct("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),jd(i)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),jd(this.store.add(e))}get(e){return jd(this.store.get(e)).next(t=>(void 0===t&&(t=null),ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),jd(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),jd(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),l=[];return this.Gt(r,(u,g)=>{l.push(g)}).next(()=>l)}{const r=this.store.getAll(i.range);return new We((l,u)=>{r.onerror=g=>{u(g.target.error)},r.onsuccess=g=>{l(g.target.result)}})}}Kt(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new We((r,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{r(u.target.result)}})}Qt(e,t){ct("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Gt(r,(l,u,g)=>g.delete())}Wt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Gt(r,t)}zt(e){const t=this.cursor({});return new We((i,r)=>{t.onerror=l=>{const u=Ap(l.target.error);r(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(g=>{g?u.continue():i()}):i()}})}Gt(e,t){const i=[];return new We((r,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void r();const _=new Nm(g),E=t(g.primaryKey,g.value,_);if(E instanceof We){const k=E.catch(B=>(_.done(),We.reject(B)));i.push(k)}_.isDone?r():null===_.Lt?g.continue():g.continue(_.Lt)}}).next(()=>We.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jd(n){return new We((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=Ap(i.target.error);t(r)}})}let nE=!1;function Ap(n){const e=Dl.Vt((0,de.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nE||(nE=!0,setTimeout(()=>{throw i},0)),i}}return n}class Il extends tE{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function jr(n,e){const t=Dt(n);return Dl.xt(t.Ht,e)}class Bs{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&Jy(l,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ym(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ym(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(nn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yi())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,(t,i)=>Aw(t,i))&&du(this.baseMutations,e.baseMutations,(t,i)=>Aw(t,i))}}class xc{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){fn(e.mutations.length===i.length);let r=tv;const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,i[u].version);return new xc(e,t,i,r)}}class nf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class As{constructor(e,t,i,r,l=nn.min(),u=nn.min(),g=Ss.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xm{constructor(e){this.Jt=e}}function Hd(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:Xh(r=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Fd(r,l.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ya(e.version)};else{if(!e.isUnknownDocument())return jt();i.unknownDocument={path:t.path.toArray(),version:Ya(e.version)}}var r,l;return i}function Mc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ya(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ja(n){const e=new Tr(n.seconds,n.nanoseconds);return nn.fromTimestamp(e)}function Tl(n,e){const t=(e.baseMutations||[]).map(l=>cv(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const i=e.mutations.map(l=>cv(n.Jt,l)),r=Tr.fromMillis(e.localWriteTimeMs);return new Bs(e.batchId,r,t,i)}function ql(n){const e=Ja(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ja(n.lastLimboFreeSnapshotVersion):nn.min();let i;var r;return void 0!==n.query.documents?(fn(1===(r=n.query).documents.length),i=po(Td(Fw(r.documents[0])))):i=po(Hw(n.query)),new As(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Ss.fromBase64String(n.resumeToken))}function Gd(n,e){const t=Ya(e.snapshotVersion),i=Ya(e.lastLimboFreeSnapshotVersion);let r;r=jy(e.target)?Uw(n.Jt,e.target):jw(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dd(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function wu(n){const e=Hw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Sd(e,e.limit,"L"):e}function Mm(n,e){return new nf(e.largestBatchId,cv(n.Jt,e.overlayMutation))}function hv(n,e){const t=e.path.lastSegment();return[n,Vs(e.path.popLast()),t]}class iE{getBundleMetadata(e,t){return fv(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Ja(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return fv(e).put({bundleId:(i=t).id,createTime:Ya(Ur(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return pv(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:wu(r.bundledQuery),readTime:Ja(r.readTime)};var r})}saveNamedQuery(e,t){return pv(e).put({name:(i=t).name,readTime:Ya(Ur(i.readTime)),bundledQuery:i.bundledQuery});var i}}function fv(n){return jr(n,"bundles")}function pv(n){return jr(n,"namedQueries")}class Om{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Om(e,t.uid||"")}getOverlay(e,t){return sf(e).get(hv(this.userId,t)).next(i=>i?Mm(this.M,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach((l,u)=>{const g=new nf(t,u);r.push(this.Xt(e,g))}),We.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(u=>r.add(Vs(u.getCollectionPath())));const l=[];return r.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);l.push(sf(e).Qt("collectionPathOverlayIndex",g))}),We.waitFor(l)}getOverlaysForCollection(e,t,i){const r=Pd(),l=Vs(t),u=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return sf(e).qt("collectionPathOverlayIndex",u).next(g=>{for(const _ of g){const E=Mm(this.M,_);r.set(E.getKey(),E)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const l=Pd();let u;const g=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sf(e).Wt({index:"collectionGroupOverlayIndex",range:g},(_,E,k)=>{const B=Mm(this.M,E);l.size()<r||B.largestBatchId===u?(l.set(B.getKey(),B),u=B.largestBatchId):k.done()}).next(()=>l)}Xt(e,t){return sf(e).put(function(i,r,l){const[u,g,_]=hv(r,l.mutation.key);return{userId:r,collectionPath:g,documentId:_,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Tp(i.Jt,l.mutation)}}(this.M,this.userId,t))}}function sf(n){return jr(n,"documentOverlays")}class $d{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vr(e.integerValue));else if("doubleValue"in e){const i=Vr(e.doubleValue);isNaN(i)?this.ne(t,13):(this.ne(t,15),Hh(i)?t.se(0):t.se(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ne(t,20),"string"==typeof i?t.ie(i):(t.ie(`${i.seconds||""}`),t.se(i.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ys(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?w1(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):jt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const i=e.fields||{};this.ne(t,55);for(const r of Object.keys(i))this.re(r,t),this.te(i[r],t)}he(e,t){const i=e.values||[];this.ne(t,50);for(const r of i)this.te(r,t)}ae(e,t){this.ne(t,37),vt.fromName(e).path.forEach(i=>{this.ne(t,60),this.le(i,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function rE(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sE(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const l=rE(255&t[r]);if(i+=l,8!==l)break}return i}(n);return Math.ceil(e/8)}$d.fe=new $d;class oE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this._e(i.value),i=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.ge(i.value),i=t.next();this.ye()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(t<"\ud800"||"\udbff"<t)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=t.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=t.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(e){const t=this.Ee(e),i=sE(t);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Re(e){const t=this.Ee(e),i=sE(t);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,r,!1),new Uint8Array(l.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class U1{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class aE{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Np{constructor(){this.De=new oE,this.Ce=new U1(this.De),this.xe=new aE(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Eu{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Eu(this.indexId,this.documentKey,this.arrayValue,i)}}function Wd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=gv(n.arrayValue,e.arrayValue),0!==t?t:(t=gv(n.directionalValue,e.directionalValue),0!==t?t:vt.comparator(n.documentKey,e.documentKey)))}function gv(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class j1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const i=t;i.S()?this.Fe=i:this.Oe.push(i)}}$e(e){const t=Ly(e);if(void 0!==t&&!this.Be(t))return!1;const i=Wh(e);let r=0,l=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const u=i[r];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[l++],u))return!1;++r}for(;r<i.length;++r){const u=i[r];if(l>=this.Me.length||!this.Ue(this.Me[l++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lE{constructor(){this.qe=new mv}addToCollectionParentIndex(e,t){return this.qe.add(t),We.resolve()}getCollectionParents(e,t){return We.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return We.resolve()}deleteFieldIndex(e,t){return We.resolve()}getDocumentsMatchingTarget(e,t){return We.resolve(null)}getFieldIndex(e,t){return We.resolve(null)}getFieldIndexes(e,t){return We.resolve([])}getNextCollectionGroupToUpdate(e){return We.resolve(null)}updateCollectionGroup(e,t,i){return We.resolve()}updateIndexEntries(e,t){return We.resolve()}}class mv{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ir(Qn.comparator),l=!r.has(i);return this.index[t]=r.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ir(Qn.comparator)).toArray()}}const Rm=new Uint8Array(0);class CA{constructor(e){this.user=e,this.Ge=new mv,this.Ke=new kd(t=>Dd(t),(t,i)=>dm(t,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:i,parent:Vs(r)};return cE(e).put(l)}return We.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[Ny(t),""],!1,!0);return cE(e).qt(r).next(l=>{for(const u of l){if(u.collectionId!==t)break;i.push(Ka(u.parent))}return i})}addFieldIndex(e,t){const i=af(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var l;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=af(e),r=km(e),l=zd(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=zd(e);let r=!0;const l=new Map;return We.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(g=>{r&&(r=!!g),l.set(u,g)})).next(()=>{if(r){let u=yi();return We.forEach(l,(g,_)=>{var E;ct("IndexedDbIndexManager",`Using index ${E=g,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${Dd(t)}`);const k=function(gt,rn){const Ct=Ly(rn);if(void 0===Ct)return null;for(const Lt of Hy(gt,Ct.fieldPath))switch(Lt.op){case"array-contains-any":return Lt.value.arrayValue.values||[];case"array-contains":return[Lt.value]}return null}(_,g),B=function(gt,rn){const Ct=new Map;for(const Lt of Wh(rn))for(const xt of Hy(gt,Lt.fieldPath))switch(xt.op){case"==":case"in":Ct.set(Lt.fieldPath.canonicalString(),xt.value);break;case"not-in":case"!=":return Ct.set(Lt.fieldPath.canonicalString(),xt.value),Array.from(Ct.values())}return null}(_,g),q=function(gt,rn){const Ct=[];let Lt=!0;for(const Un of Wh(rn)){let xn,Sr=!0;for(const ei of Hy(gt,Un.fieldPath)){let Dn,vo=!0;switch(ei.op){case"<":case"<=":Dn="nullValue"in(xt=ei.value)?wn:"booleanValue"in xt?{booleanValue:!1}:"integerValue"in xt||"doubleValue"in xt?{doubleValue:NaN}:"timestampValue"in xt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in xt?{stringValue:""}:"bytesValue"in xt?{bytesValue:""}:"referenceValue"in xt?gu(Tc.empty(),vt.empty()):"geoPointValue"in xt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in xt?{arrayValue:{}}:"mapValue"in xt?{mapValue:{}}:jt();break;case"==":case"in":case">=":Dn=ei.value;break;case">":Dn=ei.value,vo=!1;break;case"!=":case"not-in":Dn=wn}vp(xn,Dn)===Dn&&(xn=Dn,Sr=vo)}if(null!==gt.startAt)for(let ei=0;ei<gt.orderBy.length;++ei)if(gt.orderBy[ei].field.isEqual(Un.fieldPath)){const Dn=gt.startAt.position[ei];vp(xn,Dn)===Dn&&(xn=Dn,Sr=gt.startAt.inclusive);break}if(void 0===xn)return null;Ct.push(xn),Lt&&(Lt=Sr)}var xt;return new _u(Ct,Lt)}(_,g),te=function(gt,rn){const Ct=[];let Lt=!0;for(const Un of Wh(rn)){let xn,Sr=!0;for(const ei of Hy(gt,Un.fieldPath)){let Dn,vo=!0;switch(ei.op){case">=":case">":Dn="nullValue"in(xt=ei.value)?{booleanValue:!1}:"booleanValue"in xt?{doubleValue:NaN}:"integerValue"in xt||"doubleValue"in xt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in xt?{stringValue:""}:"stringValue"in xt?{bytesValue:""}:"bytesValue"in xt?gu(Tc.empty(),vt.empty()):"referenceValue"in xt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in xt?{arrayValue:{}}:"arrayValue"in xt?{mapValue:{}}:"mapValue"in xt?bw:jt(),vo=!1;break;case"==":case"in":case"<=":Dn=ei.value;break;case"<":Dn=ei.value,vo=!1;break;case"!=":case"not-in":Dn=bw}bp(xn,Dn)===Dn&&(xn=Dn,Sr=vo)}if(null!==gt.endAt)for(let ei=0;ei<gt.orderBy.length;++ei)if(gt.orderBy[ei].field.isEqual(Un.fieldPath)){const Dn=gt.endAt.position[ei];bp(xn,Dn)===Dn&&(xn=Dn,Sr=gt.endAt.inclusive);break}if(void 0===xn)return null;Ct.push(xn),Lt&&(Lt=Sr)}var xt;return new _u(Ct,Lt)}(_,g),ge=this.je(g,_,q),Ne=this.je(g,_,te),it=this.We(g,_,B),Ht=this.ze(g.indexId,k,ge,!!q&&q.inclusive,Ne,!!te&&te.inclusive,it);return We.forEach(Ht,gt=>i.Kt(gt,t.limit).next(rn=>{rn.forEach(Ct=>{u=u.add(new vt(Ka(Ct.documentKey)))})}))}).next(()=>u)}return We.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,i,r,l,u,g){const _=(null!=t?t.length:1)*Math.max(null!=i?i.length:1,null!=l?l.length:1),E=_/(null!=t?t.length:1),k=[];for(let B=0;B<_;++B){const q=t?this.He(t[B/E]):Rm,te=i?this.Je(e,q,i[B%E],r):this.Ye(e),ge=l?this.Xe(e,q,l[B%E],u):this.Ye(e+1);k.push(...this.createRange(te,ge,g.map(Ne=>this.Je(e,q,Ne,!0))))}return k}Je(e,t,i,r){const l=new Eu(e,vt.empty(),t,i);return r?l:l.ke()}Xe(e,t,i,r){const l=new Eu(e,vt.empty(),t,i);return r?l.ke():l}Ye(e){return new Eu(e,vt.empty(),Rm,Rm)}getFieldIndex(e,t){const i=new j1(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(l=>{const u=l.filter(g=>i.$e(g));return u.sort((g,_)=>_.fields.length-g.fields.length),u.length>0?u[0]:null})}Ze(e,t){const i=new Np;for(const r of Wh(e)){const l=t.data.field(r.fieldPath);if(null==l)return null;const u=i.Ne(r.kind);$d.fe.Zt(l,u)}return i.Se()}He(e){const t=new Np;return $d.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,i){if(null===i)return[];let r=[];r.push(new Np);let l=0;for(const u of Wh(e)){const g=i[l++];for(const _ of r)if(this.tn(t,u.fieldPath)&&Cd(g))r=this.en(r,u,g);else{const E=_.Ne(u.kind);$d.fe.Zt(g,E)}}return this.nn(r)}je(e,t,i){return null==i?null:this.We(e,t,i.position)}nn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Se();return t}en(e,t,i){const r=[...e],l=[];for(const u of i.arrayValue.values||[])for(const g of r){const _=new Np;_.seed(g.Se()),$d.fe.Zt(u,_.Ne(t.kind)),l.push(_)}return l}tn(e,t){return!!e.filters.find(i=>i instanceof fo&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=af(e),r=km(e);return(t?i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.qt()).next(l=>{const u=[];return We.forEach(l,g=>r.get([g.indexId,this.uid]).next(_=>{u.push(function(E,k){const B=k?new wp(k.sequenceNumber,new Sc(Ja(k.readTime),new vt(Ka(k.documentKey)),k.largestBatchId)):wp.empty(),q=E.fields.map(([te,ge])=>new um(Ts.fromServerFormat(te),ge));return new Fy(E.indexId,E.collectionGroup,q,B)}(g,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const l=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==l?l:Ln(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=af(e),l=km(e);return this.sn(e).next(u=>r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>We.forEach(g,_=>{return l.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:Ya((q=i).readTime),documentKey:Vs(q.documentKey.path),largestBatchId:q.largestBatchId});var q})))}updateIndexEntries(e,t){const i=new Map;return We.forEach(t,(r,l)=>{const u=i.get(r.collectionGroup);return(u?We.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next(g=>(i.set(r.collectionGroup,g),We.forEach(g,_=>this.rn(e,r,_).next(E=>{const k=this.on(l,_);return E.isEqual(k)?We.resolve():this.un(e,l,E,k)}))))})}an(e,t,i){return zd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,documentKey:Vs(t.key.path)})}cn(e,t,i){return zd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,Vs(t.key.path)])}rn(e,t,i){const r=zd(e);let l=new ir(Wd);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,Vs(t.path)])},(u,g)=>{l=l.add(new Eu(i.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>l)}on(e,t){let i=new ir(Wd);const r=this.Ze(t,e);if(null==r)return i;const l=Ly(t);if(null!=l){const u=e.data.field(l.fieldPath);if(Cd(u))for(const g of u.arrayValue.values||[])i=i.add(new Eu(t.indexId,e.key,this.He(g),r))}else i=i.add(new Eu(t.indexId,e.key,Rm,r));return i}un(e,t,i,r){ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(u,g,_,E,k){const B=u.getIterator(),q=g.getIterator();let te=Jh(B),ge=Jh(q);for(;te||ge;){let Ne=!1,it=!1;if(te&&ge){const Ht=_(te,ge);Ht<0?it=!0:Ht>0&&(Ne=!0)}else null!=te?it=!0:Ne=!0;Ne?(E(ge),ge=Jh(q)):it?(k(te),te=Jh(B)):(te=Jh(B),ge=Jh(q))}}(i,r,Wd,u=>{l.push(this.an(e,t,u))},u=>{l.push(this.cn(e,t,u))}),We.waitFor(l)}sn(e){let t=1;return km(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,l)=>{l.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((u,g)=>Wd(u,g)).filter((u,g,_)=>!g||0!==Wd(u,_[g-1]));const r=[];r.push(e);for(const u of i){const g=Wd(u,e),_=Wd(u,t);if(0===g)r[0]=e.ke();else if(g>0&&_<0)r.push(u),r.push(u.ke());else if(_>0)break}r.push(t);const l=[];for(let u=0;u<r.length;u+=2)l.push(IDBKeyRange.bound([r[u].indexId,this.uid,r[u].arrayValue,r[u].directionalValue,""],[r[u+1].indexId,this.uid,r[u+1].arrayValue,r[u+1].directionalValue,""]));return l}}function cE(n){return jr(n,"collectionParents")}function zd(n){return jr(n,"indexEntries")}function af(n){return jr(n,"indexConfiguration")}function km(n){return jr(n,"indexState")}const H1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ta{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ta(e,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function G1(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let g=0;const _=i.Wt({range:u},(k,B,q)=>(g++,q.delete()));l.push(_.next(()=>{fn(1===g)}));const E=[];for(const k of t.mutations){const B=P1(e,k.key.path,t.batchId);l.push(r.delete(B)),E.push(k.key)}return We.waitFor(l).next(()=>E)}function Pm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw jt();e=n.noDocument}return JSON.stringify(e).length}Ta.DEFAULT_COLLECTION_PERCENTILE=10,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ta.DEFAULT=new Ta(41943040,Ta.DEFAULT_COLLECTION_PERCENTILE,Ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ta.DISABLED=new Ta(-1,0,0);class Fm{constructor(e,t,i,r){this.userId=e,this.M=t,this.indexManager=i,this.referenceDelegate=r,this.hn={}}static Yt(e,t,i,r){fn(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Fm(l,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).Wt({index:"userMutationsIndex",range:i},(r,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const l=Sl(e),u=Cu(e);return u.add({}).next(g=>{fn("number"==typeof g);const _=new Bs(g,t,i,r),E=function(q,te,ge){const Ne=ge.baseMutations.map(Ht=>Tp(q.Jt,Ht)),it=ge.mutations.map(Ht=>Tp(q.Jt,Ht));return{userId:te,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Ne,mutations:it}}(this.M,this.userId,_),k=[];let B=new ir((q,te)=>Ln(q.canonicalString(),te.canonicalString()));for(const q of r){const te=P1(this.userId,q.key.path,g);B=B.add(q.key.path.popLast()),k.push(u.put(E)),k.push(l.put(te,yA))}return B.forEach(q=>{k.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.hn[g]=_.keys()}),We.waitFor(k).next(()=>_)})}lookupMutationBatch(e,t){return Cu(e).get(t).next(i=>i?(fn(i.userId===this.userId),Tl(this.M,i)):null)}ln(e,t){return this.hn[t]?We.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.hn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Cu(e).Wt({index:"userMutationsIndex",range:r},(u,g,_)=>{g.userId===this.userId&&(fn(g.batchId>=i),l=Tl(this.M,g)),_.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Cu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(r,l,u)=>{i=l.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).qt("userMutationsIndex",t).next(i=>i.map(r=>Tl(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Im(this.userId,t.path),r=IDBKeyRange.lowerBound(i),l=[];return Sl(e).Wt({range:r},(u,g,_)=>{const[E,k,B]=u,q=Ka(k);if(E===this.userId&&t.path.isEqual(q))return Cu(e).get(B).next(te=>{if(!te)throw jt();fn(te.userId===this.userId),l.push(Tl(this.M,te))});_.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ir(Ln);const r=[];return t.forEach(l=>{const u=Im(this.userId,l.path),g=IDBKeyRange.lowerBound(u),_=Sl(e).Wt({range:g},(E,k,B)=>{const[q,te,ge]=E,Ne=Ka(te);q===this.userId&&l.path.isEqual(Ne)?i=i.add(ge):B.done()});r.push(_)}),We.waitFor(r).next(()=>this.fn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,l=Im(this.userId,i),u=IDBKeyRange.lowerBound(l);let g=new ir(Ln);return Sl(e).Wt({range:u},(_,E,k)=>{const[B,q,te]=_,ge=Ka(q);B===this.userId&&i.isPrefixOf(ge)?ge.length===r&&(g=g.add(te)):k.done()}).next(()=>this.fn(e,g))}fn(e,t){const i=[],r=[];return t.forEach(l=>{r.push(Cu(e).get(l).next(u=>{if(null===u)throw jt();fn(u.userId===this.userId),i.push(Tl(this.M,u))}))}),We.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return G1(e.Ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),We.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return We.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Sl(e).Wt({range:i},(l,u,g)=>{if(l[0]===this.userId){const _=Ka(l[1]);r.push(_)}else g.done()}).next(()=>{fn(0===r.length)})})}containsKey(e,t){return $1(e,this.userId,t)}_n(e){return uE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $1(n,e,t){const i=Im(e,t.path),r=i[1],l=IDBKeyRange.lowerBound(i);let u=!1;return Sl(n).Wt({range:l,jt:!0},(g,_,E)=>{const[k,B,q]=g;k===e&&B===r&&(u=!0),E.done()}).next(()=>u)}function Cu(n){return jr(n,"mutations")}function Sl(n){return jr(n,"documentMutations")}function uE(n){return jr(n,"mutationQueues")}class Du{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Du(0)}static gn(){return new Du(-1)}}class W1{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const i=new Du(t.highestTargetId);return t.highestTargetId=i.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>nn.fromTimestamp(new Tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.yn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.pn(e,r)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(i=>(i.targetCount+=1,this.Tn(t,i),this.pn(e,i))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qd(e).delete(t.targetId)).next(()=>this.yn(e)).next(i=>(fn(i.targetCount>0),i.targetCount-=1,this.pn(e,i)))}removeTargets(e,t,i){let r=0;const l=[];return qd(e).Wt((u,g)=>{const _=ql(g);_.sequenceNumber<=t&&null===i.get(_.targetId)&&(r++,l.push(this.removeTargetData(e,_)))}).next(()=>We.waitFor(l)).next(()=>r)}forEachTarget(e,t){return qd(e).Wt((i,r)=>{const l=ql(r);t(l)})}yn(e){return xp(e).get("targetGlobalKey").next(t=>(fn(null!==t),t))}pn(e,t){return xp(e).put("targetGlobalKey",t)}In(e,t){return qd(e).put(Gd(this.M,t))}Tn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=Dd(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return qd(e).Wt({range:r,index:"queryTargetsIndex"},(u,g,_)=>{const E=ql(g);dm(t,E.target)&&(l=E,_.done())}).next(()=>l)}addMatchingKeys(e,t,i){const r=[],l=Iu(e);return t.forEach(u=>{const g=Vs(u.path);r.push(l.put({targetId:i,path:g})),r.push(this.referenceDelegate.addReference(e,i,u))}),We.waitFor(r)}removeMatchingKeys(e,t,i){const r=Iu(e);return We.forEach(t,l=>{const u=Vs(l.path);return We.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,l)])})}removeMatchingKeysForTargetId(e,t){const i=Iu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Iu(e);let l=yi();return r.Wt({range:i,jt:!0},(u,g,_)=>{const E=Ka(u[1]),k=new vt(E);l=l.add(k)}).next(()=>l)}containsKey(e,t){const i=Vs(t.path),r=IDBKeyRange.bound([i],[Ny(i)],!1,!0);let l=0;return Iu(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},([u,g],_,E)=>{0!==u&&(l++,E.done())}).next(()=>l>0)}Et(e,t){return qd(e).get(t).next(i=>i?ql(i):null)}}function qd(n){return jr(n,"targets")}function xp(n){return jr(n,"targetGlobal")}function Iu(n){return jr(n,"targetDocuments")}function Tu(n){return _v.apply(this,arguments)}function _v(){return _v=(0,Ie.Z)(function*(n){if(n.code!==je.FAILED_PRECONDITION||n.message!==eE)throw n;ct("LocalStore","Unexpectedly lost primary lease")}),_v.apply(this,arguments)}function dE([n,e],[t,i]){const r=Ln(n,t);return 0===r?Ln(e,i):r}class z1{constructor(e){this.En=e,this.buffer=new ir(dE),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dE(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q1{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const i=this.Pn?3e5:6e4;ct("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ie.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){Ud(r)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tu(r)}yield t.vn(e)}))}}class Z1{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return We.resolve(ta.A);const i=new z1(t);return this.Sn.forEachTarget(e,r=>i.bn(r.sequenceNumber)).next(()=>this.Sn.Cn(e,r=>i.bn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Sn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),We.resolve(H1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H1):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let i,r,l,u,g,_,E;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(B=>(B>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${B}`),r=this.params.maximumSequenceNumbersToCollect):r=B,u=Date.now(),this.nthSequenceNumber(e,r))).next(B=>(i=B,g=Date.now(),this.removeTargets(e,i,t))).next(B=>(l=B,_=Date.now(),this.removeOrphanedDocuments(e,i))).next(B=>(E=Date.now(),fp()<=_s.in.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-k}ms\n\tDetermined least recently used ${r} in `+(g-u)+`ms\n\tRemoved ${l} targets in `+(_-g)+`ms\n\tRemoved ${B} documents in `+(E-_)+`ms\nTotal Duration: ${E-k}ms`),We.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:B})))}}class hE{constructor(e,t){this.db=e,this.garbageCollector=new Z1(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Nn(e){let t=0;return this.Cn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(i,r)=>t(r))}addReference(e,t,i){return Lm(e,i)}removeReference(e,t,i){return Lm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Lm(e,t)}Mn(e,t){return function(i,r){let l=!1;return uE(i).zt(u=>$1(i,u,r).next(g=>(g&&(l=!0),We.resolve(!g)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let l=0;return this.kn(e,(u,g)=>{if(g<=t){const _=this.Mn(e,u).next(E=>{if(!E)return l++,i.getEntry(e,u).next(()=>(i.removeEntry(u,nn.min()),Iu(e).delete([0,Vs(u.path)])))});r.push(_)}}).next(()=>We.waitFor(r)).next(()=>i.apply(e)).next(()=>l)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Lm(e,t)}kn(e,t){const i=Iu(e);let r,l=ta.A;return i.Wt({index:"documentTargetsIndex"},([u,g],{path:_,sequenceNumber:E})=>{0===u?(l!==ta.A&&t(new vt(Ka(r)),l),l=E,r=_):l=ta.A}).next(()=>{l!==ta.A&&t(new vt(Ka(r)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lm(n,e){return Iu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Vs(e.path),sequenceNumber:i}));var i}class yv{constructor(){this.changes=new kd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?We.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fE{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Oc(e).put(i)}removeEntry(e,t,i){return Oc(e).delete(function(r,l){const u=r.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Mc(l),u[u.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.On(e,i)))}getEntry(e,t){let i=Bi.newInvalidDocument(t);return Oc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Mp(t))},(r,l)=>{i=this.Fn(t,l)}).next(()=>i)}$n(e,t){let i={size:0,document:Bi.newInvalidDocument(t)};return Oc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Mp(t))},(r,l)=>{i={document:this.Fn(t,l),size:Pm(l)}}).next(()=>i)}getEntries(e,t){let i=ko();return this.Bn(e,t,(r,l)=>{const u=this.Fn(r,l);i=i.insert(r,u)}).next(()=>i)}Ln(e,t){let i=ko(),r=new Br(vt.comparator);return this.Bn(e,t,(l,u)=>{const g=this.Fn(l,u);i=i.insert(l,g),r=r.insert(l,Pm(u))}).next(()=>({documents:i,Un:r}))}Bn(e,t,i){if(t.isEmpty())return We.resolve();let r=new ir(lf);t.forEach(_=>r=r.add(_));const l=IDBKeyRange.bound(Mp(r.first()),Mp(r.last())),u=r.getIterator();let g=u.getNext();return Oc(e).Wt({index:"documentKeyIndex",range:l},(_,E,k)=>{const B=vt.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;g&&lf(g,B)<0;)i(g,null),g=u.getNext();g&&g.isEqual(B)&&(i(g,E),g=u.hasNext()?u.getNext():null),g?k.Ut(Mp(g)):k.done()}).next(()=>{for(;g;)i(g,null),g=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),Mc(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(e).qt(IDBKeyRange.bound(r,l,!0)).next(u=>{let g=ko();for(const _ of u){const E=this.Fn(vt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(E.key,E)}return g})}getAllFromCollectionGroup(e,t,i,r){let l=ko();const u=Y1(t,i),g=Y1(t,Sc.max());return Oc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(_,E,k)=>{const B=this.Fn(vt.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);l=l.insert(B.key,B),l.size===r&&k.done()}).next(()=>l)}newChangeBuffer(e){return new vv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return K1(e).get("remoteDocumentGlobalKey").next(t=>(fn(!!t),t))}On(e,t){return K1(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const i=function rf(n,e){let t;if(e.document)t=lv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=vt.fromSegments(e.noDocument.path),r=Ja(e.noDocument.readTime);t=Bi.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const i=vt.fromSegments(e.unknownDocument.path),r=Ja(e.unknownDocument.version);t=Bi.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Tr(i[0],i[1]);return nn.fromTimestamp(r)}(e.readTime)),t}(this.M,t);if(!i.isNoDocument()||!i.version.isEqual(nn.min()))return i}return Bi.newInvalidDocument(e)}}class vv extends yv{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new kd(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new ir((l,u)=>Ln(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const g=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,g.readTime)),u.isValidDocument()){const _=Hd(this.qn.M,u);r=r.add(l.path.popLast()),i+=Pm(_)-g.size,t.push(this.qn.addEntry(e,l,_))}else if(i-=g.size,this.trackRemovals){const _=Hd(this.qn.M,u.convertToNoDocument(nn.min()));t.push(this.qn.addEntry(e,l,_))}}),r.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,i)),We.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(i=>(this.Gn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:i,Un:r})=>(r.forEach((l,u)=>{this.Gn.set(l,{size:u,readTime:i.get(l).readTime})}),i))}}function K1(n){return jr(n,"remoteDocumentGlobal")}function Oc(n){return jr(n,"remoteDocumentsV14")}function Mp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y1(n,e){const t=e.documentKey.path.toArray();return[n,Mc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lf(n,e){const t=n.path.length-e.path.length;return 0!==t?t:vt.comparator(n,e)}class pE{constructor(e){this.M=e}kt(e,t,i,r){const l=new Am("createOrUpgrade",t);var g;i<1&&r>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qw,{unique:!0}),g.createObjectStore("documentMutations"),Vm(e),function(g){g.createObjectStore("remoteDocuments")}(e));let u=We.resolve();return i<3&&r>=3&&(0!==i&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Vm(e)),u=u.next(()=>function(g){const _=g.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:nn.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(l))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(g,_){return _.store("mutations").qt().next(E=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qw,{unique:!0});const k=_.store("mutations"),B=E.map(q=>k.put(q));return We.waitFor(B)})}(e,l))),u=u.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(u=u.next(()=>this.Kn(l))),i<6&&r>=6&&(u=u.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),i<7&&r>=7&&(u=u.next(()=>this.jn(l))),i<8&&r>=8&&(u=u.next(()=>this.Wn(e,l))),i<9&&r>=9&&(u=u.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(u=u.next(()=>this.zn(l))),i<11&&r>=11&&(u=u.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(u=u.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:L1});_.createIndex("collectionPathOverlayIndex",EA,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Xw,{unique:!1})}(e)})),i<13&&r>=13&&(u=u.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:dv});_.createIndex("documentKeyIndex",F1),_.createIndex("collectionGroupIndex",Zw)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(u=u.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:wA}).createIndex("sequenceNumberIndex",Yw,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Jw}).createIndex("documentKeyIndex",Qw,{unique:!1})}(e)})),u}Qn(e){let t=0;return e.store("remoteDocuments").Wt((i,r)=>{t+=Pm(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Kn(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.qt().next(r=>We.forEach(r,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",u).next(g=>We.forEach(g,_=>{fn(_.userId===l.userId);const E=Tl(this.M,_);return G1(e,l.userId,E).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const l=[];return i.Wt((u,g)=>{const _=new Qn(u),E=[0,Vs(_)];l.push(t.get(E).next(k=>k?We.resolve():t.put({targetId:0,path:Vs(_),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>We.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:bA});const i=t.store("collectionParents"),r=new mv,l=u=>{if(r.add(u)){const g=u.lastSegment(),_=u.popLast();return i.put({collectionId:g,parent:Vs(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,g)=>{const _=new Qn(u);return l(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,g,_],E)=>{const k=Ka(g);return l(k.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((i,r)=>{const l=ql(r),u=Gd(this.M,l);return t.put(u)})}Hn(e,t){const i=t.store("remoteDocuments"),r=[];return i.Wt((l,u)=>{const g=t.store("remoteDocumentsV14"),_=(E=u,E.document?new vt(Qn.fromString(E.document.name).popFirst(5)):E.noDocument?vt.fromSegments(E.noDocument.path):E.unknownDocument?vt.fromSegments(E.unknownDocument.path):jt()).path.toArray();var E;const k={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};r.push(g.put(k))}).next(()=>We.waitFor(r))}}function Vm(n){n.createObjectStore("targetDocuments",{keyPath:vA}).createIndex("documentTargetsIndex",Cl,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kw,{unique:!0}),n.createObjectStore("targetGlobal")}const Op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bv{constructor(e,t,i,r,l,u,g,_,E,k,B=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Jn=l,this.window=u,this.document=g,this.Yn=E,this.Xn=k,this.Zn=B,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=q=>Promise.resolve(),!bv.vt())throw new rt(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hE(this,r),this.cs=t+"main",this.M=new xm(_),this.hs=new Dl(this.cs,this.Zn,new pE(this.M)),this.ls=new W1(this.referenceDelegate,this.M),this.fs=new fE(this.M),this.ds=new iE,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===k&&ps("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new rt(je.FAILED_PRECONDITION,Op);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ta(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var i=(0,Ie.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,Ie.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Ud(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return Su(e).get("owner").next(t=>We.resolve(this.bs(t)))}Ps(e){return Zd(e).delete(this.clientId)}Vs(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=jr(i,"clientMetadata");return r.qt().next(l=>{const u=e.Ss(l,18e5),g=l.filter(_=>-1===u.indexOf(_));return We.forEach(g,_=>r.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._s)for(const i of t)e._s.removeItem(e.Ds(i.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?We.resolve(!0):Su(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new rt(je.FAILED_PRECONDITION,Op);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zd(e).qt().next(i=>void 0===this.Ss(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,g=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Il(t,ta.A);return e.As(i).next(()=>e.Ps(i))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(i=>this.vs(i.updateTimeMs,t)&&!this.Cs(i.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Zd(e).qt().next(t=>this.Ss(t,18e5).map(i=>i.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Fm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new CA(e)}getDocumentOverlayCache(e){return Om.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,i){ct("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",l=14===(u=this.Zn)?B1:13===u?Sm:12===u?V1:11===u?Tm:void jt();var u;let g;return this.hs.runTransaction(e,r,l,_=>(g=new Il(_,this.ts?this.ts.next():ta.A),"readwrite-primary"===t?this.Ts(g).next(E=>!!E||this.Es(g)).next(E=>{if(!E)throw ps(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new rt(je.FAILED_PRECONDITION,eE);return i(g)}).next(E=>this.Rs(g).next(()=>E)):this.Fs(g).next(()=>i(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Fs(e){return Su(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new rt(je.FAILED_PRECONDITION,Op)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Su(e).put("owner",t)}static vt(){return Dl.vt()}As(e){const t=Su(e);return t.get("owner").next(i=>this.bs(i)?(ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):We.resolve())}vs(e,t){const i=Date.now();return!(e<i-t||e>i&&(ps(`Detected an update time that is in the future: ${e} > ${i}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,de.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const i=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ct("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ps("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){ps("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Su(n){return jr(n,"owner")}function Zd(n){return jr(n,"clientMetadata")}function Rp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class DA{constructor(e,t,i){this.fs=e,this.$s=t,this.indexManager=i}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.Ls(e,t,i))}Ls(e,t,i){return this.fs.getEntry(e,t).next(r=>{for(const l of i)l.applyToLocalView(r);return r})}Us(e,t){e.forEach((i,r)=>{for(const l of t)l.applyToLocalView(r)})}qs(e,t){return this.fs.getEntries(e,t).next(i=>this.Gs(e,i).next(()=>i))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.Us(t,i))}Ks(e,t,i){return vt.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Qs(e,t.path):qy(t)?this.js(e,t,i):this.Ws(e,t,i);var r}Qs(e,t){return this.Bs(e,new vt(t)).next(i=>{let r=ev();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}js(e,t,i){const r=t.collectionGroup;let l=ev();return this.indexManager.getCollectionParents(e,r).next(u=>We.forEach(u,g=>{const _=(E=t,k=g.child(r),new Ac(k,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,k;return this.Ws(e,_,i).next(E=>{E.forEach((k,B)=>{l=l.insert(k,B)})})}).next(()=>l))}Ws(e,t,i){let r;return this.fs.getAllFromCollection(e,t.path,i).next(l=>(r=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const u of l)for(const g of u.mutations){const _=g.key;let E=r.get(_);null==E&&(E=Bi.newInvalidDocument(_),r=r.insert(_,E)),ym(g,E,u.localWriteTime),E.isFoundDocument()||(r=r.remove(_))}}).next(()=>(r.forEach((l,u)=>{yu(t,u)||(r=r.remove(l))}),r))}}class wv{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.zs=i,this.Hs=r}static Js(e,t){let i=yi(),r=yi();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new wv(e,t.fromCache,i,r)}}class Bm{Ys(e){this.Xs=e}Ks(e,t,i,r){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||i.isEqual(nn.min())?this.Zs(e,t):this.Xs.qs(e,r).next(l=>{const u=this.ti(t,l);return(fm(t)||zh(t))&&this.ei(t.limitType,u,r,i)?this.Zs(e,t):(fp()<=_s.in.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xd(t)),this.Xs.Ks(e,t,Vy(i,-1)).next(g=>(u.forEach(_=>{g=g.insert(_.key,_)}),g)))});var l}ti(e,t){let i=new ir(Zy(e));return t.forEach((r,l)=>{yu(e,l)&&(i=i.add(l))}),i}ei(e,t,i,r){if(i.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Zs(e,t){return fp()<=_s.in.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",xd(t)),this.Xs.Ks(e,t,Sc.min())}}class Ev{constructor(e,t,i,r){this.persistence=e,this.ni=t,this.M=r,this.si=new Br(Ln),this.ii=new kd(l=>Dd(l),dm),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(i)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new DA(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Cv(n,e,t,i){return new Ev(n,e,t,i)}function Dv(n,e){return kp.apply(this,arguments)}function kp(){return kp=(0,Ie.Z)(function*(n,e){const t=Dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.$s.getAllMutationBatches(i).next(l=>(r=l,t.ui(e),t.$s.getAllMutationBatches(i))).next(l=>{const u=[],g=[];let _=yi();for(const E of r){u.push(E.batchId);for(const k of E.mutations)_=_.add(k.key)}for(const E of l){g.push(E.batchId);for(const k of E.mutations)_=_.add(k.key)}return t.ai.qs(i,_).next(E=>({ci:E,removedBatchIds:u,addedBatchIds:g}))})})}),kp.apply(this,arguments)}function gE(n,e){const t=Dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(u,g,_,E){const k=_.batch,B=k.keys();let q=We.resolve();return B.forEach(te=>{q=q.next(()=>E.getEntry(g,te)).next(ge=>{const Ne=_.docVersions.get(te);fn(null!==Ne),ge.version.compareTo(Ne)<0&&(k.applyToRemoteDocument(ge,_),ge.isValidDocument()&&(ge.setReadTime(_.commitVersion),E.addEntry(ge)))})}),q.next(()=>u.$s.removeMutationBatch(g,k))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.$s.performConsistencyCheck(i)).next(()=>t.ai.qs(i,r))})}function Iv(n){const e=Dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function Tv(n,e){const t=Dt(n),i=e.snapshotVersion;let r=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.oi.newChangeBuffer({trackRemovals:!0});r=t.si;const g=[];e.targetChanges.forEach((E,k)=>{const B=r.get(k);if(!B)return;g.push(t.ls.removeMatchingKeys(l,E.removedDocuments,k).next(()=>t.ls.addMatchingKeys(l,E.addedDocuments,k)));let q=B.withSequenceNumber(l.currentSequenceNumber);var te,ge,Ne;e.targetMismatches.has(k)?q=q.withResumeToken(Ss.EMPTY_BYTE_STRING,nn.min()).withLastLimboFreeSnapshotVersion(nn.min()):E.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(E.resumeToken,i)),r=r.insert(k,q),ge=q,Ne=E,(0===(te=B).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-te.snapshotVersion.toMicroseconds()>=3e8||Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0)&&g.push(t.ls.updateTargetData(l,q))});let _=ko();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),g.push(Sv(l,u,e.documentUpdates).next(E=>{_=E})),!i.isEqual(nn.min())){const E=t.ls.getLastRemoteSnapshotVersion(l).next(k=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,i));g.push(E)}return We.waitFor(g).next(()=>u.apply(l)).next(()=>t.ai.Gs(l,_)).next(()=>_)}).then(l=>(t.si=r,l))}function Sv(n,e,t){let i=yi();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let l=ko();return t.forEach((u,g)=>{const _=r.get(u);g.isNoDocument()&&g.version.isEqual(nn.min())?(e.removeEntry(u,g.readTime),l=l.insert(u,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||0===g.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(g),l=l.insert(u,g)):ct("LocalStore","Ignoring outdated watch update for ",u,". Current version:",_.version," Watch version:",g.version)}),l})}function J1(n,e){const t=Dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(i,e)))}function Kd(n,e){const t=Dt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.ls.getTargetData(i,e).next(l=>l?(r=l,We.resolve(r)):t.ls.allocateTargetId(i).next(u=>(r=new As(e,u,0,i.currentSequenceNumber),t.ls.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.si.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.si=t.si.insert(i.targetId,i),t.ii.set(e,i.targetId)),i})}function Yd(n,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,Ie.Z)(function*(n,e,t){const i=Dt(n),r=i.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Ud(u))throw u;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.si=i.si.remove(e),i.ii.delete(r.target)}),Pp.apply(this,arguments)}function Fp(n,e,t){const i=Dt(n);let r=nn.min(),l=yi();return i.persistence.runTransaction("Execute query","readonly",u=>function(g,_,E){const k=Dt(g),B=k.ii.get(E);return void 0!==B?We.resolve(k.si.get(B)):k.ls.getTargetData(_,E)}(i,u,po(e)).next(g=>{if(g)return r=g.lastLimboFreeSnapshotVersion,i.ls.getMatchingKeysForTargetId(u,g.targetId).next(_=>{l=_})}).next(()=>i.ni.Ks(u,e,t?r:nn.min(),t?l:yi())).next(g=>(Nv(i,Ew(e),g),{documents:g,hi:l})))}function mE(n,e){const t=Dt(n),i=Dt(t.ls),r=t.si.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",l=>i.Et(l,e).next(u=>u?u.target:null))}function Av(n,e){const t=Dt(n),i=t.ri.get(e)||nn.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.oi.getAllFromCollectionGroup(r,e,Vy(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Nv(t,e,r),r))}function Nv(n,e,t){let i=nn.min();t.forEach((r,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ri.set(e,i)}function cf(){return cf=(0,Ie.Z)(function*(n,e,t,i){const r=Dt(n);let l=yi(),u=ko();for(const E of t){const k=e.li(E.metadata.name);E.document&&(l=l.add(k));const B=e.fi(E);B.setReadTime(e.di(E.metadata.readTime)),u=u.insert(k,B)}const g=r.oi.newChangeBuffer({trackRemovals:!0}),_=yield Kd(r,(E=i,po(Td(Qn.fromString(`__bundle__/docs/${E}`)))));var E;return r.persistence.runTransaction("Apply bundle documents","readwrite",E=>Sv(E,g,u).next(k=>(g.apply(E),k)).next(k=>r.ls.removeMatchingKeysForTargetId(E,_.targetId).next(()=>r.ls.addMatchingKeys(E,l,_.targetId)).next(()=>r.ai.Gs(E,k)).next(()=>k)))}),cf.apply(this,arguments)}function _E(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,Ie.Z)(function*(n,e,t=yi()){const i=yield Kd(n,po(wu(e.bundledQuery))),r=Dt(n);return r.persistence.runTransaction("Save named query","readwrite",l=>{const u=Ur(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.ds.saveNamedQuery(l,e);const g=i.withResumeToken(Ss.EMPTY_BYTE_STRING,u);return r.si=r.si.insert(g.targetId,g),r.ls.updateTargetData(l,g).next(()=>r.ls.removeMatchingKeysForTargetId(l,i.targetId)).next(()=>r.ls.addMatchingKeys(l,t,i.targetId)).next(()=>r.ds.saveNamedQuery(l,e))})}),Um.apply(this,arguments)}class yE{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return We.resolve(this._i.get(t))}saveBundleMetadata(e,t){var i;return this._i.set(t.id,{id:(i=t).id,version:i.version,createTime:Ur(i.createTime)}),We.resolve()}getNamedQuery(e,t){return We.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(i=t).name,query:wu(i.bundledQuery),readTime:Ur(i.readTime)}),We.resolve();var i}}class vE{constructor(){this.overlays=new Br(vt.comparator),this.mi=new Map}getOverlay(e,t){return We.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach((r,l)=>{this.Xt(e,t,l)}),We.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.mi.get(i);return void 0!==r&&(r.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(i)),We.resolve()}getOverlaysForCollection(e,t,i){const r=Pd(),l=t.length+1,u=new vt(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const _=g.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===l&&_.largestBatchId>i&&r.set(_.getKey(),_)}return We.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let l=new Br((E,k)=>E-k);const u=this.overlays.getIterator();for(;u.hasNext();){const E=u.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>i){let k=l.get(E.largestBatchId);null===k&&(k=Pd(),l=l.insert(E.largestBatchId,k)),k.set(E.getKey(),E)}}const g=Pd(),_=l.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,k)=>g.set(E,k)),!(g.size()>=r)););return We.resolve(g)}Xt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const u=this.mi.get(r.largestBatchId).delete(i.key);this.mi.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new nf(t,i));let l=this.mi.get(t);void 0===l&&(l=yi(),this.mi.set(t,l)),this.mi.set(t,l.add(i.key))}}class jm{constructor(){this.gi=new ir(Ns.yi),this.pi=new ir(Ns.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const i=new Ns(e,t);this.gi=this.gi.add(i),this.pi=this.pi.add(i)}Ti(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Ei(new Ns(e,t))}Ai(e,t){e.forEach(i=>this.removeReference(i,t))}Ri(e){const t=new vt(new Qn([])),i=new Ns(t,e),r=new Ns(t,e+1),l=[];return this.pi.forEachInRange([i,r],u=>{this.Ei(u),l.push(u.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new vt(new Qn([])),i=new Ns(t,e),r=new Ns(t,e+1);let l=yi();return this.pi.forEachInRange([i,r],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Ns(e,0),i=this.gi.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Ns{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return vt.comparator(e.key,t.key)||Ln(e.Vi,t.Vi)}static Ii(e,t){return Ln(e.Vi,t.Vi)||vt.comparator(e.key,t.key)}}class bE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new ir(Ns.yi)}checkEmpty(e){return We.resolve(0===this.$s.length)}addMutationBatch(e,t,i,r){const l=this.vi;this.vi++;const u=new Bs(l,t,i,r);this.$s.push(u);for(const g of r)this.Si=this.Si.add(new Ns(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return We.resolve(u)}lookupMutationBatch(e,t){return We.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.Ci(t+1),l=r<0?0:r;return We.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return We.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return We.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ns(t,0),r=new Ns(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([i,r],u=>{const g=this.Di(u.Vi);l.push(g)}),We.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ir(Ln);return t.forEach(r=>{const l=new Ns(r,0),u=new Ns(r,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,u],g=>{i=i.add(g.Vi)})}),We.resolve(this.xi(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let l=i;vt.isDocumentKey(l)||(l=l.child(""));const u=new Ns(new vt(l),0);let g=new ir(Ln);return this.Si.forEachWhile(_=>{const E=_.key.path;return!!i.isPrefixOf(E)&&(E.length===r&&(g=g.add(_.Vi)),!0)},u),We.resolve(this.xi(g))}xi(e){const t=[];return e.forEach(i=>{const r=this.Di(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){fn(0===this.Ni(t.batchId,"removed")),this.$s.shift();let i=this.Si;return We.forEach(t.mutations,r=>{const l=new Ns(r.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Si=i})}dn(e){}containsKey(e,t){const i=new Ns(t,0),r=this.Si.firstAfterOrEqual(i);return We.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return We.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class wE{constructor(e){this.ki=e,this.docs=new Br(vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),l=r?r.size:0,u=this.ki(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return We.resolve(i?i.document.mutableCopy():Bi.newInvalidDocument(t))}getEntries(e,t){let i=ko();return t.forEach(r=>{const l=this.docs.get(r);i=i.insert(r,l?l.document.mutableCopy():Bi.newInvalidDocument(r))}),We.resolve(i)}getAllFromCollection(e,t,i){let r=ko();const l=new vt(t.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:g,value:{document:_}}=u.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||cA(lA(_),i)<=0||(r=r.insert(_.key,_.mutableCopy()))}return We.resolve(r)}getAllFromCollectionGroup(e,t,i,r){jt()}Mi(e,t){return We.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new IA(this)}getSize(e){return We.resolve(this.size)}}class IA extends yv{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.qn.addEntry(e,r)):this.qn.removeEntry(i)}),We.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Q1{constructor(e){this.persistence=e,this.Oi=new kd(t=>Dd(t),dm),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.Fi=0,this.$i=new jm,this.targetCount=0,this.Bi=Du.mn()}forEachTarget(e,t){return this.Oi.forEach((i,r)=>t(r)),We.resolve()}getLastRemoteSnapshotVersion(e){return We.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return We.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),We.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Fi&&(this.Fi=t),We.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Du(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,We.resolve()}updateTargetData(e,t){return this.In(t),We.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,We.resolve()}removeTargets(e,t,i){let r=0;const l=[];return this.Oi.forEach((u,g)=>{g.sequenceNumber<=t&&null===i.get(g.targetId)&&(this.Oi.delete(u),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),r++)}),We.waitFor(l).next(()=>r)}getTargetCount(e){return We.resolve(this.targetCount)}getTargetData(e,t){const i=this.Oi.get(t)||null;return We.resolve(i)}addMatchingKeys(e,t,i){return this.$i.Ti(t,i),We.resolve()}removeMatchingKeys(e,t,i){this.$i.Ai(t,i);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach(u=>{l.push(r.markPotentiallyOrphaned(e,u))}),We.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),We.resolve()}getMatchingKeysForTargetId(e,t){const i=this.$i.Pi(t);return We.resolve(i)}containsKey(e,t){return We.resolve(this.$i.containsKey(t))}}class X1{constructor(e,t){this.Li={},this.overlays={},this.ts=new ta(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Q1(this),this.indexManager=new lE,this.fs=new wE(i=>this.referenceDelegate.Ui(i)),this.M=new xm(t),this.ds=new yE(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Li[e.toKey()];return i||(i=new bE(t,this.referenceDelegate),this.Li[e.toKey()]=i),i}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,i){ct("MemoryPersistence","Starting transaction:",e);const r=new EE(this.ts.next());return this.referenceDelegate.qi(),i(r).next(l=>this.referenceDelegate.Gi(r).next(()=>l)).toPromise().then(l=>(r.raiseOnCommittedEvent(),l))}Ki(e,t){return We.or(Object.values(this.Li).map(i=>()=>i.containsKey(e,t)))}}class EE extends tE{constructor(e){super(),this.currentSequenceNumber=e}}class Mv{constructor(e){this.persistence=e,this.Qi=new jm,this.ji=null}static Wi(e){return new Mv(e)}get zi(){if(this.ji)return this.ji;throw jt()}addReference(e,t,i){return this.Qi.addReference(i,t),this.zi.delete(i.toString()),We.resolve()}removeReference(e,t,i){return this.Qi.removeReference(i,t),this.zi.add(i.toString()),We.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),We.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(r=>this.zi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(l=>this.zi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return We.forEach(this.zi,i=>{const r=vt.fromPath(i);return this.Hi(e,r).next(l=>{l||t.removeEntry(r,nn.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(i=>{i?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return We.or([()=>We.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function gs(n,e){return`firestore_clients_${n}_${e}`}function Ov(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Rv(n,e){return`firestore_targets_${n}_${e}`}class Hm{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ji(e,t,i){const r=JSON.parse(i);let l,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(l=new rt(r.error.code,r.error.message))),u?new Hm(e,t,r.state,l):(ps("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ji(e,t){const i=JSON.parse(t);let r,l="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(r=new rt(i.error.code,i.error.message))),l?new uf(e,i.state,r):(ps("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,l=Qh();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=vw(i.activeTargetIds[u]),l=l.add(i.activeTargetIds[u]);return r?new Gm(e,l):(ps("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $m{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $m(t.clientId,t.onlineState):(ps("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Wm{constructor(){this.activeTargetIds=Qh()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Au{constructor(e,t,i,r,l){this.window=e,this.Jn=t,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Br(Ln),this.started=!1,this.ir=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=gs(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Wm),this.ar=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Os();for(const r of t){if(r===e.tr)continue;const l=e.getItem(gs(e.persistenceKey,r));if(l){const u=Gm.Ji(r,l);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const i=e.storage.getItem(e.lr);if(i){const r=e.wr(i);r&&e.mr(r)}for(const r of e.ir)e.nr(r);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,i){this.yr(e,t,i),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Rv(this.persistenceKey,e));if(i){const r=uf.Ji(e,i);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rv(this.persistenceKey,e))}updateQueryState(e,t,i){this.Tr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.pr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ct("SharedClientState","READ",e,t),t}setItem(e,t){ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(ct("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void ps("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==i.key)if(t.ar.test(i.key)){if(null==i.newValue){const r=t.Rr(i.key);return t.br(r,null)}{const r=t.Pr(i.key,i.newValue);if(r)return t.br(r.clientId,r)}}else if(t.cr.test(i.key)){if(null!==i.newValue){const r=t.Vr(i.key,i.newValue);if(r)return t.vr(r)}}else if(t.hr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(i.key===t.lr){if(null!==i.newValue){const r=t.wr(i.newValue);if(r)return t.mr(r)}}else if(i.key===t.ur){const r=function(l){let u=ta.A;if(null!=l)try{const g=JSON.parse(l);fn("number"==typeof g),u=g}catch(g){ps("SharedClientState","Failed to read sequence number from WebStorage",g)}return u}(i.newValue);r!==ta.A&&t.sequenceNumberHandler(r)}else if(i.key===t.dr){const r=t.Cr(i.newValue);yield Promise.all(r.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,i){const r=new Hm(this.currentUser,e,t,i),l=Ov(this.persistenceKey,this.currentUser,e);this.setItem(l,r.Yi())}pr(e){const t=Ov(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,i){const r=Rv(this.persistenceKey,e),l=new uf(e,t,i);this.setItem(r,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const i=this.Rr(e);return Gm.Ji(i,t)}Vr(e,t){const i=this.cr.exec(e),r=Number(i[1]);return Hm.Ji(new Lr(void 0!==i[2]?i[2]:null),r,t)}Sr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return uf.Ji(r,t)}wr(e){return $m.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const i=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),l=this.gr(i),u=[],g=[];return l.forEach(_=>{r.has(_)||u.push(_)}),r.forEach(_=>{l.has(_)||g.push(_)}),this.syncEngine.Or(u,g).then(()=>{this.sr=i})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Qh();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class CE{constructor(){this.Fr=new Wm,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Wm,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eI{Br(e){}shutdown(){}}class kv{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class DE{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class TA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,l){const u=this.oo(e,t);ct("RestConnection","Sending: ",u,i);const g={};return this.uo(g,r,l),this.ao(e,u,g,i).then(_=>(ct("RestConnection","Received: ",_),_),_=>{throw jh("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",i),_})}co(e,t,i,r,l){return this.ro(e,t,i,r,l)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+uu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,l)=>e[l]=r),i&&i.headers.forEach((r,l)=>e[l]=r)}oo(e,t){return`${this.so}/v1/${t}:${tI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,i,r){return new Promise((l,u)=>{const g=new hp;g.listenOnce(bd.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case cu.NO_ERROR:const E=g.getResponseJson();ct("Connection","XHR received:",JSON.stringify(E)),l(E);break;case cu.TIMEOUT:ct("Connection",'RPC "'+e+'" timed out'),u(new rt(je.DEADLINE_EXCEEDED,"Request time out"));break;case cu.HTTP_ERROR:const k=g.getStatus();if(ct("Connection",'RPC "'+e+'" failed with status:',k,"response text:",g.getResponseText()),k>0){const B=g.getResponseJson().error;if(B&&B.status&&B.message){const q=function(te){const ge=te.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(ge)>=0?ge:je.UNKNOWN}(B.status);u(new rt(q,B.message))}else u(new rt(je.UNKNOWN,"Server responded with status "+g.getStatus()))}else u(new rt(je.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{ct("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(r);g.send(t,"POST",_,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ea(),u=vd(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new $l({})),this.uo(g.initMessageHeaders,t,i),(0,de.uI)()||(0,de.b$)()||(0,de.d)()||(0,de.w1)()||(0,de.Mn)()||(0,de.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const _=r.join("");ct("Connection","Creating WebChannel: "+_,g);const E=l.createWebChannel(_,g);let k=!1,B=!1;const q=new DE({jr:ge=>{B?ct("Connection","Not sending because WebChannel is closed:",ge):(k||(ct("Connection","Opening WebChannel transport."),E.open(),k=!0),ct("Connection","WebChannel sending:",ge),E.send(ge))},Wr:()=>E.close()}),te=(ge,Ne,it)=>{ge.listen(Ne,Ht=>{try{it(Ht)}catch(gt){setTimeout(()=>{throw gt},0)}})};return te(E,Ic.EventType.OPEN,()=>{B||ct("Connection","WebChannel transport opened.")}),te(E,Ic.EventType.CLOSE,()=>{B||(B=!0,ct("Connection","WebChannel transport closed"),q.eo())}),te(E,Ic.EventType.ERROR,ge=>{B||(B=!0,jh("Connection","WebChannel transport errored:",ge),q.eo(new rt(je.UNAVAILABLE,"The operation could not be completed")))}),te(E,Ic.EventType.MESSAGE,ge=>{var Ne;if(!B){const it=ge.data[0];fn(!!it);const Ht=it,gt=Ht.error||(null===(Ne=Ht[0])||void 0===Ne?void 0:Ne.error);if(gt){ct("Connection","WebChannel received error:",gt);const rn=gt.status;let Ct=function(xt){const Un=Si[xt];if(void 0!==Un)return Rw(Un)}(rn),Lt=gt.message;void 0===Ct&&(Ct=je.INTERNAL,Lt="Unknown error status: "+rn+" with message "+gt.message),B=!0,q.eo(new rt(Ct,Lt)),E.close()}else ct("Connection","WebChannel received:",it),q.no(it)}}),te(u,dp.STAT_EVENT,ge=>{ge.stat===sm.PROXY?ct("Connection","Detected buffering proxy"):ge.stat===sm.NOPROXY&&ct("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.Zr()},0),q}}function zm(){return"undefined"!=typeof window?window:null}function df(){return"undefined"!=typeof document?document:null}function ia(n){return new _A(n,!0)}class Pv{constructor(e,t,i=1e3,r=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=i,this.fo=r,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&ct("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Fv{constructor(e,t,i,r,l,u,g,_){this.Jn=e,this.Ao=i,this.Ro=r,this.bo=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Pv(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var i=this;return(0,Ie.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==e?i.So.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(ps(t.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):t&&t.code===je.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new rt(je.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zl extends Fv{constructor(e,t,i,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Bw(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:jt(),r=e.targetChange.targetIds||[],l=function(_,E){return _.N?(fn(void 0===E||"string"==typeof E),Ss.fromBase64String(E||"")):(fn(void 0===E||E instanceof Uint8Array),Ss.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&function(_){const E=void 0===_.code?je.UNKNOWN:Rw(_.code);return new rt(E,_.message||"")}(u);t=new iv(i,r,l,g||null)}else if("documentChange"in e){const i=e.documentChange,r=El(n,i.document.name),l=Ur(i.document.updateTime),u=new Ls({mapValue:{fields:i.document.fields}}),g=Bi.newFoundDocument(r,l,u);t=new Dp(i.targetIds||[],i.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const i=e.documentDelete,r=El(n,i.document),l=i.readTime?Ur(i.readTime):nn.min(),u=Bi.newNoDocument(r,l);t=new Dp([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const i=e.documentRemove,r=El(n,i.document);t=new Dp([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return jt();{const i=e.filter,l=new T1(i.count||0);t=new nv(i.targetId,l)}}var _;return t}(this.M,e),i=function(r){if(!("targetChange"in r))return nn.min();const l=r.targetChange;return l.targetIds&&l.targetIds.length?nn.min():l.readTime?Ur(l.readTime):nn.min()}(e);return this.listener.Ko(t,i)}Qo(e){const t={};t.database=Ld(this.M),t.addTarget=function(r,l){let u;const g=l.target;return u=jy(g)?{documents:Uw(r,g)}:{query:jw(r,g)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?u.resumeToken=sv(r,l.resumeToken):l.snapshotVersion.compareTo(nn.min())>0&&(u.readTime=Fd(r,l.snapshotVersion.toTimestamp())),u}(this.M,e);const i=function M1(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Oo(t)}jo(e){const t={};t.database=Ld(this.M),t.removeTarget=e,this.Oo(t)}}class Al extends Fv{constructor(e,t,i,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function tf(n,e){return n&&n.length>0?(fn(void 0!==e),n.map(t=>function(i,r){let l=Ur(i.updateTime?i.updateTime:r);return l.isEqual(nn.min())&&(l=Ur(r)),new mA(l,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ur(e.commitTime);return this.listener.Jo(i,t)}return fn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ld(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Tp(this.M,i))};this.Oo(t)}}class Nl extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.M=r,this.Zo=!1}tu(){if(this.Zo)throw new rt(je.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.bo.ro(e,t,i,r,l)).catch(r=>{throw"FirebaseError"===r.name?(r.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt(je.UNKNOWN,r.toString())})}co(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,l])=>this.bo.co(e,t,i,r,l)).catch(r=>{throw"FirebaseError"===r.name?(r.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new rt(je.UNKNOWN,r.toString())})}terminate(){this.Zo=!0}}class IE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ps(t),this.su=!1):ct("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class TE{constructor(e,t,i,r,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(g=>{i.enqueueAndForget((0,Ie.Z)(function*(){var _;kc(u)&&(ct("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ie.Z)(function*(E){const k=Dt(E);k.lu.add(4),yield hf(k),k._u.set("Unknown"),k.lu.delete(4),yield Lp(k)}),function(E){return _.apply(this,arguments)})(u))}))}),this._u=new IE(i,r)}}function Lp(n){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,Ie.Z)(function*(n){if(kc(n))for(const e of n.fu)yield e(!0)}),Lv.apply(this,arguments)}function hf(n){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,Ie.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Vv.apply(this,arguments)}function ff(n,e){const t=Dt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),qm(t)?jv(t):pf(t).Co()&&Bv(t,e))}function Rc(n,e){const t=Dt(n),i=pf(t);t.hu.delete(e),i.Co()&&Uv(t,e),0===t.hu.size&&(i.Co()?i.ko():kc(t)&&t._u.set("Unknown"))}function Bv(n,e){n.wu.Z(e.targetId),pf(n).Qo(e)}function Uv(n,e){n.wu.Z(e),pf(n).jo(e)}function jv(n){n.wu=new Pw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),pf(n).start(),n._u.iu()}function qm(n){return kc(n)&&!pf(n).Do()&&n.hu.size>0}function kc(n){return 0===Dt(n).lu.size}function Vp(n){n.wu=void 0}function nI(n){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,Ie.Z)(function*(n){n.hu.forEach((e,t)=>{Bv(n,e)})}),Zm.apply(this,arguments)}function SE(n,e){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,Ie.Z)(function*(n,e){Vp(n),qm(n)?(n._u.uu(e),jv(n)):n._u.set("Unknown")}),Bp.apply(this,arguments)}function Km(n,e,t){return Up.apply(this,arguments)}function Up(){return Up=(0,Ie.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof iv&&2===e.state&&e.cause)try{yield(i=(0,Ie.Z)(function*(r,l){const u=l.cause;for(const g of l.targetIds)r.hu.has(g)&&(yield r.remoteSyncer.rejectListen(g,u),r.hu.delete(g),r.wu.removeTarget(g))}),function(r,l){return i.apply(this,arguments)})(n,e)}catch(i){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield jp(n,i)}else if(e instanceof Dp?n.wu.ut(e):e instanceof nv?n.wu._t(e):n.wu.ht(e),!t.isEqual(nn.min()))try{const i=yield Iv(n.localStore);t.compareTo(i)>=0&&(yield function(r,l){const u=r.wu.yt(l);return u.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=r.hu.get(_);E&&r.hu.set(_,E.withResumeToken(g.resumeToken,l))}}),u.targetMismatches.forEach(g=>{const _=r.hu.get(g);if(!_)return;r.hu.set(g,_.withResumeToken(Ss.EMPTY_BYTE_STRING,_.snapshotVersion)),Uv(r,g);const E=new As(_.target,g,1,_.sequenceNumber);Bv(r,E)}),r.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(i){ct("RemoteStore","Failed to raise snapshot:",i),yield jp(n,i)}var i}),Up.apply(this,arguments)}function jp(n,e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ie.Z)(function*(n,e,t){if(!Ud(e))throw e;n.lu.add(1),yield hf(n),n._u.set("Offline"),t||(t=()=>Iv(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){ct("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Lp(n)}))}),Ym.apply(this,arguments)}function Hv(n,e){return e().catch(t=>jp(n,t,e))}function Jd(n){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,Ie.Z)(function*(n){const e=Dt(n),t=Nu(e);let i=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;AE(e);)try{const r=yield J1(e.localStore,i);if(null===r){0===e.cu.length&&t.ko();break}i=r.batchId,NE(e,r)}catch(r){yield jp(e,r)}xE(e)&&ME(e)}),Jm.apply(this,arguments)}function AE(n){return kc(n)&&n.cu.length<10}function NE(n,e){n.cu.push(e);const t=Nu(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function xE(n){return kc(n)&&!Nu(n).Do()&&n.cu.length>0}function ME(n){Nu(n).start()}function iI(n){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Ie.Z)(function*(n){Nu(n).Xo()}),Gv.apply(this,arguments)}function rI(n){return $v.apply(this,arguments)}function $v(){return $v=(0,Ie.Z)(function*(n){const e=Nu(n);for(const t of n.cu)e.Ho(t.mutations)}),$v.apply(this,arguments)}function sI(n,e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,Ie.Z)(function*(n,e,t){const i=n.cu.shift(),r=xc.from(i,e,t);yield Hv(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Jd(n)}),Wv.apply(this,arguments)}function oI(n,e){return zv.apply(this,arguments)}function zv(){return zv=(0,Ie.Z)(function*(n,e){var t;e&&Nu(n).zo&&(yield(t=(0,Ie.Z)(function*(i,r){if(Ow(l=r.code)&&l!==je.ABORTED){const u=i.cu.shift();Nu(i).No(),yield Hv(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield Jd(i)}var l}),function(i,r){return t.apply(this,arguments)})(n,e)),xE(n)&&ME(n)}),zv.apply(this,arguments)}function OE(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,Ie.Z)(function*(n,e){const t=Dt(n);t.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const i=kc(t);t.lu.add(3),yield hf(t),i&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Lp(t)}),qv.apply(this,arguments)}function Zv(n,e){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Ie.Z)(function*(n,e){const t=Dt(n);e?(t.lu.delete(2),yield Lp(t)):e||(t.lu.add(2),yield hf(t),t._u.set("Unknown"))}),Kv.apply(this,arguments)}function pf(n){return n.mu||(n.mu=function(e,t,i){const r=Dt(e);return r.tu(),new Zl(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{zr:nI.bind(null,n),Jr:SE.bind(null,n),Ko:Km.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.mu.No(),qm(n)?jv(n):n._u.set("Unknown")):(yield n.mu.stop(),Vp(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Nu(n){return n.gu||(n.gu=function(e,t,i){const r=Dt(e);return r.tu(),new Al(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{zr:iI.bind(null,n),Jr:oI.bind(null,n),Yo:rI.bind(null,n),Jo:sI.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.gu.No(),yield Jd(n)):(yield n.gu.stop(),n.cu.length>0&&(ct("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Yv{constructor(e,t,i,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=l,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,i,r,l){const u=Date.now()+i,g=new Yv(e,t,u,r,l);return g.start(i),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gf(n,e){if(ps("AsyncQueue",`${e}: ${n}`),Ud(n))return new rt(je.UNAVAILABLE,`${e}: ${n}`);throw n}class Qd{constructor(e){this.comparator=e?(t,i)=>e(t,i)||vt.comparator(t.key,i.key):(t,i)=>vt.comparator(t.key,i.key),this.keyedMap=ev(),this.sortedSet=new Br(this.comparator)}static emptySet(e){return new Qd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=i.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Qd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Jv{constructor(){this.yu=new Br(vt.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?0!==e.type&&3===i.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==i.type?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.yu=this.yu.remove(t):1===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):jt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Xd{constructor(e,t,i,r,l,u,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,i,r){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Xd(e,t,Qd.emptySet(t),l,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class RE{constructor(){this.Iu=void 0,this.listeners=[]}}class kE{constructor(){this.queries=new kd(e=>Nd(e),Ad),this.onlineState="Unknown",this.Tu=new Set}}function Qm(n,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Ie.Z)(function*(n,e){const t=Dt(n),i=e.query;let r=!1,l=t.queries.get(i);if(l||(r=!0,l=new RE),r)try{l.Iu=yield t.onListen(i)}catch(u){const g=gf(u,`Initialization of query '${xd(e.query)}' failed`);return void e.onError(g)}t.queries.set(i,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&Pc(t)}),Xm.apply(this,arguments)}function e_(n,e){return t_.apply(this,arguments)}function t_(){return t_=(0,Ie.Z)(function*(n,e){const t=Dt(n),i=e.query;let r=!1;const l=t.queries.get(i);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),r=0===l.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),t_.apply(this,arguments)}function Qv(n,e){const t=Dt(n);let i=!1;for(const r of e){const u=t.queries.get(r.query);if(u){for(const g of u.listeners)g.Au(r)&&(i=!0);u.Iu=r}}i&&Pc(t)}function PE(n,e,t){const i=Dt(n),r=i.queries.get(e);if(r)for(const l of r.listeners)l.onError(t);i.queries.delete(e)}function Pc(n){n.Tu.forEach(e=>{e.next()})}class Xv{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Xd(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class aI{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class eh{constructor(e){this.M=e}li(e){return El(this.M,e)}fi(e){return e.metadata.exists?lv(this.M,e.document,!1):Bi.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Ur(e)}}class SA{constructor(e,t,i){this.xu=e,this.localStore=t,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=n_(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=Qn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,i=new eh(this.M);for(const r of e)if(r.metadata.queries){const l=i.li(r.metadata.name);for(const u of r.metadata.queries){const g=(t.get(u)||yi()).add(l);t.set(u,g)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function xv(n,e,t,i){return cf.apply(this,arguments)}(e.localStore,new eh(e.M),e.documents,e.xu.id),i=e.ku(e.documents);for(const r of e.queries)yield _E(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function n_(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lI{constructor(e){this.key=e}}class e0{constructor(e){this.key=e}}class t0{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=yi(),this.mutatedKeys=yi(),this.Lu=Zy(e),this.Uu=new Qd(this.Lu)}get qu(){return this.Fu}Gu(e,t){const i=t?t.Ku:new Jv,r=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,g=!1;const _=fm(this.query)&&r.size===this.query.limit?r.last():null,E=zh(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((k,B)=>{const q=r.get(k),te=yu(this.query,B)?B:null,ge=!!q&&this.mutatedKeys.has(q.key),Ne=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let it=!1;q&&te?q.data.isEqual(te.data)?ge!==Ne&&(i.track({type:3,doc:te}),it=!0):this.Qu(q,te)||(i.track({type:2,doc:te}),it=!0,(_&&this.Lu(te,_)>0||E&&this.Lu(te,E)<0)&&(g=!0)):!q&&te?(i.track({type:0,doc:te}),it=!0):q&&!te&&(i.track({type:1,doc:q}),it=!0,(_||E)&&(g=!0)),it&&(te?(u=u.add(te),l=Ne?l.add(k):l.delete(k)):(u=u.delete(k),l=l.delete(k)))}),fm(this.query)||zh(this.query))for(;u.size>this.query.limit;){const k=fm(this.query)?u.last():u.first();u=u.delete(k.key),l=l.delete(k.key),i.track({type:1,doc:k})}return{Uu:u,Ku:i,ei:g,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((E,k)=>function(B,q){const te=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return te(B)-te(q)}(E.type,k.type)||this.Lu(E.doc,k.doc)),this.ju(i);const u=t?this.Wu():[],g=0===this.Bu.size&&this.current?1:0,_=g!==this.$u;return this.$u=g,0!==l.length||_?{snapshot:new Xd(this.query,e.Uu,r,l,e.mutatedKeys,0===g,_,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Jv,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=yi(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new e0(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new lI(i))}),t}Ju(e){this.Fu=e.hi,this.Bu=yi();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Xd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class AA{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sn{constructor(e){this.key=e,this.Xu=!1}}class cI{constructor(e,t,i,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new kd(g=>Nd(g),Ad),this.ea=new Map,this.na=new Set,this.sa=new Br(vt.comparator),this.ia=new Map,this.ra=new jm,this.oa={},this.ua=new Map,this.aa=Du.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function uI(n,e){return n0.apply(this,arguments)}function n0(){return n0=(0,Ie.Z)(function*(n,e){const t=d_(n);let i,r;const l=t.ta.get(e);if(l)i=l.targetId,t.sharedClientState.addLocalQueryTarget(i),r=l.view.Yu();else{const u=yield Kd(t.localStore,po(e));t.isPrimaryClient&&ff(t.remoteStore,u);const g=t.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield mf(t,e,i,"current"===g)}return r}),n0.apply(this,arguments)}function mf(n,e,t,i){return r0.apply(this,arguments)}function r0(){return r0=(0,Ie.Z)(function*(n,e,t,i){n.ha=(k,B,q)=>{return(te=(0,Ie.Z)(function*(ge,Ne,it,Ht){let gt=Ne.view.Gu(it);gt.ei&&(gt=yield Fp(ge.localStore,Ne.query,!1).then(({documents:Lt})=>Ne.view.Gu(Lt,gt)));const rn=Ht&&Ht.targetChanges.get(Ne.targetId),Ct=Ne.view.applyChanges(gt,ge.isPrimaryClient,rn);return o_(ge,Ne.targetId,Ct.zu),Ct.snapshot}),function(ge,Ne,it,Ht){return te.apply(this,arguments)})(n,k,B,q);var te};const r=yield Fp(n.localStore,e,!0),l=new t0(e,r.hi),u=l.Gu(r.documents),g=Cp.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),_=l.applyChanges(u,n.isPrimaryClient,g);o_(n,t,_.zu);const E=new AA(e,t,l);return n.ta.set(e,E),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),_.snapshot}),r0.apply(this,arguments)}function i_(n,e){return _f.apply(this,arguments)}function _f(){return _f=(0,Ie.Z)(function*(n,e){const t=Dt(n),i=t.ta.get(e),r=t.ea.get(i.targetId);if(r.length>1)return t.ea.set(i.targetId,r.filter(l=>!Ad(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Yd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Rc(t.remoteStore,i.targetId),yf(t,i.targetId)}).catch(Tu))):(yf(t,i.targetId),yield Yd(t.localStore,i.targetId,!0))}),_f.apply(this,arguments)}function FE(){return FE=(0,Ie.Z)(function*(n,e,t){const i=ih(n);try{const r=yield function(l,u){const g=Dt(l),_=Tr.now(),E=u.reduce((B,q)=>B.add(q.key),yi());let k;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>g.ai.qs(B,E).next(q=>{k=q;const te=[];for(const ge of u){const Ne=I1(ge,k.get(ge.key));null!=Ne&&te.push(new Rd(ge.key,Ne,cm(Ne.value.mapValue),is.exists(!0)))}return g.$s.addMutationBatch(B,_,te,u)})).then(B=>(B.applyToLocalDocumentSet(k),{batchId:B.batchId,changes:k}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,u,g){let _=l.oa[l.currentUser.toKey()];_||(_=new Br(Ln)),_=_.insert(u,g),l.oa[l.currentUser.toKey()]=_}(i,r.batchId,t),yield Fc(i,r.changes),yield Jd(i.remoteStore)}catch(r){const l=gf(r,"Failed to persist write");t.reject(l)}}),FE.apply(this,arguments)}function s0(n,e){return o0.apply(this,arguments)}function o0(){return o0=(0,Ie.Z)(function*(n,e){const t=Dt(n);try{const i=yield Tv(t.localStore,e);e.targetChanges.forEach((r,l)=>{const u=t.ia.get(l);u&&(fn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.Xu=!0:r.modifiedDocuments.size>0?fn(u.Xu):r.removedDocuments.size>0&&(fn(u.Xu),u.Xu=!1))}),yield Fc(t,i,e)}catch(i){yield Tu(i)}}),o0.apply(this,arguments)}function LE(n,e,t){const i=Dt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ta.forEach((l,u)=>{const g=u.view.Eu(e);g.snapshot&&r.push(g.snapshot)}),function(l,u){const g=Dt(l);g.onlineState=u;let _=!1;g.queries.forEach((E,k)=>{for(const B of k.listeners)B.Eu(u)&&(_=!0)}),_&&Pc(g)}(i.eventManager,e),r.length&&i.Zu.Ko(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function VE(n,e,t){return r_.apply(this,arguments)}function r_(){return r_=(0,Ie.Z)(function*(n,e,t){const i=Dt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ia.get(e),l=r&&r.key;if(l){let u=new Br(vt.comparator);u=u.insert(l,Bi.newNoDocument(l,nn.min()));const g=yi().add(l),_=new Em(nn.min(),new Map,new ir(Ln),u,g);yield s0(i,_),i.sa=i.sa.remove(l),i.ia.delete(e),a_(i)}else yield Yd(i.localStore,e,!1).then(()=>yf(i,e,t)).catch(Tu)}),r_.apply(this,arguments)}function BE(n,e){return s_.apply(this,arguments)}function s_(){return s_=(0,Ie.Z)(function*(n,e){const t=Dt(n),i=e.batch.batchId;try{const r=yield gE(t.localStore,e);c0(t,i,null),l0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Fc(t,r)}catch(r){yield Tu(r)}}),s_.apply(this,arguments)}function dI(n,e,t){return a0.apply(this,arguments)}function a0(){return a0=(0,Ie.Z)(function*(n,e,t){const i=Dt(n);try{const r=yield function(l,u){const g=Dt(l);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.$s.lookupMutationBatch(_,u).next(k=>(fn(null!==k),E=k.keys(),g.$s.removeMutationBatch(_,k))).next(()=>g.$s.performConsistencyCheck(_)).next(()=>g.ai.qs(_,E))})}(i.localStore,e);c0(i,e,t),l0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Fc(i,r)}catch(r){yield Tu(r)}}),a0.apply(this,arguments)}function th(){return th=(0,Ie.Z)(function*(n,e){const t=Dt(n);kc(t.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(l){const u=Dt(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>u.$s.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===i)return void e.resolve();const r=t.ua.get(i)||[];r.push(e),t.ua.set(i,r)}catch(i){const r=gf(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),th.apply(this,arguments)}function l0(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function c0(n,e,t){const i=Dt(n);let r=i.oa[i.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),i.oa[i.currentUser.toKey()]=r}}function yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ea.get(e))n.ta.delete(i),t&&n.Zu.la(i,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(i=>{n.ra.containsKey(i)||Hp(n,i)})}function Hp(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Rc(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),a_(n))}function o_(n,e,t){for(const i of t)i instanceof lI?(n.ra.addReference(i.key,e),UE(n,i)):i instanceof e0?(ct("SyncEngine","Document no longer in limbo: "+i.key),n.ra.removeReference(i.key,e),n.ra.containsKey(i.key)||Hp(n,i.key)):jt()}function UE(n,e){const t=e.key,i=t.path.canonicalString();n.sa.get(t)||n.na.has(i)||(ct("SyncEngine","New document in limbo: "+t),n.na.add(i),a_(n))}function a_(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new vt(Qn.fromString(e)),i=n.aa.next();n.ia.set(i,new sn(t)),n.sa=n.sa.insert(t,i),ff(n.remoteStore,new As(po(Td(t.path)),i,2,ta.A))}}function Fc(n,e,t){return nh.apply(this,arguments)}function nh(){return nh=(0,Ie.Z)(function*(n,e,t){const i=Dt(n),r=[],l=[],u=[];var g;i.ta.isEmpty()||(i.ta.forEach((g,_)=>{u.push(i.ha(_,e,t).then(E=>{if(E){i.isPrimaryClient&&i.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),r.push(E);const k=wv.Js(_.targetId,E);l.push(k)}}))}),yield Promise.all(u),i.Zu.Ko(r),yield(g=(0,Ie.Z)(function*(_,E){const k=Dt(_);try{yield k.persistence.runTransaction("notifyLocalViewChanges","readwrite",B=>We.forEach(E,q=>We.forEach(q.zs,te=>k.persistence.referenceDelegate.addReference(B,q.targetId,te)).next(()=>We.forEach(q.Hs,te=>k.persistence.referenceDelegate.removeReference(B,q.targetId,te)))))}catch(B){if(!Ud(B))throw B;ct("LocalStore","Failed to update sequence numbers: "+B)}for(const B of E){const q=B.targetId;if(!B.fromCache){const te=k.si.get(q),Ne=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);k.si=k.si.insert(q,Ne)}}}),function(_,E){return g.apply(this,arguments)})(i.localStore,l))}),nh.apply(this,arguments)}function Gp(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,Ie.Z)(function*(n,e){const t=Dt(n);if(!t.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const i=yield Dv(t.localStore,e);t.currentUser=e,(r=t).ua.forEach(u=>{u.forEach(g=>{g.reject(new rt(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.ua.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Fc(t,i.ci)}var r}),u0.apply(this,arguments)}function fI(n,e){const t=Dt(n),i=t.ia.get(e);if(i&&i.Xu)return yi().add(i.key);{let r=yi();const l=t.ea.get(e);if(!l)return r;for(const u of l){const g=t.ta.get(u);r=r.unionWith(g.view.qu)}return r}}function pI(n,e){return l_.apply(this,arguments)}function l_(){return l_=(0,Ie.Z)(function*(n,e){const t=Dt(n),i=yield Fp(t.localStore,e.query,!0),r=e.view.Ju(i);return t.isPrimaryClient&&o_(t,e.targetId,r.zu),r}),l_.apply(this,arguments)}function jE(n,e){return c_.apply(this,arguments)}function c_(){return c_=(0,Ie.Z)(function*(n,e){const t=Dt(n);return Av(t.localStore,e).then(i=>Fc(t,i))}),c_.apply(this,arguments)}function gI(n,e,t,i){return u_.apply(this,arguments)}function u_(){return u_=(0,Ie.Z)(function*(n,e,t,i){const r=Dt(n),l=yield function(u,g){const _=Dt(u),E=Dt(_.$s);return _.persistence.runTransaction("Lookup mutation documents","readonly",k=>E.ln(k,g).next(B=>B?_.ai.qs(k,B):We.resolve(null)))}(r.localStore,e);var g;null!==l?("pending"===t?yield Jd(r.remoteStore):"acknowledged"===t||"rejected"===t?(c0(r,e,i||null),l0(r,e),g=e,Dt(Dt(r.localStore).$s).dn(g)):jt(),yield Fc(r,l)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),u_.apply(this,arguments)}function d0(){return d0=(0,Ie.Z)(function*(n,e){const t=Dt(n);if(d_(t),ih(t),!0===e&&!0!==t.ca){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield _I(t,i.toArray());t.ca=!0,yield Zv(t.remoteStore,!0);for(const l of r)ff(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const i=[];let r=Promise.resolve();t.ea.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(yf(t,u),Yd(t.localStore,u,!0))),Rc(t.remoteStore,u)}),yield r,yield _I(t,i),function(l){const u=Dt(l);u.ia.forEach((g,_)=>{Rc(u.remoteStore,_)}),u.ra.bi(),u.ia=new Map,u.sa=new Br(vt.comparator)}(t),t.ca=!1,yield Zv(t.remoteStore,!1)}}),d0.apply(this,arguments)}function _I(n,e,t){return HE.apply(this,arguments)}function HE(){return HE=(0,Ie.Z)(function*(n,e,t){const i=Dt(n),r=[],l=[];for(const u of e){let g;const _=i.ea.get(u);if(_&&0!==_.length){g=yield Kd(i.localStore,po(_[0]));for(const E of _){const k=i.ta.get(E),B=yield pI(i,k);B.snapshot&&l.push(B.snapshot)}}else{const E=yield mE(i.localStore,u);g=yield Kd(i.localStore,E),yield mf(i,yI(E),u,!1)}r.push(g)}return i.Zu.Ko(l),r}),HE.apply(this,arguments)}function yI(n){return Nc(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NA(n){const e=Dt(n);return Dt(Dt(e.localStore).persistence).Os()}function GE(n,e,t,i){return vf.apply(this,arguments)}function vf(){return vf=(0,Ie.Z)(function*(n,e,t,i){const r=Dt(n);if(r.ca)return void ct("SyncEngine","Ignoring unexpected query state notification.");const l=r.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield Av(r.localStore,Ew(l[0])),g=Em.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fc(r,u,g);break}case"rejected":yield Yd(r.localStore,e,!0),yf(r,e,i);break;default:jt()}}),vf.apply(this,arguments)}function vI(n,e,t){return h0.apply(this,arguments)}function h0(){return h0=(0,Ie.Z)(function*(n,e,t){const i=d_(n);if(i.ca){for(const r of e){if(i.ea.has(r)){ct("SyncEngine","Adding an already active target "+r);continue}const l=yield mE(i.localStore,r),u=yield Kd(i.localStore,l);yield mf(i,yI(l),u.targetId,!1),ff(i.remoteStore,u)}for(const r of t)i.ea.has(r)&&(yield Yd(i.localStore,r,!1).then(()=>{Rc(i.remoteStore,r),yf(i,r)}).catch(Tu))}}),h0.apply(this,arguments)}function d_(n){const e=Dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=s0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VE.bind(null,e),e.Zu.Ko=Qv.bind(null,e.eventManager),e.Zu.la=PE.bind(null,e.eventManager),e}function ih(n){const e=Dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dI.bind(null,e),e}class $E{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.M=ia(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Cv(this.persistence,new Bm,e.initialUser,this.M)}_a(e){return new X1(Mv.Wi,this.M)}da(e){return new CE}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WE extends $E{constructor(e,t,i){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield t().call(i,e),yield i.ga.initialize(i,e),yield ih(i.ga.syncEngine),yield Jd(i.ga.remoteStore),yield i.persistence.Is(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}ma(e){return Cv(this.persistence,new Bm,e.initialUser,this.M)}wa(e){return new q1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ta.withCacheSize(this.cacheSizeBytes):Ta.DEFAULT;return new bv(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,zm(),df(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new CE}}class wI extends WE{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield t().call(i,e);const r=i.ga.syncEngine;i.sharedClientState instanceof Au&&(i.sharedClientState.syncEngine={kr:gI.bind(null,r),Mr:GE.bind(null,r),Or:vI.bind(null,r),Os:NA.bind(null,r),Nr:jE.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Is(function(){var l=(0,Ie.Z)(function*(u){yield function mI(n,e){return d0.apply(this,arguments)}(i.ga.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):u||i.gcScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}da(e){const t=zm();if(!Au.vt(t))throw new rt(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Au(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class f0{initialize(e,t){var i=this;return(0,Ie.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>LE(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=Gp.bind(null,i.syncEngine),yield Zv(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kE}createDatastore(e){const t=ia(e.databaseInfo.databaseId),i=new TA(e.databaseInfo);return new Nl(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,l=g=>LE(this.syncEngine,g,0),u=kv.vt()?new kv:new eI,new TE(t,i,r,l,u);var t,i,r,l,u}createSyncEngine(e,t){return function(i,r,l,u,g,_,E){const k=new cI(i,r,l,u,g,_);return E&&(k.ca=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const i=Dt(t);ct("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield hf(i),i.du.shutdown(),i._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function p0(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class h_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class EI{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new pr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const i=e.Ta.decode(t),r=Number(i);isNaN(r)&&e.Ra(`length string (${i}) is not valid number`);const l=yield e.ba(r);return new aI(JSON.parse(l),t.length+r)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,Ie.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}ba(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const i=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class bf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new rt(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ie.Z)(function*(l,u){const g=Dt(l),_=Ld(g.M)+"/documents",E={documents:u.map(te=>Xh(g.M,te))},k=yield g.co("BatchGetDocuments",_,E),B=new Map;k.forEach(te=>{const ge=function ef(n,e){return"found"in e?function(t,i){fn(!!i.found);const r=El(t,i.found.name),l=Ur(i.found.updateTime),u=new Ls({mapValue:{fields:i.found.fields}});return Bi.newFoundDocument(r,l,u)}(n,e):"missing"in e?function(t,i){fn(!!i.missing),fn(!!i.readTime);const r=El(t,i.missing),l=Ur(i.readTime);return Bi.newNoDocument(r,l)}(n,e):jt()}(g.M,te);B.set(ge.key.toString(),ge)});const q=[];return u.forEach(te=>{const ge=B.get(te.toString());fn(!!ge),q.push(ge)}),q}),function(l,u){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const l=vt.fromPath(r);e.mutations.push(new vm(l,e.precondition(l)))}),yield(i=(0,Ie.Z)(function*(r,l){const u=Dt(r),g=Ld(u.M)+"/documents",_={writes:l.map(E=>Tp(u.M,E))};yield u.ro("Commit",g,_)}),function(r,l){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw jt();t=nn.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new rt(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?is.updateTime(t):is.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nn.min()))throw new rt(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return is.updateTime(t)}return is.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CI{constructor(e,t,i,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=i,this.deferred=r,this.va=5,this.So=new Pv(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new bf(e.datastore),i=e.Da(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(l=>{e.Ca(l)}))}).catch(r=>{e.Ca(r)})}))}Da(e){try{const t=this.updateFunction(e);return!wd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ow(t)}return!1}}class zE{constructor(e,t,i,r){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Lr.UNAUTHENTICATED,this.clientId=gp.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,Ie.Z)(function*(g){ct("FirestoreClient","Received user=",g.uid),yield l.authCredentialListener(g),l.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(ct("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rt(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=gf(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function qE(n,e){return f_.apply(this,arguments)}function f_(){return f_=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ie.Z)(function*(l){i.isEqual(l)||(yield Dv(e.localStore,l),i=l)});return function(l){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),f_.apply(this,arguments)}function ZE(n,e){return p_.apply(this,arguments)}function p_(){return p_=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield g0(n);ct("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>OE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,l)=>OE(e.remoteStore,l)),n.onlineComponents=e}),p_.apply(this,arguments)}function g0(n){return $p.apply(this,arguments)}function $p(){return $p=(0,Ie.Z)(function*(n){return n.offlineComponents||(ct("FirestoreClient","Using default OfflineComponentProvider"),yield qE(n,new $E)),n.offlineComponents}),$p.apply(this,arguments)}function g_(n){return m_.apply(this,arguments)}function m_(){return m_=(0,Ie.Z)(function*(n){return n.onlineComponents||(ct("FirestoreClient","Using default OnlineComponentProvider"),yield ZE(n,new f0)),n.onlineComponents}),m_.apply(this,arguments)}function m0(n){return g0(n).then(e=>e.persistence)}function _0(n){return g0(n).then(e=>e.localStore)}function KE(n){return g_(n).then(e=>e.remoteStore)}function y0(n){return g_(n).then(e=>e.syncEngine)}function xu(n){return v0.apply(this,arguments)}function v0(){return v0=(0,Ie.Z)(function*(n){const e=yield g_(n),t=e.eventManager;return t.onListen=uI.bind(null,e.syncEngine),t.onUnlisten=i_.bind(null,e.syncEngine),t}),v0.apply(this,arguments)}function JE(n,e,t={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,l,u,g,_){const E=new h_({next:B=>{l.enqueueAndForget(()=>e_(r,k));const q=B.docs.has(u);!q&&B.fromCache?_.reject(new rt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&B.fromCache&&g&&"server"===g.source?_.reject(new rt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(B)},error:B=>_.reject(B)}),k=new Xv(Td(u.path),E,{includeMetadataChanges:!0,Du:!0});return Qm(r,k)}(yield xu(n),n.asyncQueue,e,t,i)})),i.promise}function QE(n,e,t={}){const i=new pr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,l,u,g,_){const E=new h_({next:B=>{l.enqueueAndForget(()=>e_(r,k)),B.fromCache&&"server"===g.source?_.reject(new rt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(B)},error:B=>_.reject(B)}),k=new Xv(u,E,{includeMetadataChanges:!0,Du:!0});return Qm(r,k)}(yield xu(n),n.asyncQueue,e,t,i)})),i.promise}const b0=new Map;function __(n,e,t){if(!t)throw new rt(je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eC(n,e,t,i){if(!0===e&&!0===i)throw new rt(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function y_(n){if(!vt.isDocumentKey(n))throw new rt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w0(n){if(vt.isDocumentKey(n))throw new rt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function v_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":jt()}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new rt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=v_(n);throw new rt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function b_(n,e){if(e<=0)throw new rt(je.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class w_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new rt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,eC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,e instanceof Tc?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new rt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(r.options.projectId)}(e))}get app(){if(!this._app)throw new rt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new dw;switch(t.type){case"gapi":const i=t.client;return fn(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new hw(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new rt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=b0.get(e);t&&(ct("ComponentProvider","Removing Datastore"),b0.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class go{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new go(this.firestore,e,this._query)}}class Qa extends go{constructor(e,t,i){super(e,t,Td(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new vt(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function tC(n,e,...t){if(n=(0,de.m9)(n),__("collection","path",e),n instanceof wf){const i=Qn.fromString(e,...t);return w0(i),new Qa(n,null,i)}{if(!(n instanceof rr||n instanceof Qa))throw new rt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Qn.fromString(e,...t));return w0(i),new Qa(n.firestore,null,i)}}function E_(n,e,...t){if(n=(0,de.m9)(n),1===arguments.length&&(e=gp.R()),__("doc","path",e),n instanceof wf){const i=Qn.fromString(e,...t);return y_(i),new rr(n,null,new vt(i))}{if(!(n instanceof rr||n instanceof Qa))throw new rt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Qn.fromString(e,...t));return y_(i),new rr(n.firestore,n instanceof Qa?n.converter:null,new vt(i))}}function C0(n,e){return n=(0,de.m9)(n),e=(0,de.m9)(e),(n instanceof rr||n instanceof Qa)&&(e instanceof rr||e instanceof Qa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iC(n,e){return n=(0,de.m9)(n),e=(0,de.m9)(e),n instanceof go&&e instanceof go&&n.firestore===e.firestore&&Ad(n._query,e._query)&&n.converter===e.converter}class rC{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Pv(this,"async_queue_retry"),this.Ua=()=>{const t=df();t&&ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=df();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=df();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new pr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Ud(t))throw t;ct("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(i=>{throw this.Fa=i,this.$a=!1,ps("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(i)),i}).then(i=>(this.$a=!1,i))));return this.Na=t,t}enqueueAfterDelay(e,t,i){this.qa(),this.La.indexOf(e)>-1&&(t=0);const r=Yv.createAndSchedule(this,e,t,i,l=>this.Qa(l));return this.Oa.push(r),r}qa(){this.Fa&&jt()}verifyOperationInProgress(){}ja(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function sC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class xI{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gr extends wf{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new rC,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||MI(this),this._firestoreClient.terminate()}}function ms(n){return n._firestoreClient||MI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function MI(n){var e;const t=n._freezeSettings(),i=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new b1(n._databaseId,l,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var l,g;n._firestoreClient=new zE(n._authCredentials,n._appCheckCredentials,n._queue,i)}function aC(n,e,t){const i=new pr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield qE(n,t),yield ZE(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(l=r).name?l.code===je.FAILED_PRECONDITION||l.code===je.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var l})).then(()=>i.promise)}function dC(n){if(n._initialized||n._terminated)throw new rt(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new rt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(Ss.fromBase64String(e))}catch(t){throw new rt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(Ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rh{constructor(e){this._methodName=e}}class Ef{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ln(this._lat,e._lat)||Ln(this._long,e._long)}}const FI=/^__.*__$/;class xA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kh(e,this.data,t,this.fieldTransforms)}}class hC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class Lc{constructor(e,t,i,r,l,u){this.settings=e,this.databaseId=t,this.M=i,this.ignoreUndefinedProperties=r,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:i,tc:!1});return r.ec(e),r}nc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:i,tc:!1});return r.Ja(),r}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return A_(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(fC(this.Ya)&&FI.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class pC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=i||ia(e)}uc(e,t,i,r=!1){return new Lc({Ya:e,methodName:t,oc:i,path:Ts.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Xa(n){const e=n._freezeSettings(),t=ia(n._databaseId);return new pC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function D0(n,e,t,i,r,l={}){const u=n.uc(l.merge||l.mergeFields?2:0,e,t,r);S0("Data must be an object, but it was:",u,i);const g=T0(i,u);let _,E;if(l.merge)_=new _p(u.fieldMask),E=u.fieldTransforms;else if(l.mergeFields){const k=[];for(const B of l.mergeFields){const q=A0(e,B,t);if(!u.contains(q))throw new rt(je.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);Df(k,q)||k.push(q)}_=new _p(k),E=u.fieldTransforms.filter(B=>_.covers(B.field))}else _=null,E=u.fieldTransforms;return new xA(new Ls(g),_,E)}class Cf extends rh{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}function gC(n,e,t){return new Lc({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class mC extends rh{_toFieldTransform(e){return new Ep(e.path,new Od)}isEqual(e){return e instanceof mC}}class _C extends rh{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=gC(this,e,!0),i=this.ac.map(l=>Mu(l,t)),r=new vu(i);return new Ep(e.path,r)}isEqual(e){return this===e}}class MA extends rh{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=gC(this,e,!0),i=this.ac.map(l=>Mu(l,t)),r=new bu(i);return new Ep(e.path,r)}isEqual(e){return this===e}}class yC extends rh{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Zh(e.M,Ky(e.M,this.cc));return new Ep(e.path,t)}isEqual(e){return this===e}}function qp(n,e,t,i){const r=n.uc(1,e,t);S0("Data must be an object, but it was:",r,i);const l=[],u=Ls.empty();hu(i,(_,E)=>{const k=S_(e,_,t);E=(0,de.m9)(E);const B=r.nc(k);if(E instanceof Cf)l.push(k);else{const q=Mu(E,B);null!=q&&(l.push(k),u.set(k,q))}});const g=new _p(l);return new hC(u,g,r.fieldTransforms)}function T_(n,e,t,i,r,l){const u=n.uc(1,e,t),g=[A0(e,i,t)],_=[r];if(l.length%2!=0)throw new rt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<l.length;q+=2)g.push(A0(e,l[q])),_.push(l[q+1]);const E=[],k=Ls.empty();for(let q=g.length-1;q>=0;--q)if(!Df(E,g[q])){const te=g[q];let ge=_[q];ge=(0,de.m9)(ge);const Ne=u.nc(te);if(ge instanceof Cf)E.push(te);else{const it=Mu(ge,Ne);null!=it&&(E.push(te),k.set(te,it))}}const B=new _p(E);return new hC(k,B,u.fieldTransforms)}function I0(n,e,t,i=!1){return Mu(t,n.uc(i?4:3,e))}function Mu(n,e){if(vC(n=(0,de.m9)(n)))return S0("Unsupported field value:",e,n),T0(n,e);if(n instanceof rh)return function(t,i){if(!fC(i.Ya))throw i.ic(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ic(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,i){const r=[];let l=0;for(const u of t){let g=Mu(u,i.sc(l));null==g&&(g={nullValue:"NULL_VALUE"}),r.push(g),l++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,de.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ky(i.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Tr.fromDate(t);return{timestampValue:Fd(i.M,r)}}if(t instanceof Tr){const r=new Tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fd(i.M,r)}}if(t instanceof Ef)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yl)return{bytesValue:sv(i.M,t._byteString)};if(t instanceof rr){const r=i.databaseId,l=t.firestore._databaseId;if(!l.isEqual(r))throw i.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:av(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ic(`Unsupported field value: ${v_(t)}`)}(n,e)}function T0(n,e){const t={};return mw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hu(n,(i,r)=>{const l=Mu(r,e.Za(i));null!=l&&(t[i]=l)}),{mapValue:{fields:t}}}function vC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Tr||n instanceof Ef||n instanceof Yl||n instanceof rr||n instanceof rh)}function S0(n,e,t){if(!vC(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=v_(t);throw e.ic("an object"===i?n+" a custom object":n+" "+i)}var i}function A0(n,e,t){if((e=(0,de.m9)(e))instanceof Kl)return e._internalPath;if("string"==typeof e)return S_(n,e);throw A_("Field path arguments must be of type string or ",n,!1,void 0,t)}const LI=new RegExp("[~\\*/\\[\\]]");function S_(n,e,t){if(e.search(LI)>=0)throw A_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kl(...e.split("."))._internalPath}catch(i){throw A_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function A_(n,e,t,i,r){const l=i&&!i.isEmpty(),u=void 0!==r;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(l||u)&&(_+=" (found",l&&(_+=` in field ${i}`),u&&(_+=` in document ${r}`),_+=")"),new rt(je.INVALID_ARGUMENT,g+n+_)}function Df(n,e){return n.some(t=>t.isEqual(e))}class If{constructor(e,t,i,r,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bC extends If{data(){return super.data()}}function Zp(n,e){return"string"==typeof e?S_(n,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends If{constructor(e,t,i,r,l,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Tf extends Jl{data(e={}){return super.data(e)}}class Ru{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ou(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Tf(this._firestore,this._userDataWriter,i.key,i,new Ou(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new rt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new Tf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ou(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const g=new Tf(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Ou(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let _=-1,E=-1;return 0!==u.type&&(_=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),E=l.indexOf(u.doc.key)),{type:wC(u.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}function EC(n,e){return n instanceof Jl&&e instanceof Jl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ru&&e instanceof Ru&&n._firestore===e._firestore&&iC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CC(n){if(zh(n)&&0===n.explicitOrderBy.length)throw new rt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kp{}function ku(n,...e){for(const t of e)n=t._apply(n);return n}class Yp extends Kp{constructor(e,t,i){super(),this.hc=e,this.lc=t,this.fc=i,this.type="where"}_apply(e){const t=Xa(e.firestore),i=function(r,l,u,g,_,E,k){let B;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new rt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){O0(k,E);const te=[];for(const ge of k)te.push(M0(g,r,ge));B={arrayValue:{values:te}}}else B=M0(g,r,k)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||O0(k,E),B=I0(u,"where",k,"in"===E||"not-in"===E);const q=fo.create(_,E,B);return function(te,ge){if(ge.S()){const it=pm(te);if(null!==it&&!it.isEqual(ge.field))throw new rt(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${it.toString()}' and '${ge.field.toString()}'`);const Ht=zy(te);null!==Ht&&x_(0,ge.field,Ht)}const Ne=function(it,Ht){for(const gt of it.filters)if(Ht.indexOf(gt.op)>=0)return gt.op;return null}(te,function(it){switch(it){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Ne)throw new rt(je.INVALID_ARGUMENT,Ne===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Ne.toString()}' filters.`)}(r,q),q}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new go(e.firestore,e.converter,function(r,l){const u=r.filters.concat([l]);return new Ac(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class N0 extends Kp{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(i,r,l){if(null!==i.startAt)throw new rt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new rt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Id(r,l);return function(g,_){if(null===zy(g)){const E=pm(g);null!==E&&x_(0,E,_.field)}}(i,u),u}(e._query,this.hc,this.dc);return new go(e.firestore,e.converter,function(i,r){const l=i.explicitOrderBy.concat([r]);return new Ac(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class DC extends Kp{constructor(e,t,i){super(),this.type=e,this._c=t,this.wc=i}_apply(e){return new go(e.firestore,e.converter,Sd(e._query,this._c,this.wc))}}class IC extends Kp{constructor(e,t,i){super(),this.type=e,this.mc=t,this.gc=i}_apply(e){const t=TC(e,this.type,this.mc,this.gc);return new go(e.firestore,e.converter,(r=t,new Ac((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class Qp extends Kp{constructor(e,t,i){super(),this.type=e,this.mc=t,this.gc=i}_apply(e){const t=TC(e,this.type,this.mc,this.gc);return new go(e.firestore,e.converter,(r=t,new Ac((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function TC(n,e,t,i){if(t[0]=(0,de.m9)(t[0]),t[0]instanceof If)return function(r,l,u,g,_){if(!g)throw new rt(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const E=[];for(const k of qh(r))if(k.field.isKeyField())E.push(gu(l,g.key));else{const B=g.data.field(k.field);if(My(B))throw new rt(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+k.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===B){const q=k.field.canonicalString();throw new rt(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}E.push(B)}return new _u(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Xa(n.firestore);return function(l,u,g,_,E,k){const B=l.explicitOrderBy;if(E.length>B.length)throw new rt(je.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let te=0;te<E.length;te++){const ge=E[te];if(B[te].field.isKeyField()){if("string"!=typeof ge)throw new rt(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ge}`);if(!qy(l)&&-1!==ge.indexOf("/"))throw new rt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ge}' contains a slash.`);const Ne=l.path.child(Qn.fromString(ge));if(!vt.isDocumentKey(Ne))throw new rt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const it=new vt(Ne);q.push(gu(u,it))}else{const Ne=I0(g,_,ge);q.push(Ne)}}return new _u(q,k)}(n._query,n.firestore._databaseId,r,e,t,i)}}function M0(n,e,t){if("string"==typeof(t=(0,de.m9)(t))){if(""===t)throw new rt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qy(e)&&-1!==t.indexOf("/"))throw new rt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Qn.fromString(t));if(!vt.isDocumentKey(i))throw new rt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gu(n,new vt(i))}if(t instanceof rr)return gu(n,t._key);throw new rt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${v_(t)}.`)}function O0(n,e){if(!Array.isArray(n)||0===n.length)throw new rt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new rt(je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function x_(n,e,t){if(!t.isEqual(e))throw new rt(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class M_{convertValue(e,t="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw jt()}}convertObject(e,t){const i={};return hu(e.fields,(r,l)=>{i[r]=this.convertValue(l,t)}),i}convertGeoPoint(e){return new Ef(Vr(e.latitude),Vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Oy(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yp(e));default:return null}}convertTimestamp(e){const t=fu(e);return new Tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Qn.fromString(e);fn(Ww(i));const r=new Tc(i.get(1),i.get(3)),l=new vt(i.popFirst(5));return r.isEqual(t)||ps(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function O_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class HI extends M_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class GI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xa(e)}set(e,t,i){this._verifyNotCommitted();const r=Xl(e,this._firestore),l=O_(r.converter,t,i),u=D0(this._dataReader,"WriteBatch.set",r._key,l,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,is.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const l=Xl(e,this._firestore);let u;return u="string"==typeof(t=(0,de.m9)(t))||t instanceof Kl?T_(this._dataReader,"WriteBatch.update",l._key,t,i,r):qp(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,is.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xl(e,this._firestore);return this._mutations=this._mutations.concat(new Yh(t._key,is.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new rt(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(n,e){if((n=(0,de.m9)(n)).firestore!==e)throw new rt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pu extends M_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function SC(n,e,t){n=Xn(n,rr);const i=Xn(n.firestore,gr),r=O_(n.converter,e,t);return sh(i,[D0(Xa(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,is.none())])}function F0(n,e,t,...i){n=Xn(n,rr);const r=Xn(n.firestore,gr),l=Xa(r);let u;return u="string"==typeof(e=(0,de.m9)(e))||e instanceof Kl?T_(l,"updateDoc",n._key,e,t,i):qp(l,"updateDoc",n._key,e),sh(r,[u.toMutation(n._key,is.exists(!0))])}function V0(n,...e){var t,i,r;n=(0,de.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||sC(e[u])||(l=e[u],u++);const g={includeMetadataChanges:l.includeMetadataChanges};if(sC(e[u])){const B=e[u];e[u]=null===(t=B.next)||void 0===t?void 0:t.bind(B),e[u+1]=null===(i=B.error)||void 0===i?void 0:i.bind(B),e[u+2]=null===(r=B.complete)||void 0===r?void 0:r.bind(B)}let _,E,k;if(n instanceof rr)E=Xn(n.firestore,gr),k=Td(n._key.path),_={next:B=>{e[u]&&e[u](B0(E,n,B))},error:e[u+1],complete:e[u+2]};else{const B=Xn(n,go);E=Xn(B.firestore,gr),k=B._query;const q=new Pu(E);_={next:te=>{e[u]&&e[u](new Ru(E,q,B,te))},error:e[u+1],complete:e[u+2]},CC(n._query)}return function(B,q,te,ge){const Ne=new h_(ge),it=new Xv(q,Ne,te);return B.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Qm(yield xu(B),it)})),()=>{Ne.pa(),B.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return e_(yield xu(B),it)}))}}(ms(E),k,g,_)}function sh(n,e){return function(t,i){const r=new pr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function Hr(n,e,t){return FE.apply(this,arguments)}(yield y0(t),i,r)})),r.promise}(ms(n),e)}function B0(n,e,t){const i=t.docs.get(e._key),r=new Pu(n);return new Jl(n,r,e._key,i,new Ou(t.hasPendingWrites,t.fromCache),e.converter)}class xC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Xa(e)}get(e){const t=Xl(e,this._firestore),i=new HI(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return jt();const l=r[0];if(l.isFoundDocument())return new If(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new If(this._firestore,i,t._key,null,t.converter);throw jt()})}set(e,t,i){const r=Xl(e,this._firestore),l=O_(r.converter,t,i),u=D0(this._dataReader,"Transaction.set",r._key,l,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(e,t,i,...r){const l=Xl(e,this._firestore);let u;return u="string"==typeof(t=(0,de.m9)(t))||t instanceof Kl?T_(this._dataReader,"Transaction.update",l._key,t,i,r):qp(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Xl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xl(e,this._firestore),i=new Pu(this._firestore);return super.get(e).then(r=>new Jl(this._firestore,i,t._key,r._document,new Ou(!1,!1),t.converter))}}function eg(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new rt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kC(){if("undefined"==typeof Uint8Array)throw new rt("unimplemented","Uint8Arrays are not available in this environment.")}function U0(){if(!function _w(){return"undefined"!=typeof atob}())throw new rt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){uu=Di.SDK_VERSION,(0,Di._registerComponent)(new ii.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),l=new gr(r,new om(t.getProvider("auth-internal")),new fw(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC")),(0,Di.registerVersion)(Uh,"3.4.7",n),(0,Di.registerVersion)(Uh,"3.4.7","esm2017")}();class tg{constructor(e){this._delegate=e}static fromBase64String(e){return U0(),new tg(Yl.fromBase64String(e))}static fromUint8Array(e){return kC(),new tg(Yl.fromUint8Array(e))}toBase64(){return U0(),this._delegate.toBase64()}toUint8Array(){return kC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function j0(n){return function H0(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class PC{enableIndexedDbPersistence(e,t){return function oC(n,e){dC(n=Xn(n,gr));const t=ms(n),i=n._freezeSettings(),r=new f0;return aC(t,r,new WE(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function OI(n){dC(n=Xn(n,gr));const e=ms(n),t=n._freezeSettings(),i=new f0;return aC(e,i,new wI(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RI(n){if(n._initialized&&!n._terminated)throw new rt(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(i){if(!Dl.vt())return Promise.resolve();const r=i+"main";yield Dl.delete(r)}),function(i){return t.apply(this,arguments)})(Rp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class G0{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function E0(n,e,t,i={}){var r;const l=(n=Xn(n,wf))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&jh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let u,g;if("string"==typeof i.mockUserToken)u=i.mockUserToken,g=Lr.MOCK_USER;else{u=(0,de.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new rt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Lr(_)}n._authCredentials=new y1(new Sy(u,g))}}(this._delegate,e,t,i)}enableNetwork(){return function lC(n){return function YE(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield m0(n),t=yield KE(n);return e.setNetworkEnabled(!0),function(i){const r=Dt(i);return r.lu.delete(0),Lp(r)}(t)}))}(ms(n=Xn(n,gr)))}(this._delegate)}disableNetwork(){return function cC(n){return function DI(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield m0(n),t=yield KE(n);return e.setNetworkEnabled(!1),(i=(0,Ie.Z)(function*(r){const l=Dt(r);l.lu.add(0),yield hf(l),l._u.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(ms(n=Xn(n,gr)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,eC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kI(n){return function(e){const t=new pr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function hI(n,e){return th.apply(this,arguments)}(yield y0(e),t)})),t.promise}(ms(n=Xn(n,gr)))}(this._delegate)}onSnapshotsInSync(e){return function NC(n,e){return function SI(n,e){const t=new h_(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield xu(n),r=t,Dt(i).Tu.add(r),void r.next();var i,r})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield xu(n),r=t,void Dt(i).Tu.delete(r);var i,r}))}}(ms(n=Xn(n,gr)),sC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new rt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uh(this,tC(this._delegate,e))}catch(t){throw Us(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,E_(this._delegate,e))}catch(t){throw Us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ra(this,function nC(n,e){if(n=Xn(n,wf),__("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new rt(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new go(n,null,(t=e,new Ac(Qn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function MC(n,e){return function AI(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const i=yield(r=n,g_(r).then(l=>l.datastore));var r;new CI(n.asyncQueue,i,e,t).run()})),t.promise}(ms(n=Xn(n,gr)),t=>e(new xC(n,t)))}(this._delegate,t=>e(new YI(this,t)))}batch(){return ms(this._delegate),new W0(new GI(this._delegate,e=>sh(this._delegate,e)))}loadBundle(e){return function I_(n,e){const t=ms(n=Xn(n,gr)),i=new xI;return function NI(n,e,t,i){const r=function(l,u){let g;return g="string"==typeof l?(new TextEncoder).encode(l):l,_=function(_,E){if(_ instanceof Uint8Array)return p0(_,E);if(_ instanceof ArrayBuffer)return p0(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new EI(_,u);var _}(t,ia(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function bI(n,e,t){const i=Dt(n);var r;(r=(0,Ie.Z)(function*(l,u,g){try{const _=yield u.getMetadata();if(yield function(q,te){const ge=Dt(q),Ne=Ur(te.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",it=>ge.ds.getBundleMetadata(it,te.id)).then(it=>!!it&&it.createTime.compareTo(Ne)>=0)}(l.localStore,_))return yield u.close(),g._completeWith({taskState:"Success",documentsLoaded:(q=_).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);g._updateProgress(n_(_));const E=new SA(_,l.localStore,u.M);let k=yield u.fa();for(;k;){const q=yield E.Nu(k);q&&g._updateProgress(q),k=yield u.fa()}const B=yield E.complete();return yield Fc(l,B.Ou,void 0),yield function(q,te){const ge=Dt(q);return ge.persistence.runTransaction("Save bundle","readwrite",Ne=>ge.ds.saveBundleMetadata(Ne,te))}(l.localStore,_),g._completeWith(B.progress),Promise.resolve(B.Mu)}catch(_){return jh("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var q}),function(l,u,g){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield y0(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function zp(n,e){return function XE(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,i){const r=Dt(t);return r.persistence.runTransaction("Get named query","readonly",l=>r.ds.getNamedQuery(l,i))}(yield _0(n),e)}))}(ms(n=Xn(n,gr)),e).then(t=>t?new go(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ra(this,t):null)}}class oh extends M_{constructor(e){super(),this.firestore=e}convertBytes(e){return new tg(new Yl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class YI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oh(e)}get(e){const t=Fu(e);return this._delegate.get(t).then(i=>new lh(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Fu(e);return i?(eg("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const l=Fu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...r),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}}class W0{constructor(e){this._delegate=e}set(e,t,i){const r=Fu(e);return i?(eg("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const l=Fu(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,i,...r),this}delete(e){const t=Fu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ah{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Tf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ch(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=ah.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let l=r.get(t);return l||(l=new ah(e,new oh(e),t),r.set(t,l)),l}}ah.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oh(e)}static forPath(e,t,i){if(e.length%2!=0)throw new rt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new rr(t._delegate,i,new vt(e)))}static forKey(e,t,i){return new Sa(t,new rr(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new uh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uh(this.firestore,tC(this._delegate,e))}catch(t){throw Us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,de.m9)(e))instanceof rr&&C0(this._delegate,e)}set(e,t){t=eg("DocumentReference.set",t);try{return t?SC(this._delegate,e,t):SC(this._delegate,e)}catch(i){throw Us(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?F0(this._delegate,e):F0(this._delegate,e,t,...i)}catch(r){throw Us(r,"updateDoc()","DocumentReference.update()")}}delete(){return function L0(n){return sh(Xn(n.firestore,gr),[new Yh(n._key,is.none())])}(this._delegate)}onSnapshot(...e){const t=z0(e),i=FC(e,r=>new lh(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return V0(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function k0(n){n=Xn(n,rr);const e=Xn(n.firestore,gr),t=ms(e),i=new Pu(e);return function II(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,l,u){try{const g=yield function(_,E){const k=Dt(_);return k.persistence.runTransaction("read document","readonly",B=>k.ai.Bs(B,E))}(r,l);g.isFoundDocument()?u.resolve(g):g.isNoDocument()?u.resolve(null):u.reject(new rt(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=gf(g,`Failed to get document '${l} from cache`);u.reject(_)}}),function(r,l,u){return i.apply(this,arguments)})(yield _0(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Jl(e,i,n._key,r,new Ou(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function P0(n){n=Xn(n,rr);const e=Xn(n.firestore,gr);return JE(ms(e),n._key,{source:"server"}).then(t=>B0(e,n,t))}(this._delegate):function R0(n){n=Xn(n,rr);const e=Xn(n.firestore,gr);return JE(ms(e),n._key).then(t=>B0(e,n,t))}(this._delegate),t.then(i=>new lh(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?ah.getInstance(this.firestore,e):null))}}function Us(n,e,t){return n.message=n.message.replace(e,t),n}function z0(n){for(const e of n)if("object"==typeof e&&!j0(e))return e;return{}}function FC(n,e){var t,i;let r;return r=j0(n[0])?n[0]:j0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{r.next&&r.next(e(l))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class lh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EC(this._delegate,e._delegate)}}class ch extends lh{data(e){const t=this._delegate.data(e);return function _1(n,e){n||jt()}(void 0!==t),t}}class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oh(e)}where(e,t,i){try{return new ra(this.firestore,ku(this._delegate,function VI(n,e,t){const i=e,r=Zp("where",n);return new Yp(r,i,t)}(e,t,i)))}catch(r){throw Us(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ra(this.firestore,ku(this._delegate,function Ql(n,e="asc"){const t=e,i=Zp("orderBy",n);return new N0(i,t)}(e,t)))}catch(i){throw Us(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ra(this.firestore,ku(this._delegate,function x0(n){return b_("limit",n),new DC("limit",n,"F")}(e)))}catch(t){throw Us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ra(this.firestore,ku(this._delegate,function Jp(n){return b_("limitToLast",n),new DC("limitToLast",n,"L")}(e)))}catch(t){throw Us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ra(this.firestore,ku(this._delegate,function BI(...n){return new IC("startAt",n,!0)}(...e)))}catch(t){throw Us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ra(this.firestore,ku(this._delegate,function UI(...n){return new IC("startAfter",n,!1)}(...e)))}catch(t){throw Us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ra(this.firestore,ku(this._delegate,function N_(...n){return new Qp("endBefore",n,!1)}(...e)))}catch(t){throw Us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ra(this.firestore,ku(this._delegate,function jI(...n){return new Qp("endAt",n,!0)}(...e)))}catch(t){throw Us(t,"endAt()","Query.endAt()")}}isEqual(e){return iC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function WI(n){n=Xn(n,go);const e=Xn(n.firestore,gr),t=ms(e),i=new Pu(e);return function TI(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,l,u){try{const g=yield Fp(r,l,!0),_=new t0(l,g.hi),E=_.Gu(g.documents),k=_.applyChanges(E,!1);u.resolve(k.snapshot)}catch(g){const _=gf(g,`Failed to execute query '${l} against cache`);u.reject(_)}}),function(r,l,u){return i.apply(this,arguments)})(yield _0(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Ru(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function zI(n){n=Xn(n,go);const e=Xn(n.firestore,gr),t=ms(e),i=new Pu(e);return QE(t,n._query,{source:"server"}).then(r=>new Ru(e,i,n,r))}(this._delegate):function $I(n){n=Xn(n,go);const e=Xn(n.firestore,gr),t=ms(e),i=new Pu(e);return CC(n._query),QE(t,n._query).then(r=>new Ru(e,i,n,r))}(this._delegate),t.then(i=>new q0(this.firestore,new Ru(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=z0(e),i=FC(e,r=>new q0(this.firestore,new Ru(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return V0(this._delegate,t,i)}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?ah.getInstance(this.firestore,e):null))}}class JI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ch(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class q0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ra(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ch(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new JI(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new ch(this._firestore,i))})}isEqual(e){return EC(this._delegate,e._delegate)}}class uh extends ra{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?E_(this._delegate):E_(this._delegate,e))}catch(t){throw Us(t,"doc()","CollectionReference.doc()")}}add(e){return function AC(n,e){const t=Xn(n.firestore,gr),i=E_(n),r=O_(n.converter,e);return sh(t,[D0(Xa(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,is.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return C0(this._delegate,e._delegate)}withConverter(e){return new uh(this.firestore,this._delegate.withConverter(e?ah.getInstance(this.firestore,e):null))}}function Fu(n){return Xn(n,rr)}class Z0{constructor(...e){this._delegate=new Kl(...e)}static documentId(){return new Z0(Ts.keyField().canonicalString())}isEqual(e){return(e=(0,de.m9)(e))instanceof Kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function OC(){return new mC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lu(e)}static delete(){const e=function qI(){return new Cf("deleteField")}();return e._methodName="FieldValue.delete",new Lu(e)}static arrayUnion(...e){const t=function RC(...n){return new _C("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lu(t)}static arrayRemove(...e){const t=function Po(...n){return new MA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lu(t)}static increment(e){const t=function Sf(n){return new yC("increment",n)}(e);return t._methodName="FieldValue.increment",new Lu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LC={Firestore:G0,GeoPoint:Ef,Timestamp:Tr,Blob:tg,Transaction:YI,WriteBatch:W0,DocumentReference:Sa,DocumentSnapshot:lh,Query:ra,QueryDocumentSnapshot:ch,QuerySnapshot:q0,CollectionReference:uh,FieldPath:Z0,FieldValue:Lu,setLogLevel:function $0(n){!function m1(n){za.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function BC(n,e){return function VC(n,e=Cs.z){return new Ji.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function R_(n,e){return BC(n,e).pipe((0,qe.U)(t=>({payload:t,type:"query"})))}function ng(n,e){return R_(n,e).pipe((0,Ao.O)(void 0),Mi(),(0,qe.U)(([t,i])=>{const r=i.payload.docChanges(),l=r.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,g)=>{const _=r.find(k=>k.doc.ref.isEqual(u.ref)),E=null==t?void 0:t.payload.docs.find(k=>k.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:u}})}),l}))}function K0(n,e,t){return ng(n,t).pipe((0,T.R)((i,r)=>function eT(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function kA(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Y0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Y0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Y0(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(l=>l.payload),e),[]),function U(n,e=A.y){return n=null!=n?n:ee,(0,va.e)((t,i)=>{let r,l=!0;t.subscribe((0,No.x)(i,u=>{const g=e(u);(l||!n(r,g))&&(l=!1,r=g,i.next(u))}))})}(),(0,qe.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function Y0(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function J0(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function XI(n){(function QI(n,e){n.INTERNAL.registerComponent(new ii.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},LC)))})(n,(e,t)=>new G0(e,t,new PC)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(kt.Z);class tT{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=ng(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,qe.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe((0,Ao.O)(void 0),Mi(),(0,Yn.h)(([i,r])=>r.length>0||!i),(0,qe.U)(([i,r])=>r),Nt.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,T.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=J0(e);return K0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return R_(this.query,this.afs.schedulers.outsideAngular).pipe((0,qe.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Nt.iC)}get(e){return(0,$i.D)(this.query.get(e)).pipe(Nt.iC)}add(e){return this.ref.add(e)}doc(e){return new nT(this.ref.doc(e),this.afs)}}class nT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:l}=iT(i,t);return new tT(r,l,this.afs)}snapshotChanges(){return function UC(n,e){return BC(n,e).pipe((0,Ao.O)(void 0),Mi(),(0,qe.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,qe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,$i.D)(this.ref.get(e)).pipe(Nt.iC)}}class PA{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ng(this.query,this.afs.schedulers.outsideAngular).pipe((0,qe.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),(0,Yn.h)(t=>t.length>0),Nt.iC):ng(this.query,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,T.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=J0(e);return K0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return R_(this.query,this.afs.schedulers.outsideAngular).pipe((0,qe.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Nt.iC)}get(e){return(0,$i.D)(this.query.get(e)).pipe(Nt.iC)}}const FA=new h.OlP("angularfire2.enableFirestorePersistence"),LA=new h.OlP("angularfire2.firestore.persistenceSettings"),VA=new h.OlP("angularfire2.firestore.settings"),BA=new h.OlP("angularfire2.firestore.use-emulator");function iT(n,e=(t=>t)){return{query:e(n),ref:n}}let k_=(()=>{class n{constructor(t,i,r,l,u,g,_,E,k,B,q,te,ge,Ne,it,Ht,gt){this.schedulers=_;const rn=(0,ki.on)(t,g,i),Ct=k;B&&ya(rn,g,q,ge,Ne,it,te,Ht),[this.firestore,this.persistenceEnabled$]=(0,ki.cc)(`${rn.name}.firestore`,"AngularFirestore",rn.name,()=>{const Lt=g.runOutsideAngular(()=>rn.firestore());if(l&&Lt.settings(l),Ct&&Lt.useEmulator(...Ct),r&&!(0,I.PM)(u)){const xt=()=>{try{return(0,$i.D)(Lt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Un){return"undefined"!=typeof console&&console.warn(Un),(0,Yi.of)(!1)}};return[Lt,g.runOutsideAngular(xt)]}return[Lt,(0,Yi.of)(!1)]},[l,Ct,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=iT(r,i),g=this.schedulers.ngZone.run(()=>l);return new tT(g,u,this)}collectionGroup(t,i){const r=i||(u=>u),l=this.firestore.collectionGroup(t);return new PA(r(l),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new nT(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ki.Dh),h.LFG(ki.xv,8),h.LFG(FA,8),h.LFG(VA,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Nt.HU),h.LFG(LA,8),h.LFG(BA,8),h.LFG(qs,8),h.LFG(es,8),h.LFG(xi,8),h.LFG(Ua,8),h.LFG(al,8),h.LFG(ts,8),h.LFG(Rr,8),h.LFG(Ws,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ig=(()=>{class n{constructor(t,i,r,l,u){this.afauth=t,this.afStore=i,this.ngFireAuth=r,this.router=l,this.ngZone=u,this.ngFireAuth.authState.subscribe(g=>{g?(this.userData=g,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")||"{}")):(localStorage.setItem("user",""),JSON.parse(localStorage.getItem("user")||"{}"))})}logInGoogle(){var t=this;return(0,Ie.Z)(function*(){try{return yield t.afauth.signInWithPopup(new Ei.Z.auth.GoogleAuthProvider)}catch(i){return console.log("error en login ",i),null}})()}SignIn(t,i){var r=this;return(0,Ie.Z)(function*(){return r.ngFireAuth.signInWithEmailAndPassword(t,i)})()}RegisterUser(t,i){var r=this;return(0,Ie.Z)(function*(){return new Date,r.ngFireAuth.createUserWithEmailAndPassword(t,i)})()}PasswordRecover(t){var i=this;return(0,Ie.Z)(function*(){return i.ngFireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email has been sent, please check your inbox.")}).catch(r=>{window.alert(r)})})()}isLoggedIn(){return this.afauth.authState}SetUserData(t){return this.afStore.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.ngFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(qs),h.LFG(k_),h.LFG(qs),h.LFG(Ut.F0),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q0=j(447),Vu=j(5955),P_=j(6651),rT=j(2692),X0=j(9299);let eb=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Bu=(()=>{class n extends eb{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=h.n5z(n)))(i||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const xl=new h.OlP("NgValueAccessor"),tb={provide:xl,useExisting:(0,h.Gpc)(()=>rg),multi:!0},UA=new h.OlP("CompositionEventMode");let rg=(()=>{class n extends eb{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function sT(){const n=(0,I.q)()?(0,I.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(UA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&h.NdJ("input",function(l){return i._handleInput(l.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(l){return i._compositionEnd(l.target.value)})},features:[h._Bn([tb]),h.qOj]}),n})();const mo=new h.OlP("NgValidators"),Uu=new h.OlP("NgAsyncValidators");function nb(n){return null!=n}function KC(n){const e=(0,h.QGY)(n)?(0,$i.D)(n):n;return(0,h.CqO)(e),e}function ib(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function rb(n,e){return e.map(t=>t(n))}function YC(n){return n.map(e=>function oT(n){return!n.validate}(e)?e:t=>e.validate(t))}function Aa(n){return null!=n?function B_(n){if(!n)return null;const e=n.filter(nb);return 0==e.length?null:function(t){return ib(rb(t,e))}}(YC(n)):null}function QC(n){return null!=n?function JC(n){if(!n)return null;const e=n.filter(nb);return 0==e.length?null:function(t){return function jC(...n){const e=(0,P_.jO)(n),{args:t,keys:i}=(0,Q0.D)(n),r=new Ji.y(l=>{const{length:u}=t;if(!u)return void l.complete();const g=new Array(u);let _=u,E=u;for(let k=0;k<u;k++){let B=!1;(0,Vu.Xf)(t[k]).subscribe((0,No.x)(l,q=>{B||(B=!0,E--),g[k]=q},()=>_--,void 0,()=>{(!_||!B)&&(E||l.next(i?(0,X0.n)(i,g):g),l.complete())}))}});return e?r.pipe((0,rT.Z)(e)):r}(rb(t,e).map(KC)).pipe((0,qe.U)(ib))}}(YC(n)):null}function XC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ob(n){return n?Array.isArray(n)?n:[n]:[]}function og(n,e){return Array.isArray(n)?n.includes(e):n===e}function tD(n,e){const t=ob(e);return ob(n).forEach(r=>{og(t,r)||t.push(r)}),t}function aT(n,e){return ob(e).filter(t=>!og(n,t))}class ab{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Aa(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vc extends ab{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Fo extends ab{get formDirective(){return null}get path(){return null}}class nD{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let Af=(()=>{class n extends nD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Vc,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&h.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[h.qOj]}),n})(),ag=(()=>{class n extends nD{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fo,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&h.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[h.qOj]}),n})();function ju(n,e){Bc(n,e),e.valueAccessor.writeValue(n.value),function ub(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&oD(n,e)})}(n,e),function hb(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function db(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&oD(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sD(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function H_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bc(n,e){const t=function sb(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(XC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function eD(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(XC(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();H_(e._rawValidators,r),H_(e._rawAsyncValidators,r)}function oD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Nf="VALID",q_="INVALID",xf="PENDING",Mf="DISABLED";function lD(n){return(Z_(n)?n.validators:n)||null}function mb(n){return Array.isArray(n)?Aa(n):n||null}function ug(n,e){return(Z_(e)?e.asyncValidators:n)||null}function cD(n){return Array.isArray(n)?QC(n):n||null}function Z_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const uD=n=>n instanceof pD;function dD(n){return(n=>n instanceof _T)(n)?n.value:n.getRawValue()}function hD(n,e){const t=uD(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new h.vHH(1e3,"");if(!i[e])throw new h.vHH(1001,"")}function mT(n,e){uD(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new h.vHH(1002,"")})}class fD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mb(this._rawValidators),this._composedAsyncValidatorFn=cD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Nf}get invalid(){return this.status===q_}get pending(){return this.status==xf}get disabled(){return this.status===Mf}get enabled(){return this.status!==Mf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cD(e)}addValidators(e){this.setValidators(tD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aT(e,this._rawAsyncValidators))}hasValidator(e){return og(this._rawValidators,e)}hasAsyncValidator(e){return og(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mf,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nf,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nf||this.status===xf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mf:Nf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xf,this._hasOwnPendingAsyncValidator=!0;const t=KC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function gb(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=uD(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof QA)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Mf:this.errors?q_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xf)?xf:this._anyControlsHaveStatus(q_)?q_:Nf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Z_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class _T extends fD{constructor(e=null,t,i){super(lD(t),ug(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z_(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class pD extends fD{constructor(e,t,i){super(lD(t),ug(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mT(this,e),Object.keys(e).forEach(i=>{hD(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=dD(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,l)=>{i=t(i,r,l)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class QA extends fD{constructor(e,t,i){super(lD(t),ug(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mT(this,e),e.forEach((i,r)=>{hD(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>dD(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const yT={provide:Fo,useExisting:(0,h.Gpc)(()=>dg)},K_=(()=>Promise.resolve(null))();let dg=(()=>{class n extends Fo{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new pD({},Aa(t),QC(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){K_.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),ju(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){K_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){K_.then(()=>{const i=this._findContainer(t.path),r=new pD({});(function G_(n,e){Bc(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){K_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){K_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function aD(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(mo,10),h.Y36(Uu,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&h.NdJ("submit",function(l){return i.onSubmit(l)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([yT]),h.qOj]}),n})();const p={provide:Vc,useExisting:(0,h.Gpc)(()=>D)},v=(()=>Promise.resolve(null))();let D=(()=>{class n extends Vc{constructor(t,i,r,l,u){super(),this._changeDetectorRef=u,this.control=new _T,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function fb(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(l=>{l.constructor===rg?t=l:function fT(n){return Object.getPrototypeOf(n.constructor)===Bu}(l)?i=l:r=l}),r||i||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function W_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ju(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){v.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;v.then(()=>{var l;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}_getPath(t){return this._parent?function U_(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fo,9),h.Y36(mo,10),h.Y36(Uu,10),h.Y36(xl,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([p]),h.qOj,h.TTD]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),rR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ee]]}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[rR]}),n})(),uN=(()=>{class n{constructor(t,i){this.authService=t,this.router=i,this.usuario={email:"",password:""}}ngOnInit(){}logIn(){const{email:t,password:i}=this.usuario;this.authService.SignIn(t,i).then(r=>{this.router.navigate(["/"])}).catch(r=>(En().fire(r.message),null))}accesoRapido(){var t=this;return(0,Ie.Z)(function*(){t.usuario.email="JuanPerez@gmail.com",t.usuario.password="Contrase\xf1a123"})()}logInGoogle(){var t=this;return(0,Ie.Z)(function*(){t.authService.logInGoogle().then(i=>{t.router.navigate(["/"])}).catch(i=>(En().fire(i.message),null))})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ig),h.Y36(Ut.F0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:37,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["action","#","id","login-form"],[1,"heading"],[1,"left"],["for","email"],["type","email","name","email","id","email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","pass",3,"ngModel","ngModelChange"],["type","submit","value","Login",3,"click"],[2,"font-size","1em"],["href","/registro"],[1,"right"],[1,"connect"],[1,"google-plus",3,"click"],["aria-hidden","true",1,"bi","bi-google"],[1,"twitter",3,"click"]],template:function(t,i){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4),h.TgZ(6,"title"),h._uU(7,"Ian Garcia"),h.qZA()(),h.TgZ(8,"body")(9,"form",5)(10,"div",6),h._uU(11,"Login"),h.qZA(),h.TgZ(12,"div",7)(13,"label",8),h._uU(14,"Email"),h.qZA(),h._UZ(15,"br"),h.TgZ(16,"input",9),h.NdJ("ngModelChange",function(l){return i.usuario.email=l}),h.qZA(),h._UZ(17,"br"),h.TgZ(18,"label",10),h._uU(19,"Password"),h.qZA(),h._UZ(20,"br"),h.TgZ(21,"input",11),h.NdJ("ngModelChange",function(l){return i.usuario.password=l}),h.qZA(),h._UZ(22,"br"),h.TgZ(23,"input",12),h.NdJ("click",function(){return i.logIn()}),h.qZA(),h._UZ(24,"br"),h.TgZ(25,"label",13),h._uU(26,"No tenes cuenta? "),h.TgZ(27,"a",14),h._uU(28,"Registrate"),h.qZA()()(),h.TgZ(29,"div",15)(30,"div",16),h._uU(31,"Entrar con"),h.qZA(),h.TgZ(32,"a",17),h.NdJ("click",function(){return i.logInGoogle()}),h._UZ(33,"i",18),h.qZA(),h.TgZ(34,"a",19),h.NdJ("click",function(){return i.accesoRapido()}),h.TgZ(35,"p"),h._uU(36,"Acceso Rapido"),h.qZA()()()()()()),2&t&&(h.xp6(16),h.Q6J("ngModel",i.usuario.email),h.xp6(5),h.Q6J("ngModel",i.usuario.password))},directives:[N,ag,dg,rg,Af,D],styles:['div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}body[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}form#login-form[_ngcontent-%COMP%]{background:#fff;width:40em;margin:2em auto;overflow:hidden;position:relative;border-radius:.3em;box-shadow:0 0 .2em #000}form#login-form[_ngcontent-%COMP%]   div.heading[_ngcontent-%COMP%]{background:#f85f64;color:#fff;text-align:center;text-transform:uppercase;font-weight:700;padding:1.5em;font-size:1.1em}form#login-form[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:45%;float:left;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{width:45%;float:right;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]:before, form#login-form[_ngcontent-%COMP%]:after{position:absolute;top:0;right:0;left:0;bottom:0;margin:auto}form#login-form[_ngcontent-%COMP%]:before{content:"or";color:gray;height:.5em;width:.5em;top:1.75em}form#login-form[_ngcontent-%COMP%]:after{content:"";background:rgba(128,128,128,.3);height:8em;width:.12em;top:-7em;left:.5em;z-index:900;box-shadow:0 9.6em #8080804d}',"div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}"]}),n})();const dN="@firebase/database";let CT="";class oR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,de.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,de.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class aR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,de.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const fN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oR(e)}}catch(e){}return new aR},gg=fN("localStorage"),DT=fN("sessionStorage"),X_=new _s.Yd("@firebase/database"),pN=function(){let n=1;return function(){return n++}}(),gN=function(n){const e=(0,de.dS)(n),t=new de.gQ;t.update(e);const i=t.digest();return de.US.encodeByteArray(i)},wb=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=wb.apply(null,i):e+="object"==typeof i?(0,de.Pz)(i):i,e+=" "}return e};let mg=null,mN=!0;const _o=function(...n){if(!0===mN&&(mN=!1,null===mg&&!0===DT.get("logging_enabled")&&function(n,e){(0,de.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(X_.logLevel=_s.in.VERBOSE,mg=X_.log.bind(X_),e&&DT.set("logging_enabled",!0)):"function"==typeof n?mg=n:(mg=null,DT.remove("logging_enabled"))}(!0)),mg){const e=wb.apply(null,n);mg(e)}},Eb=function(n){return function(...e){_o(n,...e)}},IT=function(...n){const e="FIREBASE INTERNAL ERROR: "+wb(...n);X_.error(e)},Hu=function(...n){const e=`FIREBASE FATAL ERROR: ${wb(...n)}`;throw X_.error(e),new Error(e)},Na=function(...n){const e="FIREBASE WARNING: "+wb(...n);X_.warn(e)},gD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fh="[MIN_NAME]",Gu="[MAX_NAME]",_g=function(n,e){if(n===e)return 0;if(n===fh||e===Gu)return-1;if(e===fh||n===Gu)return 1;{const t=mD(n),i=mD(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},uR=function(n,e){return n===e?0:n<e?-1:1},Cb=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,de.Pz)(e))},TT=function(n){if("object"!=typeof n||null===n)return(0,de.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,de.Pz)(e[i]),t+=":",t+=TT(n[e[i]]);return t+="}",t},yN=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function yo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const vN=function(n){(0,de.hu)(!gD(n),"Invalid JSON number");const i=1023;let r,l,u,g,_;0===n?(l=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=g+i,u=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(l=0,u=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(_=11;_;_-=1)E.push(l%2?1:0),l=Math.floor(l/2);E.push(r?1:0),E.reverse();const k=E.join("");let B="";for(_=0;_<64;_+=8){let q=parseInt(k.substr(_,8),2).toString(16);1===q.length&&(q="0"+q),B+=q}return B.toLowerCase()},pR=new RegExp("^-?(0*)\\d{1,10}$"),mD=function(n){if(pR.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},ey=function(n){try{n()}catch(e){setTimeout(()=>{throw Na("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Db=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class mR{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Na(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _R{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(_o("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Na(e)}}let Ib=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const IN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SN="websocket",AN="long_polling";class NT{constructor(e,t,i,r,l=!1,u="",g=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function NN(n,e,t){let i;if((0,de.hu)("string"==typeof e,"typeof type must == string"),(0,de.hu)("object"==typeof t,"typeof params must == object"),e===SN)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==AN)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function vR(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return yo(t,(l,u)=>{r.push(l+"="+u)}),i+r.join("&")}class bR{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,de.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,de.p$)(this.counters_)}}const xT={},MT={};function OT(n){const e=n.toString();return xT[e]||(xT[e]=new bR),xT[e]}class ER{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ey(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ty{constructor(e,t,i,r,l,u,g){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=l,this.transportSessionId=u,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Eb(e),this.stats_=OT(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),NN(t,AN,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ER(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,de.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new RT((...l)=>{const[u,g,_,E,k]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=g,this.password=_;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[u,g]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,g)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&IN.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ty.forceAllow_=!0}static forceDisallow(){ty.forceDisallow_=!0}static isAvailable(){return!((0,de.Yr)()||!ty.forceAllow_&&(ty.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,de.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,de.h$)(t),r=yN(i,1840);for(let l=0;l<r.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,de.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,de.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class RT{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,de.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=pN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=RT.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(g){_o("frame writing exception"),g.stack&&_o(g.stack),_o(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_o("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,de.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{_o("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let Tb=null;"undefined"!=typeof MozWebSocket?Tb=MozWebSocket:"undefined"!=typeof WebSocket&&(Tb=WebSocket);let Sb=(()=>{class n{constructor(t,i,r,l,u,g,_){this.connId=t,this.applicationId=r,this.appCheckToken=l,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Eb(this.connId),this.stats_=OT(i),this.connURL=n.connectionURL_(i,g,_,l),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,l){const u={v:"5"};return!(0,de.Yr)()&&"undefined"!=typeof location&&location.hostname&&IN.test(location.hostname)&&(u.r="f"),i&&(u.s=i),r&&(u.ls=r),l&&(u.ac=l),NN(t,SN,u)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gg.set("previous_websocket_failure",!0);try{if((0,de.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${CT}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,g=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;g&&(l.proxy={origin:g}),this.mySock=new Tb(this.connURL,[],l)}else this.mySock=new Tb(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const l=r.message||r.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const l=r.message||r.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Tb&&!n.forceDisallow_}static previouslyFailed(){return gg.isInMemoryStorage||!0===gg.get("previous_websocket_failure")}markConnectionHealthy(){gg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,de.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,de.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,de.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=yN(i,16384);r.length>1&&this.sendString_(String(r.length));for(let l=0;l<r.length;l++)this.sendString_(r[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class kT{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ty,Sb]}initTransports_(e){const t=Sb&&Sb.isAvailable();let i=t&&!Sb.previouslyFailed();if(e.webSocketOnly&&(t||Na("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Sb];else{const r=this.transports_=[];for(const l of kT.ALL_TRANSPORTS)l&&l.isAvailable()&&r.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class HN{constructor(e,t,i,r,l,u,g,_,E,k){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=l,this.onMessage_=u,this.onReady_=g,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=k,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Eb("c:"+this.id+":"),this.transportManager_=new kT(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Db(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Cb("t",e),i=Cb("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Cb("t",e),i=Cb("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Cb("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?IT("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):IT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Na("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Db(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Db(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class GN{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class $N{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,de.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let l=0;l<r.length;l++)if(r[l].callback===t&&(!i||i===r[l].context))return void r.splice(l,1)}validateEventType_(e){(0,de.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class yD extends $N{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,de.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yD}getInitialEvent(e){return(0,de.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Oi{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function bi(){return new Oi("")}function Gn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Of(n){return n.pieces_.length-n.pieceNum_}function sr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Oi(n.pieces_,e)}function FT(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ab(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Oi(e,0)}function Gr(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Oi)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Oi(t,0)}function $n(n){return n.pieceNum_>=n.pieces_.length}function xa(n,e){const t=Gn(n),i=Gn(e);if(null===t)return e;if(t===i)return xa(sr(n),sr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function LT(n,e){if(Of(n)!==Of(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function ec(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Of(n)>Of(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class WR{constructor(e,t){this.errorPrefix_=t,this.parts_=Ab(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,de.ug)(this.parts_[i]);ZN(this)}}function ZN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yg(n))}function yg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class VT extends $N{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new VT}getInitialEvent(e){return(0,de.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Nb=1e3;let bD,vg=(()=>{class n extends GN{constructor(t,i,r,l,u,g,_,E){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=l,this.onServerInfoUpdate_=u,this.authTokenProvider_=g,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=Eb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nb,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,de.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VT.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&yD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const l=++this.requestNumber_,u={r:l,a:t,b:i};this.log_((0,de.Pz)(u)),(0,de.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[l]=r)}get(t){this.initConnection_();const i=new de.BH,r={p:t._path.toString(),q:t._queryObject},l={action:"g",request:r,onComplete:g=>{const _=g.d;"ok"===g.s?(this.onDataUpdate_(r.p,_,!1,null),i.resolve(_)):i.reject(_)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const g=this.outstandingGets_[u];void 0===g||l!==g||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),i.promise}listen(t,i,r,l){this.initConnection_();const u=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+u),this.listens.has(g)||this.listens.set(g,new Map),(0,de.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,de.hu)(!this.listens.get(g).has(u),"listen() called twice for same path/queryId.");const _={onComplete:l,hashFn:i,query:t,tag:r};this.listens.get(g).set(u,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),l=i._queryIdentifier;this.log_("Listen on "+r+" for "+l);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,_=>{const E=_.d,k=_.s;n.warnOnListenWarnings_(E,i),(this.listens.get(r)&&this.listens.get(r).get(l))===t&&(this.log_("listen response",_),"ok"!==k&&this.removeListen_(r,l),t.onComplete&&t.onComplete(k,E))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,de.r3)(t,"w")){const r=(0,de.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const l='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();Na(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,de.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,de.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,l=>{const u=l.s,g=l.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+l),(0,de.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,l)&&this.connected_&&this.sendUnlisten_(r,l,t._queryObject,i)}sendUnlisten_(t,i,r,l){this.log_("Unlisten on "+t+" for "+i);const u={p:t};l&&(u.q=r,u.t=l),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,l){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,g=>{l&&setTimeout(()=>{l(g.s,g.d)},Math.floor(0))})}put(t,i,r,l){this.putInternal("p",t,i,r,l)}merge(t,i,r,l){this.putInternal("m",t,i,r,l)}putInternal(t,i,r,l,u){this.initConnection_();const g={p:i,d:r};void 0!==u&&(g.h=u),this.outstandingPuts_.push({action:t,request:g,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,de.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):IT("Unrecognized action received from server: "+(0,de.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,de.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let _=!1,E=null;const k=function(){E?E.close():(_=!0,l())};t.realtime_={close:k,sendRequest:function(te){(0,de.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(te)}};const q=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[te,ge]=yield Promise.all([t.authTokenProvider_.getToken(q),t.appCheckTokenProvider_.getToken(q)]);_?_o("getToken() completed but was canceled"):(_o("getToken() completed. Creating connection."),t.authToken_=te&&te.accessToken,t.appCheckToken_=ge&&ge.token,E=new HN(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,l,Ne=>{Na(Ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(te){t.log_("Failed to get token: "+te),_||(t.repoInfo_.nodeAdmin&&Na(te),k())}}})()}interrupt(t){_o("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_o("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,de.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Nb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>TT(u)).join("$"):"default";const l=this.removeListen_(t,r);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,i){const r=new Oi(t).toString();let l;if(this.listens.has(r)){const u=this.listens.get(r);l=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else l=void 0;return l}onAuthRevoked_(t,i){_o("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){_o("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,de.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+CT.replace(/\./g,"-")]=1,(0,de.uI)()?t["framework.cordova"]=1:(0,de.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=yD.getInstance().currentlyOnline();return(0,de.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zn(e,t)}}class vD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Zn(fh,e),r=new Zn(fh,t);return 0!==this.compare(i,r)}minPost(){return Zn.MIN}}class JN extends vD{static get __EMPTY_NODE(){return bD}static set __EMPTY_NODE(e){bD=e}compare(e,t){return _g(e.name,t.name)}isDefinedOn(e){throw(0,de.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zn.MIN}maxPost(){return new Zn(Gu,bD)}makePost(e,t){return(0,de.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zn(e,bD)}toString(){return".key"}}const $u=new JN;class wD{constructor(e,t,i,r,l=null){this.isReverse_=r,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let UT,Uc=(()=>{class n{constructor(t,i,r,l,u){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=l?l:tl.EMPTY_NODE,this.right=null!=u?u:tl.EMPTY_NODE}copy(t,i,r,l,u){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=l?l:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let l=this;const u=r(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,i,r),null):0===u?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,r)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return tl.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,l;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return tl.EMPTY_NODE;l=r.right.min_(),r=r.copy(l.key,l.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class tl{constructor(e,t=tl.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new tl(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Uc.BLACK,null,null))}remove(e){return new tl(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Uc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new wD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new wD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new wD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new wD(this.root_,null,this.comparator_,!0,e)}}function ek(n,e){return _g(n.name,e.name)}function BT(n,e){return _g(n,e)}tl.EMPTY_NODE=new class XR{copy(e,t,i,r,l){return this}insert(e,t,i){return new Uc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const QN=function(n){return"number"==typeof n?"number:"+vN(n):"string:"+n},XN=function(n){if(n.isLeafNode()){const e=n.val();(0,de.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,de.r3)(e,".sv"),"Priority must be a string or number.")}else(0,de.hu)(n===UT||n.isEmpty(),"priority of unexpected type.");(0,de.hu)(n===UT||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ex,tx,nx,ny=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,de.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),XN(this.priorityNode_)}static set __childrenNodeConstructor(t){ex=t}static get __childrenNodeConstructor(){return ex}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return $n(t)?this:".priority"===Gn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Gn(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,de.hu)(".priority"!==r||1===Of(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(sr(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+QN(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?vN(this.value_):this.value_,this.lazyHash_=gN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,de.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,de.hu)(l>=0,"Unknown leaf type: "+i),(0,de.hu)(u>=0,"Unknown leaf type: "+r),l===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mr=new class rk extends vD{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),l=i.compareTo(r);return 0===l?_g(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zn.MIN}maxPost(){return new Zn(Gu,new ny("[PRIORITY-POST]",nx))}makePost(e,t){const i=tx(e);return new Zn(t,new ny("[PRIORITY-POST]",i))}toString(){return".priority"}},sk=Math.log(2);class ok{constructor(e){this.count=parseInt(Math.log(e+1)/sk,10),this.current_=this.count-1;const r=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ED=function(n,e,t,i){n.sort(e);const r=function(_,E){const k=E-_;let B,q;if(0===k)return null;if(1===k)return B=n[_],q=t?t(B):B,new Uc(q,B.node,Uc.BLACK,null,null);{const te=parseInt(k/2,10)+_,ge=r(_,te),Ne=r(te+1,E);return B=n[te],q=t?t(B):B,new Uc(q,B.node,Uc.BLACK,ge,Ne)}},g=function(_){let E=null,k=null,B=n.length;const q=function(ge,Ne){const it=B-ge,Ht=B;B-=ge;const gt=r(it+1,Ht),rn=n[it],Ct=t?t(rn):rn;te(new Uc(Ct,rn.node,Ne,null,gt))},te=function(ge){E?(E.left=ge,E=ge):(k=ge,E=ge)};for(let ge=0;ge<_.count;++ge){const Ne=_.nextBitIsOne(),it=Math.pow(2,_.count-(ge+1));Ne?q(it,Uc.BLACK):(q(it,Uc.BLACK),q(it,Uc.RED))}return k}(new ok(n.length));return new tl(i||e,g)};let jT;const iy={};class ph{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,de.hu)(iy&&mr,"ChildrenNode.ts has not been loaded"),jT=jT||new ph({".priority":iy},{".priority":mr}),jT}get(e){const t=(0,de.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof tl?t:null}hasIndex(e){return(0,de.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,de.hu)(e!==$u,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const l=t.getIterator(Zn.Wrap);let g,u=l.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=l.getNext();g=r?ED(i,e.getCompare()):iy;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const k=Object.assign({},this.indexes_);return k[_]=g,new ph(k,E)}addToIndexes(e,t){const i=(0,de.UI)(this.indexes_,(r,l)=>{const u=(0,de.DV)(this.indexSet_,l);if((0,de.hu)(u,"Missing index implementation for "+l),r===iy){if(u.isDefinedOn(e.node)){const g=[],_=t.getIterator(Zn.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&g.push(E),E=_.getNext();return g.push(e),ED(g,u.getCompare())}return iy}{const g=t.get(e.name);let _=r;return g&&(_=_.remove(new Zn(e.name,g))),_.insert(e,e.node)}});return new ph(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,de.UI)(this.indexes_,r=>{if(r===iy)return r;{const l=t.get(e.name);return l?r.remove(new Zn(e.name,l)):r}});return new ph(i,this.indexSet_)}}let xb,Rn=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XN(this.priorityNode_),this.children_.isEmpty()&&(0,de.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xb||(xb=new n(new tl(BT),null,ph.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xb}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?xb:i}}getChild(t){const i=Gn(t);return null===i?this:this.getImmediateChild(i).getChild(sr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,de.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new Zn(t,i);let l,u;i.isEmpty()?(l=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(l=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const g=l.isEmpty()?xb:this.priorityNode_;return new n(l,g,u)}}updateChild(t,i){const r=Gn(t);if(null===r)return i;{(0,de.hu)(".priority"!==Gn(t)||1===Of(t),".priority must be the last token in a path");const l=this.getImmediateChild(r).updateChild(sr(t),i);return this.updateImmediateChild(r,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,l=0,u=!0;if(this.forEachChild(mr,(g,_)=>{i[g]=_.val(t),r++,u&&n.INTEGER_REGEXP_.test(g)?l=Math.max(l,Number(g)):u=!1}),!t&&u&&l<2*r){const g=[];for(const _ in i)g[_]=i[_];return g}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+QN(this.getPriority().val())+":"),this.forEachChild(mr,(i,r)=>{const l=r.hash();""!==l&&(t+=":"+i+":"+l)}),this.lazyHash_=""===t?"":gN(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const l=this.resolveIndex_(r);if(l){const u=l.getPredecessorKey(new Zn(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new Zn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new Zn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(l=>i(l.name,l.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Zn.Wrap);let u=l.peek();for(;null!=u&&i.compare(u,t)<0;)l.getNext(),u=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Zn.Wrap);let u=l.peek();for(;null!=u&&i.compare(u,t)>0;)l.getNext(),u=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Mb?-1:0}withIndex(t){if(t===$u||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===$u||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(mr),l=i.getIterator(mr);let u=r.getNext(),g=l.getNext();for(;u&&g;){if(u.name!==g.name||!u.node.equals(g.node))return!1;u=r.getNext(),g=l.getNext()}return null===u&&null===g}return!1}return!1}}resolveIndex_(t){return t===$u?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Mb=new class ak extends Rn{constructor(){super(new tl(BT),Rn.EMPTY_NODE,ph.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Rn.EMPTY_NODE}isEmpty(){return!1}};function rs(n,e=null){if(null===n)return Rn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,de.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ny(n,rs(e));if(n instanceof Array){let t=Rn.EMPTY_NODE;return yo(n,(i,r)=>{if((0,de.r3)(n,i)&&"."!==i.substring(0,1)){const l=rs(r);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(rs(e))}{const t=[];let i=!1;if(yo(n,(u,g)=>{if("."!==u.substring(0,1)){const _=rs(g);_.isEmpty()||(i=i||!_.getPriority().isEmpty(),t.push(new Zn(u,_)))}}),0===t.length)return Rn.EMPTY_NODE;const l=ED(t,ek,u=>u.name,BT);if(i){const u=ED(t,mr.getCompare());return new Rn(l,rs(e),new ph({".priority":u},{".priority":mr}))}return new Rn(l,rs(e),ph.Default)}}Object.defineProperties(Zn,{MIN:{value:new Zn(fh,Rn.EMPTY_NODE)},MAX:{value:new Zn(Gu,Mb)}}),JN.__EMPTY_NODE=Rn.EMPTY_NODE,ny.__childrenNodeConstructor=Rn,function tk(n){UT=n}(Mb),function ik(n){nx=n}(Mb),function nk(n){tx=n}(rs);class HT extends vD{constructor(e){super(),this.indexPath_=e,(0,de.hu)(!$n(e)&&".priority"!==Gn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),l=i.compareTo(r);return 0===l?_g(e.name,t.name):l}makePost(e,t){const i=rs(e),r=Rn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Zn(t,r)}maxPost(){const e=Rn.EMPTY_NODE.updateChild(this.indexPath_,Mb);return new Zn(Gu,e)}toString(){return Ab(this.indexPath_,0).join("/")}}const GT=new class ck extends vD{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?_g(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zn.MIN}maxPost(){return Zn.MAX}makePost(e,t){const i=rs(e);return new Zn(t,i)}toString(){return".value"}};function Rb(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,de.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,de.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,de.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,de.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,de.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new zT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lx(n){const e={};if(n.isDefault())return e;let t;return n.index_===mr?t="$priority":n.index_===GT?t="$value":n.index_===$u?t="$key":((0,de.hu)(n.index_ instanceof HT,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,de.Pz)(t),n.startSet_&&(e.startAt=(0,de.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,de.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,de.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,de.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function cx(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mr&&(e.i=n.index_.toString()),e}class DD extends GN{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Eb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,de.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=DD.getListenId_(e,i),g={};this.listens_[u]=g;const _=lx(e._queryParams);this.restRequest_(l+".json",_,(E,k)=>{let B=k;if(404===E&&(B=null,E=null),null===E&&this.onDataUpdate_(l,B,!1,i),(0,de.DV)(this.listens_,u)===g){let q;q=E?401===E?"permission_denied":"rest_error:"+E:"ok",r(q,null)}})}unlisten(e,t){const i=DD.getListenId_(e,t);delete this.listens_[i]}get(e){const t=lx(e._queryParams),i=e._path.toString(),r=new de.BH;return this.restRequest_(i+".json",t,(l,u)=>{let g=u;404===l&&(g=null,l=null),null===l?(this.onDataUpdate_(i,g,!1,null),r.resolve(g)):r.reject(new Error(g))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,l])=>{r&&r.accessToken&&(t.auth=r.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,de.xO)(t);this.log_("Sending REST request for "+u);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(i&&4===g.readyState){this.log_("REST Response for "+u+" received. status:",g.status,"response:",g.responseText);let _=null;if(g.status>=200&&g.status<300){try{_=(0,de.cI)(g.responseText)}catch(E){Na("Failed to parse JSON response for "+u+": "+g.responseText)}i(null,_)}else 401!==g.status&&404!==g.status&&Na("Got unsuccessful REST response for "+u+" Status: "+g.status),i(g.status);i=null}},g.open("GET",u,!0),g.send()})}}class yk{constructor(){this.rootNode_=Rn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ID(){return{value:null,children:new Map}}function oy(n,e,t){if($n(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Gn(e);n.children.has(i)||n.children.set(i,ID()),oy(n.children.get(i),e=sr(e),t)}}function YT(n,e,t){null!==n.value?t(e,n.value):function vk(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{YT(r,new Oi(e.toString()+"/"+i),t)})}class bk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yo(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class Ck{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bk(e);const i=1e4+2e4*Math.random();Db(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;yo(e,(r,l)=>{l>0&&(0,de.r3)(this.statsToReport_,r)&&(t[r]=l,i=!0)}),i&&this.server_.reportStats(t),Db(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var tc=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(tc||(tc={})),tc))();function XT(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class TD{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=tc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if($n(this.path)){if(null!=this.affectedTree.value)return(0,de.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Oi(e));return new TD(bi(),t,this.revert)}}return(0,de.hu)(Gn(this.path)===e,"operationForChild called for unrelated child."),new TD(sr(this.path),this.affectedTree,this.revert)}}class bg{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=tc.OVERWRITE}operationForChild(e){return $n(this.path)?new bg(this.source,bi(),this.snap.getImmediateChild(e)):new bg(this.source,sr(this.path),this.snap)}}class ay{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=tc.MERGE}operationForChild(e){if($n(this.path)){const t=this.children.subtree(new Oi(e));return t.isEmpty()?null:t.value?new bg(this.source,bi(),t.value):new ay(this.source,bi(),t)}return(0,de.hu)(Gn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ay(this.source,sr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rf{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($n(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Fb(n,e,t,i,r,l){const u=i.filter(g=>g.type===t);u.sort((g,_)=>function Sk(n,e,t){if(null==e.childName||null==t.childName)throw(0,de.g5)("Should only compare child_ events.");const i=new Zn(e.childName,e.snapshotNode),r=new Zn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,g,_)),u.forEach(g=>{const _=function Tk(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,l);r.forEach(E=>{E.respondsTo(g.type)&&e.push(E.createEvent(_,n.query_))})})}function SD(n,e){return{eventCache:n,serverCache:e}}function Lb(n,e,t,i){return SD(new Rf(e,t,i),n.serverCache)}function dx(n,e,t,i){return SD(n.eventCache,new Rf(e,t,i))}function AD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let eS;class _r{constructor(e,t=(()=>(eS||(eS=new tl(uR)),eS))()){this.value=e,this.children=t}static fromObject(e){let t=new _r(null);return yo(e,(i,r)=>{t=t.set(new Oi(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:bi(),value:this.value};if($n(e))return null;{const i=Gn(e),r=this.children.get(i);if(null!==r){const l=r.findRootMostMatchingPathAndValue(sr(e),t);return null!=l?{path:Gr(new Oi(i),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($n(e))return this;{const t=Gn(e),i=this.children.get(t);return null!==i?i.subtree(sr(e)):new _r(null)}}set(e,t){if($n(e))return new _r(t,this.children);{const i=Gn(e),l=(this.children.get(i)||new _r(null)).set(sr(e),t),u=this.children.insert(i,l);return new _r(this.value,u)}}remove(e){if($n(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=Gn(e),i=this.children.get(t);if(i){const r=i.remove(sr(e));let l;return l=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&l.isEmpty()?new _r(null):new _r(this.value,l)}return this}}get(e){if($n(e))return this.value;{const t=Gn(e),i=this.children.get(t);return i?i.get(sr(e)):null}}setTree(e,t){if($n(e))return t;{const i=Gn(e),l=(this.children.get(i)||new _r(null)).setTree(sr(e),t);let u;return u=l.isEmpty()?this.children.remove(i):this.children.insert(i,l),new _r(this.value,u)}}fold(e){return this.fold_(bi(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,l)=>{i[r]=l.fold_(Gr(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,bi(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if($n(e))return null;{const l=Gn(e),u=this.children.get(l);return u?u.findOnPath_(sr(e),Gr(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,bi(),t)}foreachOnPath_(e,t,i){if($n(e))return this;{this.value&&i(t,this.value);const r=Gn(e),l=this.children.get(r);return l?l.foreachOnPath_(sr(e),Gr(t,r),i):new _r(null)}}foreach(e){this.foreach_(bi(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Gr(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class jc{constructor(e){this.writeTree_=e}static empty(){return new jc(new _r(null))}}function Vb(n,e,t){if($n(e))return new jc(new _r(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let l=i.value;const u=xa(r,e);return l=l.updateChild(u,t),new jc(n.writeTree_.set(r,l))}{const r=new _r(t),l=n.writeTree_.setTree(e,r);return new jc(l)}}}function tS(n,e,t){let i=n;return yo(t,(r,l)=>{i=Vb(i,Gr(e,r),l)}),i}function hx(n,e){if($n(e))return jc.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new jc(t)}}function nS(n,e){return null!=Eg(n,e)}function Eg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(xa(t.path,e)):null}function fx(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mr,(i,r)=>{e.push(new Zn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new Zn(i,r.value))}),e}function kf(n,e){if($n(e))return n;{const t=Eg(n,e);return new jc(null!=t?new _r(t):n.writeTree_.subtree(e))}}function iS(n){return n.writeTree_.isEmpty()}function ly(n,e){return px(bi(),n.writeTree_,e)}function px(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,l)=>{".priority"===r?((0,de.hu)(null!==l.value,"Priority writes must always be leaf nodes"),i=l.value):t=px(Gr(n,r),l,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Gr(n,".priority"),i)),t}}function ND(n,e){return vx(e,n)}function Rk(n,e){if(n.snap)return ec(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ec(Gr(n.path,t),e))return!0;return!1}function Pk(n){return n.visible}function gx(n,e,t){let i=jc.empty();for(let r=0;r<n.length;++r){const l=n[r];if(e(l)){const u=l.path;let g;if(l.snap)ec(t,u)?(g=xa(t,u),i=Vb(i,g,l.snap)):ec(u,t)&&(g=xa(u,t),i=Vb(i,bi(),l.snap.getChild(g)));else{if(!l.children)throw(0,de.g5)("WriteRecord should have .snap or .children");if(ec(t,u))g=xa(t,u),i=tS(i,g,l.children);else if(ec(u,t))if(g=xa(u,t),$n(g))i=tS(i,bi(),l.children);else{const _=(0,de.DV)(l.children,Gn(g));if(_){const E=_.getChild(sr(g));i=Vb(i,bi(),E)}}}}}return i}function mx(n,e,t,i,r){if(i||r){const l=kf(n.visibleWrites,e);return!r&&iS(l)?t:r||null!=t||nS(l,bi())?ly(gx(n.allWrites,function(E){return(E.visible||r)&&(!i||!~i.indexOf(E.writeId))&&(ec(E.path,e)||ec(e,E.path))},e),t||Rn.EMPTY_NODE):null}{const l=Eg(n.visibleWrites,e);if(null!=l)return l;{const u=kf(n.visibleWrites,e);return iS(u)?t:null!=t||nS(u,bi())?ly(u,t||Rn.EMPTY_NODE):null}}}function xD(n,e,t,i){return mx(n.writeTree,n.treePath,e,t,i)}function rS(n,e){return function Fk(n,e,t){let i=Rn.EMPTY_NODE;const r=Eg(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(mr,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=kf(n.visibleWrites,e);return t.forEachChild(mr,(u,g)=>{const _=ly(kf(l,new Oi(u)),g);i=i.updateImmediateChild(u,_)}),fx(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return fx(kf(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function _x(n,e,t,i){return function Lk(n,e,t,i,r){(0,de.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const l=Gr(e,t);if(nS(n.visibleWrites,l))return null;{const u=kf(n.visibleWrites,l);return iS(u)?r.getChild(t):ly(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function MD(n,e){return function Bk(n,e){return Eg(n.visibleWrites,e)}(n.writeTree,Gr(n.treePath,e))}function sS(n,e,t){return function Vk(n,e,t,i){const r=Gr(e,t),l=Eg(n.visibleWrites,r);return null!=l?l:i.isCompleteForChild(t)?ly(kf(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function yx(n,e){return vx(Gr(n.treePath,e),n.writeTree)}function vx(n,e){return{treePath:n,writeTree:e}}class Gk{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,de.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,de.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const l=r.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(i,Rb(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(i,function Ob(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(i,r.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(i,function sy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,de.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Rb(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const bx=new class $k{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class oS{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Rf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sS(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wg(this.viewCache_),l=function Hk(n,e,t,i,r,l){return function Uk(n,e,t,i,r,l,u){let g;const _=kf(n.visibleWrites,e),E=Eg(_,bi());if(null!=E)g=E;else{if(null==t)return[];g=ly(_,t)}if(g=g.withIndex(u),g.isEmpty()||g.isLeafNode())return[];{const k=[],B=u.getCompare(),q=l?g.getReverseIteratorFrom(i,u):g.getIteratorFrom(i,u);let te=q.getNext();for(;te&&k.length<r;)0!==B(te,i)&&k.push(te),te=q.getNext();return k}}(n.writeTree,n.treePath,e,t,i,r,l)}(this.writes_,r,t,1,i,e);return 0===l.length?null:l[0]}}function wx(n,e,t,i,r,l){const u=e.eventCache;if(null!=MD(i,t))return e;{let g,_;if($n(t))if((0,de.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=wg(e),B=rS(i,E instanceof Rn?E:Rn.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),B,l)}else{const E=xD(i,wg(e));g=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const E=Gn(t);if(".priority"===E){(0,de.hu)(1===Of(t),"Can't have a priority with additional path components");const k=u.getNode();_=e.serverCache.getNode();const B=_x(i,t,k,_);g=null!=B?n.filter.updatePriority(k,B):u.getNode()}else{const k=sr(t);let B;if(u.isCompleteForChild(E)){_=e.serverCache.getNode();const q=_x(i,t,u.getNode(),_);B=null!=q?u.getNode().getImmediateChild(E).updateChild(k,q):u.getNode().getImmediateChild(E)}else B=sS(i,E,e.serverCache);g=null!=B?n.filter.updateChild(u.getNode(),E,B,k,r,l):u.getNode()}}return Lb(e,g,u.isFullyInitialized()||$n(t),n.filter.filtersNodes())}}function OD(n,e,t,i,r,l,u,g){const _=e.serverCache;let E;const k=u?n.filter:n.filter.getIndexedFilter();if($n(t))E=k.updateFullNode(_.getNode(),i,null);else if(k.filtersNodes()&&!_.isFiltered()){const te=_.getNode().updateChild(t,i);E=k.updateFullNode(_.getNode(),te,null)}else{const te=Gn(t);if(!_.isCompleteForPath(t)&&Of(t)>1)return e;const ge=sr(t),it=_.getNode().getImmediateChild(te).updateChild(ge,i);E=".priority"===te?k.updatePriority(_.getNode(),it):k.updateChild(_.getNode(),te,it,ge,bx,null)}const B=dx(e,E,_.isFullyInitialized()||$n(t),k.filtersNodes());return wx(n,B,t,r,new oS(r,B,l),g)}function aS(n,e,t,i,r,l,u){const g=e.eventCache;let _,E;const k=new oS(r,e,l);if($n(t))E=n.filter.updateFullNode(e.eventCache.getNode(),i,u),_=Lb(e,E,!0,n.filter.filtersNodes());else{const B=Gn(t);if(".priority"===B)E=n.filter.updatePriority(e.eventCache.getNode(),i),_=Lb(e,E,g.isFullyInitialized(),g.isFiltered());else{const q=sr(t),te=g.getNode().getImmediateChild(B);let ge;if($n(q))ge=i;else{const Ne=k.getCompleteChild(B);ge=null!=Ne?".priority"===FT(q)&&Ne.getChild(qN(q)).isEmpty()?Ne:Ne.updateChild(q,i):Rn.EMPTY_NODE}_=te.equals(ge)?e:Lb(e,n.filter.updateChild(g.getNode(),B,ge,q,k,u),g.isFullyInitialized(),n.filter.filtersNodes())}}return _}function Ex(n,e){return n.eventCache.isCompleteForChild(e)}function Cx(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function lS(n,e,t,i,r,l,u,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=$n(t)?i:new _r(null).setTree(t,i);const k=e.serverCache.getNode();return E.children.inorderTraversal((B,q)=>{if(k.hasChild(B)){const ge=Cx(0,e.serverCache.getNode().getImmediateChild(B),q);_=OD(n,_,new Oi(B),ge,r,l,u,g)}}),E.children.inorderTraversal((B,q)=>{const te=!e.serverCache.isCompleteForChild(B)&&void 0===q.value;if(!k.hasChild(B)&&!te){const Ne=Cx(0,e.serverCache.getNode().getImmediateChild(B),q);_=OD(n,_,new Oi(B),Ne,r,l,u,g)}}),_}function nP(n,e){const t=wg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$n(e)&&!t.getImmediateChild(Gn(e)).isEmpty())?t.getChild(e):null}function Tx(n,e,t,i){e.type===tc.MERGE&&null!==e.source.queryId&&((0,de.hu)(wg(n.viewCache_),"We should always have a full cache before handling merges"),(0,de.hu)(AD(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,l=function qk(n,e,t,i,r){const l=new Gk;let u,g;if(t.type===tc.OVERWRITE){const E=t;E.source.fromUser?u=aS(n,e,E.path,E.snap,i,r,l):((0,de.hu)(E.source.fromServer,"Unknown source."),g=E.source.tagged||e.serverCache.isFiltered()&&!$n(E.path),u=OD(n,e,E.path,E.snap,i,r,g,l))}else if(t.type===tc.MERGE){const E=t;E.source.fromUser?u=function Kk(n,e,t,i,r,l,u){let g=e;return i.foreach((_,E)=>{const k=Gr(t,_);Ex(e,Gn(k))&&(g=aS(n,g,k,E,r,l,u))}),i.foreach((_,E)=>{const k=Gr(t,_);Ex(e,Gn(k))||(g=aS(n,g,k,E,r,l,u))}),g}(n,e,E.path,E.children,i,r,l):((0,de.hu)(E.source.fromServer,"Unknown source."),g=E.source.tagged||e.serverCache.isFiltered(),u=lS(n,e,E.path,E.children,i,r,g,l))}else if(t.type===tc.ACK_USER_WRITE){const E=t;u=E.revert?function Qk(n,e,t,i,r,l){let u;if(null!=MD(i,t))return e;{const g=new oS(i,e,r),_=e.eventCache.getNode();let E;if($n(t)||".priority"===Gn(t)){let k;if(e.serverCache.isFullyInitialized())k=xD(i,wg(e));else{const B=e.serverCache.getNode();(0,de.hu)(B instanceof Rn,"serverChildren would be complete if leaf node"),k=rS(i,B)}k=k,E=n.filter.updateFullNode(_,k,l)}else{const k=Gn(t);let B=sS(i,k,e.serverCache);null==B&&e.serverCache.isCompleteForChild(k)&&(B=_.getImmediateChild(k)),E=null!=B?n.filter.updateChild(_,k,B,sr(t),g,l):e.eventCache.getNode().hasChild(k)?n.filter.updateChild(_,k,Rn.EMPTY_NODE,sr(t),g,l):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=xD(i,wg(e)),u.isLeafNode()&&(E=n.filter.updateFullNode(E,u,l)))}return u=e.serverCache.isFullyInitialized()||null!=MD(i,bi()),Lb(e,E,u,n.filter.filtersNodes())}}(n,e,E.path,i,r,l):function Yk(n,e,t,i,r,l,u){if(null!=MD(r,t))return e;const g=e.serverCache.isFiltered(),_=e.serverCache;if(null!=i.value){if($n(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return OD(n,e,t,_.getNode().getChild(t),r,l,g,u);if($n(t)){let E=new _r(null);return _.getNode().forEachChild($u,(k,B)=>{E=E.set(new Oi(k),B)}),lS(n,e,t,E,r,l,g,u)}return e}{let E=new _r(null);return i.foreach((k,B)=>{const q=Gr(t,k);_.isCompleteForPath(q)&&(E=E.set(k,_.getNode().getChild(q)))}),lS(n,e,t,E,r,l,g,u)}}(n,e,E.path,E.affectedTree,i,r,l)}else{if(t.type!==tc.LISTEN_COMPLETE)throw(0,de.g5)("Unknown operation type: "+t.type);u=function Jk(n,e,t,i,r){const l=e.serverCache;return wx(n,dx(e,l.getNode(),l.isFullyInitialized()||$n(t),l.isFiltered()),t,i,bx,r)}(n,e,t.path,i,l)}const _=l.getChanges();return function Zk(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=AD(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(function ax(n){return{type:"value",snapshotNode:n}}(AD(e)))}}(e,u,_),{viewCache:u,changes:_}}(n.processor_,r,e,t,i);return function zk(n,e){(0,de.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,de.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,de.hu)(l.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,function Sx(n,e,t,i){return function Ik(n,e,t,i){const r=[],l=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(function dk(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Fb(n,r,"child_removed",e,i,t),Fb(n,r,"child_added",e,i,t),Fb(n,r,"child_moved",l,i,t),Fb(n,r,"child_changed",e,i,t),Fb(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}(n,l.changes,l.viewCache.eventCache.getNode(),null)}let RD,PD;function cS(n,e,t,i){const r=e.source.queryId;if(null!==r){const l=n.views.get(r);return(0,de.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Tx(l,e,t,i)}{let l=[];for(const u of n.views.values())l=l.concat(Tx(u,e,t,i));return l}}function Pf(n,e){let t=null;for(const i of n.views.values())t=t||nP(i,e);return t}class Rx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function jk(){return{visibleWrites:jc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uS(n,e,t,i,r){return function Nk(n,e,t,i,r){(0,de.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Vb(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?cy(n,new bg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Lf(n,e,t=!1){const i=function Mk(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function Ok(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,de.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,l=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const g=n.allWrites[u];g.visible&&(u>=t&&Rk(g,i.path)?r=!1:ec(i.path,g.path)&&(l=!0)),u--}return!!r&&(l?(function kk(n){n.visibleWrites=gx(n.allWrites,Pk,bi()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=hx(n.visibleWrites,i.path):yo(i.children,_=>{n.visibleWrites=hx(n.visibleWrites,Gr(i.path,_))}),!0))}(n.pendingWriteTree_,e)){let l=new _r(null);return null!=i.snap?l=l.set(bi(),!0):yo(i.children,u=>{l=l.set(new Oi(u),!0)}),cy(n,new TD(i.path,l,t))}return[]}function Bb(n,e,t){return cy(n,new bg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function FD(n,e,t){const r=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,g)=>{const E=Pf(g,xa(u,e));if(E)return E});return mx(r,e,l,t,!0)}function cy(n,e){return Px(e,n.syncPointTree_,null,ND(n.pendingWriteTree_,bi()))}function Px(n,e,t,i){if($n(n.path))return Fx(n,e,t,i);{const r=e.get(bi());null==t&&null!=r&&(t=Pf(r,bi()));let l=[];const u=Gn(n.path),g=n.operationForChild(u),_=e.children.get(u);if(_&&g){const E=t?t.getImmediateChild(u):null,k=yx(i,u);l=l.concat(Px(g,_,E,k))}return r&&(l=l.concat(cS(r,n,i,t))),l}}function Fx(n,e,t,i){const r=e.get(bi());null==t&&null!=r&&(t=Pf(r,bi()));let l=[];return e.children.inorderTraversal((u,g)=>{const _=t?t.getImmediateChild(u):null,E=yx(i,u),k=n.operationForChild(u);k&&(l=l.concat(Fx(k,g,_,E)))}),r&&(l=l.concat(cS(r,n,i,t))),l}function hS(n,e){return n.tagToQueryMap.get(e)}function fS(n){const e=n.indexOf("$");return(0,de.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Oi(n.substr(0,e))}}function pS(n,e,t){const i=n.syncPointTree_.get(e);return(0,de.hu)(i,"Missing sync point for query tag that we're tracking"),cS(i,t,ND(n.pendingWriteTree_,e),null)}class gS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new gS(t)}node(){return this.node_}}class mS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gr(this.path_,e);return new mS(this.syncTree_,t)}node(){return FD(this.syncTree_,this.path_)}}const Vx=function(n,e,t){return n&&"object"==typeof n?((0,de.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?IP(n[".sv"],e,t):"object"==typeof n[".sv"]?TP(n[".sv"],e):void(0,de.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},IP=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,de.hu)(!1,"Unexpected server value: "+n)},TP=function(n,e,t){n.hasOwnProperty("increment")||(0,de.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,de.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,de.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},_S=function(n,e,t){return yS(n,new gS(e),t)};function yS(n,e,t){const i=n.getPriority().val(),r=Vx(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,g=Vx(u.getValue(),e,t);return g!==u.getValue()||r!==u.getPriority().val()?new ny(g,rs(r)):n}{const u=n;return l=u,r!==u.getPriority().val()&&(l=l.updatePriority(new ny(r))),u.forEachChild(mr,(g,_)=>{const E=yS(_,e.getImmediateChild(g),t);E!==_&&(l=l.updateImmediateChild(g,E))}),l}}class vS{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function BD(n,e){let t=e instanceof Oi?e:new Oi(e),i=n,r=Gn(t);for(;null!==r;){const l=(0,de.DV)(i.node.children,r)||{children:{},childCount:0};i=new vS(r,i,l),t=sr(t),r=Gn(t)}return i}function Cg(n){return n.node.value}function bS(n,e){n.node.value=e,wS(n)}function Ux(n){return n.node.childCount>0}function UD(n,e){yo(n.node.children,(t,i)=>{e(new vS(t,n,i))})}function jx(n,e,t,i){t&&!i&&e(n),UD(n,r=>{jx(r,e,!0,i)}),t&&i&&e(n)}function jb(n){return new Oi(null===n.parent?n.name:jb(n.parent)+"/"+n.name)}function wS(n){null!==n.parent&&function NP(n,e,t){const i=function SP(n){return void 0===Cg(n)&&!Ux(n)}(t),r=(0,de.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,wS(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,wS(n))}(n.parent,n.name,n)}const xP=/[\[\].#$\/\u0000-\u001F\u007F]/,MP=/[\[\].#$\u0000-\u001F\u007F]/,ES=10485760,jD=function(n){return"string"==typeof n&&0!==n.length&&!xP.test(n)},Hx=function(n){return"string"==typeof n&&0!==n.length&&!MP.test(n)},Gb=function(n,e,t){const i=t instanceof Oi?new WR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+yg(i));if("function"==typeof e)throw new Error(n+"contains a function "+yg(i)+" with contents = "+e.toString());if(gD(e))throw new Error(n+"contains "+e.toString()+" "+yg(i));if("string"==typeof e&&e.length>ES/3&&(0,de.ug)(e)>ES)throw new Error(n+"contains a string greater than "+ES+" utf8 bytes "+yg(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,l=!1;if(yo(e,(u,g)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(l=!0,!jD(u)))throw new Error(n+" contains an invalid key ("+u+") "+yg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function zR(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,de.ug)(e),ZN(n)})(i,u),Gb(n,g,i),function qR(n){const e=n.parts_.pop();n.byteLength_-=(0,de.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&l)throw new Error(n+' contains ".value" child '+yg(i)+" in addition to actual children.")}},DS=function(n,e,t,i){if(!(i&&void 0===t||Hx(t)))throw new Error((0,de.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class PP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function HD(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],l=r.getPath();null!==t&&!LT(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(r)}t&&n.eventLists_.push(t)}function nc(n,e,t){HD(n,t),function Wx(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(FP(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>ec(i,e)||ec(e,i))}function FP(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();mg&&_o("event: "+t.toString()),ey(i)}}}class VP{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ID(),this.transactionQueueTree_=new vS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qx(n){const t=n.infoData_.getNode(new Oi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Wb(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:qx(n)})}function Zx(n,e,t,i,r){n.dataUpdateCount++;const l=new Oi(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const _=(0,de.UI)(t,E=>rs(E));u=function yP(n,e,t,i){const r=hS(n,i);if(r){const l=fS(r),u=l.path,g=l.queryId,_=xa(u,e),E=_r.fromObject(t);return pS(n,u,new ay(XT(g),_,E))}return[]}(n.serverSyncTree_,l,_,r)}else{const _=rs(t);u=function _P(n,e,t,i){const r=hS(n,i);if(null!=r){const l=fS(r),u=l.path,g=l.queryId,_=xa(u,e);return pS(n,u,new bg(XT(g),_,t))}return[]}(n.serverSyncTree_,l,_,r)}else if(i){const _=(0,de.UI)(t,E=>rs(E));u=function pP(n,e,t){const i=_r.fromObject(t);return cy(n,new ay({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,l,_)}else{const _=rs(t);u=Bb(n.serverSyncTree_,l,_)}let g=l;u.length>0&&(g=dy(n,l)),nc(n.eventQueue_,g,u)}function Kx(n,e){TS(n,"connected",e),!1===e&&function GP(n){uy(n,"onDisconnectEvents");const e=Wb(n),t=ID();YT(n.onDisconnect_,bi(),(r,l)=>{const u=function(n,e,t,i){return yS(e,new mS(t,n),i)}(r,l,n.serverSyncTree_,e);oy(t,r,u)});let i=[];YT(t,bi(),(r,l)=>{i=i.concat(Bb(n.serverSyncTree_,r,l));const u=xS(n,r);dy(n,u)}),n.onDisconnect_=ID(),nc(n.eventQueue_,bi(),i)}(n)}function TS(n,e,t){const i=new Oi("/.info/"+e),r=rs(t);n.infoData_.updateSnapshot(i,r);const l=Bb(n.infoSyncTree_,i,r);nc(n.eventQueue_,i,l)}function GD(n){return n.nextWriteId_++}function SS(n,e,t,i,r){uy(n,"set",{path:e.toString(),value:t,priority:i});const l=Wb(n),u=rs(t,i),g=FD(n.serverSyncTree_,e),_=_S(u,g,l),E=GD(n),k=uS(n.serverSyncTree_,e,_,E,!0);HD(n.eventQueue_,k),n.server_.put(e.toString(),u.val(!0),(q,te)=>{const ge="ok"===q;ge||Na("set at "+e+" failed: "+q);const Ne=Lf(n.serverSyncTree_,E,!ge);nc(n.eventQueue_,e,Ne),function Vf(n,e,t,i){e&&ey(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let l=r;i&&(l+=": "+i);const u=new Error(l);u.code=r,e(u)}})}(0,r,q,te)});const B=xS(n,e);dy(n,B),nc(n.eventQueue_,B,[])}function uy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_o(t,...e)}function NS(n,e,t){return FD(n.serverSyncTree_,e,t)||Rn.EMPTY_NODE}function $D(n,e=n.transactionQueueTree_){if(e||WD(n,e),Cg(e)){const t=Xx(n,e);(0,de.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function YP(n,e,t){const i=t.map(E=>E.currentWriteId),r=NS(n,e,i);let l=r;const u=r.hash();for(let E=0;E<t.length;E++){const k=t[E];(0,de.hu)(0===k.status,"tryToSendTransactionQueue_: items in queue should all be run."),k.status=1,k.retryCount++;const B=xa(e,k.path);l=l.updateChild(B,k.currentOutputSnapshotRaw)}const g=l.val(!0),_=e;n.server_.put(_.toString(),g,E=>{uy(n,"transaction put response",{path:_.toString(),status:E});let k=[];if("ok"===E){const B=[];for(let q=0;q<t.length;q++)t[q].status=2,k=k.concat(Lf(n.serverSyncTree_,t[q].currentWriteId)),t[q].onComplete&&B.push(()=>t[q].onComplete(null,!0,t[q].currentOutputSnapshotResolved)),t[q].unwatcher();WD(n,BD(n.transactionQueueTree_,e)),$D(n,n.transactionQueueTree_),nc(n.eventQueue_,e,k);for(let q=0;q<B.length;q++)ey(B[q])}else{if("datastale"===E)for(let B=0;B<t.length;B++)t[B].status=3===t[B].status?4:0;else{Na("transaction at "+_.toString()+" failed: "+E);for(let B=0;B<t.length;B++)t[B].status=4,t[B].abortReason=E}dy(n,e)}},u)}(n,jb(e),t)}else Ux(e)&&UD(e,t=>{$D(n,t)})}function dy(n,e){const t=Qx(n,e),i=jb(t);return function JP(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const _=e[g],E=xa(t,_.path);let B,k=!1;if((0,de.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)k=!0,B=_.abortReason,r=r.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)k=!0,B="maxretry",r=r.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0));else{const q=NS(n,_.path,u);_.currentInputSnapshot=q;const te=e[g].update(q.val());if(void 0!==te){Gb("transaction failed: Data returned ",te,_.path);let ge=rs(te);"object"==typeof te&&null!=te&&(0,de.r3)(te,".priority")||(ge=ge.updatePriority(q.getPriority()));const it=_.currentWriteId,Ht=Wb(n),gt=_S(ge,q,Ht);_.currentOutputSnapshotRaw=ge,_.currentOutputSnapshotResolved=gt,_.currentWriteId=GD(n),u.splice(u.indexOf(it),1),r=r.concat(uS(n.serverSyncTree_,_.path,gt,_.currentWriteId,_.applyLocally)),r=r.concat(Lf(n.serverSyncTree_,it,!0))}else k=!0,B="nodata",r=r.concat(Lf(n.serverSyncTree_,_.currentWriteId,!0))}nc(n.eventQueue_,t,r),r=[],k&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&i.push("nodata"===B?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(B),!1,null)))}WD(n,n.transactionQueueTree_);for(let g=0;g<i.length;g++)ey(i[g]);$D(n,n.transactionQueueTree_)}(n,Xx(n,t),i),i}function Qx(n,e){let t,i=n.transactionQueueTree_;for(t=Gn(e);null!==t&&void 0===Cg(i);)i=BD(i,t),t=Gn(e=sr(e));return i}function Xx(n,e){const t=[];return eM(n,e,t),t.sort((i,r)=>i.order-r.order),t}function eM(n,e,t){const i=Cg(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);UD(e,r=>{eM(n,r,t)})}function WD(n,e){const t=Cg(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,bS(e,t.length>0?t:void 0)}UD(e,i=>{WD(n,i)})}function xS(n,e){const t=jb(Qx(n,e)),i=BD(n.transactionQueueTree_,e);return function AP(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{MS(n,r)}),MS(n,i),jx(i,r=>{MS(n,r)}),t}function MS(n,e){const t=Cg(e);if(t){const i=[];let r=[],l=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,de.hu)(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):((0,de.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(Lf(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===l?bS(e,void 0):t.length=l+1,nc(n.eventQueue_,jb(e),r);for(let u=0;u<i.length;u++)ey(i[u])}}const OS=function(n,e){const t=eF(n),i=t.namespace;return"firebase.com"===t.domain&&Hu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Hu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Na("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new NT(t.host,t.secure,i,e,"ws"===t.scheme||"wss"===t.scheme,"",i!==t.subdomain),path:new Oi(t.pathString)}},eF=function(n){let e="",t="",i="",r="",l="",u=!0,g="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(g=n.substring(0,E-1),n=n.substring(E+2));let k=n.indexOf("/");-1===k&&(k=n.length);let B=n.indexOf("?");-1===B&&(B=n.length),e=n.substring(0,Math.min(k,B)),k<B&&(r=function QP(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(l){}e+="/"+r}return e}(n.substring(k,B)));const q=function XP(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Na(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,B)));E=e.indexOf(":"),E>=0?(u="https"===g||"wss"===g,_=parseInt(e.substring(E+1),10)):E=e.length;const te=e.slice(0,E);if("localhost"===te.toLowerCase())t="localhost";else if(te.split(".").length<=2)t=te;else{const ge=e.indexOf(".");i=e.substring(0,ge).toLowerCase(),t=e.substring(ge+1),l=i}"ns"in q&&(l=q.ns)}return{host:e,port:_,domain:t,subdomain:i,secure:u,scheme:g,pathString:r,namespace:l}};class Ml{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return $n(this._path)?null:FT(this._path)}get ref(){return new Hc(this._repo,this._path)}get _queryIdentifier(){const e=cx(this._queryParams),t=TT(e);return"{}"===t?"default":t}get _queryObject(){return cx(this._queryParams)}isEqual(e){if(!((e=(0,de.m9)(e))instanceof Ml))return!1;const t=this._repo===e._repo,i=LT(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function GR(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Hc extends Ml{constructor(e,t){super(e,t,new zT,!1)}get parent(){const e=qN(this._path);return null===e?null:new Hc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}function rM(n,e){return(n=(0,de.m9)(n))._checkNotDeleted("ref"),void 0!==e?function hy(n,e){return null===Gn((n=(0,de.m9)(n))._path)?function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DS(n,e,t,i)}("child","path",e,!1):DS("child","path",e,!1),new Hc(n._repo,Gr(n._path,e))}(n._root,e):n._root}function RS(n,e){(function(n,e){if(".info"===Gn(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=(0,de.m9)(n))._path),function(n,e,t,i){i&&void 0===e||Gb((0,de.gK)(n,"value"),e,t)}("set",e,n._path,!1);const t=new de.BH;return SS(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}(function sP(n){(0,de.hu)(!RD,"__referenceConstructor has already been defined"),RD=n})(Hc),function uP(n){(0,de.hu)(!PD,"__referenceConstructor has already been defined"),PD=n}(Hc);const kS={};function pF(n,e,t,i,r){let l=i||n.options.databaseURL;void 0===l&&(n.options.projectId||Hu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_o("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,u=OS(l,r),g=u.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,l=`http://${E}?ns=${g.namespace}`,u=OS(l,r),g=u.repoInfo):_=!u.repoInfo.secure;const k=r&&_?new Ib(Ib.OWNER):new _R(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!jD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Hx(n)}(t))throw new Error((0,de.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),$n(u.path)||Hu("Database URL must point to the root of a Firebase Database (not including a child path).");const B=function mF(n,e,t,i){let r=kS[e.name];r||(r={},kS[e.name]=r);let l=r[n.toURLString()];return l&&Hu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new VP(n,false,t,i),r[n.toURLString()]=l,l}(g,n,k,new mR(n.name,t));return new yF(B,n)}class yF{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function BP(n,e,t){if(n.stats_=OT(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new DD(n.repoInfo_,(i,r,l,u)=>{Zx(n,i,r,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Kx(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,de.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new vg(n.repoInfo_,e,(i,r,l,u)=>{Zx(n,i,r,l,u)},i=>{Kx(n,i)},i=>{!function UP(n,e){yo(e,(t,i)=>{TS(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function wR(n,e){const t=n.toString();return MT[t]||(MT[t]=e()),MT[t]}(n.repoInfo_,()=>new Ck(n.stats_,n.server_)),n.infoData_=new yk,n.infoSyncTree_=new Rx({startListening:(i,r,l,u)=>{let g=[];const _=n.infoData_.getNode(i._path);return _.isEmpty()||(g=Bb(n.infoSyncTree_,i._path,_),setTimeout(()=>{u("ok")},0)),g},stopListening:()=>{}}),TS(n,"connected",!1),n.serverSyncTree_=new Rx({startListening:(i,r,l,u)=>(n.server_.listen(i,l,r,(g,_)=>{const E=u(g,_);nc(n.eventQueue_,i._path,E)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hc(this._repo,bi())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gF(n,e){const t=kS[e];(!t||t[n.key]!==n)&&Hu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Jx(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Hu("Cannot call "+e+" on a deleted database.")}}vg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},vg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function bF(n){(function sR(n){CT=n})(Di.SDK_VERSION),(0,Di._registerComponent)(new ii.wA("database",(e,{instanceIdentifier:t})=>pF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Di.registerVersion)(dN,"0.12.7",n),(0,Di.registerVersion)(dN,"0.12.7","esm2017")}();const CF=[{path:"login",component:uN},{path:"registro",component:(()=>{class n{constructor(t,i){this.authService=t,this.router=i,this.db=function vF(n=(0,Di.getApp)(),e){return(0,Di._getProvider)(n,"database").getImmediate({identifier:e})}(),this.usuario={email:"",password:""}}ngOnInit(){}registro(){var t=this;return(0,Ie.Z)(function*(){const{email:i,password:r}=t.usuario;t.authService.RegisterUser(i,r).then(l=>{En().fire("Registrado Correctamente");var u=new uN(t.authService,t.router);u.usuario=t.usuario,u.logIn(),t.logger()}).catch(l=>(En().fire(l.message),null))})()}logInGoogle(){var t=this;return(0,Ie.Z)(function*(){t.authService.logInGoogle().then(i=>{En().fire("Logueado Correctamente")}).catch(i=>(En().fire(i.message),null))})()}logger(){var t=this;return(0,Ie.Z)(function*(){let i=new Date,r=i.getDate()+"/"+i.getMonth()+"/"+i.getFullYear();console.log(`${t.usuario.email}, ${r} `),RS(rM(t.db,"users/"+r),{email:t.usuario.email,date:r})})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ig),h.Y36(Ut.F0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-registro"]],decls:31,vars:2,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["action","#","id","login-form"],[1,"heading"],[1,"left"],["for","email"],["type","email","name","email","id","email",3,"ngModel","ngModelChange"],["for","password"],["type","password","name","password","id","pass",3,"ngModel","ngModelChange"],["type","submit","value","Registrarse",3,"click"],[1,"right"],[1,"connect"],[1,"google-plus",3,"click"],[1,"fontawesome-google-plus"],["aria-hidden","true",1,"bi","bi-google"]],template:function(t,i){1&t&&(h.TgZ(0,"html",0)(1,"head"),h._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4),h.TgZ(6,"title"),h._uU(7,"Ian Garcia"),h.qZA()(),h.TgZ(8,"body")(9,"form",5)(10,"div",6),h._uU(11,"Registro"),h.qZA(),h.TgZ(12,"div",7)(13,"label",8),h._uU(14,"Email"),h.qZA(),h._UZ(15,"br"),h.TgZ(16,"input",9),h.NdJ("ngModelChange",function(l){return i.usuario.email=l}),h.qZA(),h._UZ(17,"br"),h.TgZ(18,"label",10),h._uU(19,"Password"),h.qZA(),h._UZ(20,"br"),h.TgZ(21,"input",11),h.NdJ("ngModelChange",function(l){return i.usuario.password=l}),h.qZA(),h._UZ(22,"br"),h.TgZ(23,"input",12),h.NdJ("click",function(){return i.registro()}),h.qZA(),h._UZ(24,"br"),h.qZA(),h.TgZ(25,"div",13)(26,"div",14),h._uU(27,"Entrar con"),h.qZA(),h.TgZ(28,"a",15),h.NdJ("click",function(){return i.logInGoogle()}),h.TgZ(29,"span",16),h._UZ(30,"i",17),h.qZA()()()()()()),2&t&&(h.xp6(16),h.Q6J("ngModel",i.usuario.email),h.xp6(5),h.Q6J("ngModel",i.usuario.password))},directives:[N,ag,dg,rg,Af,D],styles:['div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}body[_ngcontent-%COMP%]{font-family:Raleway,sans-serif}form#login-form[_ngcontent-%COMP%]{background:#fff;width:40em;margin:2em auto;overflow:hidden;position:relative;border-radius:.3em;box-shadow:0 0 .2em #000}form#login-form[_ngcontent-%COMP%]   div.heading[_ngcontent-%COMP%]{background:#f85f64;color:#fff;text-align:center;text-transform:uppercase;font-weight:700;padding:1.5em;font-size:1.1em}form#login-form[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:45%;float:left;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{width:45%;float:right;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]:before, form#login-form[_ngcontent-%COMP%]:after{position:absolute;top:0;right:0;left:0;bottom:0;margin:auto}form#login-form[_ngcontent-%COMP%]:before{content:"or";color:gray;height:.5em;width:.5em;top:1.75em}form#login-form[_ngcontent-%COMP%]:after{content:"";background:rgba(128,128,128,.3);height:8em;width:.12em;top:-7em;left:.5em;z-index:900;box-shadow:0 9.6em #8080804d}',"div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hide;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8);cursor:pointer}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8);cursor:pointer}"]}),n})()},{path:"quien-soy",component:mn},{path:"juegos",loadChildren:()=>j.e(69).then(j.bind(j,1069)).then(n=>n.JuegosModule)},{path:"",pathMatch:"full",component:Sn},{path:"**",component:wi}];let DF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Ut.Bz.forRoot(CF)],Ut.Bz]}),n})();var lM=j(9018),cM=j(4882),IF=j(6602);const TF=["addListener","removeListener"],SF=["addEventListener","removeEventListener"],AF=["on","off"];function Ma(n,e,t,i){if((0,Ci.m)(t)&&(i=t,t=void 0),i)return Ma(n,e,t).pipe((0,rT.Z)(i));const[r,l]=function MF(n){return(0,Ci.m)(n.addEventListener)&&(0,Ci.m)(n.removeEventListener)}(n)?SF.map(u=>g=>n[u](e,g,t)):function NF(n){return(0,Ci.m)(n.addListener)&&(0,Ci.m)(n.removeListener)}(n)?TF.map(uM(n,e)):function xF(n){return(0,Ci.m)(n.on)&&(0,Ci.m)(n.off)}(n)?AF.map(uM(n,e)):[];if(!r&&(0,IF.z)(n))return(0,cM.z)(u=>Ma(u,e,t))((0,Vu.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Ji.y(u=>{const g=(..._)=>u.next(1<_.length?_:_[0]);return r(g),()=>l(g)})}function uM(n,e){return t=>i=>n[t](e,i)}var OF=j(1830);const{isArray:kF}=Array;function dM(n){return 1===n.length&&kF(n[0])?n[0]:n}j(4121),j(5696);var YD=j(408);function JD(...n){const e=(0,P_.jO)(n),t=dM(n);return t.length?new Ji.y(i=>{let r=t.map(()=>[]),l=t.map(()=>!1);i.add(()=>{r=l=null});for(let u=0;!i.closed&&u<t.length;u++)(0,Vu.Xf)(t[u]).subscribe((0,No.x)(i,g=>{if(r[u].push(g),r.every(_=>_.length)){const _=r.map(E=>E.shift());i.next(e?e(..._):_),r.some((E,k)=>!E.length&&l[k])&&i.complete()}},()=>{l[u]=!0,!r[u].length&&i.complete()}));return()=>{r=l=null}}):lM.E}new Ji.y(YD.Z);var gM=j(3729);function Qs(n){return(0,va.e)((e,t)=>{(0,Vu.Xf)(n).subscribe((0,No.x)(t,()=>t.complete(),YD.Z)),!t.closed&&e.subscribe(t)})}var ic=j(5598),mM=j(8168);function FS(...n){const e=(0,P_.jO)(n);return(0,va.e)((t,i)=>{const r=n.length,l=new Array(r);let u=n.map(()=>!1),g=!1;for(let _=0;_<r;_++)(0,Vu.Xf)(n[_]).subscribe((0,No.x)(i,E=>{l[_]=E,!g&&!u[_]&&(u[_]=!0,(g=u.every(A.y))&&(u=null))},YD.Z));t.subscribe((0,No.x)(i,_=>{if(g){const E=[_,...l];i.next(e?e(...E):E)}}))})}Math,Math,Math;const KL=["*"],p2=["dialog"];function Sg(n){return null!=n}function yy(n){return(n||document.body).getBoundingClientRect()}const RM={animation:!0,transitionTimerDelayMs:5},cV=()=>{},{transitionTimerDelayMs:uV}=RM,Xb=new Map,Oa=(n,e,t,i)=>{let r=i.context||{};const l=Xb.get(e);if(l)switch(i.runningTransition){case"continue":return lM.E;case"stop":n.run(()=>l.transition$.complete()),r=Object.assign(l.context,r),Xb.delete(e)}const u=t(e,i.animation,r)||cV;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),(0,Yi.of)(void 0).pipe(function aV(n){return e=>new Ji.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const g=new ai.x,_=new ai.x,E=g.pipe(function FF(...n){return e=>(0,gM.z)(e,(0,Yi.of)(...n))}(!0));Xb.set(e,{transition$:g,complete:()=>{_.next(),_.complete()},context:r});const k=function lV(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const B=Ma(e,"transitionend").pipe(Qs(E),(0,Yn.h)(({target:te})=>te===e));(function hM(...n){return 1===(n=dM(n)).length?(0,Vu.Xf)(n[0]):new Ji.y(function PF(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push((0,Vu.Xf)(n[i]).subscribe((0,No.x)(e,r=>{if(t){for(let l=0;l<t.length;l++)l!==i&&t[l].unsubscribe();t=null}e.next(r)})))}}(n))})(function PS(n=0,e,t=Cs.P){let i=-1;return null!=e&&((0,OF.K)(e)?t=e:i=e),new Ji.y(r=>{let l=function RF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;l<0&&(l=0);let u=0;return t.schedule(function(){r.closed||(r.next(u++),0<=i?this.schedule(void 0,i):r.complete())},l)})}(k+uV).pipe(Qs(E)),B,_).pipe(Qs(E)).subscribe(()=>{Xb.delete(e),n.run(()=>{u(),g.next(),g.complete()})})}),g.asObservable()};let i1=(()=>{class n{constructor(){this.animation=RM.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),UM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),HM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),WM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),zM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();var Xs=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Xs||(Xs={})),Xs))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const ZM=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function KM(n){const e=Array.from(n.querySelectorAll(ZM)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let iO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez,cN]]}),n})(),eA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),oO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class Mg{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let nB=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,ic.q)(1)).subscribe(()=>{Oa(this._zone,this._el.nativeElement,(t,i)=>{i&&yy(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Oa(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(h.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),h.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class aO{close(e){}dismiss(e){}}class iB{constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new ai.x,this._dismissed=new ai.x,this._hidden=new ai.x,e.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,u)=>{this._resolve=l,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Qs(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Qs(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function sV(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Yi.of)(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),JD(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var iw=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(iw||(iw={})),iw))();let rB=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new ai.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new ai.x,this.hidden=new ai.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,ic.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},u=JD(Oa(this._zone,t,()=>t.classList.remove("show"),i),Oa(this._zone,this._dialogEl.nativeElement,()=>{},i));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};JD(Oa(this._zone,this._elRef.nativeElement,(l,u)=>{u&&yy(l),l.classList.add("show")},t),Oa(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ma(t,"keydown").pipe(Qs(this._closed$),(0,Yn.h)(r=>r.which===Xs.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(iw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ma(this._dialogEl.nativeElement,"mousedown").pipe(Qs(this._closed$),(0,mM.b)(()=>i=!1),(0,di.w)(()=>Ma(t,"mouseup").pipe(Qs(this._closed$),(0,ic.q)(1))),(0,Yn.h)(({target:r})=>t===r)).subscribe(()=>{i=!0}),Ma(t,"click").pipe(Qs(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(iw.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=KM(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Oa(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(I.K0),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&h.Gf(p2,7),2&t){let r;h.iGM(r=h.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(h.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),h.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),h.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:KL,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&t&&h.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),sB=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:l,paddingRight:u}=r;if(t>0){const g=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${g+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=u),r.overflow=l}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(I.K0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oB=(()=>{class n{constructor(t,i,r,l,u,g){this._applicationRef=t,this._injector=i,this._document=r,this._scrollBar=l,this._rendererFactory=u,this._ngZone=g,this._activeWindowCmptHasChanged=new ai.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=Ma(e,"focusin").pipe(Qs(t),(0,qe.U)(l=>l.target));Ma(e,"keydown").pipe(Qs(t),(0,Yn.h)(l=>l.which===Xs.Tab),FS(r)).subscribe(([l,u])=>{const[g,_]=KM(e);(u===g||u===e)&&l.shiftKey&&(_.focus(),l.preventDefault()),u===_&&!l.shiftKey&&(g.focus(),l.preventDefault())}),i&&Ma(e,"click").pipe(Qs(t),FS(r),(0,qe.U)(l=>l[1])).subscribe(l=>l.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r,l){const u=l.container instanceof HTMLElement?l.container:Sg(l.container)?this._document.querySelector(l.container):this._document.body,g=this._rendererFactory.createRenderer(null,null),_=()=>{this._modalRefs.length||(g.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())};if(!u)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const E=new aO,k=this._getContentRef(t,l.injector||i,r,E,l);let B=!1!==l.backdrop?this._attachBackdrop(t,u):void 0,q=this._attachWindowComponent(t,u,k),te=new iB(q,k,B,l.beforeDismiss);return this._registerModalRef(te),this._registerWindowCmpt(q),te.result.then(_,_),E.close=ge=>{te.close(ge)},E.dismiss=ge=>{te.dismiss(ge)},this._applyWindowOptions(q.instance,l),1===this._modalRefs.length&&g.addClass(this._document.body,"modal-open"),B&&B.instance&&(this._applyBackdropOptions(B.instance,l),B.changeDetectorRef.detectChanges()),q.changeDetectorRef.detectChanges(),te}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,i){let l=t.resolveComponentFactory(nB).create(this._injector);return this._applicationRef.attachView(l.hostView),i.appendChild(l.location.nativeElement),l}_attachWindowComponent(t,i,r){let u=t.resolveComponentFactory(rB).create(this._injector,r.nodes);return this._applicationRef.attachView(u.hostView),i.appendChild(u.location.nativeElement),u}_applyWindowOptions(t,i){this._windowAttributes.forEach(r=>{Sg(i[r])&&(t[r]=i[r])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(r=>{Sg(i[r])&&(t[r]=i[r])})}_getContentRef(t,i,r,l,u){return r?r instanceof h.Rgc?this._createFromTemplateRef(r,l):function OM(n){return"string"==typeof n}(r)?this._createFromString(r):this._createFromComponent(t,i,r,l,u):new Mg([])}_createFromTemplateRef(t,i){const l=t.createEmbeddedView({$implicit:i,close(u){i.close(u)},dismiss(u){i.dismiss(u)}});return this._applicationRef.attachView(l),new Mg([l.rootNodes],l)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Mg([[i]])}_createFromComponent(t,i,r,l,u){const g=t.resolveComponentFactory(r),_=h.zs3.create({providers:[{provide:aO,useValue:l}],parent:i}),E=g.create(_),k=E.location.nativeElement;return u.scrollable&&k.classList.add("component-host-scrollable"),this._applicationRef.attachView(E.hostView),new Mg([[k]],E.hostView,E)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(I.K0),h.LFG(sB),h.LFG(h.FYo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aB=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(i1))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lB=(()=>{class n{constructor(t,i,r,l){this._moduleCFR=t,this._injector=i,this._modalStack=r,this._config=l}open(t,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.zs3),h.LFG(oB),h.LFG(aB))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[lB]}),n})(),hO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),bO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),EO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),CO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),DO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),IO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),TO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})(),SO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();new h.OlP("live announcer delay",{providedIn:"root",factory:function wB(){return 100}});let AO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[I.ez]]}),n})();const EB=[BM,UM,HM,WM,zM,iO,oO,lO,hO,bO,EO,CO,DO,IO,TO,SO,AO];let CB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[EB,BM,UM,HM,WM,zM,iO,oO,lO,hO,bO,EO,CO,DO,IO,TO,SO,AO]}),n})();function DB(n,e){if(1&n&&(h.TgZ(0,"li",7)(1,"p",13),h._uU(2),h.qZA()()),2&n){const t=e.ngIf;h.xp6(2),h.Oqu(t.email)}}function IB(n,e){1&n&&(h.TgZ(0,"li",7)(1,"a",13),h._uU(2,"Login"),h.qZA()())}function TB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li",7)(1,"p",14),h.NdJ("click",function(){return h.CHM(t),h.oxw().logOut()}),h._uU(2,"LogOut"),h.qZA()()}}let SB=(()=>{class n{constructor(t){this.authService=t,this.estaLogueado=this.authService.isLoggedIn()}logOut(){var t=this;return(0,Ie.Z)(function*(){t.authService.SignOut()})()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ig))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-nav"]],decls:21,vars:9,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["id","lNavBar",1,"container-fluid"],["width","40","height","40","src","https://www.centroculturalhaedo.edu.ar/wp-content/uploads/2016/05/UTN_logo.png","href","#"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","/quien-soy",1,"nav-link"],["id","rNavBar",1,"collapse","navbar-collapse","flex-grow-1","text-right"],[1,"navbar-nav","ms-auto","flex-nowrap"],["class","nav-item",4,"ngIf"],["href","/login",1,"nav-link","menu-item"],[1,"nav-link","menu-item",2,"cursor","pointer",3,"click"]],template:function(t,i){1&t&&(h.TgZ(0,"nav",0)(1,"div",1),h._UZ(2,"img",2),h.TgZ(3,"button",3),h._UZ(4,"span",4),h.qZA(),h.TgZ(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),h._uU(9,"Home"),h.qZA()(),h.TgZ(10,"li",7)(11,"a",9),h._uU(12,"Quien Soy"),h.qZA()()()()(),h.TgZ(13,"div",10)(14,"ul",11),h.YNc(15,DB,3,1,"li",12),h.ALo(16,"async"),h.YNc(17,IB,3,0,"li",12),h.ALo(18,"async"),h.YNc(19,TB,3,0,"li",12),h.ALo(20,"async"),h.qZA()()()),2&t&&(h.xp6(15),h.Q6J("ngIf",h.lcZ(16,3,i.estaLogueado)),h.xp6(2),h.Q6J("ngIf",!h.lcZ(18,5,i.estaLogueado)),h.xp6(2),h.Q6J("ngIf",h.lcZ(20,7,i.estaLogueado)))},directives:[eA,I.O5],pipes:[I.Ov],styles:[""]}),n})();function AB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",2),h.NdJ("click",function(){return h.CHM(t),h.oxw().mostrarChat=!0}),h._UZ(1,"img",3),h.qZA()}}function NB(n,e){if(1&n&&(h.TgZ(0,"p",15),h._uU(1),h._UZ(2,"br"),h._uU(3),h.qZA()),2&n){const t=e.$implicit,i=h.oxw(2);h.Q6J("ngClass",i.usuario.uid==t.emisor?"enviado":"recibido"),h.xp6(1),h.AsE(" ",t.nombre," ",t.hora,": "),h.xp6(2),h.hij(" ",t.texto," ")}}const xB=function(){return{standalone:!0}};function MB(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4)(1,"div",5),h._uU(2," Chat "),h.TgZ(3,"div",6),h.NdJ("click",function(){return h.CHM(t),h.oxw().mostrarChat=!1}),h._uU(4,"X"),h.qZA()(),h.TgZ(5,"div",7)(6,"div",8),h.YNc(7,NB,4,4,"p",9),h.qZA()(),h.TgZ(8,"form",10),h.NdJ("ngSubmit",function(){return h.CHM(t),h.oxw().MensajeEnviado()}),h.TgZ(9,"input",11),h.NdJ("ngModelChange",function(r){return h.CHM(t),h.oxw().mensaje=r}),h.qZA(),h.TgZ(10,"div",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().MensajeEnviado()}),h.TgZ(11,"span",13),h._UZ(12,"img",14),h.qZA()()()()}if(2&n){const t=h.oxw();h.xp6(7),h.Q6J("ngForOf",t.mensajeList),h.xp6(2),h.Q6J("ngModel",t.mensaje)("ngModelOptions",h.DdM(3,xB))}}let OB=(()=>{class n{constructor(t){this.authS=t,this.mostrarChat=!1,this.mensaje="",this.mensajeList=[{emisor:"NTHkbRuDTtQ6XC6yhmMSpQgNM0U2",nombre:"",texto:"Hola",fecha:"4/5/2022",hora:"21:21"},{emisor:"id",nombre:"",texto:"Chau",fecha:"4/5/2022",hora:"21:22"},{emisor:"NTHkbRuDTtQ6XC6yhmMSpQgNM0U2",nombre:"",texto:"Hola de nuevo",fecha:"4/5/2022",hora:"21:23"},{emisor:"id",nombre:"",texto:"Chau de nuevo",fecha:"4/5/2022",hora:"21:24"}]}ngOnInit(){this.authS.isLoggedIn().subscribe(t=>{this.usuario=t})}MensajeEnviado(){console.log(this.mensaje),console.log(this.usuario);let t=new Date,i={emisor:this.usuario.uid,nombre:this.usuario.email,texto:this.mensaje,fecha:`${t.getDay()}/${t.getMonth()}/${t.getFullYear()}`,hora:`${t.getHours()}:${t.getMinutes()}`};null!=this.usuario.displayName&&(i={emisor:this.usuario.uid,nombre:this.usuario.displayName,texto:this.mensaje,fecha:`${t.getDay()}/${t.getMonth()}/${t.getFullYear()}`,hora:`${t.getHours()}:${t.getMinutes()}`}),console.log(i),this.mensajeList.push(i),this.mensaje="",setTimeout(()=>{this.ScrollAUltimoMensajeByClassname()},10)}ScrollAUltimoMensajeByClassname(){let t=document.getElementsByClassName("msj"),r=t[t.length-1].offsetTop;document.getElementById("contenedorChat").scrollTop=r}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ig))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-chat"]],decls:2,vars:2,consts:[["class","chatContainer",3,"click",4,"ngIf"],["class","card text-center cardContainer",4,"ngIf"],[1,"chatContainer",3,"click"],["src","https://vignette.wikia.nocookie.net/lab-rats/images/a/a3/Chat-icon.png/revision/latest/scale-to-width-down/480?cb=20151227002733","alt","chatIcon",1,"chatIcon"],[1,"card","text-center","cardContainer"],[1,"card-header"],[1,"closeIcon",3,"click"],[1,"card-body"],["id","contenedorChat",1,"contenedorChat","h-100"],["class","msj p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-footer","text-muted","input-group",3,"ngSubmit"],["type","text","placeholder","Envie un mensaje",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"input-group-append",3,"click"],["id","basic-addon2",1,"input-group-text"],["src","https://vignette.wikia.nocookie.net/lab-rats/images/a/a3/Chat-icon.png/revision/latest/scale-to-width-down/480?cb=20151227002733","width","30px","height","38px","alt","Envie un mensaje",1,"inputFoto"],[1,"msj","p-2",3,"ngClass"]],template:function(t,i){1&t&&(h.YNc(0,AB,2,0,"div",0),h.YNc(1,MB,13,4,"div",1)),2&t&&(h.Q6J("ngIf",i.usuario&&!i.mostrarChat),h.xp6(1),h.Q6J("ngIf",i.usuario&&i.mostrarChat))},directives:[I.O5,I.sg,I.mk,N,ag,dg,rg,Af,D],styles:[".cardContainer[_ngcontent-%COMP%]{width:300px;height:500px;position:fixed;right:.5rem;bottom:.5rem}.card-header[_ngcontent-%COMP%]{background-color:#f85f64;color:#fff;font-weight:500}.card-body[_ngcontent-%COMP%]{padding:.5rem}.inputFoto[_ngcontent-%COMP%]:active{transform:scale(.75)}.enviado[_ngcontent-%COMP%]{display:block;float:right;background-color:#6495ed;color:#fff;min-width:50.01%;border-radius:10px;text-align:left}.recibido[_ngcontent-%COMP%]{display:block;float:left;background-color:#dc143c;color:#fff;min-width:50.01%;border-radius:10px;text-align:left}.contenedorChat[_ngcontent-%COMP%]{overflow:scroll;padding:.3rem}.contenedorChat[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.chatContainer[_ngcontent-%COMP%]{width:60px;height:60px;position:fixed;right:.5rem;bottom:.5rem;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:gray;border-radius:100%;box-shadow:0 0 10px 2px}.chatIcon[_ngcontent-%COMP%]{width:40px;height:40px}.closeIcon[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:0rem;cursor:pointer}"]}),n})(),RB=(()=>{class n{constructor(){this.title="TPSALAJUEGOS"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,i){1&t&&h._UZ(0,"app-nav")(1,"router-outlet")(2,"app-chat")},directives:[SB,Ut.lC,OB],styles:[""]}),n})();const NO_firebaseConfig={apiKey:"AIzaSyCrEF2mAkH45Kt3c5otkMuj3lmh2JzmXaE",authDomain:"tpsaladejuegos-8b998.firebaseapp.com",projectId:"tpsaladejuegos-8b998",storageBucket:"tpsaladejuegos-8b998.appspot.com",messagingSenderId:"985909907155",appId:"1:985909907155:web:c27c368d47cdb9e7404e26"};let kB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[RB]}),n.\u0275inj=h.cJS({providers:[],imports:[[ar,DF,CB,cN,ki.hO.initializeApp(NO_firebaseConfig)]]}),n})();(0,h.G48)(),or().bootstrapModule(kB).catch(n=>console.error(n))},4762:(bt,xe,j)=>{"use strict";function me(fe,Se){var ke={};for(var pe in fe)Object.prototype.hasOwnProperty.call(fe,pe)&&Se.indexOf(pe)<0&&(ke[pe]=fe[pe]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var et=0;for(pe=Object.getOwnPropertySymbols(fe);et<pe.length;et++)Se.indexOf(pe[et])<0&&Object.prototype.propertyIsEnumerable.call(fe,pe[et])&&(ke[pe[et]]=fe[pe[et]])}return ke}function be(fe,Se,ke,pe){return new(ke||(ke=Promise))(function(Me,Kt){function In(Tt){try{yt(pe.next(Tt))}catch(Qt){Kt(Qt)}}function Wn(Tt){try{yt(pe.throw(Tt))}catch(Qt){Kt(Qt)}}function yt(Tt){Tt.done?Me(Tt.value):function et(Me){return Me instanceof ke?Me:new ke(function(Kt){Kt(Me)})}(Tt.value).then(In,Wn)}yt((pe=pe.apply(fe,Se||[])).next())})}function Re(fe){return this instanceof Re?(this.v=fe,this):new Re(fe)}function Ue(fe,Se,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,pe=ke.apply(fe,Se||[]),Me=[];return et={},Kt("next"),Kt("throw"),Kt("return"),et[Symbol.asyncIterator]=function(){return this},et;function Kt(bn){pe[bn]&&(et[bn]=function(Ai){return new Promise(function(ln,Zi){Me.push([bn,Ai,ln,Zi])>1||In(bn,Ai)})})}function In(bn,Ai){try{!function Wn(bn){bn.value instanceof Re?Promise.resolve(bn.value.v).then(yt,Tt):Qt(Me[0][2],bn)}(pe[bn](Ai))}catch(ln){Qt(Me[0][3],ln)}}function yt(bn){In("next",bn)}function Tt(bn){In("throw",bn)}function Qt(bn,Ai){bn(Ai),Me.shift(),Me.length&&In(Me[0][0],Me[0][1])}}function dt(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,Se=fe[Symbol.asyncIterator];return Se?Se.call(fe):(fe=function he(fe){var Se="function"==typeof Symbol&&Symbol.iterator,ke=Se&&fe[Se],pe=0;if(ke)return ke.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&pe>=fe.length&&(fe=void 0),{value:fe&&fe[pe++],done:!fe}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),ke={},pe("next"),pe("throw"),pe("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function pe(Me){ke[Me]=fe[Me]&&function(Kt){return new Promise(function(In,Wn){!function et(Me,Kt,In,Wn){Promise.resolve(Wn).then(function(yt){Me({value:yt,done:In})},Kt)}(In,Wn,(Kt=fe[Me](Kt)).done,Kt.value)})}}}j.d(xe,{_T:()=>me,mG:()=>be,qq:()=>Re,FC:()=>Ue,KL:()=>dt})},1048:(bt,xe,j)=>{"use strict";j.d(xe,{mr:()=>_t,Ov:()=>oa,ez:()=>as,K0:()=>De,Do:()=>He,V_:()=>ne,Ye:()=>Ge,S$:()=>Re,mk:()=>zr,sg:()=>zi,O5:()=>Er,tP:()=>Hs,b0:()=>dt,lw:()=>be,EM:()=>Qi,JF:()=>Hn,NF:()=>Ti,PM:()=>Fi,w_:()=>we,bD:()=>Rs,q:()=>Z,Mx:()=>ki,HT:()=>ue});var I=j(9724);let h=null;function Z(){return h}function ue(R){h||(h=R)}class we{}const De=new I.OlP("DocumentToken");let be=(()=>{class R{historyGo(O){throw new Error("Not implemented")}}return R.\u0275fac=function(O){return new(O||R)},R.\u0275prov=I.Yz7({token:R,factory:function(){return function Ce(){return(0,I.LFG)(ie)}()},providedIn:"platform"}),R})();const ne=new I.OlP("Location Initialized");let ie=(()=>{class R extends be{constructor(O){super(),this._doc=O,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Z().getBaseHref(this._doc)}onPopState(O){const z=Z().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",O,!1),()=>z.removeEventListener("popstate",O)}onHashChange(O){const z=Z().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",O,!1),()=>z.removeEventListener("hashchange",O)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(O){this.location.pathname=O}pushState(O,z,oe){he()?this._history.pushState(O,z,oe):this.location.hash=oe}replaceState(O,z,oe){he()?this._history.replaceState(O,z,oe):this.location.hash=oe}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}}return R.\u0275fac=function(O){return new(O||R)(I.LFG(De))},R.\u0275prov=I.Yz7({token:R,factory:function(){return function Ve(){return new ie((0,I.LFG)(De))}()},providedIn:"platform"}),R})();function he(){return!!window.history.pushState}function Be(R,G){if(0==R.length)return G;if(0==G.length)return R;let O=0;return R.endsWith("/")&&O++,G.startsWith("/")&&O++,2==O?R+G.substring(1):1==O?R+G:R+"/"+G}function Je(R){const G=R.match(/#|\?|$/),O=G&&G.index||R.length;return R.slice(0,O-("/"===R[O-1]?1:0))+R.slice(O)}function nt(R){return R&&"?"!==R[0]?"?"+R:R}let Re=(()=>{class R{historyGo(O){throw new Error("Not implemented")}}return R.\u0275fac=function(O){return new(O||R)},R.\u0275prov=I.Yz7({token:R,factory:function(){return function Ue(R){const G=(0,I.LFG)(De).location;return new dt((0,I.LFG)(be),G&&G.origin||"")}()},providedIn:"root"}),R})();const _t=new I.OlP("appBaseHref");let dt=(()=>{class R extends Re{constructor(O,z){if(super(),this._platformLocation=O,this._removeListenerFns=[],null==z&&(z=this._platformLocation.getBaseHrefFromDOM()),null==z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return Be(this._baseHref,O)}path(O=!1){const z=this._platformLocation.pathname+nt(this._platformLocation.search),oe=this._platformLocation.hash;return oe&&O?`${z}${oe}`:z}pushState(O,z,oe,Pe){const Ze=this.prepareExternalUrl(oe+nt(Pe));this._platformLocation.pushState(O,z,Ze)}replaceState(O,z,oe,Pe){const Ze=this.prepareExternalUrl(oe+nt(Pe));this._platformLocation.replaceState(O,z,Ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(O=0){var z,oe;null===(oe=(z=this._platformLocation).historyGo)||void 0===oe||oe.call(z,O)}}return R.\u0275fac=function(O){return new(O||R)(I.LFG(be),I.LFG(_t,8))},R.\u0275prov=I.Yz7({token:R,factory:R.\u0275fac}),R})(),He=(()=>{class R extends Re{constructor(O,z){super(),this._platformLocation=O,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}path(O=!1){let z=this._platformLocation.hash;return null==z&&(z="#"),z.length>0?z.substring(1):z}prepareExternalUrl(O){const z=Be(this._baseHref,O);return z.length>0?"#"+z:z}pushState(O,z,oe,Pe){let Ze=this.prepareExternalUrl(oe+nt(Pe));0==Ze.length&&(Ze=this._platformLocation.pathname),this._platformLocation.pushState(O,z,Ze)}replaceState(O,z,oe,Pe){let Ze=this.prepareExternalUrl(oe+nt(Pe));0==Ze.length&&(Ze=this._platformLocation.pathname),this._platformLocation.replaceState(O,z,Ze)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(O=0){var z,oe;null===(oe=(z=this._platformLocation).historyGo)||void 0===oe||oe.call(z,O)}}return R.\u0275fac=function(O){return new(O||R)(I.LFG(be),I.LFG(_t,8))},R.\u0275prov=I.Yz7({token:R,factory:R.\u0275fac}),R})(),Ge=(()=>{class R{constructor(O,z){this._subject=new I.vpe,this._urlChangeListeners=[],this._platformStrategy=O;const oe=this._platformStrategy.getBaseHref();this._platformLocation=z,this._baseHref=Je(le(oe)),this._platformStrategy.onPopState(Pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Pe.state,type:Pe.type})})}path(O=!1){return this.normalize(this._platformStrategy.path(O))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(O,z=""){return this.path()==this.normalize(O+nt(z))}normalize(O){return R.stripTrailingSlash(function ht(R,G){return R&&G.startsWith(R)?G.substring(R.length):G}(this._baseHref,le(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._platformStrategy.prepareExternalUrl(O)}go(O,z="",oe=null){this._platformStrategy.pushState(oe,"",O,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+nt(z)),oe)}replaceState(O,z="",oe=null){this._platformStrategy.replaceState(oe,"",O,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+nt(z)),oe)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(O=0){var z,oe;null===(oe=(z=this._platformStrategy).historyGo)||void 0===oe||oe.call(z,O)}onUrlChange(O){this._urlChangeListeners.push(O),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}))}_notifyUrlChangeListeners(O="",z){this._urlChangeListeners.forEach(oe=>oe(O,z))}subscribe(O,z,oe){return this._subject.subscribe({next:O,error:z,complete:oe})}}return R.normalizeQueryParams=nt,R.joinWithSlash=Be,R.stripTrailingSlash=Je,R.\u0275fac=function(O){return new(O||R)(I.LFG(Re),I.LFG(be))},R.\u0275prov=I.Yz7({token:R,factory:function(){return function $e(){return new Ge((0,I.LFG)(Re),(0,I.LFG)(be))}()},providedIn:"root"}),R})();function le(R){return R.replace(/\/index.html$/,"")}function ki(R,G){G=encodeURIComponent(G);for(const O of R.split(";")){const z=O.indexOf("="),[oe,Pe]=-1==z?[O,""]:[O.slice(0,z),O.slice(z+1)];if(oe.trim()===G)return decodeURIComponent(Pe)}return null}let zr=(()=>{class R{constructor(O,z,oe,Pe){this._iterableDiffers=O,this._keyValueDiffers=z,this._ngEl=oe,this._renderer=Pe,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(O){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof O?O.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(O){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof O?O.split(/\s+/):O,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const O=this._iterableDiffer.diff(this._rawClass);O&&this._applyIterableChanges(O)}else if(this._keyValueDiffer){const O=this._keyValueDiffer.diff(this._rawClass);O&&this._applyKeyValueChanges(O)}}_applyKeyValueChanges(O){O.forEachAddedItem(z=>this._toggleClass(z.key,z.currentValue)),O.forEachChangedItem(z=>this._toggleClass(z.key,z.currentValue)),O.forEachRemovedItem(z=>{z.previousValue&&this._toggleClass(z.key,!1)})}_applyIterableChanges(O){O.forEachAddedItem(z=>{if("string"!=typeof z.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(z.item)}`);this._toggleClass(z.item,!0)}),O.forEachRemovedItem(z=>this._toggleClass(z.item,!1))}_applyClasses(O){O&&(Array.isArray(O)||O instanceof Set?O.forEach(z=>this._toggleClass(z,!0)):Object.keys(O).forEach(z=>this._toggleClass(z,!!O[z])))}_removeClasses(O){O&&(Array.isArray(O)||O instanceof Set?O.forEach(z=>this._toggleClass(z,!1)):Object.keys(O).forEach(z=>this._toggleClass(z,!1)))}_toggleClass(O,z){(O=O.trim())&&O.split(/\s+/g).forEach(oe=>{z?this._renderer.addClass(this._ngEl.nativeElement,oe):this._renderer.removeClass(this._ngEl.nativeElement,oe)})}}return R.\u0275fac=function(O){return new(O||R)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},R.\u0275dir=I.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),R})();class wr{constructor(G,O,z,oe){this.$implicit=G,this.ngForOf=O,this.index=z,this.count=oe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zi=(()=>{class R{constructor(O,z,oe){this._viewContainer=O,this._template=z,this._differs=oe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(O){this._ngForOf=O,this._ngForOfDirty=!0}set ngForTrackBy(O){this._trackByFn=O}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(O){O&&(this._template=O)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const O=this._ngForOf;!this._differ&&O&&(this._differ=this._differs.find(O).create(this.ngForTrackBy))}if(this._differ){const O=this._differ.diff(this._ngForOf);O&&this._applyChanges(O)}}_applyChanges(O){const z=this._viewContainer;O.forEachOperation((oe,Pe,Ze)=>{if(null==oe.previousIndex)z.createEmbeddedView(this._template,new wr(oe.item,this._ngForOf,-1,-1),null===Ze?void 0:Ze);else if(null==Ze)z.remove(null===Pe?void 0:Pe);else if(null!==Pe){const lt=z.get(Pe);z.move(lt,Ze),os(lt,oe)}});for(let oe=0,Pe=z.length;oe<Pe;oe++){const lt=z.get(oe).context;lt.index=oe,lt.count=Pe,lt.ngForOf=this._ngForOf}O.forEachIdentityChange(oe=>{os(z.get(oe.currentIndex),oe)})}static ngTemplateContextGuard(O,z){return!0}}return R.\u0275fac=function(O){return new(O||R)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},R.\u0275dir=I.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),R})();function os(R,G){R.context.$implicit=G.item}let Er=(()=>{class R{constructor(O,z){this._viewContainer=O,this._context=new kn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(O){this._context.$implicit=this._context.ngIf=O,this._updateView()}set ngIfThen(O){bo("ngIfThen",O),this._thenTemplateRef=O,this._thenViewRef=null,this._updateView()}set ngIfElse(O){bo("ngIfElse",O),this._elseTemplateRef=O,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(O,z){return!0}}return R.\u0275fac=function(O){return new(O||R)(I.Y36(I.s_b),I.Y36(I.Rgc))},R.\u0275dir=I.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),R})();class kn{constructor(){this.$implicit=null,this.ngIf=null}}function bo(R,G){if(G&&!G.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,I.AaK)(G)}'.`)}let Hs=(()=>{class R{constructor(O){this._viewContainerRef=O,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(O){if(O.ngTemplateOutlet){const z=this._viewContainerRef;this._viewRef&&z.remove(z.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?z.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&O.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return R.\u0275fac=function(O){return new(O||R)(I.Y36(I.s_b))},R.\u0275dir=I.lG2({type:R,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[I.TTD]}),R})();class de{createSubscription(G,O){return G.subscribe({next:O,error:z=>{throw z}})}dispose(G){G.unsubscribe()}onDestroy(G){G.unsubscribe()}}class _s{createSubscription(G,O){return G.then(O,z=>{throw z})}dispose(G){}onDestroy(G){}}const xr=new _s,kl=new de;let oa=(()=>{class R{constructor(O){this._ref=O,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(O){return this._obj?O!==this._obj?(this._dispose(),this.transform(O)):this._latestValue:(O&&this._subscribe(O),this._latestValue)}_subscribe(O){this._obj=O,this._strategy=this._selectStrategy(O),this._subscription=this._strategy.createSubscription(O,z=>this._updateLatestValue(O,z))}_selectStrategy(O){if((0,I.QGY)(O))return xr;if((0,I.F4k)(O))return kl;throw function ii(R,G){return new I.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(O,z){O===this._obj&&(this._latestValue=z,this._ref.markForCheck())}}return R.\u0275fac=function(O){return new(O||R)(I.Y36(I.sBO,16))},R.\u0275pipe=I.Yjl({name:"async",type:R,pure:!1}),R})(),as=(()=>{class R{}return R.\u0275fac=function(O){return new(O||R)},R.\u0275mod=I.oAB({type:R}),R.\u0275inj=I.cJS({}),R})();const Rs="browser";function Ti(R){return R===Rs}function Fi(R){return"server"===R}let Qi=(()=>{class R{}return R.\u0275prov=(0,I.Yz7)({token:R,providedIn:"root",factory:()=>new Do((0,I.LFG)(De),window)}),R})();class Do{constructor(G,O){this.document=G,this.window=O,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const O=function Yr(R,G){const O=R.getElementById(G)||R.getElementsByName(G)[0];if(O)return O;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const z=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let oe=z.currentNode;for(;oe;){const Pe=oe.shadowRoot;if(Pe){const Ze=Pe.getElementById(G)||Pe.querySelector(`[name="${G}"]`);if(Ze)return Ze}oe=z.nextNode()}}return null}(this.document,G);O&&(this.scrollToElement(O),O.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const O=this.window.history;O&&O.scrollRestoration&&(O.scrollRestoration=G)}}scrollToElement(G){const O=G.getBoundingClientRect(),z=O.left+this.window.pageXOffset,oe=O.top+this.window.pageYOffset,Pe=this.offset();this.window.scrollTo(z-Pe[0],oe-Pe[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=ls(this.window.history)||ls(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function ls(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Hn{}},9724:(bt,xe,j)=>{"use strict";j.d(xe,{deG:()=>vh,tb:()=>Bu,AFp:()=>Vu,ip1:()=>ig,CZH:()=>Q0,hGG:()=>hD,z2F:()=>iD,sBO:()=>GA,Sil:()=>mo,_Vd:()=>C_,EJc:()=>sT,SBq:()=>D_,qLn:()=>fs,vpe:()=>Ql,tBr:()=>Ro,XFs:()=>At,OlP:()=>er,zs3:()=>Za,ZZ4:()=>gb,aQg:()=>ug,soG:()=>tb,YKP:()=>pC,h0i:()=>Lc,PXZ:()=>eD,R0b:()=>el,FiY:()=>co,Lbi:()=>eb,g9A:()=>jC,Qsj:()=>OI,FYo:()=>oC,JOm:()=>Fe,tp0:()=>Xo,Rgc:()=>Jp,dDg:()=>ib,q4F:()=>cC,GfV:()=>lC,s_b:()=>N_,ifc:()=>zt,eFA:()=>og,G48:()=>cT,Gpc:()=>ie,X6Q:()=>cb,_c5:()=>dD,VLi:()=>YC,c2e:()=>HC,zSh:()=>ov,wAp:()=>sn,vHH:()=>Je,cg1:()=>n_,kL8:()=>e0,dqk:()=>Tn,sIi:()=>Sp,CqO:()=>Iv,QGY:()=>kp,F4k:()=>gE,RDi:()=>ls,AaK:()=>be,qOj:()=>Tm,TTD:()=>ys,_Bn:()=>nC,xp6:()=>pu,uIk:()=>xm,Tol:()=>Fv,ekj:()=>df,Suo:()=>NC,Xpm:()=>Yt,lG2:()=>Sn,Yz7:()=>ln,cJS:()=>Mn,oAB:()=>ye,Yjl:()=>wi,Y36:()=>lf,_UZ:()=>Rp,qZA:()=>Zd,TgZ:()=>Su,EpF:()=>Dv,n5z:()=>ds,Ikx:()=>Qv,SDv:()=>__,QtT:()=>w0,pQV:()=>y_,LFG:()=>Bt,$8M:()=>cc,$Z:()=>pE,NdJ:()=>Tv,CRH:()=>sh,kcU:()=>Zc,O4$:()=>sl,oxw:()=>Fp,ALo:()=>Tf,lcZ:()=>wC,Hsn:()=>Nv,F$t:()=>Av,Q6J:()=>Vm,s9C:()=>xv,MGl:()=>cf,DdM:()=>T_,VKq:()=>I0,WLB:()=>Mu,kEZ:()=>T0,iGM:()=>AC,MAs:()=>aE,CHM:()=>ca,LSH:()=>fd,Udp:()=>zm,YNc:()=>oE,W1O:()=>RC,_uU:()=>SE,Oqu:()=>Bp,hij:()=>Km,AsE:()=>Up,Gf:()=>V0});var I=j(8023),h=j(4813),Z=j(818),me=j(1860),ue=j(815);function we(s){for(let o in s)if(s[o]===we)return o;throw Error("Could not find renamed property on target object.")}function De(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function be(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(be).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const ne=we({__forward_ref__:we});function ie(s){return s.__forward_ref__=ie,s.toString=function(){return be(this())},s}function he(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty(ne)&&s.__forward_ref__===ie}class Je extends Error{constructor(o,a){super(function nt(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function Re(s){return"string"==typeof s?s:null==s?"":String(s)}function Ue(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Re(s)}function Ge(s,o){const a=o?` in ${o}`:"";throw new Je(-201,`No provider for ${Ue(s)} found${a}`)}function Tt(s,o,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}function ln(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Mn(s){return{providers:s.providers||[],imports:s.imports||[]}}function pn(s){return Ni(s,or)||Ni(s,ar)}function Ni(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ui(s){return s&&(s.hasOwnProperty(Ki)||s.hasOwnProperty(ti))?s[Ki]:null}const or=we({\u0275prov:we}),Ki=we({\u0275inj:we}),ar=we({ngInjectableDef:we}),ti=we({ngInjectorDef:we});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let Ar;function Ot(s){const o=Ar;return Ar=s,o}function vr(s,o,a){const c=pn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&At.Optional?null:void 0!==o?o:void Ge(be(s),"Injector")}function Mt(s){return{toString:s}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const at="undefined"!=typeof globalThis&&globalThis,qt="undefined"!=typeof window&&window,ui="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Tn=at||"undefined"!=typeof global&&global||qt||ui,Ri={},$t=[],Gi=we({\u0275cmp:we}),gn=we({\u0275dir:we}),Qe=we({\u0275pipe:we}),Ye=we({\u0275mod:we}),It=we({\u0275fac:we}),Wt=we({__NG_ELEMENT_ID__:we});let _n=0;function Yt(s){return Mt(()=>{const a={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||$t,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||$t,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=_n++,c.inputs=Ut(s.inputs,a),c.outputs=Ut(s.outputs),p&&p.forEach(D=>D(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(Y):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(ce):null,c})}function Y(s){return mn(s)||function Ie(s){return s[gn]||null}(s)}function ce(s){return function on(s){return s[Qe]||null}(s)}const Le={};function ye(s){return Mt(()=>{const o={type:s.type,bootstrap:s.bootstrap||$t,declarations:s.declarations||$t,imports:s.imports||$t,exports:s.exports||$t,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Le[s.id]=s.type),o})}function Ut(s,o){if(null==s)return Ri;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}const Sn=Yt;function wi(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function mn(s){return s[Gi]||null}function En(s,o){const a=s[Ye]||null;if(!a&&!0===o)throw new Error(`Type ${be(s)} does not have '\u0275mod' property.`);return a}function Nr(s){return Array.isArray(s)&&"object"==typeof s[1]}function qr(s){return Array.isArray(s)&&!0===s[1]}function wo(s){return 0!=(8&s.flags)}function js(s){return 2==(2&s.flags)}function Vo(s){return 1==(1&s.flags)}function Pi(s){return null!==s.template}function sa(s){return 0!=(512&s[2])}function gi(s,o){return s.hasOwnProperty(It)?s[It]:null}class to{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ys(){return vs}function vs(s){return s.type.prototype.ngOnChanges&&(s.setInput=$s),Uo}function Uo(){const s=Rs(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Ri)s.previous=o;else for(let c in o)a[c]=o[c];s.current=null,this.ngOnChanges(o)}}function $s(s,o,a,c){const d=Rs(s)||function qi(s,o){return s[as]=o}(s,{previous:Ri,current:null}),p=d.current||(d.current={}),v=d.previous,D=this.declaredInputs[a],N=v[D];p[D]=new to(N&&N.currentValue,o,v===Ri),s[c]=o}ys.ngInherit=!0;const as="__ngSimpleChanges__";function Rs(s){return s[as]||null}let Do;function ls(s){Do=s}function Yr(){return void 0!==Do?Do:"undefined"!=typeof document?document:void 0}function Hn(s){return!!s.listen}const R={createRenderer:(s,o)=>Yr()};function O(s){for(;Array.isArray(s);)s=s[0];return s}function Pe(s,o){return O(o[s])}function Ze(s,o){return O(o[s.index])}function An(s,o){return s.data[o]}function yn(s,o){return s[o]}function an(s,o){const a=o[s];return Nr(a)?a:a[0]}function vn(s){return 4==(4&s[2])}function hi(s){return 128==(128&s[2])}function Pn(s,o){return null==o?null:s[o]}function Or(s){s[18]=0}function Xi(s,o){s[5]+=o;let a=s,c=s[3];for(;null!==c&&(1===o&&1===a[5]||-1===o&&0===a[5]);)c[5]+=o,a=c,c=c[3]}const Rt={lFrame:Ws(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ka(){return Rt.bindingsEnabled}function Xe(){return Rt.lFrame.lView}function hn(){return Rt.lFrame.tView}function ca(s){return Rt.lFrame.contextLView=s,s[8]}function mi(){let s=ua();for(;null!==s&&64===s.type;)s=s.parent;return s}function ua(){return Rt.lFrame.currentTNode}function $o(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function cs(s,o){const a=Rt.lFrame;a.currentTNode=s,a.isParent=o}function Wo(){return Rt.lFrame.isParent}function Pa(){Rt.lFrame.isParent=!1}function da(){return Rt.isInCheckNoChangesMode}function io(s){Rt.isInCheckNoChangesMode=s}function Cr(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Xr(){return Rt.lFrame.bindingIndex}function Ps(){return Rt.lFrame.bindingIndex++}function Dr(s){const o=Rt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Va(s){Rt.lFrame.inI18n=s}function fa(s,o){const a=Rt.lFrame;a.bindingIndex=a.bindingRootIndex=s,zo(o)}function zo(s){Rt.lFrame.currentDirectiveIndex=s}function pa(){return Rt.lFrame.currentQueryIndex}function Ba(s){Rt.lFrame.currentQueryIndex=s}function ga(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function To(s,o,a){if(a&At.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&At.Host||(d=ga(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=Rt.lFrame=qo();return c.currentTNode=o,c.lView=s,!0}function ro(s){const o=qo(),a=s[1];Rt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function qo(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Ws(s):o}function Ws(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ma(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _a=ma;function So(){const s=ma();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function cr(){return Rt.lFrame.selectedIndex}function Zo(s){Rt.lFrame.selectedIndex=s}function Li(){const s=Rt.lFrame;return An(s.tView,s.selectedIndex)}function sl(){Rt.lFrame.currentNamespace="svg"}function Zc(){!function ur(){Rt.lFrame.currentNamespace=null}()}function Es(s,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:N,ngAfterViewChecked:V,ngOnDestroy:H}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),D&&((s.contentHooks||(s.contentHooks=[])).push(a,D),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,D)),N&&(s.viewHooks||(s.viewHooks=[])).push(-a,N),V&&((s.viewHooks||(s.viewHooks=[])).push(a,V),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,V)),null!=H&&(s.destroyHooks||(s.destroyHooks=[])).push(a,H)}}function zs(s,o,a){Ua(s,o,3,a)}function es(s,o,a,c){(3&s[2])===a&&Ua(s,o,a,c)}function xi(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Ua(s,o,a,c){const p=null!=c?c:-1,v=o.length-1;let D=0;for(let N=void 0!==c?65535&s[18]:0;N<v;N++)if("number"==typeof o[N+1]){if(D=o[N],null!=c&&D>=c)break}else o[N]<0&&(s[18]+=65536),(D<p||-1==p)&&(al(s,a,o,N),s[18]=(4294901760&s[18])+N+2),N++}function al(s,o,a,c){const d=a[c]<0,p=a[c+1],D=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(D)}finally{}}}else try{p.call(D)}finally{}}class Rr{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function T(s,o,a){const c=Hn(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const v=a[d++],D=a[d++],N=a[d++];c?s.setAttribute(o,D,N,v):o.setAttributeNS(v,D,N)}else{const v=p,D=a[++d];U(v)?c&&s.setProperty(o,v,D):c?s.setAttribute(o,v,D):o.setAttribute(v,D),d++}}return d}function A(s){return 3===s||4===s||6===s}function U(s){return 64===s.charCodeAt(0)}function ee(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Ke(s,a,d,null,-1===a||2===a?o[++c]:null)}}return s}function Ke(s,o,a,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const D=s[p++];if("number"==typeof D){if(D===o){v=-1;break}if(D>o){v=p-1;break}}}for(;p<s.length;){const D=s[p];if("number"==typeof D)break;if(D===a){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,a),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function kt(s){return-1!==s}function en(s){return 32767&s}function ot(s,o){let a=function fi(s){return s>>16}(s),c=o;for(;a>0;)c=c[15],a--;return c}let Ds=!0;function Gt(s){const o=Ds;return Ds=s,o}let C=0;function M(s,o){const a=W(s,o);if(-1!==a)return a;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,F(c.data,s),F(o,null),F(c.blueprint,null));const d=J(s,o),p=s.injectorIndex;if(kt(d)){const v=en(d),D=ot(d,o),N=D[1].data;for(let V=0;V<8;V++)o[p+V]=D[v+V]|N[v+V]}return o[p+8]=d,p}function F(s,o){s.push(0,0,0,0,0,0,0,0,o)}function W(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function J(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function se(s,o,a){!function b(s,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Wt)&&(c=a[Wt]),null==c&&(c=a[Wt]=C++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function mt(s,o,a){if(a&At.Optional)return s;Ge(o,"NodeInjector")}function Cn(s,o,a,c){if(a&At.Optional&&void 0===c&&(c=null),0==(a&(At.Self|At.Host))){const d=s[9],p=Ot(void 0);try{return d?d.get(o,c,a&At.Optional):vr(o,c,a&At.Optional)}finally{Ot(p)}}return mt(c,o,a)}function Pt(s,o,a,c=At.Default,d){if(null!==s){const p=function ll(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Wt)?s[Wt]:void 0;return"number"==typeof o?o>=0?255&o:Fn:o}(a);if("function"==typeof p){if(!To(o,s,c))return c&At.Host?mt(d,a,c):Cn(o,a,c,d);try{const v=p(c);if(null!=v||c&At.Optional)return v;Ge(a)}finally{_a()}}else if("number"==typeof p){let v=null,D=W(s,o),N=-1,V=c&At.Host?o[16][6]:null;for((-1===D||c&At.SkipSelf)&&(N=-1===D?J(s,o):o[D+8],-1!==N&&kr(c,!1)?(v=o[1],D=en(N),o=ot(N,o)):D=-1);-1!==D;){const H=o[1];if(Mo(p,D,H.data)){const Q=xo(D,o,a,v,c,V);if(Q!==Nn)return Q}N=o[D+8],-1!==N&&kr(c,o[1].data[D+8]===V)&&Mo(p,D,o)?(v=H,D=en(N),o=ot(N,o)):D=-1}}}return Cn(o,a,c,d)}const Nn={};function Fn(){return new oo(mi(),Xe())}function xo(s,o,a,c,d,p){const v=o[1],D=v.data[s+8],H=so(D,v,a,null==c?js(D)&&Ds:c!=v&&0!=(3&D.type),d&At.Host&&p===D);return null!==H?us(o,v,H,D):Nn}function so(s,o,a,c,d){const p=s.providerIndexes,v=o.data,D=1048575&p,N=s.directiveStart,H=p>>20,ae=d?D+H:s.directiveEnd;for(let Ee=c?D:D+H;Ee<ae;Ee++){const ze=v[Ee];if(Ee<N&&a===ze||Ee>=N&&ze.type===a)return Ee}if(d){const Ee=v[N];if(Ee&&Pi(Ee)&&Ee.type===a)return N}return null}function us(s,o,a,c){let d=s[a];const p=o.data;if(function ya(s){return s instanceof Rr}(d)){const v=d;v.resolving&&function _t(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Je(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ue(p[a]));const D=Gt(v.canSeeViewProviders);v.resolving=!0;const N=v.injectImpl?Ot(v.injectImpl):null;To(s,c,At.Default);try{d=s[a]=v.factory(void 0,p,s,c),o.firstCreatePass&&a>=c.directiveStart&&function ol(s,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=vs(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==N&&Ot(N),Gt(D),v.resolving=!1,_a()}}return d}function Mo(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function kr(s,o){return!(s&At.Self||s&At.Host&&o)}class oo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Pt(this._tNode,this._lView,o,c,a)}}function ds(s){return Mt(()=>{const o=s.prototype.constructor,a=o[It]||cl(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[It]||cl(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function cl(s){return Ve(s)?()=>{const o=cl(he(s));return o&&o()}:gi(s)}function cc(s){return function Oe(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(A(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(mi(),s)}const ul="__parameters__";function Vl(s,o,a){return Mt(()=>{const c=function uc(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return D.annotation=v,D;function D(N,V,H){const Q=N.hasOwnProperty(ul)?N[ul]:Object.defineProperty(N,ul,{value:[]})[ul];for(;Q.length<=H;)Q.push(null);return(Q[H]=Q[H]||[]).push(v),N}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class er{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ln({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vh=new er("AnalyzeForEntryComponents");function si(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let c=s[a];Array.isArray(c)?(o===s&&(o=s.slice(0,a)),si(c,o)):o!==s&&o.push(c)}return o}function hs(s,o){s.forEach(a=>Array.isArray(a)?hs(a,o):o(a))}function Eh(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function lo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Oo(s,o){const a=[];for(let c=0;c<s;c++)a.push(o);return a}function Is(s,o,a){let c=hl(s,o);return c>=0?s[1|c]=a:(c=~c,function Bl(s,o,a,c){let d=s.length;if(d==o)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=c}}(s,c,o,a)),c}function ed(s,o){const a=hl(s,o);if(a>=0)return s[1|a]}function hl(s,o){return function Ha(s,o,a){let c=0,d=s.length>>a;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<a];if(o===v)return p<<a;v>o?d=p:c=p+1}return~(d<<a)}(s,o,1)}const Qo={},fl="__NG_DI_FLAG__",id="ngTempTokenPath",P=/\n/gm,X="__source",ve=we({provide:String,useValue:we});let Ae;function st(s){const o=Ae;return Ae=s,o}function St(s,o=At.Default){if(void 0===Ae)throw new Je(203,"");return null===Ae?vr(s,void 0,o):Ae.get(s,o&At.Optional?null:void 0,o)}function Bt(s,o=At.Default){return(function Vn(){return Ar}()||St)(he(s),o)}const On=Bt;function un(s){const o=[];for(let a=0;a<s.length;a++){const c=he(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Je(900,"");let d,p=At.Default;for(let v=0;v<c.length;v++){const D=c[v],N=nr(D);"number"==typeof N?-1===N?d=D.token:p|=N:d=D}o.push(Bt(d,p))}else o.push(Bt(c))}return o}function hr(s,o){return s[fl]=o,s.prototype[fl]=o,s}function nr(s){return s[fl]}const Ro=hr(Vl("Inject",s=>({token:s})),-1),co=hr(Vl("Optional"),8),Xo=hr(Vl("SkipSelf"),4);let od;function $a(s){var o;return(null===(o=function Th(){if(void 0===od&&(od=null,Tn.trustedTypes))try{od=Tn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return od}())||void 0===o?void 0:o.createHTML(s))||s}class cd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uo(s){return s instanceof cd?s.changingThisBreaksApplicationSecurity:s}class Zf{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString($a(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class vc{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=$a(o),a;const c=this.inertDocument.createElement("body");return c.innerHTML=$a(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const v=a.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const bc=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ml(s){return(s=String(s)).match(bc)||s.match(gl)?s:"unsafe:"+s}function dd(s){return(s=String(s)).split(",").map(o=>ml(o.trim())).join(", ")}function Ks(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function su(...s){const o={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const Vi=Ks("area,br,col,hr,img,wbr"),wc=Ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yg=Ks("rp,rt"),Kf=su(Vi,su(wc,Ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),su(Yg,Ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),su(Yg,wc)),xh=Ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yf=Ks("srcset"),Mh=su(xh,Yf,Ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Pr=(()=>((Pr=Pr||{})[Pr.NONE=0]="NONE",Pr[Pr.HTML=1]="HTML",Pr[Pr.STYLE=2]="STYLE",Pr[Pr.SCRIPT=3]="SCRIPT",Pr[Pr.URL=4]="URL",Pr[Pr.RESOURCE_URL=5]="RESOURCE_URL",Pr))();function fd(s){const o=function yl(){const s=Xe();return s&&s[12]}();return o?o.sanitize(Pr.URL,s)||"":function iu(s,o){const a=function ud(s){return s instanceof cd&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?uo(s):ml(Re(s))}const Cc="__ngContext__";function Fr(s,o){s[Cc]=o}function fr(s){const o=function Dc(s){return s[Cc]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function sp(s){return s.ngOriginalError}function au(s,...o){s.error(...o)}class fs{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),c=function op(s){return s&&s.ngErrorLogger||au}(o);c(this._console,"ERROR",o),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&sp(o);for(;a&&sp(a);)a=sp(a);return a||null}}const nm=/^>|^->|<!--|-->|--!>|<!-$/g,Ia=/(<|>)/;const cp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tn))();function m(s){return s instanceof Function?s():s}var Fe=(()=>((Fe=Fe||{})[Fe.Important=1]="Important",Fe[Fe.DashCase=2]="DashCase",Fe))();let pt;function Et(s,o){return pt(s,o)}function _i(s){const o=s[3];return qr(o)?o[3]:o}function cu(s){return dp(s[13])}function bd(s){return dp(s[4])}function dp(s){for(;null!==s&&!qr(s);)s=s[4];return s}function $l(s,o,a,c,d){if(null!=c){let p,v=!1;qr(c)?p=c:Nr(c)&&(v=!0,c=c[0]);const D=O(c);0===s&&null!==a?null==d?Sy(o,a,D):pr(o,a,D,d||null,!0):1===s&&null!==a?pr(o,a,D,d||null,!0):2===s?Ny(o,D,v):3===s&&o.destroyNode(D),null!=p&&function mw(s,o,a,c,d){const p=a[7];p!==O(a)&&$l(o,s,c,p,d);for(let D=10;D<a.length;D++){const N=a[D];nn(N[1],N,s,o,c,p)}}(o,s,p,a,d)}}function Ic(s,o){return Hn(s)?s.createText(o):s.createTextNode(o)}function hp(s,o,a){Hn(s)?s.setValue(o,a):o.textContent=a}function Uh(s,o){return s.createComment(function ap(s){return s.replace(nm,o=>o.replace(Ia,"\u200b$1\u200b"))}(o))}function Lr(s,o,a){if(Hn(s))return s.createElement(o,a);{const c=null!==a?function Qi(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function jh(s,o){const a=s[9],c=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Xi(d,-1)),a.splice(c,1)}function pp(s,o){if(s.length<=10)return;const a=10+o,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&jh(d,c),o>0&&(s[a-1][4]=c[4]);const p=lo(s,10+o);!function uu(s,o){nn(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function jt(s,o){if(!(256&o[2])){const a=o[11];Hn(a)&&a.destroyNode&&nn(s,o,a,3,null,null),function m1(s){let o=s[13];if(!o)return fn(s[1],s);for(;o;){let a=null;if(Nr(o))a=o[13];else{const c=o[10];c&&(a=c)}if(!a){for(;o&&!o[4]&&o!==s;)Nr(o)&&fn(o[1],o),o=o[3];null===o&&(o=s),Nr(o)&&fn(o[1],o),a=o&&o[4]}o=a}}(o)}}function fn(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Dt(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Rr)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const D=d[p[v]],N=p[v+1];try{N.call(D)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function _1(s,o){const a=s.cleanup,c=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],D="function"==typeof v?v(o):O(o[v]),N=c[d=a[p+2]],V=a[p+3];"boolean"==typeof V?D.removeEventListener(a[p],N,V):V>=0?c[d=V]():c[d=-V].unsubscribe(),p+=2}else{const v=c[d=a[p+1]];a[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Hn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&qr(o[3])){a!==o[3]&&jh(a,o);const c=o[19];null!==c&&c.detachView(s)}}}function je(s,o,a){return rt(s,o.parent,a)}function rt(s,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===zt.None||d===zt.Emulated)return null}return Ze(c,a)}function pr(s,o,a,c,d){Hn(s)?s.insertBefore(o,a,c,d):o.insertBefore(a,c,d)}function Sy(s,o,a){Hn(s)?s.appendChild(o,a):o.appendChild(a)}function dw(s,o,a,c,d){null!==c?pr(s,o,a,c,d):Sy(s,o,a)}function om(s,o){return Hn(s)?s.parentNode(o):o.parentNode}function hw(s,o,a){return fw(s,o,a)}function Ay(s,o,a){return 40&s.type?Ze(s,a):null}let pw,fw=Ay;function ta(s,o){fw=s,pw=o}function am(s,o,a,c){const d=je(s,c,o),p=o[11],D=hw(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(a))for(let N=0;N<a.length;N++)dw(p,d,a[N],D,!1);else dw(p,d,a,D,!1);void 0!==pw&&pw(p,c,o,a,d)}function gp(s,o){if(null!==o){const a=o.type;if(3&a)return Ze(o,s);if(4&a)return du(-1,s[o.index]);if(8&a){const c=o.child;if(null!==c)return gp(s,c);{const d=s[o.index];return qr(d)?du(-1,d):O(d)}}if(32&a)return Et(o,s)()||O(s[o.index]);{const c=Ln(s,o);return null!==c?Array.isArray(c)?c[0]:gp(_i(s[16]),c):gp(s,o.next)}}return null}function Ln(s,o){return null!==o?s[16][6].projection[o.projection]:null}function du(s,o){const a=10+s+1;if(a<o.length){const c=o[a],d=c[1].firstChild;if(null!==d)return gp(c,d)}return o[7]}function Ny(s,o,a){const c=om(s,o);c&&function y1(s,o,a,c){Hn(s)?s.removeChild(o,a,c):o.removeChild(a)}(s,c,o,a)}function Tr(s,o,a,c,d,p,v){for(;null!=a;){const D=c[a.index],N=a.type;if(v&&0===o&&(D&&Fr(O(D),c),a.flags|=4),64!=(64&a.flags))if(8&N)Tr(s,o,a.child,c,d,p,!1),$l(o,s,d,D,p);else if(32&N){const V=Et(a,c);let H;for(;H=V();)$l(o,s,d,H,p);$l(o,s,d,D,p)}else 16&N?hu(s,o,c,a,d,p):$l(o,s,d,D,p);a=v?a.projectionNext:a.next}}function nn(s,o,a,c,d,p){Tr(a,c,s.firstChild,o,d,p,!1)}function hu(s,o,a,c,d,p){const v=a[16],N=v[6].projection[c.projection];if(Array.isArray(N))for(let V=0;V<N.length;V++)$l(o,s,d,N[V],p);else Tr(s,o,N,v[3],d,p,!0)}function Qn(s,o,a){Hn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function xy(s,o,a){Hn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function Ts(s,o,a){let c=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}a=d+1}}const _w="ng-template";function Ss(s,o,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==Ts(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function yw(s){return 4===s.type&&s.value!==_w}function fu(s,o,a){return o===(4!==s.type||a?s.value:_w)}function Vr(s,o,a){let c=4;const d=s.attrs||[],p=function b1(s){for(let o=0;o<s.length;o++)if(A(s[o]))return o;return s.length}(d);let v=!1;for(let D=0;D<o.length;D++){const N=o[D];if("number"!=typeof N){if(!v)if(4&c){if(c=2|1&c,""!==N&&!fu(s,N,a)||""===N&&1===o.length){if(Ys(c))return!1;v=!0}}else{const V=8&c?N:o[++D];if(8&c&&null!==s.attrs){if(!Ss(s.attrs,V,a)){if(Ys(c))return!1;v=!0}continue}const Q=My(8&c?"class":N,d,yw(s),a);if(-1===Q){if(Ys(c))return!1;v=!0;continue}if(""!==V){let ae;ae=Q>p?"":d[Q+1].toLowerCase();const Ee=8&c?ae:null;if(Ee&&-1!==Ts(Ee,V,0)||2&c&&V!==ae){if(Ys(c))return!1;v=!0}}}}else{if(!v&&!Ys(c)&&!Ys(N))return!1;if(v&&Ys(N))continue;v=!1,c=N|1&c}}return Ys(c)||v}function Ys(s){return 0==(1&s)}function My(s,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let D=o[++d];for(;"string"==typeof D;)D=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function Tc(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,s)}function Oy(s,o,a=!1){for(let c=0;c<o.length;c++)if(Vr(s,o[c],a))return!0;return!1}function wd(s,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function Hh(s,o){return s?":not("+o.trim()+")":o}function vw(s){let o=s[0],a=1,c=2,d="",p=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&c){const D=s[++a];d+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ys(v)&&(o+=Hh(p,d),d=""),c=v,p=p||!Ys(c);a++}return""!==d&&(o+=Hh(p,d)),o}const wn={};function pu(s){vl(hn(),Xe(),cr()+s,da())}function vl(s,o,a,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&zs(o,p,a)}else{const p=s.preOrderHooks;null!==p&&es(o,p,0,a)}Zo(a)}function bl(s,o){return s<<17|o<<2}function qa(s){return s>>17&32767}function gu(s){return 2|s}function wl(s){return(131068&s)>>2}function Cd(s,o){return-131069&s|o<<2}function lm(s){return 1|s}function pm(s,o){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],p=a[c+1];if(-1!==p){const v=s.data[p];Ba(d),v.contentQueries(2,o[p],p)}}}function po(s,o,a,c,d,p,v,D,N,V){const H=o.blueprint.slice();return H[0]=d,H[2]=140|c,Or(H),H[3]=H[15]=s,H[8]=a,H[10]=v||s&&s[10],H[11]=D||s&&s[11],H[12]=N||s&&s[12]||null,H[9]=V||s&&s[9]||null,H[6]=p,H[16]=2==o.type?s[16]:H,H}function Sd(s,o,a,c,d){let p=s.data[o];if(null===p)p=Ad(s,o,a,c,d),function La(){return Rt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const v=$o();p.injectorIndex=null===v?-1:v.injectorIndex}return cs(p,!0),p}function Ad(s,o,a,c,d){const p=ua(),v=Wo(),N=s.data[o]=function Iw(s,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,d);return null===s.firstChild&&(s.firstChild=N),null!==p&&(v?null==p.child&&null!==N.parent&&(p.child=N):null===p.next&&(p.next=N)),N}function Nd(s,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function xd(s,o,a){ro(o);try{const c=s.viewQuery;null!==c&&Qh(1,c,a);const d=s.template;null!==d&&Zy(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&pm(s,o),s.staticViewQueries&&Qh(2,s.viewQuery,a);const p=s.components;null!==p&&function qh(s,o){for(let a=0;a<o.length;a++)Jh(s,o[a])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,So()}}function yu(s,o,a,c){const d=o[2];if(256==(256&d))return;ro(o);const p=da();try{Or(o),function ha(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Zy(s,o,a,2,c);const v=3==(3&d);if(!p)if(v){const V=s.preOrderCheckHooks;null!==V&&zs(o,V,null)}else{const V=s.preOrderHooks;null!==V&&es(o,V,0,null),xi(o,0)}if(function Js(s){for(let o=cu(s);null!==o;o=bd(o)){if(!o[2])continue;const a=o[9];for(let c=0;c<a.length;c++){const d=a[c],p=d[3];0==(1024&d[2])&&Xi(p,1),d[2]|=1024}}}(o),function bm(s){for(let o=cu(s);null!==o;o=bd(o))for(let a=10;a<o.length;a++){const c=o[a],d=c[1];hi(c)&&yu(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&pm(s,o),!p)if(v){const V=s.contentCheckHooks;null!==V&&zs(o,V)}else{const V=s.contentHooks;null!==V&&es(o,V,1),xi(o,1)}!function zy(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Zo(~d);else{const p=d,v=a[++c],D=a[++c];fa(v,p),D(2,o[p])}}}finally{Zo(-1)}}(s,o);const D=s.components;null!==D&&function qy(s,o){for(let a=0;a<o.length;a++)ir(s,o[a])}(o,D);const N=s.viewQuery;if(null!==N&&Qh(2,N,c),!p)if(v){const V=s.viewCheckHooks;null!==V&&zs(o,V)}else{const V=s.viewHooks;null!==V&&es(o,V,2),xi(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Xi(o[3],-1))}finally{So()}}function Ew(s,o,a,c){const d=o[10],p=!da(),v=vn(o);try{p&&!v&&d.begin&&d.begin(),v&&xd(s,o,c),yu(s,o,a,c)}finally{p&&!v&&d.end&&d.end()}}function Zy(s,o,a,c,d){const p=cr(),v=2&c;try{Zo(-1),v&&o.length>20&&vl(s,o,20,da()),a(c,d)}finally{Zo(p)}}function gm(s,o,a){!ka()||(function Aw(s,o,a,c){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||M(a,o),Fr(c,o);const v=a.initialInputs;for(let D=d;D<p;D++){const N=s.data[D],V=Pi(N);V&&T1(o,a,N);const H=us(o,s,D,a);Fr(H,o),null!==v&&Ow(0,D-d,H,N,0,v),V&&(an(a.index,o)[8]=H)}}(s,o,a,Ze(a,o)),128==(128&a.flags)&&function Nw(s,o,a){const c=a.directiveStart,d=a.directiveEnd,v=a.index,D=function rl(){return Rt.lFrame.currentDirectiveIndex}();try{Zo(v);for(let N=c;N<d;N++){const V=s.data[N],H=o[N];zo(N),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&Kh(V,H)}}finally{Zo(-1),zo(D)}}(s,o,a))}function mm(s,o,a=Ze){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],D=-1===v?a(o,s):s[v];s[d++]=D}}}function Ky(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Md(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Md(s,o,a,c,d,p,v,D,N,V){const H=20+c,Q=H+d,ae=function C1(s,o){const a=[];for(let c=0;c<o;c++)a.push(c<s?null:wn);return a}(H,Q),Ee="function"==typeof V?V():V;return ae[1]={type:s,blueprint:ae,template:a,queries:null,viewQuery:D,declTNode:o,data:ae.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:N,consts:Ee,incompleteFirstPass:!1}}function vu(s,o,a,c){const d=Dp(o);null===a?d.push(c):(d.push(a),s.firstCreatePass&&nv(s).push(c,d.length-1))}function bu(s,o,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(o,d):a[c]=[o,d]}return a}function na(s,o,a,c,d,p,v,D){const N=Ze(o,a);let H,V=o.inputs;!D&&null!=V&&(H=V[c])?(Pw(s,a,H,c,d),js(o)&&function Sw(s,o){const a=an(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(c=function Zh(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,Hn(p)?p.setProperty(N,c,d):U(c)||(N.setProperty?N.setProperty(c,d):N[c]=d))}function Jy(s,o,a,c){let d=!1;if(ka()){const p=function Rd(s,o,a){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];Oy(a,v.selectors,!1)&&(d||(d=[]),se(M(a,o),s,v.type),Pi(v)?(Qy(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===c?null:{"":-1};if(null!==p){d=!0,Yh(a,s.data.length,p.length);for(let H=0;H<p.length;H++){const Q=p[H];Q.providersResolver&&Q.providersResolver(Q)}let D=!1,N=!1,V=Nd(s,o,p.length,null);for(let H=0;H<p.length;H++){const Q=p[H];a.mergedAttrs=ee(a.mergedAttrs,Q.hostAttrs),vm(s,a,o,V,Q),Mw(V,Q,v),null!==Q.contentQueries&&(a.flags|=8),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(a.flags|=128);const ae=Q.type.prototype;!D&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),D=!0),!N&&(ae.ngOnChanges||ae.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),N=!0),V++}!function Tw(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let D=null,N=null;for(let V=o.directiveStart;V<c;V++){const H=d[V],Q=H.inputs,ae=null===p||yw(o)?null:Rw(Q,p);v.push(ae),D=bu(Q,V,D),N=bu(H.outputs,V,N)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=16),D.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=D,o.outputs=N}(s,a)}v&&function xw(s,o,a){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Je(-301,!1);c.push(o[d],p)}}}(a,c,v)}return a.mergedAttrs=ee(a.mergedAttrs,a.attrs),d}function ym(s,o,a,c,d,p){const v=p.hostBindings;if(v){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const N=~o.index;(function I1(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(D)!=N&&D.push(N),D.push(c,d,v)}}function Kh(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Qy(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Mw(s,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=s;Pi(o)&&(a[""]=s)}}function Yh(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function vm(s,o,a,c,d){s.data[c]=d;const p=d.factory||(d.factory=gi(d.type)),v=new Rr(p,Pi(d),null);s.blueprint[c]=v,a[c]=v,ym(s,o,0,c,Nd(s,a,d.hostVars,wn),d)}function T1(s,o,a){const c=Ze(o,s),d=Ky(a),p=s[10],v=ko(s,po(s,d,null,a.onPush?64:16,c,o,p,p.createRenderer(c,a),null,null));s[o.index]=v}function qn(s,o,a,c,d,p,v){if(null==p)Hn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const D=null==v?Re(p):v(p,c||"",d);Hn(s)?s.setAttribute(o,d,D,a):a?o.setAttributeNS(a,d,D):o.setAttribute(d,D)}}function Ow(s,o,a,c,d,p){const v=p[o];if(null!==v){const D=c.setInput;for(let N=0;N<v.length;){const V=v[N++],H=v[N++],Q=v[N++];null!==D?c.setInput(a,Q,V,H):a[H]=Q}}}function Rw(s,o){let a=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return a}function Br(s,o,a,c){return new Array(s,!0,!1,o,null,0,c,a,null,null)}function ir(s,o){const a=an(o,s);if(hi(a)){const c=a[1];80&a[2]?yu(c,a,c.template,a[8]):a[5]>0&&wm(a)}}function wm(s){for(let c=cu(s);null!==c;c=bd(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];yu(v,p,v.template,p[8])}else p[5]>0&&wm(p)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=an(a[c],s);hi(d)&&d[5]>0&&wm(d)}}function Jh(s,o){const a=an(o,s),c=a[1];(function S1(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(c,a),xd(c,a,a[8])}function ko(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Xy(s){for(;s;){s[2]|=64;const o=_i(s);if(sa(s)&&!o)return s;s=o}return null}function tv(s,o,a){const c=o[10];c.begin&&c.begin();try{yu(s,o,s.template,a)}catch(d){throw rv(o,d),d}finally{c.end&&c.end()}}function kw(s){!function Pd(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],c=fr(a),d=c[1];Ew(d,c,d.template,a)}}(s[8])}function Qh(s,o,a){Ba(0),o(s,a)}const Cp=(()=>Promise.resolve(null))();function Dp(s){return s[7]||(s[7]=[])}function nv(s){return s.cleanup||(s.cleanup=[])}function rv(s,o){const a=s[9],c=a?a.get(fs,null):null;c&&c.handleError(o)}function Pw(s,o,a,c,d){for(let p=0;p<a.length;){const v=a[p++],D=a[p++],N=o[v],V=s.data[v];null!==V.setInput?V.setInput(N,d,c,D):N[D]=d}}function Wl(s,o,a){const c=Pe(o,s);hp(s[11],c,a)}function Ip(s,o,a){let c=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const D=o[v];"number"==typeof D?p=D:1==p?d=Ce(d,D):2==p&&(c=Ce(c,D+": "+o[++v]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}const Fd=new er("INJECTOR",-1);class sv{get(o,a=Qo){if(a===Qo){const c=new Error(`NullInjectorError: No provider for ${be(o)}!`);throw c.name="NullInjectorError",c}return a}}const ov=new er("Set Injector scope."),Ur={},av={};let Cm;function Xh(){return void 0===Cm&&(Cm=new sv),Cm}function El(s,o=null,a=null,c){const d=Dm(s,o,a,c);return d._resolveInjectorDefTypes(),d}function Dm(s,o=null,a=null,c){return new Fw(s,a,o||Xh(),c)}class Fw{constructor(o,a,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&hs(a,D=>this.processProvider(D,o,a)),hs([o],D=>this.processInjectorType(D,[],p)),this.records.set(Fd,ef(void 0,this));const v=this.records.get(ov);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:be(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Qo,c=At.Default){this.assertNotDestroyed();const d=st(this),p=Ot(void 0);try{if(!(c&At.SkipSelf)){let D=this.records.get(o);if(void 0===D){const N=function M1(s){return"function"==typeof s||"object"==typeof s&&s instanceof er}(o)&&pn(o);D=N&&this.injectableDefInScope(N)?ef(Ld(o),Ur):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(c&At.Self?Xh():this.parent).get(o,a=c&At.Optional&&a===Qo?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[id]=v[id]||[]).unshift(be(o)),d)throw v;return function Ul(s,o,a,c){const d=s[id];throw o[X]&&d.unshift(o[X]),s.message=function Ga(s,o,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=be(o);if(Array.isArray(o))d=o.map(be).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let D=o[v];p.push(v+":"+("string"==typeof D?JSON.stringify(D):be(D)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(P,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[id]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Ot(p),st(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(be(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processInjectorType(o,a,c){if(!(o=he(o)))return!1;let d=Ui(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,D=-1!==c.indexOf(v);if(void 0!==p&&(d=Ui(p)),null==d)return!1;if(null!=d.imports&&!D){let H;c.push(v);try{hs(d.imports,Q=>{this.processInjectorType(Q,a,c)&&(void 0===H&&(H=[]),H.push(Q))})}finally{}if(void 0!==H)for(let Q=0;Q<H.length;Q++){const{ngModule:ae,providers:Ee}=H[Q];hs(Ee,ze=>this.processProvider(ze,ae,Ee||$t))}}this.injectorDefTypes.add(v);const N=gi(v)||(()=>new v);this.records.set(v,ef(N,Ur));const V=d.providers;if(null!=V&&!D){const H=o;hs(V,Q=>this.processProvider(Q,H,V))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,c){let d=tf(o=he(o))?o:he(o&&o.provide);const p=function Vw(s,o,a){return Bw(s)?ef(void 0,s.useValue):ef(lv(s),Ur)}(o);if(tf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=ef(void 0,Ur,!0),v.factory=()=>un(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===Ur&&(a.value=av,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Hw(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=he(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ld(s){const o=pn(s),a=null!==o?o.factory:gi(s);if(null!==a)return a;if(s instanceof er)throw new Je(204,!1);if(s instanceof Function)return function Lw(s){const o=s.length;if(o>0)throw Oo(o,"?"),new Je(204,!1);const a=function yr(s){const o=s&&(s[or]||s[ar]);if(o){const a=function ss(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Je(204,!1)}function lv(s,o,a){let c;if(tf(s)){const d=he(s);return gi(d)||Ld(d)}if(Bw(s))c=()=>he(s.useValue);else if(function cv(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...un(s.deps||[]));else if(function Tp(s){return!(!s||!s.useExisting)}(s))c=()=>Bt(he(s.useExisting));else{const d=he(s&&(s.useClass||s.provide));if(!function jw(s){return!!s.deps}(s))return gi(d)||Ld(d);c=()=>new d(...un(s.deps))}return c}function ef(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Bw(s){return null!==s&&"object"==typeof s&&ve in s}function tf(s){return"function"==typeof s}let Za=(()=>{class s{static create(a,c){var d;if(Array.isArray(a))return El({name:""},c,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return El({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=Qo,s.NULL=new sv,s.\u0275prov=ln({token:s,providedIn:"any",factory:()=>Bt(Fd)}),s.__NG_ELEMENT_ID__=-1,s})();function L1(s,o){Es(fr(s)[1],mi())}function Tm(s){let o=function Xw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;o;){let d;if(Pi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Je(903,"");d=o.\u0275dir}if(d){if(a){c.push(d);const v=s;v.inputs=Sm(s.inputs),v.declaredInputs=Sm(s.declaredInputs),v.outputs=Sm(s.outputs);const D=d.hostBindings;D&&tE(s,D);const N=d.viewQuery,V=d.contentQueries;if(N&&B1(s,N),V&&eE(s,V),De(s.inputs,d.inputs),De(s.declaredInputs,d.declaredInputs),De(s.outputs,d.outputs),Pi(d)&&d.data.animation){const H=s.data;H.animation=(H.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const D=p[v];D&&D.ngInherit&&D(s),D===Tm&&(a=!1)}}o=Object.getPrototypeOf(o)}!function V1(s){let o=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ee(d.hostAttrs,a=ee(a,d.hostAttrs))}}(c)}function Sm(s){return s===Ri?{}:s===$t?[]:s}function B1(s,o){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function eE(s,o){const a=s.contentQueries;s.contentQueries=a?(c,d,p)=>{o(c,d,p),a(c,d,p)}:o}function tE(s,o){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}let Nm=null;function zl(){if(!Nm){const s=Tn.Symbol;if(s&&s.iterator)Nm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const c=o[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Nm=c)}}}return Nm}function Sp(s){return!!Ap(s)&&(Array.isArray(s)||!(s instanceof Map)&&zl()in s)}function Ap(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Il(s,o,a){return s[o]=a}function Bs(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function xc(s,o,a,c){const d=Bs(s,o,a);return Bs(s,o+1,c)||d}function xm(s,o,a,c){const d=Xe();return Bs(d,Ps(),o)&&(hn(),function Si(s,o,a,c,d,p){const v=Ze(s,o);qn(o[11],v,p,s.value,a,c,d)}(Li(),d,s,o,a,c)),xm}function Hd(s,o,a,c){return Bs(s,Ps(),a)?o+Re(a)+c:wn}function oE(s,o,a,c,d,p,v,D){const N=Xe(),V=hn(),H=s+20,Q=V.firstCreatePass?function sE(s,o,a,c,d,p,v,D,N){const V=o.consts,H=Sd(o,s,4,v||null,Pn(V,D));Jy(o,a,H,Pn(V,N)),Es(o,H);const Q=H.tViews=Md(2,H,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,V);return null!==o.queries&&(o.queries.template(o,H),Q.queries=o.queries.embeddedTView(H)),H}(H,V,N,o,a,c,d,p,v):V.data[H];cs(Q,!1);const ae=N[11].createComment("");am(V,N,ae,Q),Fr(ae,N),ko(N,N[H]=Br(ae,N,ae,Q)),Vo(Q)&&gm(V,N,Q),null!=v&&mm(N,Q,D)}function aE(s){return yn(function Fa(){return Rt.lFrame.contextLView}(),20+s)}function lf(s,o=At.Default){const a=Xe();return null===a?Bt(s,o):Pt(mi(),a,he(s),o)}function pE(){throw new Error("invalid")}function Vm(s,o,a){const c=Xe();return Bs(c,Ps(),o)&&na(hn(),Li(),c,s,o,c[11],a,!1),Vm}function Op(s,o,a,c,d){const v=d?"class":"style";Pw(s,a,o.inputs[v],v,c)}function Su(s,o,a,c){const d=Xe(),p=hn(),v=20+s,D=d[11],N=d[v]=Lr(D,o,function Ju(){return Rt.lFrame.currentNamespace}()),V=p.firstCreatePass?function bv(s,o,a,c,d,p,v){const D=o.consts,V=Sd(o,s,2,d,Pn(D,p));return Jy(o,a,V,Pn(D,v)),null!==V.attrs&&Ip(V,V.attrs,!1),null!==V.mergedAttrs&&Ip(V,V.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,V),V}(v,p,d,0,o,a,c):p.data[v];cs(V,!0);const H=V.mergedAttrs;null!==H&&T(D,N,H);const Q=V.classes;null!==Q&&xy(D,N,Q);const ae=V.styles;return null!==ae&&Qn(D,N,ae),64!=(64&V.flags)&&am(p,d,N,V),0===function ks(){return Rt.lFrame.elementDepthCount}()&&Fr(N,d),function no(){Rt.lFrame.elementDepthCount++}(),Vo(V)&&(gm(p,d,V),function Cw(s,o,a){if(wo(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,V,d)),null!==c&&mm(d,V),Su}function Zd(){let s=mi();Wo()?Pa():(s=s.parent,cs(s,!1));const o=s;!function Qr(){Rt.lFrame.elementDepthCount--}();const a=hn();return a.firstCreatePass&&(Es(a,s),wo(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ao(s){return 0!=(16&s.flags)}(o)&&Op(a,o,Xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function va(s){return 0!=(32&s.flags)}(o)&&Op(a,o,Xe(),o.stylesWithoutHost,!1),Zd}function Rp(s,o,a,c){return Su(s,o,a,c),Zd(),Rp}function Dv(){return Xe()}function kp(s){return!!s&&"function"==typeof s.then}function gE(s){return!!s&&"function"==typeof s.subscribe}const Iv=gE;function Tv(s,o,a,c){const d=Xe(),p=hn(),v=mi();return function Kd(s,o,a,c,d,p,v,D){const N=Vo(c),H=s.firstCreatePass&&nv(s),Q=o[8],ae=Dp(o);let Ee=!0;if(3&c.type||D){const wt=Ze(c,o),Ft=D?D(wt):wt,tt=ae.length,Jt=D?Bn=>D(O(Bn[c.index])):c.index;if(Hn(a)){let Bn=null;if(!D&&N&&(Bn=function J1(s,o,a,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===c){const D=o[7],N=d[p+2];return D.length>N?D[N]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==Bn)(Bn.__ngLastListenerFn__||Bn).__ngNextListenerFn__=p,Bn.__ngLastListenerFn__=p,Ee=!1;else{p=Pp(c,o,Q,p,!1);const vi=a.listen(Ft,d,p);ae.push(p,vi),H&&H.push(d,Jt,tt,tt+1)}}else p=Pp(c,o,Q,p,!0),Ft.addEventListener(d,p,v),ae.push(p),H&&H.push(d,Jt,tt,v)}else p=Pp(c,o,Q,p,!1);const ze=c.outputs;let ut;if(Ee&&null!==ze&&(ut=ze[d])){const wt=ut.length;if(wt)for(let Ft=0;Ft<wt;Ft+=2){const Lo=o[ut[Ft]][ut[Ft+1]].subscribe(p),hh=ae.length;ae.push(p,Lo),H&&H.push(d,c.index,hh,-(hh+1))}}}(p,d,d[11],v,s,o,!!a,c),Tv}function Yd(s,o,a,c){try{return!1!==a(c)}catch(d){return rv(s,d),!1}}function Pp(s,o,a,c,d){return function p(v){if(v===Function)return c;const D=2&s.flags?an(s.index,o):o;0==(32&o[2])&&Xy(D);let N=Yd(o,0,c,v),V=p.__ngNextListenerFn__;for(;V;)N=Yd(o,0,V,v)&&N,V=V.__ngNextListenerFn__;return d&&!1===N&&(v.preventDefault(),v.returnValue=!1),N}}function Fp(s=1){return function Fl(s){return(Rt.lFrame.contextLView=function Ll(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function mE(s,o){let a=null;const c=function yp(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===c?Oy(s,p,!0):wd(c,p))return d}else a=d}return a}function Av(s){const o=Xe()[16][6];if(!o.projection){const c=o.projection=Oo(s?s.length:1,null),d=c.slice();let p=o.child;for(;null!==p;){const v=s?mE(p,s):0;null!==v&&(d[v]?d[v].projectionNext=p:c[v]=p,d[v]=p),p=p.next}}}function Nv(s,o=0,a){const c=Xe(),d=hn(),p=Sd(d,20+s,16,null,a||null);null===p.projection&&(p.projection=o),Pa(),64!=(64&p.flags)&&function gw(s,o,a){hu(o[11],0,o,a,je(s,a,o),hw(a.parent||o[6],a,o))}(d,c,p)}function xv(s,o,a){return cf(s,"",o,"",a),xv}function cf(s,o,a,c,d){const p=Xe(),v=Hd(p,o,a,c);return v!==wn&&na(hn(),Li(),p,s,v,p[11],d,!1),cf}function EE(s,o,a,c,d){const p=s[a+1],v=null===o;let D=c?qa(p):wl(p),N=!1;for(;0!==D&&(!1===N||v);){const H=s[D+1];Mv(s[D],o)&&(N=!0,s[D+1]=c?lm(H):gu(H)),D=c?qa(H):wl(H)}N&&(s[a+1]=c?gu(p):lm(p))}function Mv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&hl(s,o)>=0}const gs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ov(s){return s.substring(gs.key,gs.keyEnd)}function uf(s,o){const a=gs.textEnd;return a===o?-1:(o=gs.keyEnd=function CE(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,gs.key=o,a),Au(s,o,a))}function Au(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function zm(s,o,a){return Al(s,o,a,!1),zm}function df(s,o){return Al(s,o,null,!0),df}function Fv(s){!function Nl(s,o,a,c){const d=hn(),p=Dr(2);d.firstUpdatePass&&TE(d,null,p,c);const v=Xe();if(a!==wn&&Bs(v,p,a)){const D=d.data[cr()];if(Zm(D,c)&&!IE(d,p)){let N=c?D.classesWithoutHost:D.stylesWithoutHost;null!==N&&(a=Ce(N,a||"")),Op(d,D,v,a,c)}else!function jv(s,o,a,c,d,p,v,D){d===wn&&(d=$t);let N=0,V=0,H=0<d.length?d[0]:null,Q=0<p.length?p[0]:null;for(;null!==H||null!==Q;){const ae=N<d.length?d[N+1]:void 0,Ee=V<p.length?p[V+1]:void 0;let ut,ze=null;H===Q?(N+=2,V+=2,ae!==Ee&&(ze=Q,ut=Ee)):null===Q||null!==H&&H<Q?(N+=2,ze=H):(V+=2,ze=Q,ut=Ee),null!==ze&&qm(s,o,a,c,ze,ut,v,D),H=N<d.length?d[N]:null,Q=V<p.length?p[V]:null}}(d,D,v,v[11],v[p+1],v[p+1]=function Bv(s,o,a){if(null==a||""===a)return $t;const c=[],d=uo(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(c,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(c,p,d[p]);else"string"==typeof d&&o(c,d);return c}(s,o,a),c,p)}}(Is,Zl,s,!0)}function Zl(s,o){for(let a=function Hm(s){return function Wm(s){gs.key=0,gs.keyEnd=0,gs.value=0,gs.valueEnd=0,gs.textEnd=s.length}(s),uf(s,Au(s,0,gs.textEnd))}(o);a>=0;a=uf(o,a))Is(s,Ov(o),!0)}function Al(s,o,a,c){const d=Xe(),p=hn(),v=Dr(2);p.firstUpdatePass&&TE(p,s,v,c),o!==wn&&Bs(d,v,o)&&qm(p,p.data[cr()],d,d[11],s,d[v+1]=function nI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=be(uo(s)))),s}(o,a),c,v)}function IE(s,o){return o>=s.expandoStartIndex}function TE(s,o,a,c){const d=s.data;if(null===d[a+1]){const p=d[cr()],v=IE(s,a);Zm(p,c)&&null===o&&!v&&(o=!1),o=function Lp(s,o,a,c){const d=function Io(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Rc(a=ff(null,s,o,a,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=ff(d,s,o,a,c),null===p){let N=function Lv(s,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==wl(c))return s[qa(c)]}(s,o,c);void 0!==N&&Array.isArray(N)&&(N=ff(null,s,o,N[1],c),N=Rc(N,o.attrs,c),function hf(s,o,a,c){s[qa(a?o.classBindings:o.styleBindings)]=c}(s,o,c,N))}else p=function Vv(s,o,a){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Rc(c,s[p].hostAttrs,a);return Rc(c,o.attrs,a)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,c),function Q1(s,o,a,c,d,p){let v=p?o.classBindings:o.styleBindings,D=qa(v),N=wl(v);s[c]=a;let H,V=!1;if(Array.isArray(a)){const Q=a;H=Q[1],(null===H||hl(Q,H)>0)&&(V=!0)}else H=a;if(d)if(0!==N){const ae=qa(s[D+1]);s[c+1]=bl(ae,D),0!==ae&&(s[ae+1]=Cd(s[ae+1],c)),s[D+1]=function Ry(s,o){return 131071&s|o<<17}(s[D+1],c)}else s[c+1]=bl(D,0),0!==D&&(s[D+1]=Cd(s[D+1],c)),D=c;else s[c+1]=bl(N,0),0===D?D=c:s[N+1]=Cd(s[N+1],c),N=c;V&&(s[c+1]=gu(s[c+1])),EE(s,H,c,!0),EE(s,H,c,!1),function X1(s,o,a,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&hl(p,o)>=0&&(a[c+1]=lm(a[c+1]))}(o,H,s,c,p),v=bl(D,N),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,c)}}function ff(s,o,a,c,d){let p=null;const v=a.directiveEnd;let D=a.directiveStylingLast;for(-1===D?D=a.directiveStart:D++;D<v&&(p=o[D],c=Rc(c,p.hostAttrs,d),p!==s);)D++;return null!==s&&(a.directiveStylingLast=D),c}function Rc(s,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Is(s,v,!!a||o[++p]))}return void 0===s?null:s}function qm(s,o,a,c,d,p,v,D){if(!(3&o.type))return;const N=s.data,V=N[D+1];Vp(function ky(s){return 1==(1&s)}(V)?kc(N,o,a,d,wl(V),v):void 0)||(Vp(p)||function Ed(s){return 2==(2&s)}(V)&&(p=kc(N,null,a,d,D,v)),function mp(s,o,a,c,d){const p=Hn(s);if(o)d?p?s.addClass(a,c):a.classList.add(c):p?s.removeClass(a,c):a.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:Fe.DashCase;if(null==d)p?s.removeStyle(a,c,v):a.style.removeProperty(c);else{const D="string"==typeof d&&d.endsWith("!important");D&&(d=d.slice(0,-10),v|=Fe.Important),p?s.setStyle(a,c,d,v):a.style.setProperty(c,d,D?"important":"")}}}(c,v,Pe(cr(),a),d,p))}function kc(s,o,a,c,d,p){const v=null===o;let D;for(;d>0;){const N=s[d],V=Array.isArray(N),H=V?N[1]:N,Q=null===H;let ae=a[d+1];ae===wn&&(ae=Q?$t:void 0);let Ee=Q?ed(ae,c):H===c?ae:void 0;if(V&&!Vp(Ee)&&(Ee=ed(N,c)),Vp(Ee)&&(D=Ee,v))return D;const ze=s[d+1];d=v?qa(ze):wl(ze)}if(null!==o){let N=p?o.residualClasses:o.residualStyles;null!=N&&(D=ed(N,c))}return D}function Vp(s){return void 0!==s}function Zm(s,o){return 0!=(s.flags&(o?16:32))}function SE(s,o=""){const a=Xe(),c=hn(),d=s+20,p=c.firstCreatePass?Sd(c,d,1,o,null):c.data[d],v=a[d]=Ic(a[11],o);am(c,a,v,p),cs(p,!1)}function Bp(s){return Km("",s,""),Bp}function Km(s,o,a){const c=Xe(),d=Hd(c,s,o,a);return d!==wn&&Wl(c,cr(),d),Km}function Up(s,o,a,c,d){const p=Xe(),v=function Mc(s,o,a,c,d,p){const D=xc(s,Xr(),a,d);return Dr(2),D?o+Re(a)+c+Re(d)+p:wn}(p,s,o,a,c,d);return v!==wn&&Wl(p,cr(),v),Up}function Qv(s,o,a){const c=Xe();return Bs(c,Ps(),o)&&na(hn(),Li(),c,s,o,c[11],a,!0),Qv}const Pc=void 0;var aI=["en",[["a","p"],["AM","PM"],Pc],[["AM","PM"],Pc,Pc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pc,"{1} 'at' {0}",Pc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xv(s){const a=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let eh={};function n_(s){const o=function cI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=t0(o);if(a)return a;const c=o.split("-")[0];if(a=t0(c),a)return a;if("en"===c)return aI;throw new Error(`Missing locale data for the locale "${s}".`)}function e0(s){return n_(s)[sn.PluralCase]}function t0(s){return s in eh||(eh[s]=Tn.ng&&Tn.ng.common&&Tn.ng.common.locales&&Tn.ng.common.locales[s]),eh[s]}var sn=(()=>((sn=sn||{})[sn.LocaleId=0]="LocaleId",sn[sn.DayPeriodsFormat=1]="DayPeriodsFormat",sn[sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",sn[sn.DaysFormat=3]="DaysFormat",sn[sn.DaysStandalone=4]="DaysStandalone",sn[sn.MonthsFormat=5]="MonthsFormat",sn[sn.MonthsStandalone=6]="MonthsStandalone",sn[sn.Eras=7]="Eras",sn[sn.FirstDayOfWeek=8]="FirstDayOfWeek",sn[sn.WeekendRange=9]="WeekendRange",sn[sn.DateFormat=10]="DateFormat",sn[sn.TimeFormat=11]="TimeFormat",sn[sn.DateTimeFormat=12]="DateTimeFormat",sn[sn.NumberSymbols=13]="NumberSymbols",sn[sn.NumberFormats=14]="NumberFormats",sn[sn.CurrencyCode=15]="CurrencyCode",sn[sn.CurrencySymbol=16]="CurrencySymbol",sn[sn.CurrencyName=17]="CurrencyName",sn[sn.Currencies=18]="Currencies",sn[sn.Directionality=19]="Directionality",sn[sn.PluralCase=20]="PluralCase",sn[sn.ExtraData=21]="ExtraData",sn))();const uI=["zero","one","two","few","many"],mf="en-US",i_={marker:"element"},_f={marker:"ICU"};var Hr=(()=>((Hr=Hr||{})[Hr.SHIFT=2]="SHIFT",Hr[Hr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Hr[Hr.COMMENT=2]="COMMENT",Hr))();let s0=mf;function VE(s,o,a){const c=o.insertBeforeIndex,d=Array.isArray(c)?c[0]:c;return null===d?Ay(s,0,a):O(a[d])}function r_(s,o,a,c,d){const p=o.insertBeforeIndex;if(Array.isArray(p)){let v=c,D=null;if(3&o.type||(D=v,v=d),null!==v&&0==(2&o.flags))for(let N=1;N<p.length;N++)pr(s,v,a[p[N]],D,!1)}}function BE(s,o){if(s.push(o),s.length>1)for(let a=s.length-2;a>=0;a--){const c=s[a];s_(c)||dI(c,o)&&null===a0(c)&&hI(c,o.index)}}function s_(s){return!(64&s.type)}function dI(s,o){return s_(o)||s.index>o.index}function a0(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function hI(s,o){const a=s.insertBeforeIndex;Array.isArray(a)?a[0]=o:(ta(VE,r_),s.insertBeforeIndex=o)}function th(s,o){const a=s.data[o];return null===a||"string"==typeof a?null:a.hasOwnProperty("currentCaseLViewIndex")?a:a.value}function yf(s,o,a){const c=Ad(s,a,64,null,null);return BE(o,c),c}function Hp(s,o){const a=o[s.currentCaseLViewIndex];return null===a?a:a<0?~a:a}function o_(s){return s>>>17}function UE(s){return(131070&s)>>>1}let nh=0,Gp=0;function l_(s,o,a,c){const d=a[11];let v,p=null;for(let D=0;D<o.length;D++){const N=o[D];if("string"==typeof N){const V=o[++D];null===a[V]&&(a[V]=Ic(d,N))}else if("number"==typeof N)switch(1&N){case 0:const V=o_(N);let H,Q;if(null===p&&(p=V,v=om(d,c)),V===p?(H=c,Q=v):(H=null,Q=O(a[V])),null!==Q){const ut=UE(N);pr(d,Q,a[ut],H,!1);const Ft=th(s,ut);if(null!==Ft&&"object"==typeof Ft){const tt=Hp(Ft,a);null!==tt&&l_(s,Ft.create[tt],a,a[Ft.anchorIdx])}}break;case 1:const Ee=o[++D],ze=o[++D];qn(d,Pe(N>>>1,a),null,null,Ee,ze,null)}else switch(N){case _f:const V=o[++D],H=o[++D];null===a[H]&&Fr(a[H]=Uh(d,V),a);break;case i_:const Q=o[++D],ae=o[++D];null===a[ae]&&Fr(a[ae]=Lr(d,Q,null),a)}}}function jE(s,o,a,c,d){for(let p=0;p<a.length;p++){const v=a[p],D=a[++p];if(v&d){let N="";for(let V=p+1;V<=p+D;V++){const H=a[V];if("string"==typeof H)N+=H;else if("number"==typeof H)if(H<0)N+=Re(o[c-H]);else{const Q=H>>>2;switch(3&H){case 1:const ae=a[++V],Ee=a[++V],ze=s.data[Q];"string"==typeof ze?qn(o[11],o[Q],null,ze,ae,N,Ee):na(s,ze,o,ae,N,o[11],Ee,!1);break;case 0:const ut=o[Q];null!==ut&&hp(o[11],ut,N);break;case 2:gI(s,th(s,Q),o,N);break;case 3:c_(s,th(s,Q),c,o)}}}}else{const N=a[p+1];if(N>0&&3==(3&N)){const H=th(s,N>>>2);o[H.currentCaseLViewIndex]<0&&c_(s,H,c,o)}}p+=D}}function c_(s,o,a,c){let d=c[o.currentCaseLViewIndex];if(null!==d){let p=nh;d<0&&(d=c[o.currentCaseLViewIndex]=~d,p=-1),jE(s,c,o.update[d],a,p)}}function gI(s,o,a,c){const d=function mI(s,o){let a=s.cases.indexOf(o);if(-1===a)switch(s.type){case 1:{const c=function n0(s,o){const a=e0(o)(parseInt(s,10)),c=uI[a];return void 0!==c?c:"other"}(o,function LE(){return s0}());a=s.cases.indexOf(c),-1===a&&"other"!==c&&(a=s.cases.indexOf("other"));break}case 0:a=s.cases.indexOf("other")}return-1===a?null:a}(o,c);if(Hp(o,a)!==d&&(u_(s,o,a),a[o.currentCaseLViewIndex]=null===d?null:~d,null!==d)){const v=a[o.anchorIdx];v&&l_(s,o.create[d],a,v)}}function u_(s,o,a){let c=Hp(o,a);if(null!==c){const d=o.remove[c];for(let p=0;p<d.length;p++){const v=d[p];if(v>0){const D=Pe(v,a);null!==D&&Ny(a[11],D)}else u_(s,th(s,~v),a)}}}function d0(){const s=[];let a,c,o=-1;function p(D,N){o=0;const V=Hp(D,N);c=null!==V?D.remove[V]:$t}function v(){if(o<c.length){const D=c[o++];return D>0?a[D]:(s.push(o,c),p(a[1].data[~D],a),v())}return 0===s.length?null:(c=s.pop(),o=s.pop(),v())}return function d(D,N){for(a=N;s.length;)s.pop();return p(D.value,N),v}}const vf=/\ufffd(\d+):?\d*\ufffd/gi,h0=/\ufffd(\d+)\ufffd/,d_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,bI=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$E=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,WE=/\uE500/g;function p0(s,o,a,c,d,p,v){const D=Nd(s,c,1,null);let N=D<<Hr.SHIFT,V=$o();o===V&&(V=null),null===V&&(N|=Hr.APPEND_EAGERLY),v&&(N|=Hr.COMMENT,function tn(s){void 0===pt&&(pt=s())}(d0)),d.push(N,null===p?"":p);const H=Ad(s,D,v?32:1,null===p?"":p,null);BE(a,H);const Q=H.index;return cs(H,!1),null!==V&&o!==V&&function c0(s,o){let a=s.insertBeforeIndex;null===a?(ta(VE,r_),a=s.insertBeforeIndex=[null,o]):(function fe(s,o,a){s!=o&&Tt(a,s,o,"==")}(Array.isArray(a),!0,"Expecting array here"),a.push(o))}(V,Q),H}function h_(s,o,a,c,d,p,v){const D=v.match(vf),N=p0(s,o,a,p,c,D?null:v,!1);D&&bf(d,v,N.index,null,0,null)}function bf(s,o,a,c,d,p){const v=s.length,D=v+1;s.push(null,null);const N=v+2,V=o.split(vf);let H=0;for(let Q=0;Q<V.length;Q++){const ae=V[Q];if(1&Q){const Ee=d+parseInt(ae,10);s.push(-1-Ee),H|=zE(Ee)}else""!==ae&&s.push(ae)}return s.push(a<<2|(c?1:0)),c&&s.push(c,p),s[v]=H,s[D]=s.length-N,H}function zE(s){return 1<<Math.min(s,31)}function f_(s){let o,p,a="",c=0,d=!1;for(;null!==(o=bI.exec(s));)d?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,d=!1):(a+=s.substring(c,o.index+o[0].length),p=o[1],d=!0);return a+=s.substr(c),a}function p_(s,o,a,c,d,p){let v=0;const D={type:d.type,currentCaseLViewIndex:Nd(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function KE(s,o,a){s.push(zE(o.mainBinding),2,-1-o.mainBinding,a<<2|2)})(a,d,p),function l0(s,o,a){const c=s.data[o];null===c?s.data[o]=a:c.value=a}(s,p,D);const N=d.values;for(let V=0;V<N.length;V++){const H=N[V],Q=[];for(let ae=0;ae<H.length;ae++){const Ee=H[ae];if("string"!=typeof Ee){const ze=Q.push(Ee)-1;H[ae]=`\x3c!--\ufffd${ze}\ufffd--\x3e`}}v=g_(s,D,o,a,c,d.cases[V],H.join(""),Q)|v}v&&function y0(s,o,a){s.push(o,1,a<<2|3)}(a,v,p)}function g0(s){const o=[],a=[];let c=1,d=0;const p=$p(s=s.replace(d_,function(v,D,N){return c="select"===N?0:1,d=parseInt(D.substr(1),10),""}));for(let v=0;v<p.length;){let D=p[v++].trim();1===c&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&o.push(D);const N=$p(p[v++]);o.length>a.length&&a.push(N)}return{type:c,mainBinding:d,cases:o,values:a}}function $p(s){if(!s)return[];let o=0;const a=[],c=[],d=/[{}]/g;let p;for(d.lastIndex=0;p=d.exec(s);){const D=p.index;if("}"==p[0]){if(a.pop(),0==a.length){const N=s.substring(o,D);d_.test(N)?c.push(g0(N)):c.push(N),o=D+1}}else{if(0==a.length){const N=s.substring(o,D);c.push(N),o=D+1}a.push("{")}}const v=s.substring(o);return c.push(v),c}function g_(s,o,a,c,d,p,v,D){const N=[],V=[],H=[];o.cases.push(p),o.create.push(N),o.remove.push(V),o.update.push(H);const ae=function yc(s){const o=new vc(s);return function Cy(){try{return!!(new window.DOMParser).parseFromString($a(""),"text/html")}catch(s){return!1}}()?new Zf(o):o}(Yr()).getInertBodyElement(v),Ee=function Qf(s){return"content"in s&&function Jg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(ae)||ae;return Ee?m_(s,o,a,c,N,V,H,Ee,d,D,0):0}function m_(s,o,a,c,d,p,v,D,N,V,H){let Q=0,ae=D.firstChild;for(;ae;){const Ee=Nd(s,a,1,null);switch(ae.nodeType){case Node.ELEMENT_NODE:const ze=ae,ut=ze.tagName.toLowerCase();if(Kf.hasOwnProperty(ut)){xu(d,i_,ut,N,Ee),s.data[Ee]=ut;const Jt=ze.attributes;for(let Bn=0;Bn<Jt.length;Bn++){const vi=Jt.item(Bn),Lo=vi.name.toLowerCase();vi.value.match(vf)?Mh.hasOwnProperty(Lo)&&bf(v,vi.value,Ee,vi.name,0,xh[Lo]?ml:Yf[Lo]?dd:null):v0(d,Ee,vi)}Q=m_(s,o,a,c,d,p,v,ae,Ee,V,H+1)|Q,m0(p,Ee,H)}break;case Node.TEXT_NODE:const wt=ae.textContent||"",Ft=wt.match(vf);xu(d,null,Ft?"":wt,N,Ee),m0(p,Ee,H),Ft&&(Q=bf(v,wt,Ee,null,0,null)|Q);break;case Node.COMMENT_NODE:const tt=h0.exec(ae.textContent||"");if(tt){const Bn=V[parseInt(tt[1],10)];xu(d,_f,"",N,Ee),p_(s,a,c,N,Bn,Ee),_0(p,Ee,H)}}ae=ae.nextSibling}return Q}function m0(s,o,a){0===a&&s.push(o)}function _0(s,o,a){0===a&&(s.push(~o),s.push(o))}function xu(s,o,a,c,d){null!==o&&s.push(o),s.push(a,d,function Fc(s,o,a){return s|o<<17|a<<1}(0,c,d))}function v0(s,o,a){s.push(o<<1|1,a.name,a.value)}function XE(s,o,a=-1){const c=hn(),d=Xe(),p=20+s,v=Pn(c.consts,o),D=$o();c.firstCreatePass&&function f0(s,o,a,c,d,p){const v=$o(),D=[],N=[],V=[[]];d=function ZE(s,o){if(function qE(s){return-1===s}(o))return f_(s);{const a=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return f_(s.substring(a,c))}}(d,p);const H=function wI(s){return s.replace(WE," ")}(d).split($E);for(let Q=0;Q<H.length;Q++){let ae=H[Q];if(0==(1&Q)){const Ee=$p(ae);for(let ze=0;ze<Ee.length;ze++){let ut=Ee[ze];if(0==(1&ze)){const wt=ut;""!==wt&&h_(s,v,V[0],D,N,a,wt)}else{const wt=ut;if("object"!=typeof wt)throw new Error(`Unable to parse ICU expression in "${d}" message.`);p_(s,a,N,o,wt,p0(s,v,V[0],a,D,"",!0).index)}}}else{const Ee=47===ae.charCodeAt(0),ut=(ae.charCodeAt(Ee?1:0),20+Number.parseInt(ae.substring(Ee?2:1)));if(Ee)V.shift(),cs($o(),!1);else{const wt=yf(s,V[0],ut);V.unshift([]),cs(wt,!0)}}}s.data[c]={create:D,update:N}}(c,null===D?0:D.index,d,p,v,a);const N=c.data[p],H=rt(c,D===d[6]?null:D,d);(function pI(s,o,a,c){const d=s[11];for(let p=0;p<o.length;p++){const v=o[p++],D=o[p],N=(v&Hr.COMMENT)===Hr.COMMENT,V=(v&Hr.APPEND_EAGERLY)===Hr.APPEND_EAGERLY,H=v>>>Hr.SHIFT;let Q=s[H];null===Q&&(Q=s[H]=N?d.createComment(D):Ic(d,D)),V&&null!==a&&pr(d,a,Q,c,!1)}})(d,N.create,H,D&&8&D.type?d[D.index]:null),Va(!0)}function __(s,o,a){XE(s,o,a),function b0(){Va(!1)}()}function y_(s){return function u0(s){s&&(nh|=1<<Math.min(Gp,31)),Gp++}(Bs(Xe(),Ps(),s)),y_}function w0(s){!function fI(s,o,a){if(Gp>0){const c=s.data[a];jE(s,o,Array.isArray(c)?c:c.update,Xr()-Gp-1,nh)}nh=0,Gp=0}(hn(),Xe(),s+20)}function b_(s,o,a,c,d){if(s=he(s),Array.isArray(s))for(let p=0;p<s.length;p++)b_(s[p],o,a,c,d);else{const p=hn(),v=Xe();let D=tf(s)?s:he(s.provide),N=lv(s);const V=mi(),H=1048575&V.providerIndexes,Q=V.directiveStart,ae=V.providerIndexes>>20;if(tf(s)||!s.multi){const Ee=new Rr(N,d,lf),ze=E0(D,o,d?H:H+ae,Q);-1===ze?(se(M(V,v),p,D),w_(p,s,o.length),o.push(D),V.directiveStart++,V.directiveEnd++,d&&(V.providerIndexes+=1048576),a.push(Ee),v.push(Ee)):(a[ze]=Ee,v[ze]=Ee)}else{const Ee=E0(D,o,H+ae,Q),ze=E0(D,o,H,H+ae),ut=Ee>=0&&a[Ee],wt=ze>=0&&a[ze];if(d&&!wt||!d&&!ut){se(M(V,v),p,D);const Ft=function tC(s,o,a,c,d){const p=new Rr(s,a,lf);return p.multi=[],p.index=o,p.componentProviders=0,wf(p,d,c&&!a),p}(d?go:rr,a.length,d,c,N);!d&&wt&&(a[ze].providerFactory=Ft),w_(p,s,o.length,0),o.push(D),V.directiveStart++,V.directiveEnd++,d&&(V.providerIndexes+=1048576),a.push(Ft),v.push(Ft)}else w_(p,s,Ee>-1?Ee:ze,wf(a[d?ze:Ee],N,!d&&c));!d&&c&&wt&&a[ze].componentProviders++}}}function w_(s,o,a,c){const d=tf(o),p=function Uw(s){return!!s.useClass}(o);if(d||p){const N=(p?he(o.useClass):o).prototype.ngOnDestroy;if(N){const V=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const H=V.indexOf(a);-1===H?V.push(a,[c,N]):V[H+1].push(c,N)}else V.push(a,N)}}}function wf(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function E0(s,o,a,c){for(let d=a;d<c;d++)if(o[d]===s)return d;return-1}function rr(s,o,a,c){return Qa(this.multi,[])}function go(s,o,a,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=us(a,a[1],this.providerFactory.index,c);p=D.slice(0,v),Qa(d,p);for(let N=v;N<D.length;N++)p.push(D[N])}else p=[],Qa(d,p);return p}function Qa(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function nC(s,o=[]){return a=>{a.providersResolver=(c,d)=>function Xn(s,o,a){const c=hn();if(c.firstCreatePass){const d=Pi(s);b_(a,c.data,c.blueprint,d,!0),b_(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class C0{}class xI{resolveComponentFactory(o){throw function iC(s){const o=Error(`No component factory found for ${be(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let C_=(()=>{class s{}return s.NULL=new xI,s})();function gr(){return Wp(mi(),Xe())}function Wp(s,o){return new D_(Ze(s,o))}let D_=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=gr,s})();function ms(s){return s instanceof D_?s.nativeElement:s}class oC{}let OI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function RI(){const s=Xe(),a=an(mi().index,s);return function aC(s){return s[11]}(Nr(a)?a:s)}(),s})(),kI=(()=>{class s{}return s.\u0275prov=ln({token:s,providedIn:"root",factory:()=>null}),s})();class lC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const cC=new lC("13.2.7"),uC={};function I_(s,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(O(p)),qr(p))for(let D=10;D<p.length;D++){const N=p[D],V=N[1].firstChild;null!==V&&I_(N[1],N,V,c)}const v=a.type;if(8&v)I_(s,o,a.child,c);else if(32&v){const D=Et(a,o);let N;for(;N=D();)c.push(N)}else if(16&v){const D=Ln(o,a);if(Array.isArray(D))c.push(...D);else{const N=_i(o[16]);I_(N[1],N,D,c,!0)}}a=d?a.projectionNext:a.next}return c}class zp{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return I_(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(qr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(pp(o,c),lo(a,c))}this._attachedToViewContainer=!1}jt(this._lView[1],this._lView)}onDestroy(o){vu(this._lView[1],this._lView,null,o)}markForCheck(){Xy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){tv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function yi(s,o,a){io(!0);try{tv(s,o,a)}finally{io(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fp(s,o){nn(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Je(902,"");this._appRef=o}}class dC extends zp{constructor(o){super(o),this._view=o}detectChanges(){kw(this._view)}checkNoChanges(){!function A1(s){io(!0);try{kw(s)}finally{io(!1)}}(this._view)}get context(){return null}}class Kl extends C_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=mn(o);return new Ef(a,this.ngModule)}}function PI(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Ef extends C0{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function vt(s){return s.map(vw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return PI(this.componentDef.inputs)}get outputs(){return PI(this.componentDef.outputs)}create(o,a,c,d){const p=(d=d||this.ngModule)?function rh(s,o){return{get:(a,c,d)=>{const p=s.get(a,uC,d);return p!==uC||c===uC?p:o.get(a,c,d)}}}(o,d.injector):o,v=p.get(oC,R),D=p.get(kI,null),N=v.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",H=c?function Od(s,o,a){if(Hn(s))return s.selectRootElement(o,a===zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(N,c,this.componentDef.encapsulation):Lr(v.createRenderer(null,this.componentDef),V,function Yl(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(V)),Q=this.componentDef.onPush?576:528,ae=function Qw(s,o){return{components:[],scheduler:s||cp,clean:Cp,playerHandler:o||null,flags:0}}(),Ee=Md(0,null,null,1,0,null,null,null,null,null),ze=po(null,Ee,ae,Q,null,null,v,N,D,p);let ut,wt;ro(ze);try{const Ft=function Yw(s,o,a,c,d,p){const v=a[1];a[20]=s;const N=Sd(v,20,2,"#host",null),V=N.mergedAttrs=o.hostAttrs;null!==V&&(Ip(N,V,!0),null!==s&&(T(d,s,V),null!==N.classes&&xy(d,s,N.classes),null!==N.styles&&Qn(d,s,N.styles)));const H=c.createRenderer(s,o),Q=po(a,Ky(o),null,o.onPush?64:16,a[20],N,c,H,p||null,null);return v.firstCreatePass&&(se(M(N,a),v,o.type),Qy(v,N),Yh(N,a.length,1)),ko(a,Q),a[20]=Q}(H,this.componentDef,ze,v,N);if(H)if(c)T(N,H,["ng-version",cC.full]);else{const{attrs:tt,classes:Jt}=function bw(s){const o=[],a=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&a.push(p);else{if(!Ys(d))break;d=p}c++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);tt&&T(N,H,tt),Jt&&Jt.length>0&&xy(N,H,Jt.join(" "))}if(wt=An(Ee,20),void 0!==a){const tt=wt.projection=[];for(let Jt=0;Jt<this.ngContentSelectors.length;Jt++){const Bn=a[Jt];tt.push(null!=Bn?Array.from(Bn):null)}}ut=function Jw(s,o,a,c,d){const p=a[1],v=function _m(s,o,a){const c=mi();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),vm(s,c,o,Nd(s,o,1,null),a));const d=us(o,s,c.directiveStart,c);Fr(d,o);const p=Ze(c,o);return p&&Fr(p,o),d}(p,a,o);if(c.components.push(v),s[8]=v,d&&d.forEach(N=>N(v,o)),o.contentQueries){const N=mi();o.contentQueries(1,v,N.directiveStart)}const D=mi();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zo(D.index),ym(a[1],D,0,D.directiveStart,D.directiveEnd,o),Kh(o,v)),v}(Ft,this.componentDef,ze,ae,[L1]),xd(Ee,ze,null)}finally{So()}return new hC(this.componentType,ut,Wp(wt,ze),ze,wt)}}class hC extends class E_{}{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new dC(d),this.componentType=o}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Lc{}class pC{}const Xa=new Map;class yC extends Lc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kl(this);const c=En(o);this._bootstrapComponents=m(c.bootstrap),this._r3Injector=Dm(o,a,[{provide:Lc,useValue:this},{provide:C_,useValue:this.componentFactoryResolver}],be(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Za.THROW_IF_NOT_FOUND,c=At.Default){return o===Za||o===Lc||o===Fd?this:this._r3Injector.get(o,a,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qp extends pC{constructor(o){super(),this.moduleType=o,null!==En(o)&&function gC(s){const o=new Set;!function a(c){const d=En(c,!0),p=d.id;null!==p&&(function Cf(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${be(o)} vs ${be(o.name)}`)}(p,Xa.get(p),c),Xa.set(p,c));const v=m(d.imports);for(const D of v)o.has(D)||(o.add(D),a(D))}(s)}(o)}create(o){return new yC(this.moduleType,o)}}function T_(s,o,a){const c=Cr()+s,d=Xe();return d[c]===wn?Il(d,c,a?o.call(a):o()):function jr(s,o){return s[o]}(d,c)}function I0(s,o,a,c){return If(Xe(),Cr(),s,o,a,c)}function Mu(s,o,a,c,d){return function bC(s,o,a,c,d,p,v){const D=o+a;return xc(s,D,d,p)?Il(s,D+2,v?c.call(v,d,p):c(d,p)):Df(s,D+2)}(Xe(),Cr(),s,o,a,c,d)}function T0(s,o,a,c,d,p){return function Zp(s,o,a,c,d,p,v,D){const N=o+a;return function nf(s,o,a,c,d){const p=xc(s,o,a,c);return Bs(s,o+2,d)||p}(s,N,d,p,v)?Il(s,N+3,D?c.call(D,d,p,v):c(d,p,v)):Df(s,N+3)}(Xe(),Cr(),s,o,a,c,d,p)}function Df(s,o){const a=s[o];return a===wn?void 0:a}function If(s,o,a,c,d,p){const v=o+a;return Bs(s,v,d)?Il(s,v+1,p?c.call(p,d):c(d)):Df(s,v+1)}function Tf(s,o){const a=hn();let c;const d=s+20;a.firstCreatePass?(c=function Ru(s,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(s===c.name)return c}}(o,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const p=c.factory||(c.factory=gi(c.type)),v=Ot(lf);try{const D=Gt(!1),N=p();return Gt(D),function U1(s,o,a,c){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=c}(a,Xe(),d,N),N}finally{Ot(v)}}function wC(s,o,a){const c=s+20,d=Xe(),p=yn(d,c);return function Yp(s,o){return s[1].data[o].pure}(d,c)?If(d,Cr(),o,p.transform,a,p):p.transform(a)}function N0(s){return o=>{setTimeout(s,void 0,o)}}const Ql=class VI extends I.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){var d,p,v;let D=o,N=a||(()=>null),V=c;if(o&&"object"==typeof o){const Q=o;D=null===(d=Q.next)||void 0===d?void 0:d.bind(Q),N=null===(p=Q.error)||void 0===p?void 0:p.bind(Q),V=null===(v=Q.complete)||void 0===v?void 0:v.bind(Q)}this.__isAsync&&(N=N0(N),D&&(D=N0(D)),V&&(V=N0(V)));const H=super.subscribe({next:D,error:N,complete:V});return o instanceof h.w0&&o.add(H),H}};function DC(){return this._results[zl()]()}class x0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zl(),c=x0.prototype;c[a]||(c[a]=DC)}get changes(){return this._changes||(this._changes=new Ql)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=si(o);(this._changesDetected=!function Xu(s,o,a){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jp=(()=>{class s{}return s.__NG_ELEMENT_ID__=UI,s})();const IC=Jp,BI=class extends IC{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o){const a=this._declarationTContainer.tViews,c=po(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(a)),xd(a,c,o),new zp(c)}};function UI(){return Qp(mi(),Xe())}function Qp(s,o){return 4&s.type?new BI(o,s,Wp(s,o)):null}let N_=(()=>{class s{}return s.__NG_ELEMENT_ID__=jI,s})();function jI(){return M_(mi(),Xe())}const TC=N_,M0=class extends TC{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Wp(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){const o=J(this._hostTNode,this._hostLView);if(kt(o)){const a=ot(o,this._hostLView),c=en(o);return new oo(a[1].data[c+8],a)}return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=O0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,c){const d=o.createEmbeddedView(a||{});return this.insert(d,c),d}createComponent(o,a,c,d,p){const v=o&&!function dl(s){return"function"==typeof s}(o);let D;if(v)D=a;else{const Q=a||{};D=Q.index,c=Q.injector,d=Q.projectableNodes,p=Q.ngModuleRef}const N=v?o:new Ef(mn(o)),V=c||this.parentInjector;if(!p&&null==N.ngModule){const ae=(v?V:this.parentInjector).get(Lc,null);ae&&(p=ae)}const H=N.create(V,d,void 0,p);return this.insert(H.hostView,D),H}insert(o,a){const c=o._lView,d=c[1];if(function Jn(s){return qr(s[3])}(c)){const H=this.indexOf(o);if(-1!==H)this.detach(H);else{const Q=c[3],ae=new M0(Q,Q[6],Q[3]);ae.detach(ae.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function ct(s,o,a,c){const d=10+c,p=a.length;c>0&&(a[d-1][4]=o),c<p-10?(o[4]=a[d],Eh(a,10+c,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function ps(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const D=o[19];null!==D&&D.insertView(s),o[2]|=128}(d,c,v,p);const D=du(p,v),N=c[11],V=om(N,v[7]);return null!==V&&function za(s,o,a,c,d,p){c[0]=d,c[6]=o,nn(s,c,a,1,d,p)}(d,v[6],N,c,V,D),o.attachToViewContainerRef(),Eh(x_(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=O0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=pp(this._lContainer,a);c&&(lo(x_(this._lContainer),a),jt(c[1],c))}detach(o){const a=this._adjustIndex(o,-1),c=pp(this._lContainer,a);return c&&null!=lo(x_(this._lContainer),a)?new zp(c):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function O0(s){return s[8]}function x_(s){return s[8]||(s[8]=[])}function M_(s,o){let a;const c=o[s.index];if(qr(c))a=c;else{let d;if(8&s.type)d=O(c);else{const p=o[11];d=p.createComment("");const v=Ze(s,o);pr(p,om(p,v),d,function v1(s,o){return Hn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=a=Br(c,o,d,s),ko(o,a)}return new M0(a,s,o)}class Xl{constructor(o){this.queryList=o,this.matches=null}clone(){return new Xl(this.queryList)}setDirty(){this.queryList.setDirty()}}class R0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new R0(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==OC(o,a).matches&&this.queries[a].setDirty()}}class Pu{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class k0{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new k0(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class P0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new P0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,$I(a,p)),this.matchTNodeWithReadOption(o,a,so(a,o,p,!1,!1))}else c===Jp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,so(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===D_||d===N_||d===Jp&&4&a.type)this.addMatch(a.index,-2);else{const p=so(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function $I(s,o){const a=s.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function zI(s,o,a,c){return-1===a?function WI(s,o){return 11&s.type?Wp(s,o):4&s.type?Qp(s,o):null}(o,s):-2===a?function SC(s,o,a){return a===D_?Wp(o,s):a===Jp?Qp(o,s):a===N_?M_(o,s):void 0}(s,o,c):us(s,s[1],a,o)}function F0(s,o,a,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=a.matches,D=[];for(let N=0;N<v.length;N+=2){const V=v[N];D.push(V<0?null:zI(o,p[V],v[N+1],a.metadata.read))}d.matches=D}return d.matches}function L0(s,o,a,c){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const v=F0(s,o,d,a);for(let D=0;D<p.length;D+=2){const N=p[D];if(N>0)c.push(v[D/2]);else{const V=p[D+1],H=o[-N];for(let Q=10;Q<H.length;Q++){const ae=H[Q];ae[17]===ae[3]&&L0(ae[1],ae,V,c)}if(null!==H[9]){const Q=H[9];for(let ae=0;ae<Q.length;ae++){const Ee=Q[ae];L0(Ee[1],Ee,V,c)}}}}}return c}function AC(s){const o=Xe(),a=hn(),c=pa();Ba(c+1);const d=OC(a,c);if(s.dirty&&vn(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?L0(a,o,c,[]):F0(a,o,d,c);s.reset(p,ms),s.notifyOnChanges()}return!0}return!1}function V0(s,o,a){const c=hn();c.firstCreatePass&&(MC(c,new Pu(s,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),xC(c,Xe(),o)}function NC(s,o,a,c){const d=hn();if(d.firstCreatePass){const p=mi();MC(d,new Pu(o,a,c),p.index),function qI(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}xC(d,Xe(),a)}function sh(){return function B0(s,o){return s[19].queries[o].queryList}(Xe(),pa())}function xC(s,o,a){const c=new x0(4==(4&a));vu(s,o,c,c.destroy),null===o[19]&&(o[19]=new R0),o[19].queries.push(new Xl(c))}function MC(s,o,a){null===s.queries&&(s.queries=new k0),s.queries.track(new P0(o,a))}function OC(s,o){return s.queries.getByIndex(o)}function RC(s,o){return Qp(s,o)}function k_(...s){}const ig=new er("Application Initializer");let Q0=(()=>{class s{constructor(a){this.appInits=a,this.resolve=k_,this.reject=k_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(kp(p))a.push(p);else if(Iv(p)){const v=new Promise((D,N)=>{p.subscribe({complete:D,error:N})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Bt(ig,8))},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Vu=new er("AppId",{providedIn:"root",factory:function P_(){return`${X0()}${X0()}${X0()}`}});function X0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jC=new er("Platform Initializer"),eb=new er("Platform ID"),Bu=new er("appBootstrapListener");let HC=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();const tb=new er("LocaleId",{providedIn:"root",factory:()=>On(tb,At.Optional|At.SkipSelf)||function GC(){return"undefined"!=typeof $localize&&$localize.locale||mf}()}),sT=new er("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $C{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let mo=(()=>{class s{compileModuleSync(a){return new qp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=m(En(a).declarations).reduce((v,D)=>{const N=mn(D);return N&&v.push(new Ef(N)),v},[]);return new $C(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const HA=(()=>Promise.resolve(0))();function F_(s){"undefined"==typeof Zone?HA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class el{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ql(!1),this.onMicrotaskEmpty=new Ql(!1),this.onStable=new Ql(!1),this.onError=new Ql(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function WC(){let s=Tn.requestAnimationFrame,o=Tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ZC(s){const o=()=>{!function qC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Tn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,V_(s),s.isCheckStableRunning=!0,L_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),V_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,v,D)=>{try{return sg(s),a.invokeTask(d,p,v,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),nb(s)}},onInvoke:(a,c,d,p,v,D,N)=>{try{return sg(s),a.invoke(d,p,v,D,N)}finally{s.shouldCoalesceRunChangeDetection&&o(),nb(s)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,V_(s),L_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!el.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(el.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,zC,k_,k_);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const zC={};function L_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function V_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sg(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function nb(s){s._nesting--,L_(s)}class KC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ql,this.onMicrotaskEmpty=new Ql,this.onStable=new Ql,this.onError=new Ql}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}let ib=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{el.assertNotInAngularZone(),F_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())F_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Bt(el))},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})(),rb=(()=>{class s{constructor(){this._applications=new Map,B_.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return B_.findTestabilityInTree(this,a,c)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();class oT{addToWindow(o){}findTestabilityInTree(o,a,c){return null}}function YC(s){B_=s}let Aa,B_=new oT;const sb=new er("AllowMultipleToken");class eD{constructor(o,a){this.name=o,this.token=a}}function og(s,o,a=[]){const c=`Platform: ${o}`,d=new er(c);return(p=[])=>{let v=ab();if(!v||v.injector.get(sb,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const D=a.concat(p).concat({provide:d,useValue:!0},{provide:ov,useValue:"platform"});!function ob(s){if(Aa&&!Aa.destroyed&&!Aa.injector.get(sb,!1))throw new Je(400,"");Aa=s.get(Vc);const o=s.get(jC,null);o&&o.forEach(a=>a())}(Za.create({providers:D,name:c}))}return function tD(s){const o=ab();if(!o)throw new Je(401,"");return o}()}}function ab(){return Aa&&!Aa.destroyed?Aa:null}let Vc=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const D=function Fo(s,o){let a;return a="noop"===s?new KC:("zone.js"===s?void 0:s)||new el({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),N=[{provide:el,useValue:D}];return D.run(()=>{const V=Za.create({providers:N,parent:this.injector,name:a.moduleType.name}),H=a.create(V),Q=H.injector.get(fs,null);if(!Q)throw new Je(402,"");return D.runOutsideAngular(()=>{const ae=D.onError.subscribe({next:Ee=>{Q.handleError(Ee)}});H.onDestroy(()=>{Af(this._modules,H),ae.unsubscribe()})}),function nD(s,o,a){try{const c=a();return kp(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(Q,D,()=>{const ae=H.injector.get(Q0);return ae.runInitializers(),ae.donePromise.then(()=>(function o0(s){(function yt(s,o){null==s&&Tt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(s0=s.toLowerCase().replace(/_/g,"-"))}(H.injector.get(tb,mf)||mf),this._moduleDoBootstrap(H),H))})})}bootstrapModule(a,c=[]){const d=lT({},c);return function JC(s,o,a){const c=new qp(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(iD);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Je(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Bt(Za))},s.\u0275prov=ln({token:s,factory:s.\u0275fac}),s})();function lT(s,o){return Array.isArray(o)?o.reduce(lT,s):Object.assign(Object.assign({},s),o)}let iD=(()=>{class s{constructor(a,c,d,p,v){this._zone=a,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new Z.y(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),N=new Z.y(V=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{el.assertNotInAngularZone(),F_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{el.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{H.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,me.T)(D,N.pipe((0,ue.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new Je(405,"");let d;d=a instanceof C0?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function XC(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Lc),D=d.create(Za.NULL,[],c||d.selector,p),N=D.location.nativeElement,V=D.injector.get(ib,null),H=V&&D.injector.get(rb);return V&&H&&H.registerApplication(N,V),D.onDestroy(()=>{this.detachView(D.hostView),Af(this.components,D),H&&H.unregisterApplication(N)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new Je(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Af(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Bu,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Bt(el),Bt(Za),Bt(fs),Bt(C_),Bt(Q0))},s.\u0275prov=ln({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Af(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let lg=!0,rD=!1;function cb(){return rD=!0,lg}function cT(){if(rD)throw new Error("Cannot enable prod mode after platform setup.");lg=!1}let GA=(()=>{class s{}return s.__NG_ELEMENT_ID__=$A,s})();function $A(s){return function WA(s,o,a){if(js(s)&&!a){const c=an(s.index,o);return new zp(c,c)}return 47&s.type?new zp(o[16],o):null}(mi(),Xe(),16==(16&s))}class W_{constructor(){}supports(o){return Sp(o)}create(o){return new aD(o)}}const fT=(s,o)=>o;class aD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||fT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<z_(c,d,p)?a:c,D=z_(v,d,p),N=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const V=D-d,H=N-d;if(V!=H){for(let ae=0;ae<V;ae++){const Ee=ae<p.length?p[ae]:p[ae]=0,ze=Ee+ae;H<=ze&&ze<V&&(p[ae]=Ee+1)}p[v.previousIndex]=H-V}}D!==N&&o(v,D,N)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Sp(o))throw new Je(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)p=o[D],v=this._trackByFn(D,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,D)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,D),c=!0),a=a._next}else d=0,function nE(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[zl()]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,D=>{v=this._trackByFn(d,D),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,D,v,d)),Object.is(a.item,D)||this._addIdentityChange(a,D)):(a=this._mismatch(a,D,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new fb(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new pT),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class fb{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class pT{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new pb,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function z_(s,o,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class Nf{constructor(){}supports(o){return o instanceof Map||Ap(o)}create(){return new q_}}class q_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Ap(o)))throw new Je(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new xf(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class xf{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mf(){return new gb([new W_])}let gb=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Mf()),deps:[[s,new Xo,new co]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Je(901,"")}}return s.\u0275prov=ln({token:s,providedIn:"root",factory:Mf}),s})();function mb(){return new ug([new Nf])}let ug=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||mb()),deps:[[s,new Xo,new co]]}}find(a){const c=this.factories.find(p=>p.supports(a));if(c)return c;throw new Je(901,"")}}return s.\u0275prov=ln({token:s,providedIn:"root",factory:mb}),s})();const dD=og(null,"core",[{provide:eb,useValue:"unknown"},{provide:Vc,deps:[Za]},{provide:rb,deps:[]},{provide:HC,deps:[]}]);let hD=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Bt(iD))},s.\u0275mod=ye({type:s}),s.\u0275inj=Mn({}),s})()},4892:(bt,xe,j)=>{"use strict";j.d(xe,{F0:()=>ur,Bz:()=>Mi,lC:()=>Kr});var I=j(9724),h=j(818),Z=j(5975);function me(S,C){const b=(0,Z.m)(S)?S:()=>S,M=F=>F.error(b());return new h.y(C?F=>C.schedule(M,0,F):M)}var ue=j(5955);function we(S){return new h.y(C=>{(0,ue.Xf)(S()).subscribe(C)})}var De=j(4813),be=j(2085),Ce=j(8499);function ne(){return(0,be.e)((S,C)=>{let b=null;S._refCount++;const M=(0,Ce.x)(C,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(b=null);const F=S._connection,W=b;b=null,F&&(!W||F===W)&&F.unsubscribe(),C.unsubscribe()});S.subscribe(M),M.closed||(b=S.connect())})}class ie extends h.y{constructor(C,b){super(),this.source=C,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,be.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,null==C||C.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new De.w0;const b=this.getSubject();C.add(this.source.subscribe((0,Ce.x)(b,void 0,()=>{this._teardown(),b.complete()},M=>{this._teardown(),b.error(M)},()=>this._teardown()))),C.closed&&(this._connection=null,C=De.w0.EMPTY)}return C}refCount(){return ne()(this)}}var he=j(237),Ve=j(4945),Be=j(4121),Je=j(5696),nt=j(7472),Re=j(3729),Ue=j(9018),_t=j(8023);function dt(S){return(0,be.e)((C,b)=>{let W,M=null,F=!1;M=C.subscribe((0,Ce.x)(b,void 0,void 0,J=>{W=(0,ue.Xf)(S(J,dt(S)(C))),M?(M.unsubscribe(),M=null,W.subscribe(b)):F=!0})),F&&(M.unsubscribe(),M=null,W.subscribe(b))})}var He=j(4882);function Ge(S,C){return(0,Z.m)(C)?(0,He.z)(S,C,1):(0,He.z)(S,1)}var $e=j(4970);function ht(S){return S<=0?()=>Ue.E:(0,be.e)((C,b)=>{let M=[];C.subscribe((0,Ce.x)(b,F=>{M.push(F),S<M.length&&M.shift()},()=>{for(const F of M)b.next(F);b.complete()},void 0,()=>{M=null}))})}var le=j(8623),Te=j(2686),fe=j(8330),pe=j(7969),et=j(1528),Me=j(5598),Kt=j(1927),In=j(7479),Wn=j(9676),yt=j(8168),Tt=j(549),Qt=j(1048);class bn{constructor(C,b){this.id=C,this.url=b}}class Ai extends bn{constructor(C,b,M="imperative",F=null){super(C,b),this.navigationTrigger=M,this.restoredState=F}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ln extends bn{constructor(C,b,M){super(C,b),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zi extends bn{constructor(C,b,M){super(C,b),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mn extends bn{constructor(C,b,M){super(C,b),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pn extends bn{constructor(C,b,M,F){super(C,b),this.urlAfterRedirects=M,this.state=F}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni extends bn{constructor(C,b,M,F){super(C,b),this.urlAfterRedirects=M,this.state=F}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yr extends bn{constructor(C,b,M,F,W){super(C,b),this.urlAfterRedirects=M,this.state=F,this.shouldActivate=W}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ss extends bn{constructor(C,b,M,F){super(C,b),this.urlAfterRedirects=M,this.state=F}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ui extends bn{constructor(C,b,M,F){super(C,b),this.urlAfterRedirects=M,this.state=F}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class or{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ki{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ar{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ti{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ar{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vn{constructor(C,b,M){this.routerEvent=C,this.position=b,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class vr{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const b=this.params[C];return Array.isArray(b)?b[0]:b}return null}getAll(C){if(this.has(C)){const b=this.params[C];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function br(S){return new vr(S)}const Mt="ngNavigationCancelingError";function jn(S){const C=Error("NavigationCancelingError: "+S);return C[Mt]=!0,C}function Hi(S,C,b){const M=b.path.split("/");if(M.length>S.length||"full"===b.pathMatch&&(C.hasChildren()||M.length<S.length))return null;const F={};for(let W=0;W<M.length;W++){const J=M[W],se=S[W];if(J.startsWith(":"))F[J.substring(1)]=se;else if(J!==se.path)return null}return{consumed:S.slice(0,M.length),posParams:F}}function at(S,C){const b=S?Object.keys(S):void 0,M=C?Object.keys(C):void 0;if(!b||!M||b.length!=M.length)return!1;let F;for(let W=0;W<b.length;W++)if(F=b[W],!qt(S[F],C[F]))return!1;return!0}function qt(S,C){if(Array.isArray(S)&&Array.isArray(C)){if(S.length!==C.length)return!1;const b=[...S].sort(),M=[...C].sort();return b.every((F,W)=>M[W]===F)}return S===C}function ui(S){return Array.prototype.concat.apply([],S)}function ci(S){return S.length>0?S[S.length-1]:null}function oi(S,C){for(const b in S)S.hasOwnProperty(b)&&C(S[b],b)}function Kn(S){return(0,I.CqO)(S)?S:(0,I.QGY)(S)?(0,he.D)(Promise.resolve(S)):(0,Ve.of)(S)}const $t={exact:function Ye(S,C,b){if(!ye(S.segments,C.segments)||!Yt(S.segments,C.segments,b)||S.numberOfChildren!==C.numberOfChildren)return!1;for(const M in C.children)if(!S.children[M]||!Ye(S.children[M],C.children[M],b))return!1;return!0},subset:Wt},Gi={exact:function Qe(S,C){return at(S,C)},subset:function It(S,C){return Object.keys(C).length<=Object.keys(S).length&&Object.keys(C).every(b=>qt(S[b],C[b]))},ignored:()=>!0};function gn(S,C,b){return $t[b.paths](S.root,C.root,b.matrixParams)&&Gi[b.queryParams](S.queryParams,C.queryParams)&&!("exact"===b.fragment&&S.fragment!==C.fragment)}function Wt(S,C,b){return _n(S,C,C.segments,b)}function _n(S,C,b,M){if(S.segments.length>b.length){const F=S.segments.slice(0,b.length);return!(!ye(F,b)||C.hasChildren()||!Yt(F,b,M))}if(S.segments.length===b.length){if(!ye(S.segments,b)||!Yt(S.segments,b,M))return!1;for(const F in C.children)if(!S.children[F]||!Wt(S.children[F],C.children[F],M))return!1;return!0}{const F=b.slice(0,S.segments.length),W=b.slice(S.segments.length);return!!(ye(S.segments,F)&&Yt(S.segments,F,M)&&S.children[Ot])&&_n(S.children[Ot],C,W,M)}}function Yt(S,C,b){return C.every((M,F)=>Gi[b](S[F].parameters,M.parameters))}class re{constructor(C,b,M){this.root=C,this.queryParams=b,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=br(this.queryParams)),this._queryParamMap}toString(){return wi.serialize(this)}}class Y{constructor(C,b){this.segments=C,this.children=b,this.parent=null,oi(b,(M,F)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mn(this)}}class ce{constructor(C,b){this.path=C,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=br(this.parameters)),this._parameterMap}toString(){return $i(this)}}function ye(S,C){return S.length===C.length&&S.every((b,M)=>b.path===C[M].path)}class Ut{}class Sn{parse(C){const b=new li(C);return new re(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(C){const b=`/${Ie(C.root,!0)}`,M=function xs(S){const C=Object.keys(S).map(b=>{const M=S[b];return Array.isArray(M)?M.map(F=>`${En(b)}=${En(F)}`).join("&"):`${En(b)}=${En(M)}`}).filter(b=>!!b);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${b}${M}${"string"==typeof C.fragment?`#${function Ei(S){return encodeURI(S)}(C.fragment)}`:""}`}}const wi=new Sn;function mn(S){return S.segments.map(C=>$i(C)).join("/")}function Ie(S,C){if(!S.hasChildren())return mn(S);if(C){const b=S.children[Ot]?Ie(S.children[Ot],!1):"",M=[];return oi(S.children,(F,W)=>{W!==Ot&&M.push(`${W}:${Ie(F,!1)}`)}),M.length>0?`${b}(${M.join("//")})`:b}{const b=function ft(S,C){let b=[];return oi(S.children,(M,F)=>{F===Ot&&(b=b.concat(C(M,F)))}),oi(S.children,(M,F)=>{F!==Ot&&(b=b.concat(C(M,F)))}),b}(S,(M,F)=>F===Ot?[Ie(S.children[Ot],!1)]:[`${F}:${Ie(M,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Ot]?`${mn(S)}/${b[0]}`:`${mn(S)}/(${b.join("//")})`}}function on(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function En(S){return on(S).replace(/%3B/gi,";")}function ai(S){return on(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yi(S){return decodeURIComponent(S)}function Ji(S){return Yi(S.replace(/\+/g,"%20"))}function $i(S){return`${ai(S.path)}${function Vt(S){return Object.keys(S).map(C=>`;${ai(C)}=${ai(S[C])}`).join("")}(S.parameters)}`}const di=/^[^\/()?;=#]+/;function qe(S){const C=S.match(di);return C?C[0]:""}const dn=/^[^=?&#]+/,Wi=/^[^&#]+/;class li{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(C.length>0||Object.keys(b).length>0)&&(M[Ot]=new Y(C,b)),M}parseSegment(){const C=qe(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new ce(Yi(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const b=qe(this.remaining);if(!b)return;this.capture(b);let M="";if(this.consumeOptional("=")){const F=qe(this.remaining);F&&(M=F,this.capture(M))}C[Yi(b)]=Yi(M)}parseQueryParam(C){const b=function zn(S){const C=S.match(dn);return C?C[0]:""}(this.remaining);if(!b)return;this.capture(b);let M="";if(this.consumeOptional("=")){const J=function Wr(S){const C=S.match(Wi);return C?C[0]:""}(this.remaining);J&&(M=J,this.capture(M))}const F=Ji(b),W=Ji(M);if(C.hasOwnProperty(F)){let J=C[F];Array.isArray(J)||(J=[J],C[F]=J),J.push(W)}else C[F]=W}parseParens(C){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=qe(this.remaining),F=this.remaining[M.length];if("/"!==F&&")"!==F&&";"!==F)throw new Error(`Cannot parse url '${this.url}'`);let W;M.indexOf(":")>-1?(W=M.substr(0,M.indexOf(":")),this.capture(W),this.capture(":")):C&&(W=Ot);const J=this.parseChildren();b[W]=1===Object.keys(J).length?J[Ot]:new Y([],J),this.consumeOptional("//")}return b}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class Ci{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const b=this.pathFromRoot(C);return b.length>1?b[b.length-2]:null}children(C){const b=Xt(C,this._root);return b?b.children.map(M=>M.value):[]}firstChild(C){const b=Xt(C,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(C){const b=ni(C,this._root);return b.length<2?[]:b[b.length-2].children.map(F=>F.value).filter(F=>F!==C)}pathFromRoot(C){return ni(C,this._root).map(b=>b.value)}}function Xt(S,C){if(S===C.value)return C;for(const b of C.children){const M=Xt(S,b);if(M)return M}return null}function ni(S,C){if(S===C.value)return[C];for(const b of C.children){const M=ni(S,b);if(M.length)return M.unshift(C),M}return[]}class Yn{constructor(C,b){this.value=C,this.children=b}toString(){return`TreeNode(${this.value})`}}function Nt(S){const C={};return S&&S.children.forEach(b=>C[b.value.outlet]=b),C}class ki extends Ci{constructor(C,b){super(C),this.snapshot=b,kn(this,C)}toString(){return this.snapshot.toString()}}function zr(S,C){const b=function Ms(S,C){const J=new lr([],{},{},"",{},Ot,C,null,S.root,-1,{});return new Er("",new Yn(J,[]))}(S,C),M=new Be.X([new ce("",{})]),F=new Be.X({}),W=new Be.X({}),J=new Be.X({}),se=new Be.X(""),Oe=new wr(M,F,J,se,W,Ot,C,b.root);return Oe.snapshot=b.root,new ki(new Yn(Oe,[]),b)}class wr{constructor(C,b,M,F,W,J,se,Oe){this.url=C,this.params=b,this.queryParams=M,this.fragment=F,this.data=W,this.outlet=J,this.component=se,this._futureSnapshot=Oe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pe.U)(C=>br(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pe.U)(C=>br(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zi(S,C="emptyOnly"){const b=S.pathFromRoot;let M=0;if("always"!==C)for(M=b.length-1;M>=1;){const F=b[M],W=b[M-1];if(F.routeConfig&&""===F.routeConfig.path)M--;else{if(W.component)break;M--}}return function os(S){return S.reduce((C,b)=>({params:Object.assign(Object.assign({},C.params),b.params),data:Object.assign(Object.assign({},C.data),b.data),resolve:Object.assign(Object.assign({},C.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(M))}class lr{constructor(C,b,M,F,W,J,se,Oe,mt,Cn,Pt){this.url=C,this.params=b,this.queryParams=M,this.fragment=F,this.data=W,this.outlet=J,this.component=se,this.routeConfig=Oe,this._urlSegment=mt,this._lastPathIndex=Cn,this._resolve=Pt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=br(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=br(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Er extends Ci{constructor(C,b){super(b),this.url=C,kn(this,b)}toString(){return bo(this._root)}}function kn(S,C){C.value._routerState=S,C.children.forEach(b=>kn(S,b))}function bo(S){const C=S.children.length>0?` { ${S.children.map(bo).join(", ")} } `:"";return`${S.value}${C}`}function eo(S){if(S.snapshot){const C=S.snapshot,b=S._futureSnapshot;S.snapshot=b,at(C.queryParams,b.queryParams)||S.queryParams.next(b.queryParams),C.fragment!==b.fragment&&S.fragment.next(b.fragment),at(C.params,b.params)||S.params.next(b.params),function zt(S,C){if(S.length!==C.length)return!1;for(let b=0;b<S.length;++b)if(!at(S[b],C[b]))return!1;return!0}(C.url,b.url)||S.url.next(b.url),at(C.data,b.data)||S.data.next(b.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function Nr(S,C){const b=at(S.params,C.params)&&function Le(S,C){return ye(S,C)&&S.every((b,M)=>at(b.parameters,C[M].parameters))}(S.url,C.url);return b&&!(!S.parent!=!C.parent)&&(!S.parent||Nr(S.parent,C.parent))}function wo(S,C,b){if(b&&S.shouldReuseRoute(C.value,b.value.snapshot)){const M=b.value;M._futureSnapshot=C.value;const F=function js(S,C,b){return C.children.map(M=>{for(const F of b.children)if(S.shouldReuseRoute(M.value,F.value.snapshot))return wo(S,M,F);return wo(S,M)})}(S,C,b);return new Yn(M,F)}{if(S.shouldAttach(C.value)){const W=S.retrieve(C.value);if(null!==W){const J=W.route;return J.value._futureSnapshot=C.value,J.children=C.children.map(se=>wo(S,se)),J}}const M=function Vo(S){return new wr(new Be.X(S.url),new Be.X(S.params),new Be.X(S.queryParams),new Be.X(S.fragment),new Be.X(S.data),S.outlet,S.component,S)}(C.value),F=C.children.map(W=>wo(S,W));return new Yn(M,F)}}function sa(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Hs(S){return"object"==typeof S&&null!=S&&S.outlets}function Di(S,C,b,M,F){let W={};if(M&&oi(M,(se,Oe)=>{W[Oe]=Array.isArray(se)?se.map(mt=>`${mt}`):`${se}`}),S===C)return new re(b,W,F);const J=ii(S,C,b);return new re(J,W,F)}function ii(S,C,b){const M={};return oi(S.children,(F,W)=>{M[W]=F===C?b:ii(F,C,b)}),new Y(S.segments,M)}class de{constructor(C,b,M){if(this.isAbsolute=C,this.numberOfDoubleDots=b,this.commands=M,C&&M.length>0&&sa(M[0]))throw new Error("Root segment cannot have matrix parameters");const F=M.find(Hs);if(F&&F!==ci(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xr{constructor(C,b,M){this.segmentGroup=C,this.processChildren=b,this.index=M}}function Ii(S,C,b){if(S||(S=new Y([],{})),0===S.segments.length&&S.hasChildren())return Mr(S,C,b);const M=function Eo(S,C,b){let M=0,F=C;const W={match:!1,pathIndex:0,commandIndex:0};for(;F<S.segments.length;){if(M>=b.length)return W;const J=S.segments[F],se=b[M];if(Hs(se))break;const Oe=`${se}`,mt=M<b.length-1?b[M+1]:null;if(F>0&&void 0===Oe)break;if(Oe&&mt&&"object"==typeof mt&&void 0===mt.outlets){if(!Os(Oe,mt,J))return W;M+=2}else{if(!Os(Oe,{},J))return W;M++}F++}return{match:!0,pathIndex:F,commandIndex:M}}(S,C,b),F=b.slice(M.commandIndex);if(M.match&&M.pathIndex<S.segments.length){const W=new Y(S.segments.slice(0,M.pathIndex),{});return W.children[Ot]=new Y(S.segments.slice(M.pathIndex),S.children),Mr(W,0,F)}return M.match&&0===F.length?new Y(S.segments,{}):M.match&&!S.hasChildren()?Ra(S,C,b):M.match?Mr(S,0,F):Ra(S,C,b)}function Mr(S,C,b){if(0===b.length)return new Y(S.segments,{});{const M=function pi(S){return Hs(S[0])?S[0].outlets:{[Ot]:S}}(b),F={};return oi(M,(W,J)=>{"string"==typeof W&&(W=[W]),null!==W&&(F[J]=Ii(S.children[J],C,W))}),oi(S.children,(W,J)=>{void 0===M[J]&&(F[J]=W)}),new Y(S.segments,F)}}function Ra(S,C,b){const M=S.segments.slice(0,C);let F=0;for(;F<b.length;){const W=b[F];if(Hs(W)){const Oe=Pl(W.outlets);return new Y(M,Oe)}if(0===F&&sa(b[0])){M.push(new ce(S.segments[C].path,aa(b[0]))),F++;continue}const J=Hs(W)?W.outlets[Ot]:`${W}`,se=F<b.length-1?b[F+1]:null;J&&se&&sa(se)?(M.push(new ce(J,aa(se))),F+=2):(M.push(new ce(J,{})),F++)}return new Y(M,{})}function Pl(S){const C={};return oi(S,(b,M)=>{"string"==typeof b&&(b=[b]),null!==b&&(C[M]=Ra(new Y([],{}),0,b))}),C}function aa(S){const C={};return oi(S,(b,M)=>C[M]=`${b}`),C}function Os(S,C,b){return S==b.path&&at(C,b.parameters)}class Bo{constructor(C,b,M,F){this.routeReuseStrategy=C,this.futureState=b,this.currState=M,this.forwardEvent=F}activate(C){const b=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,M,C),eo(this.futureState.root),this.activateChildRoutes(b,M,C)}deactivateChildRoutes(C,b,M){const F=Nt(b);C.children.forEach(W=>{const J=W.value.outlet;this.deactivateRoutes(W,F[J],M),delete F[J]}),oi(F,(W,J)=>{this.deactivateRouteAndItsChildren(W,M)})}deactivateRoutes(C,b,M){const F=C.value,W=b?b.value:null;if(F===W)if(F.component){const J=M.getContext(F.outlet);J&&this.deactivateChildRoutes(C,b,J.children)}else this.deactivateChildRoutes(C,b,M);else W&&this.deactivateRouteAndItsChildren(b,M)}deactivateRouteAndItsChildren(C,b){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,b):this.deactivateRouteAndOutlet(C,b)}detachAndStoreRouteSubtree(C,b){const M=b.getContext(C.value.outlet),F=M&&C.value.component?M.children:b,W=Nt(C);for(const J of Object.keys(W))this.deactivateRouteAndItsChildren(W[J],F);if(M&&M.outlet){const J=M.outlet.detach(),se=M.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:J,route:C,contexts:se})}}deactivateRouteAndOutlet(C,b){const M=b.getContext(C.value.outlet),F=M&&C.value.component?M.children:b,W=Nt(C);for(const J of Object.keys(W))this.deactivateRouteAndItsChildren(W[J],F);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(C,b,M){const F=Nt(b);C.children.forEach(W=>{this.activateRoutes(W,F[W.value.outlet],M),this.forwardEvent(new Ar(W.value.snapshot))}),C.children.length&&this.forwardEvent(new ti(C.value.snapshot))}activateRoutes(C,b,M){const F=C.value,W=b?b.value:null;if(eo(F),F===W)if(F.component){const J=M.getOrCreateContext(F.outlet);this.activateChildRoutes(C,b,J.children)}else this.activateChildRoutes(C,b,M);else if(F.component){const J=M.getOrCreateContext(F.outlet);if(this.routeReuseStrategy.shouldAttach(F.snapshot)){const se=this.routeReuseStrategy.retrieve(F.snapshot);this.routeReuseStrategy.store(F.snapshot,null),J.children.onOutletReAttached(se.contexts),J.attachRef=se.componentRef,J.route=se.route.value,J.outlet&&J.outlet.attach(se.componentRef,se.route.value),eo(se.route.value),this.activateChildRoutes(C,null,J.children)}else{const se=function Gs(S){for(let C=S.parent;C;C=C.parent){const b=C.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(F.snapshot),Oe=se?se.module.componentFactoryResolver:null;J.attachRef=null,J.route=F,J.resolver=Oe,J.outlet&&J.outlet.activateWith(F,Oe),this.activateChildRoutes(C,null,J.children)}}else this.activateChildRoutes(C,null,M)}}class la{constructor(C,b){this.routes=C,this.module=b}}function ri(S){return"function"==typeof S}function gi(S){return S instanceof re}const $s=Symbol("INITIAL_VALUE");function as(){return(0,et.w)(S=>(0,Je.a)(S.map(C=>C.pipe((0,Me.q)(1),(0,Kt.O)($s)))).pipe((0,In.R)((C,b)=>{let M=!1;return b.reduce((F,W,J)=>F!==$s?F:(W===$s&&(M=!0),M||!1!==W&&J!==b.length-1&&!gi(W)?F:W),C)},$s),(0,$e.h)(C=>C!==$s),(0,pe.U)(C=>gi(C)?C:!0===C),(0,Me.q)(1)))}class Rs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qi,this.attachRef=null}}class qi{constructor(){this.contexts=new Map}onChildOutletCreated(C,b){const M=this.getOrCreateContext(C);M.outlet=b,this.contexts.set(C,M)}onChildOutletDestroyed(C){const b=this.getContext(C);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let b=this.getContext(C);return b||(b=new Rs,this.contexts.set(C,b)),b}getContext(C){return this.contexts.get(C)||null}}let Kr=(()=>{class S{constructor(b,M,F,W,J){this.parentContexts=b,this.location=M,this.resolver=F,this.changeDetector=J,this.activated=null,this._activatedRoute=null,this.activateEvents=new I.vpe,this.deactivateEvents=new I.vpe,this.attachEvents=new I.vpe,this.detachEvents=new I.vpe,this.name=W||Ot,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,M){this.activated=b,this._activatedRoute=M,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const J=(M=M||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),se=this.parentContexts.getOrCreateContext(this.name).children,Oe=new jo(b,se,this.location.injector);this.activated=this.location.createComponent(J,this.location.length,Oe),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(b){return new(b||S)(I.Y36(qi),I.Y36(I.s_b),I.Y36(I._Vd),I.$8M("name"),I.Y36(I.sBO))},S.\u0275dir=I.lG2({type:S,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),S})();class jo{constructor(C,b,M){this.route=C,this.childContexts=b,this.parent=M}get(C,b){return C===wr?this.route:C===qi?this.childContexts:this.parent.get(C,b)}}let Ti=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275cmp=I.Xpm({type:S,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,M){1&b&&I._UZ(0,"router-outlet")},directives:[Kr],encapsulation:2}),S})();function Fi(S,C=""){for(let b=0;b<S.length;b++){const M=S[b];Ho(M,Co(C,M))}}function Ho(S,C){S.children&&Fi(S.children,C)}function Co(S,C){return C?S||C.path?S&&!C.path?`${S}/`:!S&&C.path?C.path:`${S}/${C.path}`:"":S}function Go(S){const C=S.children&&S.children.map(Go),b=C?Object.assign(Object.assign({},S),{children:C}):Object.assign({},S);return!b.component&&(C||b.loadChildren)&&b.outlet&&b.outlet!==Ot&&(b.component=Ti),b}function Qi(S){return S.outlet||Ot}function Do(S,C){const b=S.filter(M=>Qi(M)===C);return b.push(...S.filter(M=>Qi(M)!==C)),b}const ls={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yr(S,C,b){var M;if(""===C.path)return"full"===C.pathMatch&&(S.hasChildren()||b.length>0)?Object.assign({},ls):{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const W=(C.matcher||Hi)(b,S,C);if(!W)return Object.assign({},ls);const J={};oi(W.posParams,(Oe,mt)=>{J[mt]=Oe.path});const se=W.consumed.length>0?Object.assign(Object.assign({},J),W.consumed[W.consumed.length-1].parameters):J;return{matched:!0,consumedSegments:W.consumed,remainingSegments:b.slice(W.consumed.length),parameters:se,positionalParamSegments:null!==(M=W.posParams)&&void 0!==M?M:{}}}function bs(S,C,b,M,F="corrected"){if(b.length>0&&function G(S,C,b){return b.some(M=>z(S,C,M)&&Qi(M)!==Ot)}(S,b,M)){const J=new Y(C,function R(S,C,b,M){const F={};F[Ot]=M,M._sourceSegment=S,M._segmentIndexShift=C.length;for(const W of b)if(""===W.path&&Qi(W)!==Ot){const J=new Y([],{});J._sourceSegment=S,J._segmentIndexShift=C.length,F[Qi(W)]=J}return F}(S,C,M,new Y(b,S.children)));return J._sourceSegment=S,J._segmentIndexShift=C.length,{segmentGroup:J,slicedSegments:[]}}if(0===b.length&&function O(S,C,b){return b.some(M=>z(S,C,M))}(S,b,M)){const J=new Y(S.segments,function Hn(S,C,b,M,F,W){const J={};for(const se of M)if(z(S,b,se)&&!F[Qi(se)]){const Oe=new Y([],{});Oe._sourceSegment=S,Oe._segmentIndexShift="legacy"===W?S.segments.length:C.length,J[Qi(se)]=Oe}return Object.assign(Object.assign({},F),J)}(S,C,b,M,S.children,F));return J._sourceSegment=S,J._segmentIndexShift=C.length,{segmentGroup:J,slicedSegments:b}}const W=new Y(S.segments,S.children);return W._sourceSegment=S,W._segmentIndexShift=C.length,{segmentGroup:W,slicedSegments:b}}function z(S,C,b){return(!(S.hasChildren()||C.length>0)||"full"!==b.pathMatch)&&""===b.path}function oe(S,C,b,M){return!!(Qi(S)===M||M!==Ot&&z(C,b,S))&&("**"===S.path||Yr(C,S,b).matched)}function Pe(S,C,b){return 0===C.length&&!S.children[b]}class Ze{constructor(C){this.segmentGroup=C||null}}class lt{constructor(C){this.urlTree=C}}function An(S){return me(new Ze(S))}function yn(S){return me(new lt(S))}class Jn{constructor(C,b,M,F,W){this.configLoader=b,this.urlSerializer=M,this.urlTree=F,this.config=W,this.allowRedirects=!0,this.ngModule=C.get(I.h0i)}apply(){const C=bs(this.urlTree.root,[],[],this.config).segmentGroup,b=new Y(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,b,Ot).pipe((0,pe.U)(W=>this.createUrlTree(Or(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dt(W=>{if(W instanceof lt)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof Ze?this.noMatchError(W):W}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,Ot).pipe((0,pe.U)(F=>this.createUrlTree(Or(F),C.queryParams,C.fragment))).pipe(dt(F=>{throw F instanceof Ze?this.noMatchError(F):F}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,b,M){const F=C.segments.length>0?new Y([],{[Ot]:C}):C;return new re(F,b,M)}expandSegmentGroup(C,b,M,F){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(C,b,M).pipe((0,pe.U)(W=>new Y([],W))):this.expandSegment(C,M,b,M.segments,F,!0)}expandChildren(C,b,M){const F=[];for(const W of Object.keys(M.children))"primary"===W?F.unshift(W):F.push(W);return(0,he.D)(F).pipe(Ge(W=>{const J=M.children[W],se=Do(b,W);return this.expandSegmentGroup(C,se,J,W).pipe((0,pe.U)(Oe=>({segment:Oe,outlet:W})))}),(0,In.R)((W,J)=>(W[J.outlet]=J.segment,W),{}),function Se(S,C){const b=arguments.length>=2;return M=>M.pipe(S?(0,$e.h)((F,W)=>S(F,W,M)):fe.y,ht(1),b?(0,Te.d)(C):(0,le.T)(()=>new nt.K))}())}expandSegment(C,b,M,F,W,J){return(0,he.D)(M).pipe(Ge(se=>this.expandSegmentAgainstRoute(C,b,M,se,F,W,J).pipe(dt(mt=>{if(mt instanceof Ze)return(0,Ve.of)(null);throw mt}))),(0,Wn.P)(se=>!!se),dt((se,Oe)=>{if(se instanceof nt.K||"EmptyError"===se.name)return Pe(b,F,W)?(0,Ve.of)(new Y([],{})):An(b);throw se}))}expandSegmentAgainstRoute(C,b,M,F,W,J,se){return oe(F,b,W,J)?void 0===F.redirectTo?this.matchSegmentAgainstRoute(C,b,F,W,J):se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,b,M,F,W,J):An(b):An(b)}expandSegmentAgainstRouteUsingRedirect(C,b,M,F,W,J){return"**"===F.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,M,F,J):this.expandRegularSegmentAgainstRouteUsingRedirect(C,b,M,F,W,J)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,b,M,F){const W=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?yn(W):this.lineralizeSegments(M,W).pipe((0,He.z)(J=>{const se=new Y(J,{});return this.expandSegment(C,se,b,J,F,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,b,M,F,W,J){const{matched:se,consumedSegments:Oe,remainingSegments:mt,positionalParamSegments:Cn}=Yr(b,F,W);if(!se)return An(b);const Pt=this.applyRedirectCommands(Oe,F.redirectTo,Cn);return F.redirectTo.startsWith("/")?yn(Pt):this.lineralizeSegments(F,Pt).pipe((0,He.z)(Nn=>this.expandSegment(C,b,M,Nn.concat(mt),J,!1)))}matchSegmentAgainstRoute(C,b,M,F,W){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,Ve.of)(M._loadedConfig):this.configLoader.load(C.injector,M)).pipe((0,pe.U)(Pt=>(M._loadedConfig=Pt,new Y(F,{})))):(0,Ve.of)(new Y(F,{}));const{matched:J,consumedSegments:se,remainingSegments:Oe}=Yr(b,M,F);return J?this.getChildConfig(C,M,F).pipe((0,He.z)(Cn=>{const Pt=Cn.module,Nn=Cn.routes,{segmentGroup:Fn,slicedSegments:xo}=bs(b,se,Oe,Nn),so=new Y(Fn.segments,Fn.children);if(0===xo.length&&so.hasChildren())return this.expandChildren(Pt,Nn,so).pipe((0,pe.U)(kr=>new Y(se,kr)));if(0===Nn.length&&0===xo.length)return(0,Ve.of)(new Y(se,{}));const us=Qi(M)===W;return this.expandSegment(Pt,so,Nn,xo,us?Ot:W,!0).pipe((0,pe.U)(Mo=>new Y(se.concat(Mo.segments),Mo.children)))})):An(b)}getChildConfig(C,b,M){return b.children?(0,Ve.of)(new la(b.children,C)):b.loadChildren?void 0!==b._loadedConfig?(0,Ve.of)(b._loadedConfig):this.runCanLoadGuards(C.injector,b,M).pipe((0,He.z)(F=>F?this.configLoader.load(C.injector,b).pipe((0,pe.U)(W=>(b._loadedConfig=W,W))):function vn(S){return me(jn(`Cannot load children because the guard of the route "path: '${S.path}'" returned false`))}(b))):(0,Ve.of)(new la([],C))}runCanLoadGuards(C,b,M){const F=b.canLoad;if(!F||0===F.length)return(0,Ve.of)(!0);const W=F.map(J=>{const se=C.get(J);let Oe;if(function to(S){return S&&ri(S.canLoad)}(se))Oe=se.canLoad(b,M);else{if(!ri(se))throw new Error("Invalid CanLoad guard");Oe=se(b,M)}return Kn(Oe)});return(0,Ve.of)(W).pipe(as(),(0,yt.b)(J=>{if(!gi(J))return;const se=jn(`Redirecting to "${this.urlSerializer.serialize(J)}"`);throw se.url=J,se}),(0,pe.U)(J=>!0===J))}lineralizeSegments(C,b){let M=[],F=b.root;for(;;){if(M=M.concat(F.segments),0===F.numberOfChildren)return(0,Ve.of)(M);if(F.numberOfChildren>1||!F.children[Ot])return me(new Error(`Only absolute redirects can have named outlets. redirectTo: '${C.redirectTo}'`));F=F.children[Ot]}}applyRedirectCommands(C,b,M){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),C,M)}applyRedirectCreatreUrlTree(C,b,M,F){const W=this.createSegmentGroup(C,b.root,M,F);return new re(W,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(C,b){const M={};return oi(C,(F,W)=>{if("string"==typeof F&&F.startsWith(":")){const se=F.substring(1);M[W]=b[se]}else M[W]=F}),M}createSegmentGroup(C,b,M,F){const W=this.createSegments(C,b.segments,M,F);let J={};return oi(b.children,(se,Oe)=>{J[Oe]=this.createSegmentGroup(C,se,M,F)}),new Y(W,J)}createSegments(C,b,M,F){return b.map(W=>W.path.startsWith(":")?this.findPosParam(C,W,F):this.findOrReturn(W,M))}findPosParam(C,b,M){const F=M[b.path.substring(1)];if(!F)throw new Error(`Cannot redirect to '${C}'. Cannot find '${b.path}'.`);return F}findOrReturn(C,b){let M=0;for(const F of b){if(F.path===C.path)return b.splice(M),F;M++}return C}}function Or(S){const C={};for(const M of Object.keys(S.children)){const W=Or(S.children[M]);(W.segments.length>0||W.hasChildren())&&(C[M]=W)}return function Pn(S){if(1===S.numberOfChildren&&S.children[Ot]){const C=S.children[Ot];return new Y(S.segments.concat(C.segments),C.children)}return S}(new Y(S.segments,C))}class Rt{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Jr{constructor(C,b){this.component=C,this.route=b}}function ks(S,C,b){const M=S._root;return ws(M,C?C._root:null,b,[M.value])}function Qr(S,C,b){const M=function ka(S){if(!S)return null;for(let C=S.parent;C;C=C.parent){const b=C.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(C);return(M?M.module.injector:b).get(S)}function ws(S,C,b,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const W=Nt(C);return S.children.forEach(J=>{(function nl(S,C,b,M,F={canDeactivateChecks:[],canActivateChecks:[]}){const W=S.value,J=C?C.value:null,se=b?b.getContext(S.value.outlet):null;if(J&&W.routeConfig===J.routeConfig){const Oe=function Xe(S,C,b){if("function"==typeof b)return b(S,C);switch(b){case"pathParamsChange":return!ye(S.url,C.url);case"pathParamsOrQueryParamsChange":return!ye(S.url,C.url)||!at(S.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nr(S,C)||!at(S.queryParams,C.queryParams);default:return!Nr(S,C)}}(J,W,W.routeConfig.runGuardsAndResolvers);Oe?F.canActivateChecks.push(new Rt(M)):(W.data=J.data,W._resolvedData=J._resolvedData),ws(S,C,W.component?se?se.children:null:b,M,F),Oe&&se&&se.outlet&&se.outlet.isActivated&&F.canDeactivateChecks.push(new Jr(se.outlet.component,J))}else J&&hn(C,se,F),F.canActivateChecks.push(new Rt(M)),ws(S,null,W.component?se?se.children:null:b,M,F)})(J,W[J.value.outlet],b,M.concat([J.value]),F),delete W[J.value.outlet]}),oi(W,(J,se)=>hn(J,b.getContext(se),F)),F}function hn(S,C,b){const M=Nt(S),F=S.value;oi(M,(W,J)=>{hn(W,F.component?C?C.children.getContext(J):null:C,b)}),b.canDeactivateChecks.push(new Jr(F.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,F))}class Fa{}function da(S){return new h.y(C=>C.error(S))}class Cr{constructor(C,b,M,F,W,J){this.rootComponentType=C,this.config=b,this.urlTree=M,this.url=F,this.paramsInheritanceStrategy=W,this.relativeLinkResolution=J}recognize(){const C=bs(this.urlTree.root,[],[],this.config.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,C,Ot);if(null===b)return null;const M=new lr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),F=new Yn(M,b),W=new Er(this.url,F);return this.inheritParamsAndData(W._root),W}inheritParamsAndData(C){const b=C.value,M=zi(b,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data),C.children.forEach(F=>this.inheritParamsAndData(F))}processSegmentGroup(C,b,M){return 0===b.segments.length&&b.hasChildren()?this.processChildren(C,b):this.processSegment(C,b,b.segments,M)}processChildren(C,b){const M=[];for(const W of Object.keys(b.children)){const J=b.children[W],se=Do(C,W),Oe=this.processSegmentGroup(se,J,W);if(null===Oe)return null;M.push(...Oe)}const F=Dr(M);return function Xr(S){S.sort((C,b)=>C.value.outlet===Ot?-1:b.value.outlet===Ot?1:C.value.outlet.localeCompare(b.value.outlet))}(F),F}processSegment(C,b,M,F){for(const W of C){const J=this.processSegmentAgainstRoute(W,b,M,F);if(null!==J)return J}return Pe(b,M,F)?[]:null}processSegmentAgainstRoute(C,b,M,F){if(C.redirectTo||!oe(C,b,M,F))return null;let W,J=[],se=[];if("**"===C.path){const Fn=M.length>0?ci(M).parameters:{};W=new lr(M,Fn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rl(C),Qi(C),C.component,C,Va(b),fa(b)+M.length,zo(C))}else{const Fn=Yr(b,C,M);if(!Fn.matched)return null;J=Fn.consumedSegments,se=Fn.remainingSegments,W=new lr(J,Fn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rl(C),Qi(C),C.component,C,Va(b),fa(b)+J.length,zo(C))}const Oe=function ha(S){return S.children?S.children:S.loadChildren?S._loadedConfig.routes:[]}(C),{segmentGroup:mt,slicedSegments:Cn}=bs(b,J,se,Oe.filter(Fn=>void 0===Fn.redirectTo),this.relativeLinkResolution);if(0===Cn.length&&mt.hasChildren()){const Fn=this.processChildren(Oe,mt);return null===Fn?null:[new Yn(W,Fn)]}if(0===Oe.length&&0===Cn.length)return[new Yn(W,[])];const Pt=Qi(C)===F,Nn=this.processSegment(Oe,mt,Cn,Pt?Ot:F);return null===Nn?null:[new Yn(W,Nn)]}}function Ps(S){const C=S.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function Dr(S){const C=[],b=new Set;for(const M of S){if(!Ps(M)){C.push(M);continue}const F=C.find(W=>M.value.routeConfig===W.value.routeConfig);void 0!==F?(F.children.push(...M.children),b.add(F)):C.push(M)}for(const M of b){const F=Dr(M.children);C.push(new Yn(M.value,F))}return C.filter(M=>!b.has(M))}function Va(S){let C=S;for(;C._sourceSegment;)C=C._sourceSegment;return C}function fa(S){let C=S,b=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,b+=C._segmentIndexShift?C._segmentIndexShift:0;return b-1}function rl(S){return S.data||{}}function zo(S){return S.resolve||{}}function To(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}function qo(S){return(0,et.w)(C=>{const b=S(C);return b?(0,he.D)(b).pipe((0,pe.U)(()=>C)):(0,Ve.of)(C)})}class _a extends class ma{shouldDetach(C){return!1}store(C,b){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,b){return C.routeConfig===b.routeConfig}}{}const So=new I.OlP("ROUTES");class Fl{constructor(C,b,M,F){this.injector=C,this.compiler=b,this.onLoadStartListener=M,this.onLoadEndListener=F}load(C,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const F=this.loadModuleFactory(b.loadChildren).pipe((0,pe.U)(W=>{this.onLoadEndListener&&this.onLoadEndListener(b);const J=W.create(C);return new la(ui(J.injector.get(So,void 0,I.XFs.Self|I.XFs.Optional)).map(Go),J)}),dt(W=>{throw b._loader$=void 0,W}));return b._loader$=new ie(F,()=>new _t.x).pipe(ne()),b._loader$}loadModuleFactory(C){return Kn(C()).pipe((0,He.z)(b=>b instanceof I.YKP?(0,Ve.of)(b):(0,he.D)(this.compiler.compileModuleAsync(b))))}}class cr{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,b){return C}}function Zo(S){throw S}function Li(S,C,b){return C.parse("/")}function sl(S,C){return(0,Ve.of)(null)}const Yu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ur=(()=>{class S{constructor(b,M,F,W,J,se,Oe){this.rootComponentType=b,this.urlSerializer=M,this.rootContexts=F,this.location=W,this.config=Oe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _t.x,this.errorHandler=Zo,this.malformedUriErrorHandler=Li,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sl,afterPreactivation:sl},this.urlHandlingStrategy=new cr,this.routeReuseStrategy=new _a,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=J.get(I.h0i),this.console=J.get(I.c2e);const Pt=J.get(I.R0b);this.isNgZoneEnabled=Pt instanceof I.R0b&&I.R0b.isInAngularZone(),this.resetConfig(Oe),this.currentUrlTree=function Ri(){return new re(new Y([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fl(J,se,Nn=>this.triggerEvent(new or(Nn)),Nn=>this.triggerEvent(new Ki(Nn))),this.routerState=zr(this.currentUrlTree,this.rootComponentType),this.transitions=new Be.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const M=this.events;return b.pipe((0,$e.h)(F=>0!==F.id),(0,pe.U)(F=>Object.assign(Object.assign({},F),{extractedUrl:this.urlHandlingStrategy.extract(F.rawUrl)})),(0,et.w)(F=>{let W=!1,J=!1;return(0,Ve.of)(F).pipe((0,yt.b)(se=>{this.currentNavigation={id:se.id,initialUrl:se.currentRawUrl,extractedUrl:se.extractedUrl,trigger:se.source,extras:se.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,et.w)(se=>{const Oe=this.browserUrlTree.toString(),mt=!this.navigated||se.extractedUrl.toString()!==Oe||Oe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||mt)&&this.urlHandlingStrategy.shouldProcessUrl(se.rawUrl))return ol(se.source)&&(this.browserUrlTree=se.extractedUrl),(0,Ve.of)(se).pipe((0,et.w)(Pt=>{const Nn=this.transitions.getValue();return M.next(new Ai(Pt.id,this.serializeUrl(Pt.extractedUrl),Pt.source,Pt.restoredState)),Nn!==this.transitions.getValue()?Ue.E:Promise.resolve(Pt)}),function Xi(S,C,b,M){return(0,et.w)(F=>function hi(S,C,b,M,F){return new Jn(S,C,b,M,F).apply()}(S,C,b,F.extractedUrl,M).pipe((0,pe.U)(W=>Object.assign(Object.assign({},F),{urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yt.b)(Pt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Pt.urlAfterRedirects})}),function Io(S,C,b,M,F){return(0,He.z)(W=>function io(S,C,b,M,F="emptyOnly",W="legacy"){try{const J=new Cr(S,C,b,M,F,W).recognize();return null===J?da(new Fa):(0,Ve.of)(J)}catch(J){return da(J)}}(S,C,W.urlAfterRedirects,b(W.urlAfterRedirects),M,F).pipe((0,pe.U)(J=>Object.assign(Object.assign({},W),{targetSnapshot:J}))))}(this.rootComponentType,this.config,Pt=>this.serializeUrl(Pt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yt.b)(Pt=>{if("eager"===this.urlUpdateStrategy){if(!Pt.extras.skipLocationChange){const Fn=this.urlHandlingStrategy.merge(Pt.urlAfterRedirects,Pt.rawUrl);this.setBrowserUrl(Fn,Pt)}this.browserUrlTree=Pt.urlAfterRedirects}const Nn=new pn(Pt.id,this.serializeUrl(Pt.extractedUrl),this.serializeUrl(Pt.urlAfterRedirects),Pt.targetSnapshot);M.next(Nn)}));if(mt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Nn,extractedUrl:Fn,source:xo,restoredState:so,extras:us}=se,ll=new Ai(Nn,this.serializeUrl(Fn),xo,so);M.next(ll);const Mo=zr(Fn,this.rootComponentType).snapshot;return(0,Ve.of)(Object.assign(Object.assign({},se),{targetSnapshot:Mo,urlAfterRedirects:Fn,extras:Object.assign(Object.assign({},us),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=se.rawUrl,se.resolve(null),Ue.E}),qo(se=>{const{targetSnapshot:Oe,id:mt,extractedUrl:Cn,rawUrl:Pt,extras:{skipLocationChange:Nn,replaceUrl:Fn}}=se;return this.hooks.beforePreactivation(Oe,{navigationId:mt,appliedUrlTree:Cn,rawUrlTree:Pt,skipLocationChange:!!Nn,replaceUrl:!!Fn})}),(0,yt.b)(se=>{const Oe=new Ni(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);this.triggerEvent(Oe)}),(0,pe.U)(se=>Object.assign(Object.assign({},se),{guards:ks(se.targetSnapshot,se.currentSnapshot,this.rootContexts)})),function ca(S,C){return(0,He.z)(b=>{const{targetSnapshot:M,currentSnapshot:F,guards:{canActivateChecks:W,canDeactivateChecks:J}}=b;return 0===J.length&&0===W.length?(0,Ve.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function mi(S,C,b,M){return(0,he.D)(S).pipe((0,He.z)(F=>function il(S,C,b,M,F){const W=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,Ve.of)(!0);const J=W.map(se=>{const Oe=Qr(se,C,F);let mt;if(function Uo(S){return S&&ri(S.canDeactivate)}(Oe))mt=Kn(Oe.canDeactivate(S,C,b,M));else{if(!ri(Oe))throw new Error("Invalid CanDeactivate guard");mt=Kn(Oe(S,C,b,M))}return mt.pipe((0,Wn.P)())});return(0,Ve.of)(J).pipe(as())}(F.component,F.route,b,C,M)),(0,Wn.P)(F=>!0!==F,!0))}(J,M,F,S).pipe((0,He.z)(se=>se&&function Zr(S){return"boolean"==typeof S}(se)?function ua(S,C,b,M){return(0,he.D)(C).pipe(Ge(F=>(0,Re.z)(function cs(S,C){return null!==S&&C&&C(new ar(S)),(0,Ve.of)(!0)}(F.route.parent,M),function $o(S,C){return null!==S&&C&&C(new At(S)),(0,Ve.of)(!0)}(F.route,M),function Pa(S,C,b){const M=C[C.length-1],W=C.slice(0,C.length-1).reverse().map(J=>function no(S){const C=S.routeConfig?S.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:S,guards:C}:null}(J)).filter(J=>null!==J).map(J=>we(()=>{const se=J.guards.map(Oe=>{const mt=Qr(Oe,J.node,b);let Cn;if(function vs(S){return S&&ri(S.canActivateChild)}(mt))Cn=Kn(mt.canActivateChild(M,S));else{if(!ri(mt))throw new Error("Invalid CanActivateChild guard");Cn=Kn(mt(M,S))}return Cn.pipe((0,Wn.P)())});return(0,Ve.of)(se).pipe(as())}));return(0,Ve.of)(W).pipe(as())}(S,F.path,b),function Wo(S,C,b){const M=C.routeConfig?C.routeConfig.canActivate:null;if(!M||0===M.length)return(0,Ve.of)(!0);const F=M.map(W=>we(()=>{const J=Qr(W,C,b);let se;if(function ys(S){return S&&ri(S.canActivate)}(J))se=Kn(J.canActivate(C,S));else{if(!ri(J))throw new Error("Invalid CanActivate guard");se=Kn(J(C,S))}return se.pipe((0,Wn.P)())}));return(0,Ve.of)(F).pipe(as())}(S,F.route,b))),(0,Wn.P)(F=>!0!==F,!0))}(M,W,S,C):(0,Ve.of)(se)),(0,pe.U)(se=>Object.assign(Object.assign({},b),{guardsResult:se})))})}(this.ngModule.injector,se=>this.triggerEvent(se)),(0,yt.b)(se=>{if(gi(se.guardsResult)){const mt=jn(`Redirecting to "${this.serializeUrl(se.guardsResult)}"`);throw mt.url=se.guardsResult,mt}const Oe=new yr(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot,!!se.guardsResult);this.triggerEvent(Oe)}),(0,$e.h)(se=>!!se.guardsResult||(this.restoreHistory(se),this.cancelNavigationTransition(se,""),!1)),qo(se=>{if(se.guards.canActivateChecks.length)return(0,Ve.of)(se).pipe((0,yt.b)(Oe=>{const mt=new ss(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(mt)}),(0,et.w)(Oe=>{let mt=!1;return(0,Ve.of)(Oe).pipe(function pa(S,C){return(0,He.z)(b=>{const{targetSnapshot:M,guards:{canActivateChecks:F}}=b;if(!F.length)return(0,Ve.of)(b);let W=0;return(0,he.D)(F).pipe(Ge(J=>function Ba(S,C,b,M){return function ga(S,C,b,M){const F=To(S);if(0===F.length)return(0,Ve.of)({});const W={};return(0,he.D)(F).pipe((0,He.z)(J=>function ro(S,C,b,M){const F=Qr(S,C,M);return Kn(F.resolve?F.resolve(C,b):F(C,b))}(S[J],C,b,M).pipe((0,yt.b)(se=>{W[J]=se}))),ht(1),(0,He.z)(()=>To(W).length===F.length?(0,Ve.of)(W):Ue.E))}(S._resolve,S,C,M).pipe((0,pe.U)(W=>(S._resolvedData=W,S.data=Object.assign(Object.assign({},S.data),zi(S,b).resolve),null)))}(J.route,M,S,C)),(0,yt.b)(()=>W++),ht(1),(0,He.z)(J=>W===F.length?(0,Ve.of)(b):Ue.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yt.b)({next:()=>mt=!0,complete:()=>{mt||(this.restoreHistory(Oe),this.cancelNavigationTransition(Oe,"At least one route resolver didn't emit any value."))}}))}),(0,yt.b)(Oe=>{const mt=new Ui(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(mt)}))}),qo(se=>{const{targetSnapshot:Oe,id:mt,extractedUrl:Cn,rawUrl:Pt,extras:{skipLocationChange:Nn,replaceUrl:Fn}}=se;return this.hooks.afterPreactivation(Oe,{navigationId:mt,appliedUrlTree:Cn,rawUrlTree:Pt,skipLocationChange:!!Nn,replaceUrl:!!Fn})}),(0,pe.U)(se=>{const Oe=function qr(S,C,b){const M=wo(S,C._root,b?b._root:void 0);return new ki(M,C)}(this.routeReuseStrategy,se.targetSnapshot,se.currentRouterState);return Object.assign(Object.assign({},se),{targetRouterState:Oe})}),(0,yt.b)(se=>{this.currentUrlTree=se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl),this.routerState=se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,se),this.browserUrlTree=se.urlAfterRedirects)}),((S,C,b)=>(0,pe.U)(M=>(new Bo(C,M.targetRouterState,M.currentRouterState,b).activate(S),M)))(this.rootContexts,this.routeReuseStrategy,se=>this.triggerEvent(se)),(0,yt.b)({next(){W=!0},complete(){W=!0}}),function ke(S){return(0,be.e)((C,b)=>{try{C.subscribe(b)}finally{b.add(S)}})}(()=>{var se;W||J||this.cancelNavigationTransition(F,`Navigation ID ${F.id} is not equal to the current navigation id ${this.navigationId}`),(null===(se=this.currentNavigation)||void 0===se?void 0:se.id)===F.id&&(this.currentNavigation=null)}),dt(se=>{if(J=!0,function ji(S){return S&&S[Mt]}(se)){const Oe=gi(se.url);Oe||(this.navigated=!0,this.restoreHistory(F,!0));const mt=new Zi(F.id,this.serializeUrl(F.extractedUrl),se.message);M.next(mt),Oe?setTimeout(()=>{const Cn=this.urlHandlingStrategy.merge(se.url,this.rawUrlTree),Pt={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ol(F.source)};this.scheduleNavigation(Cn,"imperative",null,Pt,{resolve:F.resolve,reject:F.reject,promise:F.promise})},0):F.resolve(!1)}else{this.restoreHistory(F,!0);const Oe=new Mn(F.id,this.serializeUrl(F.extractedUrl),se);M.next(Oe);try{F.resolve(this.errorHandler(se))}catch(mt){F.reject(mt)}}return Ue.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const M="popstate"===b.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var F;const W={replaceUrl:!0},J=(null===(F=b.state)||void 0===F?void 0:F.navigationId)?b.state:null;if(J){const Oe=Object.assign({},J);delete Oe.navigationId,delete Oe.\u0275routerPageId,0!==Object.keys(Oe).length&&(W.state=Oe)}const se=this.parseUrl(b.url);this.scheduleNavigation(se,M,J,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){Fi(b),this.config=b.map(Go),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,M={}){const{relativeTo:F,queryParams:W,fragment:J,queryParamsHandling:se,preserveFragment:Oe}=M,mt=F||this.routerState.root,Cn=Oe?this.currentUrlTree.fragment:J;let Pt=null;switch(se){case"merge":Pt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),W);break;case"preserve":Pt=this.currentUrlTree.queryParams;break;default:Pt=W||null}return null!==Pt&&(Pt=this.removeEmptyProps(Pt)),function Pi(S,C,b,M,F){if(0===b.length)return Di(C.root,C.root,C.root,M,F);const W=function _s(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new de(!0,0,S);let C=0,b=!1;const M=S.reduce((F,W,J)=>{if("object"==typeof W&&null!=W){if(W.outlets){const se={};return oi(W.outlets,(Oe,mt)=>{se[mt]="string"==typeof Oe?Oe.split("/"):Oe}),[...F,{outlets:se}]}if(W.segmentPath)return[...F,W.segmentPath]}return"string"!=typeof W?[...F,W]:0===J?(W.split("/").forEach((se,Oe)=>{0==Oe&&"."===se||(0==Oe&&""===se?b=!0:".."===se?C++:""!=se&&F.push(se))}),F):[...F,W]},[]);return new de(b,C,M)}(b);if(W.toRoot())return Di(C.root,C.root,new Y([],{}),M,F);const J=function kl(S,C,b){if(S.isAbsolute)return new xr(C.root,!0,0);if(-1===b.snapshot._lastPathIndex){const W=b.snapshot._urlSegment;return new xr(W,W===C.root,0)}const M=sa(S.commands[0])?0:1;return function oa(S,C,b){let M=S,F=C,W=b;for(;W>F;){if(W-=F,M=M.parent,!M)throw new Error("Invalid number of '../'");F=M.segments.length}return new xr(M,!1,F-W)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+M,S.numberOfDoubleDots)}(W,C,S),se=J.processChildren?Mr(J.segmentGroup,J.index,W.commands):Ii(J.segmentGroup,J.index,W.commands);return Di(C.root,J.segmentGroup,se,M,F)}(mt,this.currentUrlTree,b,Pt,null!=Cn?Cn:null)}navigateByUrl(b,M={skipLocationChange:!1}){const F=gi(b)?b:this.parseUrl(b),W=this.urlHandlingStrategy.merge(F,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,M)}navigate(b,M={skipLocationChange:!1}){return function Ju(S){for(let C=0;C<S.length;C++){const b=S[C];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${C}`)}}(b),this.navigateByUrl(this.createUrlTree(b,M),M)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let M;try{M=this.urlSerializer.parse(b)}catch(F){M=this.malformedUriErrorHandler(F,this.urlSerializer,b)}return M}isActive(b,M){let F;if(F=!0===M?Object.assign({},Yu):!1===M?Object.assign({},Zc):M,gi(b))return gn(this.currentUrlTree,b,F);const W=this.parseUrl(b);return gn(this.currentUrlTree,W,F)}removeEmptyProps(b){return Object.keys(b).reduce((M,F)=>{const W=b[F];return null!=W&&(M[F]=W),M},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new ln(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,M,F,W,J){var se,Oe;if(this.disposed)return Promise.resolve(!1);let mt,Cn,Pt;J?(mt=J.resolve,Cn=J.reject,Pt=J.promise):Pt=new Promise((xo,so)=>{mt=xo,Cn=so});const Nn=++this.navigationId;let Fn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(F=this.location.getState()),Fn=F&&F.\u0275routerPageId?F.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?null!==(se=this.browserPageId)&&void 0!==se?se:0:(null!==(Oe=this.browserPageId)&&void 0!==Oe?Oe:0)+1):Fn=0,this.setTransition({id:Nn,targetPageId:Fn,source:M,restoredState:F,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:W,resolve:mt,reject:Cn,promise:Pt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pt.catch(xo=>Promise.reject(xo))}setBrowserUrl(b,M){const F=this.urlSerializer.serialize(b),W=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(F)||M.extras.replaceUrl?this.location.replaceState(F,"",W):this.location.go(F,"",W)}restoreHistory(b,M=!1){var F,W;if("computed"===this.canceledNavigationResolution){const J=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(F=this.currentNavigation)||void 0===F?void 0:F.finalUrl)||0===J?this.currentUrlTree===(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)&&0===J&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(J)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,M){const F=new Zi(b.id,this.serializeUrl(b.extractedUrl),M);this.triggerEvent(F),b.resolve(!1)}generateNgRouterState(b,M){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:M}:{navigationId:b}}}return S.\u0275fac=function(b){I.$Z()},S.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac}),S})();function ol(S){return"imperative"!==S}class al{}class Rr{preload(C,b){return(0,Ve.of)(null)}}let ya=(()=>{class S{constructor(b,M,F,W){this.router=b,this.injector=F,this.preloadingStrategy=W,this.loader=new Fl(F,M,Oe=>b.triggerEvent(new or(Oe)),Oe=>b.triggerEvent(new Ki(Oe)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,$e.h)(b=>b instanceof ln),Ge(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(I.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,M){const F=[];for(const W of M)if(W.loadChildren&&!W.canLoad&&W._loadedConfig){const J=W._loadedConfig;F.push(this.processRoutes(J.module,J.routes))}else W.loadChildren&&!W.canLoad?F.push(this.preloadConfig(b,W)):W.children&&F.push(this.processRoutes(b,W.children));return(0,he.D)(F).pipe((0,Tt.J)(),(0,pe.U)(W=>{}))}preloadConfig(b,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,Ve.of)(M._loadedConfig):this.loader.load(b.injector,M)).pipe((0,He.z)(W=>(M._loadedConfig=W,this.processRoutes(W.module,W.routes)))))}}return S.\u0275fac=function(b){return new(b||S)(I.LFG(ur),I.LFG(I.Sil),I.LFG(I.zs3),I.LFG(al))},S.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac}),S})(),qs=(()=>{class S{constructor(b,M,F={}){this.router=b,this.viewportScroller=M,this.options=F,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},F.scrollPositionRestoration=F.scrollPositionRestoration||"disabled",F.anchorScrolling=F.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Ai?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof ln&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Vn&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,M){this.router.triggerEvent(new Vn(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return S.\u0275fac=function(b){I.$Z()},S.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac}),S})();const Cs=new I.OlP("ROUTER_CONFIGURATION"),Ao=new I.OlP("ROUTER_FORROOT_GUARD"),va=[Qt.Ye,{provide:Ut,useClass:Sn},{provide:ur,useFactory:function Ke(S,C,b,M,F,W,J={},se,Oe){const mt=new ur(null,S,C,b,M,F,ui(W));return se&&(mt.urlHandlingStrategy=se),Oe&&(mt.routeReuseStrategy=Oe),function kt(S,C){S.errorHandler&&(C.errorHandler=S.errorHandler),S.malformedUriErrorHandler&&(C.malformedUriErrorHandler=S.malformedUriErrorHandler),S.onSameUrlNavigation&&(C.onSameUrlNavigation=S.onSameUrlNavigation),S.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=S.paramsInheritanceStrategy),S.relativeLinkResolution&&(C.relativeLinkResolution=S.relativeLinkResolution),S.urlUpdateStrategy&&(C.urlUpdateStrategy=S.urlUpdateStrategy),S.canceledNavigationResolution&&(C.canceledNavigationResolution=S.canceledNavigationResolution)}(J,mt),J.enableTracing&&mt.events.subscribe(Cn=>{var Pt,Nn;null===(Pt=console.group)||void 0===Pt||Pt.call(console,`Router Event: ${Cn.constructor.name}`),console.log(Cn.toString()),console.log(Cn),null===(Nn=console.groupEnd)||void 0===Nn||Nn.call(console)}),mt},deps:[Ut,qi,Qt.Ye,I.zs3,I.Sil,So,Cs,[class Ll{},new I.FiY],[class Ws{},new I.FiY]]},qi,{provide:wr,useFactory:function en(S){return S.routerState.root},deps:[ur]},ya,Rr,class ts{preload(C,b){return b().pipe(dt(()=>(0,Ve.of)(null)))}},{provide:Cs,useValue:{enableTracing:!1}}];function No(){return new I.PXZ("Router",ur)}let Mi=(()=>{class S{constructor(b,M){}static forRoot(b,M){return{ngModule:S,providers:[va,ee(b),{provide:Ao,useFactory:U,deps:[[ur,new I.FiY,new I.tp0]]},{provide:Cs,useValue:M||{}},{provide:Qt.S$,useFactory:A,deps:[Qt.lw,[new I.tBr(Qt.mr),new I.FiY],Cs]},{provide:qs,useFactory:T,deps:[ur,Qt.EM,Cs]},{provide:al,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:Rr},{provide:I.PXZ,multi:!0,useFactory:No},[fi,{provide:I.ip1,multi:!0,useFactory:ot,deps:[fi]},{provide:Gt,useFactory:Ds,deps:[fi]},{provide:I.tb,multi:!0,useExisting:Gt}]]}}static forChild(b){return{ngModule:S,providers:[ee(b)]}}}return S.\u0275fac=function(b){return new(b||S)(I.LFG(Ao,8),I.LFG(ur,8))},S.\u0275mod=I.oAB({type:S}),S.\u0275inj=I.cJS({}),S})();function T(S,C,b){return b.scrollOffset&&C.setOffset(b.scrollOffset),new qs(S,C,b)}function A(S,C,b={}){return b.useHash?new Qt.Do(S,C):new Qt.b0(S,C)}function U(S){return"guarded"}function ee(S){return[{provide:I.deG,multi:!0,useValue:S},{provide:So,multi:!0,useValue:S}]}let fi=(()=>{class S{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _t.x}appInitializer(){return this.injector.get(Qt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const F=new Promise(se=>M=se),W=this.injector.get(ur),J=this.injector.get(Cs);return"disabled"===J.initialNavigation?(W.setUpLocationChangeListener(),M(!0)):"enabled"===J.initialNavigation||"enabledBlocking"===J.initialNavigation?(W.hooks.afterPreactivation=()=>this.initNavigation?(0,Ve.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),W.initialNavigation()):M(!0),F})}bootstrapListener(b){const M=this.injector.get(Cs),F=this.injector.get(ya),W=this.injector.get(qs),J=this.injector.get(ur),se=this.injector.get(I.z2F);b===se.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&J.initialNavigation(),F.setUpPreloading(),W.init(),J.resetRootComponentType(se.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return S.\u0275fac=function(b){return new(b||S)(I.LFG(I.zs3))},S.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac}),S})();function ot(S){return S.appInitializer.bind(S)}function Ds(S){return S.bootstrapListener.bind(S)}const Gt=new I.OlP("Router Initializer")},3394:(bt,xe,j)=>{"use strict";j.d(xe,{Z:()=>Je});var I=j(3854),h=j(3910),Z=j(8026),me=j(5422);class ue{constructor(Re,Ue){this._delegate=Re,this.firebase=Ue,(0,Z._addComponent)(Re,new h.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Z.deleteApp)(this._delegate)))}_getService(Re,Ue=Z._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(Re);return!dt.isInitialized()&&"EXPLICIT"===(null===(_t=dt.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:Ue})}_removeServiceInstance(Re,Ue=Z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(Ue)}_addComponent(Re){(0,Z._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,Z._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const De=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function Ce(){const nt=function be(nt){const Re={},Ue={__esModule:!0,initializeApp:function He(le,Te={}){const fe=Z.initializeApp(le,Te);if((0,I.r3)(Re,fe.name))return Re[fe.name];const Se=new nt(fe,Ue);return Re[fe.name]=Se,Se},app:dt,registerVersion:Z.registerVersion,setLogLevel:Z.setLogLevel,onLog:Z.onLog,apps:null,SDK_VERSION:Z.SDK_VERSION,INTERNAL:{registerComponent:function $e(le){const Te=le.name,fe=Te.replace("-compat","");if(Z._registerComponent(le)&&"PUBLIC"===le.type){const Se=(ke=dt())=>{if("function"!=typeof ke[fe])throw De.create("invalid-app-argument",{appName:Te});return ke[fe]()};void 0!==le.serviceProps&&(0,I.ZB)(Se,le.serviceProps),Ue[fe]=Se,nt.prototype[fe]=function(...ke){return this._getService.bind(this,Te).apply(this,le.multipleInstances?ke:[])}}return"PUBLIC"===le.type?Ue[fe]:null},removeApp:function _t(le){delete Re[le]},useAsService:function ht(le,Te){return"serverAuth"===Te?null:Te},modularAPIs:Z}};function dt(le){if(!(0,I.r3)(Re,le=le||Z._DEFAULT_ENTRY_NAME))throw De.create("no-app",{appName:le});return Re[le]}return Ue.default=Ue,Object.defineProperty(Ue,"apps",{get:function Ge(){return Object.keys(Re).map(le=>Re[le])}}),dt.App=nt,Ue}(ue);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function Re(Ue){(0,I.ZB)(nt,Ue)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),nt}(),ie=new me.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=ne;!function Be(nt){(0,Z.registerVersion)("@firebase/app-compat","0.1.21",nt)}()},8026:(bt,xe,j)=>{"use strict";j.r(xe),j.d(xe,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>Ui,_DEFAULT_ENTRY_NAME:()=>Wn,_addComponent:()=>bn,_addOrOverwriteComponent:()=>Ai,_apps:()=>Tt,_clearComponents:()=>pn,_components:()=>Qt,_getProvider:()=>Zi,_registerComponent:()=>ln,_removeServiceInstance:()=>Mn,deleteApp:()=>ti,getApp:()=>Ki,getApps:()=>ar,initializeApp:()=>or,onLog:()=>Vn,registerVersion:()=>Ar,setLogLevel:()=>Ot});var I=j(8239),h=j(3910),Z=j(5422),me=j(3854);class ue{constructor(Ye){this.container=Ye}getPlatformInfoString(){return this.container.getProviders().map(It=>{if(function we(Qe){const Ye=Qe.getComponent();return"VERSION"===(null==Ye?void 0:Ye.type)}(It)){const Wt=It.getImmediate();return`${Wt.library}/${Wt.version}`}return null}).filter(It=>It).join(" ")}}const De="@firebase/app",Ce=new Z.Yd("@firebase/app"),Wn="[DEFAULT]",yt={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Tt=new Map,Qt=new Map;function bn(Qe,Ye){try{Qe.container.addComponent(Ye)}catch(It){Ce.debug(`Component ${Ye.name} failed to register with FirebaseApp ${Qe.name}`,It)}}function Ai(Qe,Ye){Qe.container.addOrOverwriteComponent(Ye)}function ln(Qe){const Ye=Qe.name;if(Qt.has(Ye))return Ce.debug(`There were multiple attempts to register component ${Ye}.`),!1;Qt.set(Ye,Qe);for(const It of Tt.values())bn(It,Qe);return!0}function Zi(Qe,Ye){const It=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return It&&It.triggerHeartbeat(),Qe.container.getProvider(Ye)}function Mn(Qe,Ye,It=Wn){Zi(Qe,Ye).clearInstance(It)}function pn(){Qt.clear()}const yr=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ss{constructor(Ye,It,Wt){this._isDeleted=!1,this._options=Object.assign({},Ye),this._config=Object.assign({},It),this._name=It.name,this._automaticDataCollectionEnabled=It.automaticDataCollectionEnabled,this._container=Wt,this.container.addComponent(new h.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ye){this._isDeleted=Ye}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}const Ui="9.6.10";function or(Qe,Ye={}){"object"!=typeof Ye&&(Ye={name:Ye});const It=Object.assign({name:Wn,automaticDataCollectionEnabled:!1},Ye),Wt=It.name;if("string"!=typeof Wt||!Wt)throw yr.create("bad-app-name",{appName:String(Wt)});const _n=Tt.get(Wt);if(_n){if((0,me.vZ)(Qe,_n.options)&&(0,me.vZ)(It,_n.config))return _n;throw yr.create("duplicate-app",{appName:Wt})}const Yt=new h.H0(Wt);for(const Y of Qt.values())Yt.addComponent(Y);const re=new ss(Qe,It,Yt);return Tt.set(Wt,re),re}function Ki(Qe=Wn){const Ye=Tt.get(Qe);if(!Ye)throw yr.create("no-app",{appName:Qe});return Ye}function ar(){return Array.from(Tt.values())}function ti(Qe){return At.apply(this,arguments)}function At(){return(At=(0,I.Z)(function*(Qe){const Ye=Qe.name;Tt.has(Ye)&&(Tt.delete(Ye),yield Promise.all(Qe.container.getProviders().map(It=>It.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function Ar(Qe,Ye,It){var Wt;let _n=null!==(Wt=yt[Qe])&&void 0!==Wt?Wt:Qe;It&&(_n+=`-${It}`);const Yt=_n.match(/\s|\//),re=Ye.match(/\s|\//);if(Yt||re){const Y=[`Unable to register library "${_n}" with version "${Ye}":`];return Yt&&Y.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),Yt&&re&&Y.push("and"),re&&Y.push(`version name "${Ye}" contains illegal characters (whitespace or "/")`),void Ce.warn(Y.join(" "))}ln(new h.wA(`${_n}-version`,()=>({library:_n,version:Ye}),"VERSION"))}function Vn(Qe,Ye){if(null!==Qe&&"function"!=typeof Qe)throw yr.create("invalid-log-argument");(0,Z.Am)(Qe,Ye)}function Ot(Qe){(0,Z.Ub)(Qe)}const Mt="firebase-heartbeat-store";let jn=null;function ji(){return jn||(jn=(0,me.X3)("firebase-heartbeat-database",1,(Qe,Ye)=>{0===Ye&&Qe.createObjectStore(Mt)}).catch(Qe=>{throw yr.create("storage-open",{originalErrorMessage:Qe.message})})),jn}function zt(){return(zt=(0,I.Z)(function*(Qe){try{return(yield ji()).transaction(Mt).objectStore(Mt).get(ui(Qe))}catch(Ye){throw yr.create("storage-get",{originalErrorMessage:Ye.message})}})).apply(this,arguments)}function at(Qe,Ye){return qt.apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(Qe,Ye){try{const Wt=(yield ji()).transaction(Mt,"readwrite");return yield Wt.objectStore(Mt).put(Ye,ui(Qe)),Wt.complete}catch(It){throw yr.create("storage-set",{originalErrorMessage:It.message})}})).apply(this,arguments)}function ui(Qe){return`${Qe.name}!${Qe.options.appId}`}class oi{constructor(Ye){this.container=Ye,this._heartbeatsCache=null;const It=this.container.getProvider("app").getImmediate();this._storage=new $t(It),this._heartbeatsCachePromise=this._storage.read().then(Wt=>(this._heartbeatsCache=Wt,Wt))}triggerHeartbeat(){var Ye=this;return(0,I.Z)(function*(){const Wt=Ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=Kn();if(null===Ye._heartbeatsCache&&(Ye._heartbeatsCache=yield Ye._heartbeatsCachePromise),Ye._heartbeatsCache.lastSentHeartbeatDate!==_n&&!Ye._heartbeatsCache.heartbeats.some(Yt=>Yt.date===_n))return Ye._heartbeatsCache.heartbeats.push({date:_n,agent:Wt}),Ye._heartbeatsCache.heartbeats=Ye._heartbeatsCache.heartbeats.filter(Yt=>{const re=new Date(Yt.date).valueOf();return Date.now()-re<=2592e6}),Ye._storage.overwrite(Ye._heartbeatsCache)})()}getHeartbeatsHeader(){var Ye=this;return(0,I.Z)(function*(){if(null===Ye._heartbeatsCache&&(yield Ye._heartbeatsCachePromise),null===Ye._heartbeatsCache||0===Ye._heartbeatsCache.heartbeats.length)return"";const It=Kn(),{heartbeatsToSend:Wt,unsentEntries:_n}=function Ri(Qe,Ye=1024){const It=[];let Wt=Qe.slice();for(const _n of Qe){const Yt=It.find(re=>re.agent===_n.agent);if(Yt){if(Yt.dates.push(_n.date),Gi(It)>Ye){Yt.dates.pop();break}}else if(It.push({agent:_n.agent,dates:[_n.date]}),Gi(It)>Ye){It.pop();break}Wt=Wt.slice(1)}return{heartbeatsToSend:It,unsentEntries:Wt}}(Ye._heartbeatsCache.heartbeats),Yt=(0,me.L)(JSON.stringify({version:2,heartbeats:Wt}));return Ye._heartbeatsCache.lastSentHeartbeatDate=It,_n.length>0?(Ye._heartbeatsCache.heartbeats=_n,yield Ye._storage.overwrite(Ye._heartbeatsCache)):(Ye._heartbeatsCache.heartbeats=[],Ye._storage.overwrite(Ye._heartbeatsCache)),Yt})()}}function Kn(){return(new Date).toISOString().substring(0,10)}class $t{constructor(Ye){this.app=Ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,me.hl)()&&(0,me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ye=this;return(0,I.Z)(function*(){return(yield Ye._canUseIndexedDBPromise)&&(yield function Hi(Qe){return zt.apply(this,arguments)}(Ye.app))||{heartbeats:[]}})()}overwrite(Ye){var It=this;return(0,I.Z)(function*(){var Wt;if(yield It._canUseIndexedDBPromise){const Yt=yield It.read();return at(It.app,{lastSentHeartbeatDate:null!==(Wt=Ye.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Yt.lastSentHeartbeatDate,heartbeats:Ye.heartbeats})}})()}add(Ye){var It=this;return(0,I.Z)(function*(){var Wt;if(yield It._canUseIndexedDBPromise){const Yt=yield It.read();return at(It.app,{lastSentHeartbeatDate:null!==(Wt=Ye.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Yt.lastSentHeartbeatDate,heartbeats:[...Yt.heartbeats,...Ye.heartbeats]})}})()}}function Gi(Qe){return(0,me.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function gn(Qe){ln(new h.wA("platform-logger",Ye=>new ue(Ye),"PRIVATE")),ln(new h.wA("heartbeat",Ye=>new oi(Ye),"PRIVATE")),Ar(De,"0.7.20",Qe),Ar(De,"0.7.20","esm2017"),Ar("fire-js","")}("")},3910:(bt,xe,j)=>{"use strict";j.d(xe,{wA:()=>Z,H0:()=>be});var I=j(8239),h=j(3854);class Z{constructor(ne,ie,he){this.name=ne,this.instanceFactory=ie,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const me="[DEFAULT]";class ue{constructor(ne,ie){this.name=ne,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const ie=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(ie)){const he=new h.BH;if(this.instancesDeferred.set(ie,he),this.isInitialized(ie)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:ie});Ve&&he.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(ie).promise}getImmediate(ne){var ie;const he=this.normalizeInstanceIdentifier(null==ne?void 0:ne.identifier),Ve=null!==(ie=null==ne?void 0:ne.optional)&&void 0!==ie&&ie;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(Be){if(Ve)return null;throw Be}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function De(Ce){return"EAGER"===Ce.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:me})}catch(ie){}for(const[ie,he]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(ie);try{const Be=this.getOrInitializeService({instanceIdentifier:Ve});he.resolve(Be)}catch(Be){}}}}clearInstance(ne=me){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,I.Z)(function*(){const ie=Array.from(ne.instances.values());yield Promise.all([...ie.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...ie.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=me){return this.instances.has(ne)}getOptions(ne=me){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:ie={}}=ne,he=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:he,options:ie});for(const[Be,Je]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(Be)&&Je.resolve(Ve);return Ve}onInit(ne,ie){var he;const Ve=this.normalizeInstanceIdentifier(ie),Be=null!==(he=this.onInitCallbacks.get(Ve))&&void 0!==he?he:new Set;Be.add(ne),this.onInitCallbacks.set(Ve,Be);const Je=this.instances.get(Ve);return Je&&ne(Je,Ve),()=>{Be.delete(ne)}}invokeOnInitCallbacks(ne,ie){const he=this.onInitCallbacks.get(ie);if(he)for(const Ve of he)try{Ve(ne,ie)}catch(Be){}}getOrInitializeService({instanceIdentifier:ne,options:ie={}}){let he=this.instances.get(ne);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=ne,Ce===me?void 0:Ce),options:ie}),this.instances.set(ne,he),this.instancesOptions.set(ne,ie),this.invokeOnInitCallbacks(he,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,he)}catch(Ve){}var Ce;return he||null}normalizeInstanceIdentifier(ne=me){return this.component?this.component.multipleInstances?ne:me:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const ie=this.getProvider(ne.name);if(ie.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);ie.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const ie=new ue(ne,this);return this.providers.set(ne,ie),ie}getProviders(){return Array.from(this.providers.values())}}},5422:(bt,xe,j)=>{"use strict";j.d(xe,{in:()=>h,Yd:()=>De,Ub:()=>be,Am:()=>Ce});const I=[];var h=(()=>{return(ne=h||(h={}))[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",h;var ne})();const Z={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},me=h.INFO,ue={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},we=(ne,ie,...he)=>{if(ie<ne.logLevel)return;const Ve=(new Date).toISOString(),Be=ue[ie];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Be](`[${Ve}]  ${ne.name}:`,...he)};class De{constructor(ie){this.name=ie,this._logLevel=me,this._logHandler=we,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in h))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?Z[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...ie),this._logHandler(this,h.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...ie),this._logHandler(this,h.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,h.INFO,...ie),this._logHandler(this,h.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,h.WARN,...ie),this._logHandler(this,h.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...ie),this._logHandler(this,h.ERROR,...ie)}}function be(ne){I.forEach(ie=>{ie.setLogLevel(ne)})}function Ce(ne,ie){for(const he of I){let Ve=null;ie&&ie.level&&(Ve=Z[ie.level]),he.userLogHandler=null===ne?null:(Be,Je,...nt)=>{const Re=nt.map(Ue=>{if(null==Ue)return null;if("string"==typeof Ue)return Ue;if("number"==typeof Ue||"boolean"==typeof Ue)return Ue.toString();if(Ue instanceof Error)return Ue.message;try{return JSON.stringify(Ue)}catch(_t){return null}}).filter(Ue=>Ue).join(" ");Je>=(null!=Ve?Ve:Be.logLevel)&&ne({level:h[Je].toLowerCase(),message:Re,args:nt,type:Be.name})}}}},8239:(bt,xe,j)=>{"use strict";function I(Z,me,ue,we,De,be,Ce){try{var ne=Z[be](Ce),ie=ne.value}catch(he){return void ue(he)}ne.done?me(ie):Promise.resolve(ie).then(we,De)}function h(Z){return function(){var me=this,ue=arguments;return new Promise(function(we,De){var be=Z.apply(me,ue);function Ce(ie){I(be,we,De,Ce,ne,"next",ie)}function ne(ie){I(be,we,De,Ce,ne,"throw",ie)}Ce(void 0)})}}j.d(xe,{Z:()=>h})}},bt=>{bt(bt.s=1407)}]);